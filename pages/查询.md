---
title: 查询
---

## **什么是"查询"(queries)?**
:PROPERTIES:
:last_modified_at: 1609247076654
:created_at: 1609230242742
:END:
### 查询(queries)就是从你的知识库里或者外部世界(未来几周会加入此功能)提出问题寻求解答
:PROPERTIES:
:last_modified_at: 1609231528688
:created_at: 1609230243642
:END:
[:div [:img {:src "https://cdn.logseq.com/%2F5ff0a01d-47d4-487d-b346-4a43ded21ad02020_12_29_photo-1444703686981-a3abbc4d4fe3.jpeg?Expires=4762830816&Signature=h~yT-Tq1VtBtEm09Z78eT5kkEbQGUVG-VBEDuGLgykW8vb~AkZNuoRNmwL-fcHgnG8HdYBhqXeJowN9q3my4UN1bxiJtAXl0dAEjmWAqpbedH9PPdyz2tZXcuPxwdk5wICFLrB~0VWMwV02LFZEKkgPYGhkUU8oakBphifgvTdYPKLQG95FTJh9kg7GhV5ZCc1Q3JrOlLGG2fuUObf1opScwbNbEdsQStO8Ou12AaTPccAmpxAJVuut-jZ9pRvdsa00X962QD9c67BEw1SfhKEcChNIbdp~44ltuRj1Bvc1Bs2ezKupQ1sWFD5BG97UEA7GuOyANjPC331ShW8aHSQ__&Key-Pair-Id=APKAJE5CCD6X7MP6PTEA"}]]
[:div.text-sm "By " [:a {:href "https://unsplash.com/photos/oMpAz-DN-9I" :target "_blank"} "Greg Rakozy"]]
## **如何编写查询语句?**
:PROPERTIES:
:last_modified_at: 1609251558592
:id: 5feb30e3-fedc-4c2a-aa03-b44020c21c68
:created_at: 1609231967174
:END:
### 有两种查询方式:
:PROPERTIES:
:last_modified_at: 1609244684831
:created_at: 1609237373442
:END:
1. 简单的查询,输入`{{query}}`,格式如下:
 #+BEGIN_EXAMPLE
 {{query Something you're looking for}}
 #+END_EXAMPLE
 你可以通过输入`/query`来创建一个简单的查询.
2. [[高级查询]]
## **简单查询的过滤器**
:PROPERTIES:
:last_modified_at: 1609237391135
:created_at: 1609237391135
:END:
### **and (与)**
:PROPERTIES:
:last_modified_at: 1609242191381
:created_at: 1609237410438
:END:
例如:
#+BEGIN_EXAMPLE
(and [[page 1]] [[page 2]])
#+END_EXAMPLE

#+BEGIN_EXAMPLE
(and (todo now later done) [[page]])
#+END_EXAMPLE
### **or (或)**
:PROPERTIES:
:last_modified_at: 1609242378334
:created_at: 1609237412110
:END:
例如:
#+BEGIN_EXAMPLE
(or [[page 1]] [[page 2]])
#+END_EXAMPLE
### **not (非)**
:PROPERTIES:
:last_modified_at: 1609243244686
:created_at: 1609237413167
:END:
例如:
#+BEGIN_EXAMPLE
(not [[page 1]] [[page 2]])
#+END_EXAMPLE
### **between**
:PROPERTIES:
:last_modified_at: 1609243879053
:created_at: 1609237415572
:END:
`(between start end)` 这种格式仅支持查询日记页面上的块.
`(between created_at|last_modified_at start end)` 支持查询所有页面上的块, 你需要通过开启 [[block timestamps]] 让所有新生成的块拥有时间戳属性.

有几个内置的符号共您使用:
 1. `today|yesterday|tomorrow|now`
 2. `+|-` number `y|m|w|d|h|min`

例如:
#+BEGIN_EXAMPLE
(between -7d +7d)
(between -2w today)
(between created_at -7d 7d)
(between last_modified_at -7d 7d)
#+END_EXAMPLE
### **property** [[块属性]]
:PROPERTIES:
:created_at: 1609237428110
:last_modified_at: 1609247365218
:END:
Examples:
{{query (property type book)}}
### **todo**
:PROPERTIES:
:last_modified_at: 1609242962513
:created_at: 1609237429937
:END:
例如:
#+BEGIN_EXAMPLE
(todo now)
(todo now later)
#+END_EXAMPLE
### **priority (优先级)**
:PROPERTIES:
:last_modified_at: 1609242958502
:created_at: 1609237434982
:END:
例如:
#+BEGIN_EXAMPLE
(priority a)
(priority a b c)
#+END_EXAMPLE
### **page-property**
:PROPERTIES:
:last_modified_at: 1609243687213
:created_at: 1609237443550
:END:
例如:
{{query (page-property related "Block embed")}}
### **page-tags**
:PROPERTIES:
:last_modified_at: 1609243746666
:created_at: 1609237445606
:END:
例如:
{{query (page-tags embed)}}
### **all-page-tags**
:PROPERTIES:
:last_modified_at: 1609243762970
:created_at: 1609237447926
:END:
例如:
{{query (all-page-tags)}}
### **sort-by**
:PROPERTIES:
:last_modified_at: 1609243222016
:created_at: 1609237456009
:END:
格式: `(sort-by key order)` 或者 `(sort-by key)`
`key`: `created_at`  | `last_modified_at`
`order`: `desc`(降序排列) 或者 `asc` (升序排列), 不写则默认 `desc`.
#+BEGIN_EXAMPLE
(and (todo now later) (sort-by created_at desc))
#+END_EXAMPLE
## **更多查询实例**
:PROPERTIES:
:last_modified_at: 1609243310412
:created_at: 1609232210837
:END:
### 1. 找到所有包含"tag1"页面的块
:PROPERTIES:
:last_modified_at: 1609233755992
:created_at: 1609232870139
:END:
#+BEGIN_EXAMPLE
{{query [[tag1]]}}
#+END_EXAMPLE
{{query [[tag1]]}}
### 2. 找到同时包含`tag1`和`tag2`的所有块
:PROPERTIES:
:last_modified_at: 1609233790865
:created_at: 1609233702047
:END:
#+BEGIN_EXAMPLE
{{query (and [[tag1]] [[tag2]])}}
#+END_EXAMPLE
{{query (and [[tag1]] [[tag2]])}}
### 3. 找到包含`tag1` 或者 `tag2` 中任意一个页面的块
:PROPERTIES:
:last_modified_at: 1609233864422
:created_at: 1609233864422
:END:
#+BEGIN_EXAMPLE
{{query (or [[tag1]] [[tag2]])}}
#+END_EXAMPLE
{{query (or [[tag1]] [[tag2]])}}
### 4. 找到所有包含 `tag2` 但不包含 `tag1` 的块
:PROPERTIES:
:last_modified_at: 1609236840152
:created_at: 1609234732407
:END:
{{query (and [[tag2]] (not [[tag1]]))}}
### 5. 找到所有日期从 [[Dec 5th, 2020]] 到 [[Dec 7th, 2020]] 之间的日记页面中的块
:PROPERTIES:
:last_modified_at: 1609242323029
:created_at: 1609242222695
:END:
{{query (between [[Dec 5th, 2020]] [[Dec 7th, 2020]] )}}
### 6. 找到所有在今天创建的块 (你需要在查询之前开启 [[block timestamps]] 功能)
:PROPERTIES:
:last_modified_at: 1609249085047
:created_at: 1609235122723
:END:
#+BEGIN_EXAMPLE
{{query (between created_at today tomorrow)}}
#+END_EXAMPLE
