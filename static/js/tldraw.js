(function(){
shadow$provide[585]=function(va,V,Sa,E){function q(w,B,C){var a,G={},p=null,h=null;void 0!==C&&(p=""+C);void 0!==B.key&&(p=""+B.key);void 0!==B.ref&&(h=B.ref);for(a in B)r.call(B,a)&&!d.hasOwnProperty(a)&&(G[a]=B[a]);if(w&&w.defaultProps)for(a in B=w.defaultProps,B)void 0===G[a]&&(G[a]=B[a]);return{$$typeof:S,type:w,key:p,ref:h,props:G,_owner:A.current}}V(19);va=V(22);var S=60103;E.Fragment=60107;"function"===typeof Symbol&&Symbol.for&&(V=Symbol.for,S=V("react.element"),E.Fragment=V("react.fragment"));
var A=va.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r=Object.prototype.hasOwnProperty,d={key:!0,ref:!0,__self:!0,__source:!0};E.jsx=q;E.jsxs=q};
shadow$provide[587]=function(va,V,Sa,E){Sa.exports=V(585)};
shadow$provide[588]=function(va,V,Sa,E){function q(rc){for(var Fd="https://reactjs.org/docs/error-decoder.html?invariant\x3d"+rc,wd=1;wd<arguments.length;wd++)Fd+="\x26args[]\x3d"+encodeURIComponent(arguments[wd]);return"Minified React error #"+rc+"; visit "+Fd+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function S(rc){if(null==rc)return null;if("function"===typeof rc)return rc.displayName||rc.name||null;if("string"===typeof rc)return rc;
switch(rc){case M:return"Fragment";case aa:return"Portal";case D:return"Profiler";case Q:return"StrictMode";case X:return"Suspense";case F:return"SuspenseList"}if("object"===typeof rc)switch(rc.$$typeof){case P:return(rc.displayName||"Context")+".Consumer";case N:return(rc._context.displayName||"Context")+".Provider";case ba:var Fd=rc.render;Fd=Fd.displayName||Fd.name||"";return rc.displayName||(""!==Fd?"ForwardRef("+Fd+")":"ForwardRef");case ha:return S(rc.type);case Z:return S(rc._render);case K:Fd=
rc._payload;rc=rc._init;try{return S(rc(Fd))}catch(wd){}}return null}function A(rc,Fd){for(var wd=rc._threadCount|0;wd<=Fd;wd++)rc[wd]=rc._currentValue2,rc._threadCount=wd+1}function r(rc,Fd,wd,$d){if($d&&($d=rc.contextType,"object"===typeof $d&&null!==$d))return A($d,wd),$d[wd];if(rc=rc.contextTypes){wd={};for(var ud in rc)wd[ud]=Fd[ud];Fd=wd}else Fd=ya;return Fd}function d(rc){if(Ea.call(Za,rc))return!0;if(Ea.call(Oa,rc))return!1;if(Ta.test(rc))return Za[rc]=!0;Oa[rc]=!0;return!1}function w(rc,
Fd,wd,$d){if(null!==wd&&0===wd.type)return!1;switch(typeof Fd){case "function":case "symbol":return!0;case "boolean":if($d)return!1;if(null!==wd)return!wd.acceptsBooleans;rc=rc.toLowerCase().slice(0,5);return"data-"!==rc&&"aria-"!==rc;default:return!1}}function B(rc,Fd,wd,$d){if(null===Fd||"undefined"===typeof Fd||w(rc,Fd,wd,$d))return!0;if($d)return!1;if(null!==wd)switch(wd.type){case 3:return!Fd;case 4:return!1===Fd;case 5:return isNaN(Fd);case 6:return isNaN(Fd)||1>Fd}return!1}function C(rc,Fd,
wd,$d,ud,Qd,od){this.acceptsBooleans=2===Fd||3===Fd||4===Fd;this.attributeName=$d;this.attributeNamespace=ud;this.mustUseProperty=wd;this.propertyName=rc;this.type=Fd;this.sanitizeURL=Qd;this.removeEmptyString=od}function a(rc){return rc[1].toUpperCase()}function G(rc){if("boolean"===typeof rc||"number"===typeof rc)return""+rc;rc=""+rc;var Fd=eb.exec(rc);if(Fd){var wd="",$d,ud=0;for($d=Fd.index;$d<rc.length;$d++){switch(rc.charCodeAt($d)){case 34:Fd="\x26quot;";break;case 38:Fd="\x26amp;";break;case 39:Fd=
"\x26#x27;";break;case 60:Fd="\x26lt;";break;case 62:Fd="\x26gt;";break;default:continue}ud!==$d&&(wd+=rc.substring(ud,$d));ud=$d+1;wd+=Fd}rc=ud!==$d?wd+rc.substring(ud,$d):wd}return rc}function p(rc,Fd){var wd=Ma.hasOwnProperty(rc)?Ma[rc]:null,$d;if($d="style"!==rc)$d=null!==wd?0===wd.type:!(2<rc.length)||"o"!==rc[0]&&"O"!==rc[0]||"n"!==rc[1]&&"N"!==rc[1]?!1:!0;if($d||B(rc,Fd,wd,!1))return"";if(null!==wd){rc=wd.attributeName;$d=wd.type;if(3===$d||4===$d&&!0===Fd)return rc+'\x3d""';wd.sanitizeURL&&
(Fd=""+Fd);return rc+'\x3d"'+(G(Fd)+'"')}return d(rc)?rc+'\x3d"'+(G(Fd)+'"'):""}function h(rc,Fd){return rc===Fd&&(0!==rc||1/rc===1/Fd)||rc!==rc&&Fd!==Fd}function k(){if(null===oa)throw Error(q(321));return oa}function f(){if(0<Ab)throw Error(q(312));return{memoizedState:null,queue:null,next:null}}function v(){null===ra?null===Ca?(Aa=!1,Ca=ra=f()):(Aa=!0,ra=Ca):null===ra.next?(Aa=!1,ra=ra.next=f()):(Aa=!0,ra=ra.next);return ra}function x(rc,Fd,wd,$d){for(;Ka;)Ka=!1,Ab+=1,ra=null,wd=rc(Fd,$d);J();
return wd}function J(){oa=null;Ka=!1;Ca=null;Ab=0;ra=Ra=null}function z(rc,Fd){return"function"===typeof Fd?Fd(rc):Fd}function u(rc,Fd,wd){oa=k();ra=v();if(Aa){var $d=ra.queue;Fd=$d.dispatch;if(null!==Ra&&(wd=Ra.get($d),void 0!==wd)){Ra.delete($d);$d=ra.memoizedState;do $d=rc($d,wd.action),wd=wd.next;while(null!==wd);ra.memoizedState=$d;return[$d,Fd]}return[ra.memoizedState,Fd]}rc=rc===z?"function"===typeof Fd?Fd():Fd:void 0!==wd?wd(Fd):Fd;ra.memoizedState=rc;rc=ra.queue={last:null,dispatch:null};
rc=rc.dispatch=m.bind(null,oa,rc);return[ra.memoizedState,rc]}function t(rc,Fd){oa=k();ra=v();Fd=void 0===Fd?null:Fd;if(null!==ra){var wd=ra.memoizedState;if(null!==wd&&null!==Fd){var $d=wd[1];a:if(null===$d)$d=!1;else{for(var ud=0;ud<$d.length&&ud<Fd.length;ud++)if(!Na(Fd[ud],$d[ud])){$d=!1;break a}$d=!0}if($d)return wd[0]}}rc=rc();ra.memoizedState=[rc,Fd];return rc}function m(rc,Fd,wd){if(!(25>Ab))throw Error(q(301));if(rc===oa)if(Ka=!0,rc={action:wd,next:null},null===Ra&&(Ra=new Map),wd=Ra.get(Fd),
void 0===wd)Ra.set(Fd,rc);else{for(Fd=wd;null!==Fd.next;)Fd=Fd.next;Fd.next=rc}}function R(){}function ka(rc){switch(rc){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function L(rc){if(void 0===rc||null===rc)return rc;var Fd="";H.Children.forEach(rc,function(wd){null!=wd&&(Fd+=wd)});return Fd}function ma(rc,Fd){if(void 0===rc)throw Error(q(152,S(Fd)||"Component"));}function Y(rc,Fd,wd){function $d(od,
Ud){var Mb=Ud.prototype&&Ud.prototype.isReactComponent,gc=r(Ud,Fd,wd,Mb),Xb=[],rb=!1,mb={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===Xb)return null},enqueueReplaceState:function(pe,td){rb=!0;Xb=[td]},enqueueSetState:function(pe,td){if(null===Xb)return null;Xb.push(td)}};if(Mb){if(Mb=new Ud(od.props,gc,mb),"function"===typeof Ud.getDerivedStateFromProps){var cc=Ud.getDerivedStateFromProps.call(null,od.props,Mb.state);null!=cc&&(Mb.state=fa({},Mb.state,cc))}}else if(oa={},
Mb=Ud(od.props,gc,mb),Mb=x(Ud,od.props,Mb,gc),null==Mb||null==Mb.render){rc=Mb;ma(rc,Ud);return}Mb.props=od.props;Mb.context=gc;Mb.updater=mb;mb=Mb.state;void 0===mb&&(Mb.state=mb=null);if("function"===typeof Mb.UNSAFE_componentWillMount||"function"===typeof Mb.componentWillMount)if("function"===typeof Mb.componentWillMount&&"function"!==typeof Ud.getDerivedStateFromProps&&Mb.componentWillMount(),"function"===typeof Mb.UNSAFE_componentWillMount&&"function"!==typeof Ud.getDerivedStateFromProps&&Mb.UNSAFE_componentWillMount(),
Xb.length){mb=Xb;var vc=rb;Xb=null;rb=!1;if(vc&&1===mb.length)Mb.state=mb[0];else{cc=vc?mb[0]:Mb.state;var Uc=!0;for(vc=vc?1:0;vc<mb.length;vc++){var cd=mb[vc];cd="function"===typeof cd?cd.call(Mb,cc,od.props,gc):cd;null!=cd&&(Uc?(Uc=!1,cc=fa({},cc,cd)):fa(cc,cd))}Mb.state=cc}}else Xb=null;rc=Mb.render();ma(rc,Ud);if("function"===typeof Mb.getChildContext&&(od=Ud.childContextTypes,"object"===typeof od)){var Od=Mb.getChildContext(),ce;for(ce in Od)if(!(ce in od))throw Error(q(108,S(Ud)||"Unknown",
ce));}Od&&(Fd=fa({},Fd,Od))}for(;H.isValidElement(rc);){var ud=rc,Qd=ud.type;if("function"!==typeof Qd)break;$d(ud,Qd)}return{child:rc,context:Fd}}var fa=V(19),H=V(22),aa=60106,M=60107,Q=60108,D=60114,N=60109,P=60110,ba=60112,X=60113,F=60120,ha=60115,K=60116,Z=60121,ea=60117,ca=60119,pa=60129,za=60131;"function"===typeof Symbol&&Symbol.for&&(va=Symbol.for,aa=va("react.portal"),M=va("react.fragment"),Q=va("react.strict_mode"),D=va("react.profiler"),N=va("react.provider"),P=va("react.context"),ba=va("react.forward_ref"),
X=va("react.suspense"),F=va("react.suspense_list"),ha=va("react.memo"),K=va("react.lazy"),Z=va("react.block"),ea=va("react.fundamental"),ca=va("react.scope"),pa=va("react.debug_trace_mode"),za=va("react.legacy_hidden"));va=H.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;var ya={},Ia=new Uint16Array(16);for(V=0;15>V;V++)Ia[V]=V+1;Ia[15]=0;var Ta=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,
Ea=Object.prototype.hasOwnProperty,Oa={},Za={},Ma={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(rc){Ma[rc]=new C(rc,0,!1,rc,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(rc){var Fd=rc[0];Ma[Fd]=new C(Fd,1,!1,rc[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(rc){Ma[rc]=
new C(rc,2,!1,rc.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(rc){Ma[rc]=new C(rc,2,!1,rc,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(rc){Ma[rc]=new C(rc,3,!1,rc.toLowerCase(),null,!1,!1)});["checked",
"multiple","muted","selected"].forEach(function(rc){Ma[rc]=new C(rc,3,!0,rc,null,!1,!1)});["capture","download"].forEach(function(rc){Ma[rc]=new C(rc,4,!1,rc,null,!1,!1)});["cols","rows","size","span"].forEach(function(rc){Ma[rc]=new C(rc,6,!1,rc,null,!1,!1)});["rowSpan","start"].forEach(function(rc){Ma[rc]=new C(rc,5,!1,rc.toLowerCase(),null,!1,!1)});var fb=/[\-:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(rc){var Fd=
rc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,rc,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(rc){var Fd=rc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,rc,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(rc){var Fd=rc.replace(fb,a);Ma[Fd]=new C(Fd,1,!1,rc,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(rc){Ma[rc]=new C(rc,1,!1,rc.toLowerCase(),null,!1,!1)});
Ma.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(rc){Ma[rc]=new C(rc,1,!1,rc.toLowerCase(),null,!0,!0)});var eb=/["'&<>]/,Na="function"===typeof Object.is?Object.is:h,oa=null,Ca=null,ra=null,Aa=!1,Ka=!1,Ra=null,Ab=0,ib=null,Nb={readContext:function(rc){var Fd=ib.threadID;A(rc,Fd);return rc[Fd]},useContext:function(rc){k();var Fd=ib.threadID;A(rc,Fd);return rc[Fd]},useMemo:t,useReducer:u,useRef:function(rc){oa=
k();ra=v();var Fd=ra.memoizedState;return null===Fd?(rc={current:rc},ra.memoizedState=rc):Fd},useState:function(rc){return u(z,rc)},useLayoutEffect:function(){},useCallback:function(rc,Fd){return t(function(){return rc},Fd)},useImperativeHandle:R,useEffect:R,useDebugValue:R,useDeferredValue:function(rc){k();return rc},useTransition:function(){k();return[function(rc){rc()},!1]},useOpaqueIdentifier:function(){return(ib.identifierPrefix||"")+"R:"+(ib.uniqueID++).toString(36)},useMutableSource:function(rc,
Fd){k();return Fd(rc._source)}},Wb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ic=fa({menuitem:!0},Wb),Pa={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,
gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nb=["Webkit","ms","Moz","O"];Object.keys(Pa).forEach(function(rc){nb.forEach(function(Fd){Fd=Fd+rc.charAt(0).toUpperCase()+rc.substring(1);Pa[Fd]=Pa[rc]})});var pb=/([A-Z])/g,Yb=/^ms-/,Jc=H.Children.toArray,
ad=va.ReactCurrentDispatcher,Oc={listing:!0,pre:!0,textarea:!0},Fb=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,yc={},Wc={},id=Object.prototype.hasOwnProperty,Md={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null},Ld=function(){function rc(wd,$d,ud){H.isValidElement(wd)?wd.type!==M?wd=[wd]:(wd=wd.props.children,wd=H.isValidElement(wd)?[wd]:Jc(wd)):wd=Jc(wd);wd={type:null,domNamespace:"http://www.w3.org/1999/xhtml",children:wd,childIndex:0,context:ya,footer:""};
var Qd=Ia[0];if(0===Qd){var od=Ia;Qd=od.length;var Ud=2*Qd;if(!(65536>=Ud))throw Error(q(304));var Mb=new Uint16Array(Ud);Mb.set(od);Ia=Mb;Ia[0]=Qd+1;for(od=Qd;od<Ud-1;od++)Ia[od]=od+1;Ia[Ud-1]=0}else Ia[0]=Ia[Qd];this.threadID=Qd;this.stack=[wd];this.exhausted=!1;this.currentSelectValue=null;this.previousWasTextNode=!1;this.makeStaticMarkup=$d;this.suspenseDepth=0;this.contextIndex=-1;this.contextStack=[];this.contextValueStack=[];this.uniqueID=0;this.identifierPrefix=ud&&ud.identifierPrefix||""}
var Fd=rc.prototype;Fd.destroy=function(){if(!this.exhausted){this.exhausted=!0;this.clearProviders();var wd=this.threadID;Ia[wd]=Ia[0];Ia[0]=wd}};Fd.pushProvider=function(wd){var $d=++this.contextIndex,ud=wd.type._context,Qd=this.threadID;A(ud,Qd);var od=ud[Qd];this.contextStack[$d]=ud;this.contextValueStack[$d]=od;ud[Qd]=wd.props.value};Fd.popProvider=function(){var wd=this.contextIndex,$d=this.contextStack[wd],ud=this.contextValueStack[wd];this.contextStack[wd]=null;this.contextValueStack[wd]=
null;this.contextIndex--;$d[this.threadID]=ud};Fd.clearProviders=function(){for(var wd=this.contextIndex;0<=wd;wd--)this.contextStack[wd][this.threadID]=this.contextValueStack[wd]};Fd.read=function(wd){if(this.exhausted)return null;var $d=ib;ib=this;var ud=ad.current;ad.current=Nb;try{for(var Qd=[""],od=!1;Qd[0].length<wd;){if(0===this.stack.length){this.exhausted=!0;var Ud=this.threadID;Ia[Ud]=Ia[0];Ia[0]=Ud;break}var Mb=this.stack[this.stack.length-1];if(od||Mb.childIndex>=Mb.children.length){var gc=
Mb.footer;""!==gc&&(this.previousWasTextNode=!1);this.stack.pop();if("select"===Mb.type)this.currentSelectValue=null;else if(null!=Mb.type&&null!=Mb.type.type&&Mb.type.type.$$typeof===N)this.popProvider(Mb.type);else if(Mb.type===X){this.suspenseDepth--;var Xb=Qd.pop();if(od){od=!1;var rb=Mb.fallbackFrame;if(!rb)throw Error(q(303));this.stack.push(rb);Qd[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}else Qd[this.suspenseDepth]+=Xb}Qd[this.suspenseDepth]+=gc}else{var mb=Mb.children[Mb.childIndex++],
cc="";try{cc+=this.render(mb,Mb.context,Mb.domNamespace)}catch(vc){if(null!=vc&&"function"===typeof vc.then)throw Error(q(294));throw vc;}finally{}Qd.length<=this.suspenseDepth&&Qd.push("");Qd[this.suspenseDepth]+=cc}}return Qd[0]}finally{ad.current=ud,ib=$d,J()}};Fd.render=function(wd,$d,ud){if("string"===typeof wd||"number"===typeof wd){ud=""+wd;if(""===ud)return"";if(this.makeStaticMarkup)return G(ud);if(this.previousWasTextNode)return"\x3c!-- --\x3e"+G(ud);this.previousWasTextNode=!0;return G(ud)}$d=
Y(wd,$d,this.threadID);wd=$d.child;$d=$d.context;if(null===wd||!1===wd)return"";if(!H.isValidElement(wd)){if(null!=wd&&null!=wd.$$typeof){ud=wd.$$typeof;if(ud===aa)throw Error(q(257));throw Error(q(258,ud.toString()));}wd=Jc(wd);this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,context:$d,footer:""});return""}var Qd=wd.type;if("string"===typeof Qd)return this.renderDOM(wd,$d,ud);switch(Qd){case za:case pa:case Q:case D:case F:case M:return wd=Jc(wd.props.children),this.stack.push({type:null,
domNamespace:ud,children:wd,childIndex:0,context:$d,footer:""}),"";case X:throw Error(q(294));case ca:throw Error(q(343));}if("object"===typeof Qd&&null!==Qd)switch(Qd.$$typeof){case ba:oa={};var od=Qd.render(wd.props,wd.ref);od=x(Qd.render,wd.props,od,wd.ref);od=Jc(od);this.stack.push({type:null,domNamespace:ud,children:od,childIndex:0,context:$d,footer:""});return"";case ha:return wd=[H.createElement(Qd.type,fa({ref:wd.ref},wd.props))],this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,
context:$d,footer:""}),"";case N:return Qd=Jc(wd.props.children),ud={type:wd,domNamespace:ud,children:Qd,childIndex:0,context:$d,footer:""},this.pushProvider(wd),this.stack.push(ud),"";case P:Qd=wd.type;od=wd.props;var Ud=this.threadID;A(Qd,Ud);Qd=Jc(od.children(Qd[Ud]));this.stack.push({type:wd,domNamespace:ud,children:Qd,childIndex:0,context:$d,footer:""});return"";case ea:throw Error(q(338));case K:return Qd=wd.type,od=Qd._init,Qd=od(Qd._payload),wd=[H.createElement(Qd,fa({ref:wd.ref},wd.props))],
this.stack.push({type:null,domNamespace:ud,children:wd,childIndex:0,context:$d,footer:""}),""}throw Error(q(130,null==Qd?Qd:typeof Qd,""));};Fd.renderDOM=function(wd,$d,ud){var Qd=wd.type.toLowerCase();"http://www.w3.org/1999/xhtml"===ud&&ka(Qd);if(!yc.hasOwnProperty(Qd)){if(!Fb.test(Qd))throw Error(q(65,Qd));yc[Qd]=!0}var od=wd.props;if("input"===Qd)od=fa({type:void 0},od,{defaultChecked:void 0,defaultValue:void 0,value:null!=od.value?od.value:od.defaultValue,checked:null!=od.checked?od.checked:
od.defaultChecked});else if("textarea"===Qd){var Ud=od.value;if(null==Ud){Ud=od.defaultValue;var Mb=od.children;if(null!=Mb){if(null!=Ud)throw Error(q(92));if(Array.isArray(Mb)){if(!(1>=Mb.length))throw Error(q(93));Mb=Mb[0]}Ud=""+Mb}null==Ud&&(Ud="")}od=fa({},od,{value:void 0,children:""+Ud})}else if("select"===Qd)this.currentSelectValue=null!=od.value?od.value:od.defaultValue,od=fa({},od,{value:void 0});else if("option"===Qd){Mb=this.currentSelectValue;var gc=L(od.children);if(null!=Mb){var Xb=
null!=od.value?od.value+"":gc;Ud=!1;if(Array.isArray(Mb))for(var rb=0;rb<Mb.length;rb++){if(""+Mb[rb]===Xb){Ud=!0;break}}else Ud=""+Mb===Xb;od=fa({selected:void 0,children:void 0},od,{selected:Ud,children:gc})}}if(Ud=od){if(ic[Qd]&&(null!=Ud.children||null!=Ud.dangerouslySetInnerHTML))throw Error(q(137,Qd));if(null!=Ud.dangerouslySetInnerHTML){if(null!=Ud.children)throw Error(q(60));if(!("object"===typeof Ud.dangerouslySetInnerHTML&&"__html"in Ud.dangerouslySetInnerHTML))throw Error(q(61));}if(null!=
Ud.style&&"object"!==typeof Ud.style)throw Error(q(62));}Ud=od;Mb=this.makeStaticMarkup;gc=1===this.stack.length;Xb="\x3c"+wd.type;a:if(-1===Qd.indexOf("-"))rb="string"===typeof Ud.is;else switch(Qd){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":rb=!1;break a;default:rb=!0}for(td in Ud)if(id.call(Ud,td)){var mb=Ud[td];if(null!=mb){if("style"===td){var cc=void 0,vc="",Uc="";for(cc in mb)if(mb.hasOwnProperty(cc)){var cd=
0===cc.indexOf("--"),Od=mb[cc];if(null!=Od){if(cd)var ce=cc;else if(ce=cc,Wc.hasOwnProperty(ce))ce=Wc[ce];else{var pe=ce.replace(pb,"-$1").toLowerCase().replace(Yb,"-ms-");ce=Wc[ce]=pe}vc+=Uc+ce+":";Uc=cc;cd=null==Od||"boolean"===typeof Od||""===Od?"":cd||"number"!==typeof Od||0===Od||Pa.hasOwnProperty(Uc)&&Pa[Uc]?(""+Od).trim():Od+"px";vc+=cd;Uc=";"}}mb=vc||null}cc=null;rb?Md.hasOwnProperty(td)||(cc=td,cc=d(cc)&&null!=mb?cc+'\x3d"'+(G(mb)+'"'):""):cc=p(td,mb);cc&&(Xb+=" "+cc)}}Mb||gc&&(Xb+=' data-reactroot\x3d""');
var td=Xb;Ud="";Wb.hasOwnProperty(Qd)?td+="/\x3e":(td+="\x3e",Ud="\x3c/"+wd.type+"\x3e");a:{Mb=od.dangerouslySetInnerHTML;if(null!=Mb){if(null!=Mb.__html){Mb=Mb.__html;break a}}else if(Mb=od.children,"string"===typeof Mb||"number"===typeof Mb){Mb=G(Mb);break a}Mb=null}null!=Mb?(od=[],Oc.hasOwnProperty(Qd)&&"\n"===Mb.charAt(0)&&(td+="\n"),td+=Mb):od=Jc(od.children);wd=wd.type;ud=null==ud||"http://www.w3.org/1999/xhtml"===ud?ka(wd):"http://www.w3.org/2000/svg"===ud&&"foreignObject"===wd?"http://www.w3.org/1999/xhtml":
ud;this.stack.push({domNamespace:ud,type:Qd,children:od,childIndex:0,context:$d,footer:Ud});this.previousWasTextNode=!1;return td};return rc}();E.renderToNodeStream=function(){throw Error(q(207));};E.renderToStaticMarkup=function(rc,Fd){rc=new Ld(rc,!0,Fd);try{return rc.read(Infinity)}finally{rc.destroy()}};E.renderToStaticNodeStream=function(){throw Error(q(208));};E.renderToString=function(rc,Fd){rc=new Ld(rc,!1,Fd);try{return rc.read(Infinity)}finally{rc.destroy()}};E.version="17.0.2"};
shadow$provide[590]=function(va,V,Sa,E){Sa.exports=V(588)};
shadow$provide[591]=function(va,V,Sa,E){function q(){if(!Xc&&(Xc="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Xc))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Xc(pd)}function S(b,g=0){return(Nd[b[g+0]]+Nd[b[g+1]]+Nd[b[g+2]]+Nd[b[g+3]]+"-"+Nd[b[g+4]]+Nd[b[g+5]]+"-"+Nd[b[g+6]]+Nd[b[g+7]]+"-"+Nd[b[g+8]]+Nd[b[g+9]]+"-"+Nd[b[g+10]]+Nd[b[g+11]]+Nd[b[g+12]]+Nd[b[g+13]]+Nd[b[g+14]]+
Nd[b[g+15]]).toLowerCase()}function A(b){let g=0;var n=0;for(var I of b)g+=I.w*I.h,n=Math.max(n,I.w);b.sort((sa,La)=>La.h-sa.h);n=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(g/.95)),n),h:Infinity}];let W=I=0;for(const sa of b)for(b=n.length-1;0<=b;b--){var ia=n[b];if(!(sa.w>ia.w||sa.h>ia.h)){sa.x=ia.x;sa.y=ia.y;W=Math.max(W,sa.y+sa.h);I=Math.max(I,sa.x+sa.w);sa.w===ia.w&&sa.h===ia.h?(ia=n.pop(),b<n.length&&(n[b]=ia)):sa.h===ia.h?(ia.x+=sa.w,ia.w-=sa.w):(sa.w!==ia.w&&n.push({x:ia.x+sa.w,y:ia.y,w:ia.w-
sa.w,h:sa.h}),ia.y+=sa.h,ia.h-=sa.h);break}}return{w:I,h:W,fill:g/(I*W)||0}}function r(b,...g){return{didIntersect:0<g.length,message:b,points:g}}function d(b,g,n=0){const I=[b[0]+g[0]/2,b[1]+g[1]/2],W=xd.rotWith(b,I,n),ia=xd.rotWith(xd.add(b,[g[0],0]),I,n),sa=xd.rotWith(xd.add(b,g),I,n);b=xd.rotWith(xd.add(b,[0,g[1]]),I,n);return[["top",[W,ia]],["right",[ia,sa]],["bottom",[sa,b]],["left",[b,W]]]}function w(b,g,n,I){const [W,ia]=b,[sa,La]=g,[Xa,$a]=n,[kb,tb]=I;return La/sa!==(tb-$a)/(kb-Xa)&&(g=sa*
(tb-$a)-La*(kb-Xa),0!==g&&(b=((ia-$a)*(kb-Xa)-(W-Xa)*(tb-$a))/g,g=((ia-$a)*sa-(W-Xa)*La)/g,0<=b&&0<=g&&1>=g))?r("intersection",[W+b*sa,ia+b*La]):r("no intersection")}function B(b,g,n,I,W=0){return k(n,I,W,b,g)}function C(b,g,n,I=0){const {minX:W,minY:ia,width:sa,height:La}=n;return B(b,g,[W,ia],[sa,La],I)}function a(b,g,n,I){var W=xd.sub(b,n);n=xd.sub(I,n);g=xd.sub(g,b);I=n[0]*W[1]-n[1]*W[0];W=g[0]*W[1]-g[1]*W[0];n=n[1]*g[0]-n[0]*g[1];return 0===I||0===W?r("coincident"):0===n?r("parallel"):0!==n&&
(I/=n,W/=n,0<=I&&1>=I&&0<=W&&1>=W)?r("intersection",xd.add(b,xd.mul(g,I))):r("no intersection")}function G(b,g,n,I){var W=(g[0]-b[0])*(g[0]-b[0])+(g[1]-b[1])*(g[1]-b[1]),ia=2*((g[0]-b[0])*(b[0]-n[0])+(g[1]-b[1])*(b[1]-n[1]));n=ia*ia-4*W*(n[0]*n[0]+n[1]*n[1]+b[0]*b[0]+b[1]*b[1]-2*(n[0]*b[0]+n[1]*b[1])-I*I);if(0>n)return r("outside");if(0===n)return r("tangent");I=Math.sqrt(n);n=(-ia+I)/(2*W);W=(-ia-I)/(2*W);if((0>n||1<n)&&(0>W||1<W))return 0>n&&0>W||1<n&&1<W?r("outside"):r("inside");ia=[];0<=n&&1>=
n&&ia.push(xd.lrp(b,g,n));0<=W&&1>=W&&ia.push(xd.lrp(b,g,W));return r("intersection",...ia)}function p(b,g,n,I,W,ia=0){if(0===I||0===W||xd.isEqual(b,g))return r("no intersection");I=0>I?I:-I;W=0>W?W:-W;b=xd.sub(xd.rotWith(b,n,-ia),n);g=xd.sub(xd.rotWith(g,n,-ia),n);var sa=xd.sub(g,b),La=sa[0]*sa[0]/I/I+sa[1]*sa[1]/W/W;sa=2*b[0]*sa[0]/I/I+2*b[1]*sa[1]/W/W;const Xa=[];I=sa*sa-4*La*(b[0]*b[0]/I/I+b[1]*b[1]/W/W-1);0===I?Xa.push(-sa/2/La):0<I&&(I=Math.sqrt(I),Xa.push((-sa+I)/2/La),Xa.push((-sa-I)/2/La));
La=Xa.filter($a=>0<=$a&&1>=$a).map($a=>xd.add(n,xd.add(b,xd.mul(xd.sub(g,b),$a)))).map($a=>xd.rotWith($a,n,ia));return r("intersection",...La)}function h(b,g,n){const I=[];for(let W=1;W<n.length;W++){const ia=a(b,g,n[W-1],n[W]);ia&&I.push(...ia.points)}return 0===I.length?r("no intersection"):r("intersection",...n)}function k(b,g,n,I,W){return d(b,g,n).reduce((ia,[sa,[La,Xa]])=>{(La=w(I,W,La,Xa))&&ia.push(r(sa,...La.points));return ia},[]).filter(ia=>ia.didIntersect)}function f(b,g,n,I){return d(b,
g).reduce((W,[ia,[sa,La]])=>{(sa=a(n,I,sa,La))&&W.push(r(ia,...sa.points));return W},[]).filter(W=>W.didIntersect)}function v(b,g,n,I){return d(b,g).reduce((W,[ia,[sa,La]])=>{(sa=G(sa,La,n,I))&&W.push(Wa(Fa({},sa),{message:ia}));return W},[]).filter(W=>W.didIntersect)}function x(b,g,n,I,W,ia=0){return d(b,g).reduce((sa,[La,[Xa,$a]])=>{(Xa=p(Xa,$a,n,I,W,ia))&&sa.push(Wa(Fa({},Xa),{message:La}));return sa},[]).filter(sa=>sa.didIntersect)}function J(b,g,n){return d(b,g).reduce((I,[W,[ia,sa]])=>{ia=h(ia,
sa,n);ia.didIntersect&&I.push(r(W,...ia.points));return I},[]).filter(I=>I.didIntersect)}function z(b,g,n){return d(b,g).reduce((I,[W,[ia,sa]])=>{{const La=[];for(let Xa=1;Xa<n.length+1;Xa++){const $a=a(ia,sa,n[Xa-1],n[Xa%n.length]);$a&&La.push(...$a.points)}ia=0===La.length?r("no intersection"):r("intersection",...n)}ia.didIntersect&&I.push(r(W,...ia.points));return I},[]).filter(I=>I.didIntersect)}function u(b,g,n,I=0,W,ia){return g===n?v(W,ia,b,g):x(W,ia,b,g,n,I)}function t(b,g,n){const {minX:I,
minY:W,width:ia,height:sa}=b;return f([I,W],[ia,sa],g,n)}function m(b){for(var g=arguments.length,n=Array(1<g?g-1:0),I=1;I<g;I++)n[I-1]=arguments[I];throw Error("number"===typeof b?"[MobX] minified error nr: "+b+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+b);}function R(){return"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof va?va:"undefined"!==
typeof self?self:fr}function ka(){rs||m("Proxy not available")}function L(b){var g=!1;return function(){if(!g)return g=!0,b.apply(this,arguments)}}function ma(b){return"function"===typeof b}function Y(b){switch(typeof b){case "string":case "symbol":case "number":return!0}return!1}function fa(b){return null!==b&&"object"===typeof b}function H(b){if(!fa(b))return!1;b=Object.getPrototypeOf(b);if(null==b)return!0;b=Object.hasOwnProperty.call(b,"constructor")&&b.constructor;return"function"===typeof b&&
b.toString()===lg}function aa(b){return(b=null==b?void 0:b.constructor)?"GeneratorFunction"===b.name||"GeneratorFunction"===b.displayName?!0:!1:!1}function M(b,g,n){Om(b,g,{enumerable:!1,writable:!0,configurable:!0,value:n})}function Q(b,g,n){Om(b,g,{enumerable:!1,writable:!1,configurable:!0,value:n})}function D(b,g){var n="isMobX"+b;g.prototype[n]=!0;return function(I){return fa(I)&&!0===I[n]}}function N(b){return b instanceof Map}function P(b){return b instanceof Set}function ba(b){var g=Object.keys(b);
if(!dr)return g;var n=Object.getOwnPropertySymbols(b);return n.length?[].concat(g,n.filter(function(I){return ap.propertyIsEnumerable.call(b,I)})):g}function X(b){return null===b?null:"object"===typeof b?""+b:b}function F(b,g){return ap.hasOwnProperty.call(b,g)}function ha(b,g){for(var n=0;n<g.length;n++){var I=g[n];I.enumerable=I.enumerable||!1;I.configurable=!0;"value"in I&&(I.writable=!0);Object.defineProperty(b,I.key,I)}}function K(b,g,n){g&&ha(b.prototype,g);n&&ha(b,n);Object.defineProperty(b,
"prototype",{writable:!1});return b}function Z(){Z=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],I;for(I in n)Object.prototype.hasOwnProperty.call(n,I)&&(b[I]=n[I])}return b};return Z.apply(this,arguments)}function ea(b,g){b.prototype=Object.create(g.prototype);b.prototype.constructor=b;ca(b,g)}function ca(b,g){ca=Object.setPrototypeOf||function(n,I){n.__proto__=I;return n};return ca(b,g)}function pa(b){if(void 0===b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return b}function za(b,g){if(b){if("string"===typeof b)return ya(b,g);var n=Object.prototype.toString.call(b).slice(8,-1);"Object"===n&&b.constructor&&(n=b.constructor.name);if("Map"===n||"Set"===n)return Array.from(b);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ya(b,g)}}function ya(b,g){if(null==g||g>b.length)g=b.length;for(var n=0,I=Array(g);n<g;n++)I[n]=b[n];return I}function Ia(b,g){var n="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=
n.call(b)).next.bind(n);if(Array.isArray(b)||(n=za(b))||g&&b&&"number"===typeof b.length){n&&(b=n);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function Ta(b){return Object.assign(function(g,n){Ea(g,n,b)},b)}function Ea(b,g,n){F(b,Dm)||M(b,Dm,Z({},b[Dm]));n.annotationType_!==oq&&(b[Dm][g]=n)}function Oa(b){F(b,
Dm)||M(b,Dm,Z({},b[Dm]));return b[Dm]}function Za(b,g,n){void 0===g&&(g=oo);void 0===n&&(n=oo);b=new bp(b);g!==oo&&Nc(sC,b,g,void 0);n!==oo&&wc(b,n);return b}function Ma(b,g,n){return Tb(b)?b:Array.isArray(b)?xg.array(b,{name:n}):H(b)?xg.object(b,void 0,{name:n}):N(b)?xg.map(b,{name:n}):P(b)?xg.set(b,{name:n}):"function"!==typeof b||cd(b)||Mc(b)?b:aa(b)?xs(b):rn(n,b)}function fb(b){return b}function eb(b,g){return{annotationType_:b,options_:g,make_:Na,extend_:oa}}function Na(b,g,n,I){var W;if(null!=
(W=this.options_)&&W.bound)return null===this.extend_(b,g,n,!1)?0:1;if(I===b.target_)return null===this.extend_(b,g,n,!1)?0:2;if(cd(n.value))return 1;b=Ca(b,this,g,n,!1);Om(I,g,b);return 2}function oa(b,g,n,I){n=Ca(b,this,g,n);return b.defineProperty_(g,n,I)}function Ca(b,g,n,I,W){var ia,sa,La,Xa,$a,kb,tb;void 0===W&&(W=De.safeDescriptors);I=I.value;if(null!=(ia=g.options_)&&ia.bound){var Ob;I=I.bind(null!=(Ob=b.proxy_)?Ob:b.target_)}return{value:Oc(null!=(sa=null==(La=g.options_)?void 0:La.name)?
sa:n.toString(),I,null!=(Xa=null==($a=g.options_)?void 0:$a.autoAction)?Xa:!1,null!=(kb=g.options_)&&kb.bound?null!=(tb=b.proxy_)?tb:b.target_:void 0),configurable:W?b.isPlainObject_:!0,enumerable:!1,writable:W?!1:!0}}function ra(b,g){return{annotationType_:b,options_:g,make_:Aa,extend_:Ka}}function Aa(b,g,n,I){var W;if(I===b.target_)return null===this.extend_(b,g,n,!1)?0:2;if(null!=(W=this.options_)&&W.bound&&(!F(b.target_,g)||!Mc(b.target_[g]))&&null===this.extend_(b,g,n,!1))return 0;if(Mc(n.value))return 1;
b=Ra(b,this,g,n,!1,!1);Om(I,g,b);return 2}function Ka(b,g,n,I){var W;n=Ra(b,this,g,n,null==(W=this.options_)?void 0:W.bound);return b.defineProperty_(g,n,I)}function Ra(b,g,n,I,W,ia){void 0===ia&&(ia=De.safeDescriptors);g=I.value;Mc(g)||(g=xs(g));if(W){var sa;g=g.bind(null!=(sa=b.proxy_)?sa:b.target_);g.isMobXFlow=!0}return{value:g,configurable:ia?b.isPlainObject_:!0,enumerable:!1,writable:ia?!1:!0}}function Ab(b,g){return{annotationType_:b,options_:g,make_:ib,extend_:Nb}}function ib(b,g,n){return null===
this.extend_(b,g,n,!1)?0:1}function Nb(b,g,n,I){return b.defineComputedProperty_(g,Z({},this.options_,{get:n.get,set:n.set}),I)}function Wb(b,g){return{annotationType_:b,options_:g,make_:ic,extend_:Pa}}function ic(b,g,n){return null===this.extend_(b,g,n,!1)?0:1}function Pa(b,g,n,I){var W,ia;return b.defineObservableProperty_(g,n.value,null!=(W=null==(ia=this.options_)?void 0:ia.enhancer)?W:Ma,I)}function nb(b){return{annotationType_:"true",options_:b,make_:pb,extend_:Yb}}function pb(b,g,n,I){var W,
ia;if(n.get)return Eg.make_(b,g,n,I);if(n.set){n=Oc(g.toString(),n.set);if(I===b.target_)return null===b.defineProperty_(g,{configurable:De.safeDescriptors?b.isPlainObject_:!0,set:n})?0:2;Om(I,g,{configurable:!0,set:n});return 2}if(I!==b.target_&&"function"===typeof n.value){var sa;if(aa(n.value)){var La;return(null!=(La=this.options_)&&La.autoBind?xs.bound:xs).make_(b,g,n,I)}return(null!=(sa=this.options_)&&sa.autoBind?rn.bound:rn).make_(b,g,n,I)}sa=!1===(null==(W=this.options_)?void 0:W.deep)?xg.ref:
xg;if("function"===typeof n.value&&null!=(ia=this.options_)&&ia.autoBind){var Xa;n.value=n.value.bind(null!=(Xa=b.proxy_)?Xa:b.target_)}return sa.make_(b,g,n,I)}function Yb(b,g,n,I){var W,ia;if(n.get)return Eg.extend_(b,g,n,I);if(n.set)return b.defineProperty_(g,{configurable:De.safeDescriptors?b.isPlainObject_:!0,set:Oc(g.toString(),n.set)},I);if("function"===typeof n.value&&null!=(W=this.options_)&&W.autoBind){var sa;n.value=n.value.bind(null!=(sa=b.proxy_)?sa:b.target_)}return(!1===(null==(ia=
this.options_)?void 0:ia.deep)?xg.ref:xg).extend_(b,g,n,I)}function Jc(b){if(!0===b.deep)var g=Ma;else{if(!1===b.deep)b=fb;else{b=b.defaultDecorator;var n;b=b?null!=(g=null==(n=b.options_)?void 0:n.enhancer)?g:Ma:Ma}g=b}return g}function ad(b,g,n){if(Y(g))Ea(b,g,Xn);else return Tb(b)?b:H(b)?xg.object(b,g,n):Array.isArray(b)?xg.array(b,g):N(b)?xg.map(b,g):P(b)?xg.set(b,g):"object"===typeof b&&null!==b?b:xg.box(b,g)}function Oc(b,g,n,I){function W(){a:{var ia=I||this,sa=arguments,La=De.trackingDerivation,
Xa=!n||!La;od();var $a=De.allowStateChanges;Xa&&(rc(),$a=yc(!0));var kb=Fd(!0),tb=T++,Ob=cp;cp=tb;try{var ec=g.apply(ia,sa);break a}catch(pc){var Ub=pc;throw pc;}finally{cp!==tb&&m(30),cp=Ob,void 0!==Ub&&(De.suppressReactionErrors=!0),De.allowStateChanges=$a,De.allowStateReads=kb,Ud(),Xa&&(De.trackingDerivation=La),De.suppressReactionErrors=!1}ec=void 0}return ec}void 0===n&&(n=!1);W.isMobxAction=!0;la&&(Da.value=b,Object.defineProperty(W,"name",Da));return W}function Fb(b,g){b=yc(b);try{return g()}finally{De.allowStateChanges=
b}}function yc(b){var g=De.allowStateChanges;De.allowStateChanges=b;return g}function Wc(b){switch(b.dependenciesState_){case ne.UP_TO_DATE_:return!1;case ne.NOT_TRACKING_:case ne.STALE_:return!0;case ne.POSSIBLY_STALE_:for(var g=Fd(!0),n=rc(),I=b.observing_,W=I.length,ia=0;ia<W;ia++){var sa=I[ia];if(Sd(sa)){if(De.disableErrorBoundaries)sa.get();else try{sa.get()}catch(La){return De.trackingDerivation=n,De.allowStateReads=g,!0}if(b.dependenciesState_===ne.STALE_)return De.trackingDerivation=n,De.allowStateReads=
g,!0}}wd(b);De.trackingDerivation=n;De.allowStateReads=g;return!1}}function id(b,g,n){var I=Fd(!0);wd(b);b.newObserving_=Array(b.observing_.length+100);b.unboundDepsCount_=0;b.runId_=++De.runId;var W=De.trackingDerivation;De.trackingDerivation=b;De.inBatch++;if(!0===De.disableErrorBoundaries)var ia=g.call(n);else try{ia=g.call(n)}catch(kb){ia=new hh(kb)}De.inBatch--;De.trackingDerivation=W;var sa=b.observing_;g=b.observing_=b.newObserving_;n=ne.UP_TO_DATE_;W=0;for(var La=b.unboundDepsCount_,Xa=0;Xa<
La;Xa++){var $a=g[Xa];0===$a.diffValue_&&($a.diffValue_=1,W!==Xa&&(g[W]=$a),W++);$a.dependenciesState_>n&&(n=$a.dependenciesState_)}g.length=W;b.newObserving_=null;for(La=sa.length;La--;)Xa=sa[La],0===Xa.diffValue_&&ud(Xa,b),Xa.diffValue_=0;for(;W--;)sa=g[W],1===sa.diffValue_&&(sa.diffValue_=0,La=b,sa.observers_.add(La),sa.lowestObserverState_>La.dependenciesState_&&(sa.lowestObserverState_=La.dependenciesState_));n!==ne.UP_TO_DATE_&&(b.dependenciesState_=n,b.onBecomeStale_());De.allowStateReads=
I;return ia}function Md(b){var g=b.observing_;b.observing_=[];for(var n=g.length;n--;)ud(g[n],b);b.dependenciesState_=ne.NOT_TRACKING_}function Ld(b){var g=rc();try{return b()}finally{De.trackingDerivation=g}}function rc(){var b=De.trackingDerivation;De.trackingDerivation=null;return b}function Fd(b){var g=De.allowStateReads;De.allowStateReads=b;return g}function wd(b){if(b.dependenciesState_!==ne.UP_TO_DATE_){b.dependenciesState_=ne.UP_TO_DATE_;b=b.observing_;for(var g=b.length;g--;)b[g].lowestObserverState_=
ne.UP_TO_DATE_}}function $d(){(De.pendingReactions.length||De.inBatch||De.isRunningReactions)&&m(36);sh=!0;if(yg){var b=R();0===--b.__mobxInstanceCount&&(b.__mobxGlobals=void 0);De=new hf}}function ud(b,g){b.observers_["delete"](g);0===b.observers_.size&&Qd(b)}function Qd(b){!1===b.isPendingUnobservation_&&(b.isPendingUnobservation_=!0,De.pendingUnobservations.push(b))}function od(){De.inBatch++}function Ud(){if(0===--De.inBatch){0<De.inBatch||De.isRunningReactions||je(mb);for(var b=De.pendingUnobservations,
g=0;g<b.length;g++){var n=b[g];n.isPendingUnobservation_=!1;0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof dd&&n.suspend_())}De.pendingUnobservations=[]}}function Mb(b){var g=De.trackingDerivation;if(null!==g)return g.runId_!==b.lastAccessedBy_&&(b.lastAccessedBy_=g.runId_,g.newObserving_[g.unboundDepsCount_++]=b,!b.isBeingObserved_&&De.trackingContext&&(b.isBeingObserved_=!0,b.onBO())),b.isBeingObserved_;0===b.observers_.size&&0<De.inBatch&&Qd(b);return!1}
function gc(b){b.lowestObserverState_!==ne.STALE_&&(b.lowestObserverState_=ne.STALE_,b.observers_.forEach(function(g){if(g.dependenciesState_===ne.UP_TO_DATE_)g.onBecomeStale_();g.dependenciesState_=ne.STALE_}))}function Xb(b){b.lowestObserverState_!==ne.STALE_&&(b.lowestObserverState_=ne.STALE_,b.observers_.forEach(function(g){g.dependenciesState_===ne.POSSIBLY_STALE_?g.dependenciesState_=ne.STALE_:g.dependenciesState_===ne.UP_TO_DATE_&&(b.lowestObserverState_=ne.UP_TO_DATE_)}))}function rb(b){b.lowestObserverState_===
ne.UP_TO_DATE_&&(b.lowestObserverState_=ne.POSSIBLY_STALE_,b.observers_.forEach(function(g){g.dependenciesState_===ne.UP_TO_DATE_&&(g.dependenciesState_=ne.POSSIBLY_STALE_,g.onBecomeStale_())}))}function mb(){De.isRunningReactions=!0;for(var b=De.pendingReactions,g=0;0<b.length;){++g===Xd&&(console.error("[mobx] cycle in reaction: "+b[0]),b.splice(0));for(var n=b.splice(0),I=0,W=n.length;I<W;I++)n[I].runReaction_()}De.isRunningReactions=!1}function cc(b){var g=je;je=function(n){return b(function(){return g(n)})}}
function vc(b){console.warn("[mobx.spy] Is a no-op in production builds");return function(){}}function Uc(b){return function(g,n){if(ma(g))return Oc(g.name||"\x3cunnamed action\x3e",g,b);if(ma(n))return Oc(g,n,b);if(Y(n))return Ea(g,n,b?zh:Bh);if(Y(g))return Ta(eb(b?"autoAction":jf,{name:g,autoAction:b}))}}function cd(b){return ma(b)&&!0===b.isMobxAction}function Od(b,g){function n(){b(Xa)}var I,W;void 0===g&&(g=mq);var ia=null!=(I=null==(W=g)?void 0:W.name)?I:"Autorun";if(g.scheduler||g.delay){var sa=
ce(g),La=!1;var Xa=new me(ia,function(){La||(La=!0,sa(function(){La=!1;Xa.isDisposed_||Xa.track(n)}))},g.onError,g.requiresObservable)}else Xa=new me(ia,function(){this.track(n)},g.onError,g.requiresObservable);Xa.schedule_();return Xa.getDisposer_()}function ce(b){return b.scheduler?b.scheduler:b.delay?function(g){return setTimeout(g,b.delay)}:fv}function pe(b,g,n){function I(){kb=!1;if(!Ub.isDisposed_){var pc=!1;Ub.track(function(){var mc=Fb(!1,function(){return b(Ub)});pc=$a||!ec(tb,mc);Ob=tb;
tb=mc});$a&&n.fireImmediately?sa(tb,Ob,Ub):!$a&&pc&&sa(tb,Ob,Ub);$a=!1}}var W;void 0===n&&(n=mq);var ia=null!=(W=n.name)?W:"Reaction",sa=af(ia,n.onError?td(n.onError,g):g),La=!n.scheduler&&!n.delay,Xa=ce(n),$a=!0,kb=!1,tb,Ob,ec=n.compareStructural?Rm.structural:n.equals||Rm["default"],Ub=new me(ia,function(){$a||La?I():kb||(kb=!0,Xa(I))},n.onError,n.requiresObservable);Ub.schedule_();return Ub.getDisposer_()}function td(b,g){return function(){try{return g.apply(this,arguments)}catch(n){b.call(this,
n)}}}function wc(b,g,n){return Nc(tC,b,g,n)}function Nc(b,g,n,I){var W="function"===typeof I?vg(g,n):vg(g),ia=ma(I)?I:n,sa=b+"L";W[sa]?W[sa].add(ia):W[sa]=new Set([ia]);return function(){var La=W[sa];La&&(La["delete"](ia),0===La.size&&delete W[sa])}}function Me(b){!0===b.isolateGlobalState&&$d();var g=b.useProxies,n=b.enforceActions;void 0!==g&&(De.useProxies="always"===g?!0:"never"===g?!1:"undefined"!==typeof Proxy);"ifavailable"===g&&(De.verifyProxies=!0);void 0!==n&&(g="always"===n?"always":"observed"===
n,De.enforceActions=g,De.allowStateChanges=!0===g||"always"===g?!1:!0);["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(I){I in b&&(De[I]=!!b[I])});De.allowStateReads=!De.observableRequiresReaction;b.reactionScheduler&&cc(b.reactionScheduler)}function sc(b,g,n,I){var W=Oo(g),ia=Ed(b,I)[Yg];od();try{gn(W).forEach(function(sa){ia.extend_(sa,W[sa],n?sa in n?n[sa]:!0:!0)})}finally{Ud()}return b}function Le(b){var g=
{name:b.name_};b.observing_&&0<b.observing_.length&&(g.dependencies=Array.from(new Set(b.observing_)).map(Le));return g}function Rb(){this.message="FLOW_CANCELLED"}function Mc(b){return!0===(null==b?void 0:b.isMobXFlow)}function Tb(b,g){return b?void 0!==g?Yd(b)?b[Yg].values_.has(g):!1:Yd(b)||!!b[Yg]||rq(b)||$e(b)||Sd(b):!1}function ed(b){if(Yd(b))return b[Yg].ownKeys_();m(38)}function qe(b,g,n){b.set(g,n);return n}function le(b,g){if(null==b||"object"!==typeof b||b instanceof Date||!Tb(b))return b;
if(tc(b)||Sd(b))return le(b.get(),g);if(g.has(b))return g.get(b);if(jb(b)){var n=qe(g,b,Array(b.length));b.forEach(function(sa,La){n[La]=le(sa,g)});return n}if(Gq(b)){var I=qe(g,b,new Set);b.forEach(function(sa){I.add(le(sa,g))});return I}if(Kp(b)){var W=qe(g,b,new Map);b.forEach(function(sa,La){W.set(La,le(sa,g))});return W}var ia=qe(g,b,{});ed(b).forEach(function(sa){ap.propertyIsEnumerable.call(b,sa)&&(ia[sa]=le(b[sa],g))});return ia}function Ec(b,g){return le(b,new Map)}function Bb(){m("trace() is not available in production builds");
for(var b=!1,g=arguments.length,n=Array(g),I=0;I<g;I++)n[I]=arguments[I];"boolean"===typeof n[n.length-1]&&(b=n.pop());a:{switch(n.length){case 0:g=De.trackingDerivation;break a;case 1:g=vg(n[0]);break a;case 2:g=vg(n[0],n[1]);break a}g=void 0}if(!g)return m("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");g.isTracing_===Zf.NONE&&console.log("[mobx.trace] '"+g.name_+"' tracing enabled");g.isTracing_=b?
Zf.BREAK:Zf.LOG}function Kd(b,g){void 0===g&&(g=void 0);od();try{return b.apply(g)}finally{Ud()}}function de(b){return void 0!==b.interceptors_&&0<b.interceptors_.length}function rd(b,g){var n=b.interceptors_||(b.interceptors_=[]);n.push(g);return L(function(){var I=n.indexOf(g);-1!==I&&n.splice(I,1)})}function oc(b,g){var n=rc();try{var I=[].concat(b.interceptors_||[]);b=0;for(var W=I.length;b<W&&((g=I[b](g))&&!g.type&&m(14),g);b++);return g}finally{De.trackingDerivation=n}}function Ne(b){return void 0!==
b.changeListeners_&&0<b.changeListeners_.length}function Vf(b,g){var n=b.changeListeners_||(b.changeListeners_=[]);n.push(g);return L(function(){var I=n.indexOf(g);-1!==I&&n.splice(I,1)})}function bf(b,g){var n=rc();if(b=b.changeListeners_){b=b.slice();for(var I=0,W=b.length;I<W;I++)b[I](g);De.trackingDerivation=n}}function og(b,g,n){var I=Ed(b,n)[Yg];od();try{var W;null!=(W=g)?W:g=Oa(b);gn(g).forEach(function(ia){return I.make_(ia,g[ia])})}finally{Ud()}return b}function bb(b,g,n,I){void 0===n&&(n=
"ObservableArray");void 0===I&&(I=!1);ka();g=new qv(n,g,I,!1);Q(g.values_,Yg,g);n=new Proxy(g.values_,vC);g.proxy_=n;b&&b.length&&(I=yc(!0),g.spliceWithArray_(0,0,b),De.allowStateChanges=I);return n}function Cb(b,g){"function"===typeof Array.prototype[b]&&(Jt[b]=g(b))}function db(b){return function(){var g=this[Yg];g.atom_.reportObserved();g=g.dehanceValues_(g.values_);return g[b].apply(g,arguments)}}function Db(b){return function(g,n){var I=this,W=this[Yg];W.atom_.reportObserved();return W.dehanceValues_(W.values_)[b](function(ia,
sa){return g.call(n,ia,sa,I)})}}function hc(b){return function(){var g=this,n=this[Yg];n.atom_.reportObserved();n=n.dehanceValues_(n.values_);var I=arguments[0];arguments[0]=function(W,ia,sa){return I(W,ia,sa,g)};return n[b].apply(n,arguments)}}function jb(b){return fa(b)&&wC(b[Yg])}function hd(b){if(N(b)||Kp(b))return b;if(Array.isArray(b))return new Map(b);if(H(b)){var g=new Map,n;for(n in b)g.set(n,b[n]);return g}return m(21,b)}function Ed(b,g){var n;if(F(b,Yg))return b;var I=null!=(n=null==g?
void 0:g.name)?n:"ObservableObject";n=fy;var W=new Map;I=String(I);var ia;var sa=g?null!=(ia=g.defaultDecorator)?ia:nb(g):void 0;g=new n(b,W,I,sa);M(b,Yg,g);return b}function ke(b){return ey[b]||(ey[b]={get:function(){return this[Yg].getObservablePropValue_(b)},set:function(g){return this[Yg].setObservablePropValue_(b,g)}})}function Yd(b){return fa(b)?uC(b[Yg]):!1}function We(b){return{enumerable:!1,configurable:!0,get:function(){return this[Yg].get_(b)},set:function(g){this[Yg].set_(b,g)}}}function re(b){if(b>
mv){for(var g=mv;g<b+100;g++)Om(pv.prototype,""+g,We(g));mv=b}}function ef(b,g,n){return new pv(b,g,n)}function vg(b,g){if("object"===typeof b&&null!==b){if(jb(b))return void 0!==g&&m(23),b[Yg].atom_;if(Gq(b))return b[Yg];if(Kp(b)){if(void 0===g)return b.keysAtom_;var n=b.data_.get(g)||b.hasMap_.get(g);n||m(25,g,zb(b));return n}if(Yd(b)){if(!g)return m(26);(n=b[Yg].values_.get(g))||m(27,g,zb(b));return n}if(rq(b)||Sd(b)||$e(b))return b}else if(ma(b)&&$e(b[Yg]))return b[Yg];m(28)}function sf(b,g){b||
m(29);if(void 0!==g)return sf(vg(b,g));if(rq(b)||Sd(b)||$e(b)||Kp(b)||Gq(b))return b;if(b[Yg])return b[Yg];m(24,b)}function zb(b,g){if(void 0!==g)b=vg(b,g);else{if(cd(b))return b.name;b=Yd(b)||Kp(b)||Gq(b)?sf(b):vg(b)}return b.name_}function ta(b,g,n){void 0===n&&(n=-1);return qa(b,g,n)}function qa(b,g,n,I,W){if(b===g)return 0!==b||1/b===1/g;if(null==b||null==g)return!1;if(b!==b)return g!==g;var ia=typeof b;if("function"!==ia&&"object"!==ia&&"object"!=typeof g)return!1;ia=$x.call(b);if(ia!==$x.call(g))return!1;
switch(ia){case "[object RegExp]":case "[object String]":return""+b===""+g;case "[object Number]":return+b!==+b?+g!==+g:0===+b?1/+b===1/g:+b===+g;case "[object Date]":case "[object Boolean]":return+b===+g;case "[object Symbol]":return"undefined"!==typeof Symbol&&Symbol.valueOf.call(b)===Symbol.valueOf.call(g);case "[object Map]":case "[object Set]":0<=n&&n++}b=Ja(b);g=Ja(g);ia="[object Array]"===ia;if(!ia){if("object"!=typeof b||"object"!=typeof g)return!1;var sa=b.constructor,La=g.constructor;if(sa!==
La&&!(ma(sa)&&sa instanceof sa&&ma(La)&&La instanceof La)&&"constructor"in b&&"constructor"in g)return!1}if(0===n)return!1;0>n&&(n=-1);I=I||[];W=W||[];for(sa=I.length;sa--;)if(I[sa]===b)return W[sa]===g;I.push(b);W.push(g);if(ia){sa=b.length;if(sa!==g.length)return!1;for(;sa--;)if(!qa(b[sa],g[sa],n-1,I,W))return!1}else{ia=Object.keys(b);sa=ia.length;if(Object.keys(g).length!==sa)return!1;for(;sa--;)if(La=ia[sa],!F(g,La)||!qa(b[La],g[La],n-1,I,W))return!1}I.pop();W.pop();return!0}function Ja(b){return jb(b)?
b.slice():N(b)||Kp(b)||P(b)||Gq(b)?Array.from(b.entries()):b}function cb(b){b[Symbol.iterator]=Ib;return b}function Ib(){return this}function lc(b,g){const n=new Set(g),I=Object.values(b),W=new Set(I.filter(ia=>n.has(ia.toId)||n.has(ia.fromId)));b=W.size;for(g=-1;0!==g;)W.forEach(ia=>{ia=ia.fromId;for(const sa of I)sa.fromId===ia&&W.add(sa),sa.toId===ia&&W.add(sa)}),g=W.size-b,b=W.size;return Array.from(W.values())}function Sc(b,g,n,I,W,ia,sa,La){if(W=g.getBindingPoint(W,ia,sa,La))return{id:I,type:"line",
fromId:b.id,toId:g.id,handleId:n,point:Zd.toFixed(W.point),distance:W.distance}}function nd(b,g){const n=b.getCenter(),I=g.getCenter();var W=Sf();W=Wa(Fa({},ws.defaultProps),{id:W,type:ws.id,parentId:b.props.parentId,point:n});b=Sc(W,b,"start",Sf(),n,n,Zd.uni(Zd.sub(I,n)),!1);g=Sc(W,g,"end",Sf(),I,I,Zd.uni(Zd.sub(n,I)),!1);return b&&g?(W.handles.start.point=[0,0],W.handles.end.point=Zd.sub(I,n),W.handles.start.bindingId=b.id,W.handles.end.bindingId=g.id,[W,[b,g]]):null}function ve(){return new jC}
function Ue(){return new WeakMap}function If(b){if(!b)return gv(null);var g=b.constructor;if(g===Object)return b===Object.prototype?{}:gv(b);if(~hC.call(g).indexOf("[native code]"))try{return new g}catch(n){}return gv(b)}function cg(b){var g="";b.global&&(g+="g");b.ignoreCase&&(g+="i");b.multiline&&(g+="m");b.unicode&&(g+="u");b.sticky&&(g+="y");return g}function Ff(b){return b.flags}function vf(b){b=iC.call(b);return b.substring(8,b.length-1)}function Of(b){return b[Symbol.toStringTag]||vf(b)}function Pg(b){return hy(b).concat(sv(b))}
function ci(b,g,n){for(var I=JC(b),W=0,ia=I.length,sa,La;W<ia;++W)if(sa=I[W],"callee"!==sa&&"caller"!==sa)if(La=HC(b,sa)){La.get||La.set||(La.value=n.copier(La.value,n));try{FC(g,sa,La)}catch(Xa){g[sa]=La.value}}else g[sa]=n.copier(b[sa],n);return g}function th(b,g){var n=new g.Constructor;g.cache.set(b,n);b.forEach(function(I,W){n.set(W,g.copier(I,g))});return n}function ki(b,g){var n=If(g.prototype);g.cache.set(b,n);for(var I in b)jy.call(b,I)&&(n[I]=g.copier(b[I],g));return n}function Wh(b,g){var n=
If(g.prototype);g.cache.set(b,n);for(var I in b)jy.call(b,I)&&(n[I]=g.copier(b[I],g));I=sv(b);for(var W=0,ia=I.length,sa;W<ia;++W)sa=I[W],IC.call(b,sa)&&(n[sa]=g.copier(b[sa],g));return n}function pg(b,g){return new g.Constructor(b.valueOf())}function Oh(b,g){return b}function df(b,g){var n=new g.Constructor;g.cache.set(b,n);b.forEach(function(I){n.add(g.copier(I,g))});return n}function Ph(b){function g(ia,sa){sa.prototype=sa.Constructor=void 0;if(!ia||"object"!==typeof ia)return ia;if(sa.cache.has(ia))return sa.cache.get(ia);
sa.prototype=ia.__proto__||DC(ia);sa.Constructor=sa.prototype&&sa.prototype.constructor;if(!sa.Constructor||sa.Constructor===Object)return W(ia,sa);if(KC(ia))return I(ia,sa);var La=n[EC(ia)];return La?La(ia,sa):"function"===typeof ia.then?ia:W(ia,sa)}b=rv({},gy,b);var n={Arguments:b.object,Array:b.array,ArrayBuffer:b.arrayBuffer,Blob:b.blob,Boolean:pg,DataView:b.dataView,Date:b.date,Error:b.error,Float32Array:b.arrayBuffer,Float64Array:b.arrayBuffer,Int8Array:b.arrayBuffer,Int16Array:b.arrayBuffer,
Int32Array:b.arrayBuffer,Map:b.map,Number:pg,Object:b.object,Promise:Oh,RegExp:b.regExp,Set:b.set,String:pg,WeakMap:Oh,WeakSet:Oh,Uint8Array:b.arrayBuffer,Uint8ClampedArray:b.arrayBuffer,Uint16Array:b.arrayBuffer,Uint32Array:b.arrayBuffer,Uint64Array:b.arrayBuffer},I=n.Array,W=n.Object;return function(ia){return g(ia,{Constructor:void 0,cache:gC(),copier:g,prototype:void 0})}}function xi(b,g){return(0,LC.default)(b,g,{arrayMerge:(n,I,W)=>I})}function Dl(b,g,n,I=!1){const [W,ia]=g,[sa,La]=n;b=sa+(b-
W)/(ia-W)*(La-sa);return I?sa<La?Math.max(Math.min(b,La),sa):Math.max(Math.min(b,sa),La):b}function vj(b,g){return new Promise((n,I)=>{if(g){const W=document.createElement("video");W.addEventListener("loadedmetadata",function(){n([this.videoWidth,this.videoHeight])},!1);W.src=b}else{const W=new Image;W.onload=()=>n([W.width,W.height]);W.src=b;W.onerror=ia=>I(ia)}})}function xf(b,g){return Object.values(xc).includes(b)||null==b?`var(--ls-wb-${g}-color-${b?b:"default"})`:b}function Bj(){var b;null==
(b=document.getElementById("__textLabelMeasure"))?void 0:b.remove();b=document.createElement("pre");b.id="__textLabelMeasure";Object.assign(b.style,{whiteSpace:"pre",width:"auto",borderLeft:"2px solid transparent",borderRight:"1px solid transparent",borderBottom:"2px solid transparent",padding:"0px",margin:"0px",opacity:"0",position:"absolute",top:"-500px",left:"0px",zIndex:"9999",userSelect:"none",pointerEvents:"none",font:"var(--ls-font-family)"});b.tabIndex=-1;document.body.appendChild(b);return b}
function oj(b,g,n=0){var I,W,ia;if(!b)return[16,32];let sa;sa="string"===typeof g?g:`${null!=(I=g.fontStyle)?I:"normal"} ${null!=(W=g.fontVariant)?W:"normal"} ${null!=(ia=g.fontWeight)?ia:"normal"} ${g.fontSize}px/${g.fontSize*g.lineHeight}px ${g.fontFamily}`;if(!yv.has(`${b}-${sa}-${n}`)){if(!Mp)return[10,10];Mp.parentNode||document.body.appendChild(Mp);Mp.innerHTML=`${b}&#8203;`;Mp.style.font=sa;Mp.style.padding=n+"px";g=Mp.getBoundingClientRect();yv.set(`${b}-${sa}-${n}`,[Math.ceil(g.width||1),
Math.ceil(g.height||1)])}return yv.get(`${b}-${sa}-${n}`)}function Th(b){try{if("string"!==typeof b||!Ad.test(b))throw TypeError("Invalid UUID");let g;const n=new Uint8Array(16);n[0]=(g=parseInt(b.slice(0,8),16))>>>24;n[1]=g>>>16&255;n[2]=g>>>8&255;n[3]=g&255;n[4]=(g=parseInt(b.slice(9,13),16))>>>8;n[5]=g&255;n[6]=(g=parseInt(b.slice(14,18),16))>>>8;n[7]=g&255;n[8]=(g=parseInt(b.slice(19,23),16))>>>8;n[9]=g&255;n[10]=(g=parseInt(b.slice(24,36),16))/1099511627776&255;n[11]=g/4294967296&255;n[12]=g>>>
24&255;n[13]=g>>>16&255;n[14]=g>>>8&255;n[15]=g&255;return!0}catch(g){return!1}}function Zk(b,g=0,n){let I;return function(...W){null==n?void 0:n(...W);clearTimeout(I);I=setTimeout(()=>b.apply(W),g)}}function lk(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}function yk(){var b,g,n;return(null==(n=null==(g=null==(b=null==window?void 0:window.logseq)?void 0:b.api)?void 0:g.get_state_from_store)?void 0:n.call(g,"ui/developer-mode?"))||!1}function Ig(b){return!!b}function Vj(b=0){return new Promise(g=>
setTimeout(g,b))}function Cj(b="noid"){xv[b]||(xv[b]=ny.createContext({}));return xv[b]}function Ji(b="noid"){return ny.useContext(Cj(b))}function mk(b){const {callbacks:g}=Ji(),n=oy.useRef(-1);return oy.useMemo(()=>{const I=W=>{var ia,sa;const {order:La=0}=W;if(!La){var Xa=W.target;Xa.removeEventListener("pointerup",I);Xa.releasePointerCapture(W.pointerId);null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"selection",handle:b,order:La},W);ia=Date.now();Xa=ia-n.current;300<Xa?n.current=ia:300>=Xa&&
(null==(sa=g.onDoubleClick)?void 0:sa.call(g,{type:"selection",handle:b,order:La},W),n.current=-1);W.order=La+1}};return{onPointerDown:W=>{var ia;const {order:sa=0}=W;if(!sa){var La=Xj(W.currentTarget);La.setPointerCapture(W.pointerId);La.addEventListener("pointerup",I);null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W);W.order=sa+1}},onPointerMove:W=>{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerMove)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},
W),W.order=sa+1)},onPointerEnter:W=>{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerEnter)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W),W.order=sa+1)},onPointerLeave:W=>{var ia;const {order:sa=0}=W;sa||(null==(ia=g.onPointerLeave)?void 0:ia.call(g,{type:"selection",handle:b,order:sa},W),W.order=sa+1)},onKeyDown:W=>{var ia;null==(ia=g.onKeyDown)?void 0:ia.call(g,{type:"selection",handle:b,order:-1},W)},onKeyUp:W=>{var ia;null==(ia=g.onKeyUp)?void 0:ia.call(g,{type:"selection",handle:b,
order:-1},W)}}},[g])}function Xj(b){var g;if(null==(g=b.namespaceURI)?0:g.endsWith("svg")){if(b.parentElement)return Xj(b.parentElement);throw Error("Could not find a parent element of an HTML type!");}return b}function Oj(b,g,n){const I=Is.useRef(!1),W=Is.useCallback(()=>{var ia;if(I.current){const sa=null==(ia=b.current)?void 0:ia.getBoundingClientRect();sa&&(ia={minX:sa.left,maxX:sa.left+sa.width,minY:sa.top,maxY:sa.top+sa.height,width:sa.width,height:sa.height},g.updateBounds(ia),null==n?void 0:
n(ia))}else I.current=!0},[b,n]);Is.useEffect(()=>{const ia=b.current?RC(b.current):document,sa=Zk(W,100);ia.addEventListener("scroll",sa);window.addEventListener("resize",sa);return()=>{ia.removeEventListener("scroll",sa);window.removeEventListener("resize",sa)}},[]);Is.useLayoutEffect(()=>{const ia=new ResizeObserver(sa=>{sa[0].contentRect&&W()});b.current&&ia.observe(b.current);return()=>{ia.disconnect()}},[b]);Is.useEffect(()=>{W();setTimeout(()=>{var ia,sa;null==(sa=null==(ia=b.current)?void 0:
ia.querySelector(".tl-canvas"))?void 0:sa.focus()})},[b])}function ml(b,g){return Object.keys(g).reduce((n,I)=>{const W=g[I];return W?n+`${`--${b}-${I}`}: ${W};
`:n},"")}function $k(b,g,n=".logseq-tldraw"){wv.useLayoutEffect(()=>{const I=document.createElement("style"),W=ml(b,g);I.setAttribute("id",`${b}-theme`);I.setAttribute("data-selector",n);I.innerHTML=`
        ${n} {
          ${W}
        }
      `;document.head.appendChild(I);return()=>{I&&document.head.contains(I)&&document.head.removeChild(I)}},[b,g,n])}function El(b,g){wv.useLayoutEffect(()=>{if(vv.get(b))return()=>{};const n=document.createElement("style");n.innerHTML=g;n.setAttribute("id",b);document.head.appendChild(n);vv.set(b,n);return()=>{n&&document.head.contains(n)&&(document.head.removeChild(n),vv.delete(b))}},[b,g])}function Yj(b,g){const n=wv.useMemo(()=>Fa(Fa({},NC),b),[b]);$k("tl",n,g);El("tl-canvas",OC)}function Pj(b=
"noid"){tv[b]||(tv[b]=uv.createContext({}));return tv[b]}function rg(b="noid"){return uv.useContext(Pj(b))}function hg(){const b=rg(),{callbacks:g}=Ji(),n=my.useRef(-1);return my.useMemo(()=>({onPointerDown:I=>{var W,ia,sa;const {order:La=0}=I;La||(null==(W=I.currentTarget)?void 0:W.setPointerCapture(I.pointerId));I.isPrimary&&(null==(ia=g.onPointerDown)?void 0:ia.call(g,{type:"canvas",order:La},I),W=Date.now(),ia=W-n.current,300<ia?n.current=W:300>=ia&&(null==(sa=g.onDoubleClick)?void 0:sa.call(g,
{type:"canvas",order:La},I),n.current=-1))},onPointerMove:I=>{var W;const {order:ia=0}=I;null==(W=g.onPointerMove)?void 0:W.call(g,{type:"canvas",order:ia},I)},onPointerUp:I=>{var W,ia;const {order:sa=0}=I;sa||(null==(W=I.currentTarget)?void 0:W.releasePointerCapture(I.pointerId));null==(ia=g.onPointerUp)?void 0:ia.call(g,{type:"canvas",order:sa},I)},onPointerEnter:I=>{var W;const {order:ia=0}=I;null==(W=g.onPointerEnter)?void 0:W.call(g,{type:"canvas",order:ia},I)},onPointerLeave:I=>{var W;const {order:ia=
0}=I;null==(W=g.onPointerLeave)?void 0:W.call(g,{type:"canvas",order:ia},I)},onDrop:I=>Rd(this,null,function*(){I.preventDefault();b.drop(I.dataTransfer,[I.clientX,I.clientY])}),onDragOver:I=>{I.preventDefault()},onTouchEnd:I=>{let W=b.selectedTool.id;"pencil"!==W&&"highlighter"!==W||I.preventDefault()}}),[g])}function jg(b,g,n){return 0===g||Infinity===Math.abs(g)?Math.pow(b,5*n):b*g*n/(g+n*b)}function dj(b,g,n,I=.15){return 0===I?Math.max(g,Math.min(b,n)):b<g?-jg(g-b,n-g,I)+g:b>n?+jg(b-n,n-g,I)+
n:b}function Dh(b,[g,n],[I,W]){const [[ia,sa],[La,Xa]]=b;return[dj(g,ia,sa,I),dj(n,La,Xa,W)]}function Wg(b,g,n){g in b?Object.defineProperty(b,g,{value:n,enumerable:!0,configurable:!0,writable:!0}):b[g]=n;return b}function Zj(b,g){var n=Object.keys(b);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(b);g&&(I=I.filter(function(W){return Object.getOwnPropertyDescriptor(b,W).enumerable}));n.push.apply(n,I)}return n}function Ag(b){for(var g=1;g<arguments.length;g++){var n=null!=arguments[g]?
arguments[g]:{};g%2?Zj(Object(n),!0).forEach(function(I){Wg(b,I,n[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(n)):Zj(Object(n)).forEach(function(I){Object.defineProperty(b,I,Object.getOwnPropertyDescriptor(n,I))})}return b}function Qh(b){return b?b[0].toUpperCase()+b.slice(1):""}function ok(b=!1,g){return b&&!kD.includes(g)}function zk(b,g="",n=!1){const I=sy[b];g=I?I[g]||g:g;return"on"+Qh(b)+Qh(g)+(ok(n,g)?"Capture":"")}function Ih(b){b=b.substring(2).toLowerCase();
const g=!!~b.indexOf("passive");g&&(b=b.replace("passive",""));var n=mD.includes(b)?"capturecapture":"capture";(n=!!~b.indexOf(n))&&(b=b.replace("capture",""));return{device:b,capture:n,passive:g}}function Ci(b,g=""){const n=sy[b];return b+(n?n[g]||g:g)}function Jh(b){return"touches"in b?"touch":"pointerType"in b?b.pointerType:"mouse"}function al(b){return Array.from(b.touches).filter(g=>{var n,I;return g.target===b.currentTarget||(null===(n=b.currentTarget)||void 0===n?void 0:null===(I=n.contains)||
void 0===I?void 0:I.call(n,g.target))})}function ak(b){return"touches"in b?("touchend"===b.type||"touchcancel"===b.type?b.changedTouches:b.targetTouches)[0]:b}function wj(b,g){const n=g.clientX-b.clientX,I=g.clientY-b.clientY;return{angle:-(180*Math.atan2(n,I))/Math.PI,distance:Math.hypot(n,I),origin:[(g.clientX+b.clientX)/2,(g.clientY+b.clientY)/2]}}function Fl(b){return al(b).map(g=>g.identifier)}function Bm(b,g){const [n,I]=Array.from(b.touches).filter(W=>g.includes(W.identifier));return wj(n,
I)}function Qj(b){const g=ak(b);return"touches"in b?g.identifier:g.pointerId}function di(b){b=ak(b);return[b.clientX,b.clientY]}function Rj(b){let {deltaX:g,deltaY:n,deltaMode:I}=b;1===I?(g*=40,n*=40):2===I&&(g*=800,n*=800);return[g,n]}function Kh(b,...g){return"function"===typeof b?b(...g):b}function ej(){}function Lh(...b){return 0===b.length?ej:1===b.length?b[0]:function(){let g;for(const n of b)g=n.apply(this,arguments)||g;return g}}function Yi([b,g],n){b=Math.abs(b);g=Math.abs(g);if(b>g&&b>n)return"x";
if(g>b&&g>n)return"y"}function li(b){const [g,n]=b.overflow,[I,W]=b._delta,[ia,sa]=b._direction;if(0>g&&0<I&&0>ia||0<g&&0>I&&0<ia)b._movement[0]=b._movementBound[0];if(0>n&&0<W&&0>sa||0<n&&0>W&&0<sa)b._movement[1]=b._movementBound[1]}function bl(b){Av.set(b.key,b.engine);zv.set(b.key,b.resolver)}function bk(b={},g){const n={};for(const [I,W]of Object.entries(g))switch(typeof W){case "function":n[I]=W.call(n,b[I],I,b);break;case "object":n[I]=bk(b[I],W);break;case "boolean":W&&(n[I]=b[I])}return n}
function fj(b,g,n={}){const {target:I,eventOptions:W,window:ia,enabled:sa,transform:La}=b;var Xa=TC;if(null==b)b={};else{if(null==b)var $a={};else{$a={};var kb=Object.keys(b),tb;for(tb=0;tb<kb.length;tb++){var Ob=kb[tb];0<=Xa.indexOf(Ob)||($a[Ob]=b[Ob])}}if(Object.getOwnPropertySymbols)for(tb=Object.getOwnPropertySymbols(b),Ob=0;Ob<tb.length;Ob++)kb=tb[Ob],0<=Xa.indexOf(kb)||Object.prototype.propertyIsEnumerable.call(b,kb)&&($a[kb]=b[kb]);b=$a}n.shared=bk({target:I,eventOptions:W,window:ia,enabled:sa,
transform:La},UC);if(g){var ec=zv.get(g);n[g]=bk(Ag({shared:n.shared},b),ec)}else for(ec in b)(g=zv.get(ec))&&(n[ec]=bk(Ag({shared:n.shared},b[ec]),g));return n}function zg(b,g){b.gestures.add(g);b.gestureEventStores[g]=new My(b,g);b.gestureTimeoutStores[g]=new HD}function Di(b,g,n,I,W,ia){if(b.has(n)&&Av.has(I)){var sa=n+"Start",La=n+"End";W[I]=Xa=>{let $a=void 0;if(Xa.first&&sa in g)g[sa](Xa);n in g&&($a=g[n](Xa));if(Xa.last&&La in g)g[La](Xa);return $a};ia[I]=ia[I]||{}}}function mi(b,g={},n,I){const W=
Cv.default.useMemo(()=>new py(b),[]);W.applyHandlers(b,I);W.applyConfig(g,n);Cv.default.useEffect(W.effect.bind(W));Cv.default.useEffect(()=>W.clean.bind(W),[]);if(void 0===g.target)return W.bind.bind(W)}function Ej(b){b.forEach(bl);return function(g,n){n=n||{};const I={},W={},ia=new Set;for(let Ob in g)fD.test(Ob)?(ia.add(RegExp.lastMatch),W[Ob]=g[Ob]):I[Ob]=g[Ob];const [sa,La,Xa]=[W,I,ia];g={};Di(Xa,sa,"onDrag","drag",g,n);Di(Xa,sa,"onWheel","wheel",g,n);Di(Xa,sa,"onScroll","scroll",g,n);Di(Xa,
sa,"onPinch","pinch",g,n);Di(Xa,sa,"onMove","move",g,n);Di(Xa,sa,"onHover","hover",g,n);const {handlers:$a,nativeHandlers:kb,config:tb}={handlers:g,config:n,nativeHandlers:La};return mi($a,tb,void 0,kb)}}function Eh(b,g){return Ej([WC,VC,kp,xo,YC,XC])(b,g||{})}function yi(b){const {viewport:g,inputs:n,callbacks:I}=Ji(),W=zr.useRef(void 0),ia=zr.useRef([0,0]),sa=zr.useRef(0),La=zr.useMemo(()=>({onWheel:Xa=>{var $a;({event:Xa}=Xa);Xa.preventDefault();const {deltaY:kb,deltaX:tb}=Xa;var Ob=0;if(Xa.ctrlKey||
Xa.metaKey){Ob=Math.sign(Xa.deltaY);let mc=kb;10<Math.abs(Xa.deltaY)&&(mc=10*Ob);Ob=mc}const [ec,Ub,pc]=[tb,kb,Ob];"pinching"===n.state||sa.current>=Xa.timeStamp||(sa.current=Xa.timeStamp,(Xa.altKey||Xa.ctrlKey||Xa.metaKey)&&0===Xa.buttons?(Ob=g.bounds,Xa=null!=($a=n.currentScreenPoint)?$a:[Ob.width/2,Ob.height/2],$a=g.camera.zoom,g.onZoom(Xa,$a-pc/100*$a)):($a=Zd.mul(Xa.shiftKey&&!lk()?[Ub,0]:[ec,Ub],.8),Zd.isEqual($a,[0,0])||g.panCamera($a)))},onPinchStart:({event:Xa,delta:$a,offset:kb,origin:tb})=>
{var Ob;const ec=b.current;Xa instanceof WheelEvent||!(Xa.target===ec||null!=ec&&ec.contains(Xa.target))||(null==(Ob=I.onPinchStart)?void 0:Ob.call(I,{type:"canvas",order:0,delta:[...$a,kb[0]],offset:kb,point:Zd.sub(tb,n.containerOffset)},Xa),W.current=tb,ia.current=[0,0])},onPinchEnd:({event:Xa,offset:$a,origin:kb})=>{var tb;const Ob=b.current;Xa instanceof WheelEvent||!(Xa.target===Ob||null!=Ob&&Ob.contains(Xa.target))||"pinching"!==n.state||(null==(tb=I.onPinchEnd)?void 0:tb.call(I,{type:"canvas",
order:0,delta:[0,0,$a[0]],offset:$a,point:Zd.sub(kb,n.containerOffset)},Xa),ia.current=[0,0])},onPinch:({event:Xa,offset:$a,origin:kb})=>{var tb,Ob=b.current;if(!(Xa instanceof WheelEvent)&&(Xa.target===Ob||null!=Ob&&Ob.contains(Xa.target))){W.current||(W.current=kb);Ob=Zd.sub(W.current,kb);var ec=Zd.sub(Ob,ia.current);null==(tb=I.onPinch)?void 0:tb.call(I,{type:"canvas",order:0,delta:[...ec,$a[0]],offset:$a,point:Zd.sub(kb,n.containerOffset)},Xa);ia.current=Ob}}}),[I]);Eh(La,{target:b,eventOptions:{passive:!1},
pinch:{from:[g.camera.zoom,g.camera.zoom],scaleBounds:()=>({from:g.camera.zoom,max:ro.maxZoom,min:ro.minZoom})}})}function pk(b,g,n,I){Ar.useLayoutEffect(()=>{b.current.style.transform=`translate(
        calc(${g.minX}px - var(--tl-padding)),
        calc(${g.minY}px - var(--tl-padding)))
        scale(var(--tl-scale))`},[g.minX,g.minY,n,g.rotation]);Ar.useLayoutEffect(()=>{const W=b.current;W.style.width=`calc(${Math.floor(g.width)}px + (var(--tl-padding) * 2))`;W.style.height=`calc(${Math.floor(g.height)}px + (var(--tl-padding) * 2))`},[g.width,g.height]);Ar.useLayoutEffect(()=>{const W=b.current;void 0!==I&&(W.style.zIndex=I.toString())},[I])}function hj(b,g){const {onPersist:n,onSave:I,onSaveAs:W,onError:ia,onMount:sa,onCreateAssets:La,onCreateShapes:Xa,onDeleteAssets:$a,onDeleteShapes:kb,
onDrop:tb,onPaste:Ob,onCopy:ec,onCanvasDBClick:Ub}=g;Ay.useLayoutEffect(()=>{const pc=[];if(b)return window.tlapps=window.tlapps||{},window.tlapps[b.uuid]=b,sa&&sa(b,null),()=>{pc.forEach(mc=>mc());window.tlapps&&delete window.tlapps[b.uuid]}},[b]);Ay.useLayoutEffect(()=>{const pc=[];n&&pc.push(b.subscribe("persist",n));I&&pc.push(b.subscribe("save",I));W&&pc.push(b.subscribe("saveAs",W));ia&&pc.push(b.subscribe("error",ia));Xa&&pc.push(b.subscribe("create-shapes",Xa));La&&pc.push(b.subscribe("create-assets",
La));kb&&pc.push(b.subscribe("delete-shapes",kb));$a&&pc.push(b.subscribe("delete-assets",$a));tb&&pc.push(b.subscribe("drop",tb));Ob&&pc.push(b.subscribe("paste",Ob));ec&&pc.push(b.subscribe("copy",ec));Ub&&pc.push(b.subscribe("canvas-dbclick",Ub));return()=>pc.forEach(mc=>mc())},[b,n,I,W,ia])}function pj(b){if("app"in b)return b.app;const [g]=Ny.useState(()=>new PC(b.model,b.Shapes,b.Tools));Ny.useLayoutEffect(()=>{g.initKeyboardShortcuts();return()=>{g.dispose()}},[g]);return g}function fn(b,g){zD.useEffect(()=>
{"model"in g&&g.model&&b.loadDocumentModel(g.model)},[g.model])}function Bk(b){const g=Ji(),{viewport:{bounds:n}}=g;ID.useEffect(()=>{const I=sa=>{sa.preventDefault()},W=sa=>{if(0!==sa.touches.length){var La=sa.touches[0].pageX,Xa=sa.touches[0].radiusX||0;(10>La-Xa||La+Xa>n.width-10)&&sa.preventDefault()}},ia=b.current;if(!ia)return()=>{};ia.addEventListener("touchstart",I,{passive:!0});ia.addEventListener("gestureend",I,{passive:!0});ia.addEventListener("gesturechange",I,{passive:!0});ia.addEventListener("gesturestart",
I,{passive:!0});ia.addEventListener("touchstart",W,{passive:!0});return()=>{ia&&(ia.removeEventListener("touchstart",I),ia.removeEventListener("gestureend",I),ia.removeEventListener("gesturechange",I),ia.removeEventListener("gesturestart",I),ia.removeEventListener("touchstart",W))}},[b,n.width])}function pl(b,g){const {inputs:n,callbacks:I}=Ji();return JD.useMemo(()=>({onPointerDown:W=>{var ia,sa;const {order:La=0}=W;La||(null==(ia=W.currentTarget)?void 0:ia.setPointerCapture(W.pointerId));ia=b.props.handles[g];
null==(sa=I.onPointerDown)?void 0:sa.call(I,{type:"handle",shape:b,handle:ia,id:g,order:La},W);W.order=La+1},onPointerMove:W=>{var ia;const {order:sa=0}=W,La=b.props.handles[g];null==(ia=I.onPointerMove)?void 0:ia.call(I,{type:"handle",shape:b,handle:La,id:g,order:sa},W);W.order=sa+1},onPointerUp:W=>{var ia,sa;const {order:La=0}=W;La||(null==(ia=W.currentTarget)?void 0:ia.releasePointerCapture(W.pointerId));ia=b.props.handles[g];null==(sa=I.onPointerUp)?void 0:sa.call(I,{type:"handle",shape:b,handle:ia,
id:g,order:La},W);W.order=La+1},onPointerEnter:W=>{var ia;const {order:sa=0}=W,La=b.props.handles[g];null==(ia=I.onPointerEnter)?void 0:ia.call(I,{type:"handle",shape:b,handle:La,id:g,order:sa},W);W.order=sa+1},onPointerLeave:W=>{var ia;const {order:sa=0}=W,La=b.props.handles[g];null==(ia=I.onPointerLeave)?void 0:ia.call(I,{type:"handle",shape:b,handle:La,id:g,order:sa},W);W.order=sa+1},onKeyUp:W=>{var ia;const sa=b.props.handles[g];null==(ia=I.onKeyUp)?void 0:ia.call(I,{type:"handle",shape:b,handle:sa,
id:g,order:-1},W)},onKeyDown:W=>{var ia;const sa=b.props.handles[g];null==(ia=I.onKeyDown)?void 0:ia.call(I,{type:"handle",shape:b,handle:sa,id:g,order:-1},W)}}),[b.id,n,I])}function qj(b,g,n=!1){return`url("data:image/svg+xml,<svg height='32' width='32' viewBox='0 0 35 35' xmlns='http://www.w3.org/2000/svg'><g fill='none' style='transform-origin:center center' transform='rotate(${g})${n?" scale(-1,-1) translate(0, -32)":""}'>`+b.replaceAll('"',"'")+'\x3c/g\x3e\x3c/svg\x3e") 16 16, pointer'}function Pl(b,
g,n=0){KD.useEffect(()=>{const I=b.current;I&&(I.style.cursor=LD[g](Ek.radiansToDegrees(n)))},[g,n])}function qm(b){const {viewport:g}=Ji(),n=rg();MD.useLayoutEffect(()=>Od(()=>{const I=Zk(()=>{var W;null==(W=b.current)?void 0:W.style.setProperty("--tl-zoom",g.camera.zoom.toString())},200);"pinching"!==n.inputs.state&&null!=g.camera.zoom&&I()}),[])}function Ql(b,g=0){const [n,I]=(0,Oy.useState)(b);(0,Oy.useEffect)(()=>{let W=!1;const ia=setTimeout(()=>{W||I(b)},g);return()=>{W=!0;clearTimeout(ia)}},
[b,g]);return n}function qk(){const b=rg();Py.useEffect(()=>{pe(()=>Fa({},b.viewport.camera),()=>{window.sessionStorage.setItem("logseq.tldraw.camera:"+b.currentPageId,JSON.stringify(b.viewport.camera))})},[b.viewport.camera]);Py.useEffect(()=>{var g;const n=JSON.parse(null!=(g=window.sessionStorage.getItem("logseq.tldraw.camera:"+b.currentPageId))?g:"null");n?b.viewport.update(n):b.selectedIds.size?b.api.zoomToSelection():b.api.zoomToFit()},[b])}function Sj(b){b()}function Rl(b){return Le(vg(b,void 0))}
function ck(b){return{reaction:b,mounted:!1,changedBeforeMount:!1,cleanAt:Date.now()+OD}}function qg(b){var g=new Map,n=1,I=new b(function(W){var ia=g.get(W);ia&&(ia.reaction.dispose(),g.delete(W))});return{addReactionToTrack:function(W,ia,sa){var La=n++;I.register(sa,La,W);W.current=ck(ia);W.current.finalizationRegistryCleanupToken=La;g.set(La,W.current);return W.current},recordReactionAsCommitted:function(W){I.unregister(W);W.current&&W.current.finalizationRegistryCleanupToken&&g.delete(W.current.finalizationRegistryCleanupToken)},
forceCleanupTimerToRunNowForTests:function(){},resetCleanupScheduleForTests:function(){}}}function bm(){function b(){void 0===I&&(I=setTimeout(g,1E4))}function g(){I=void 0;var W=Date.now();n.forEach(function(ia){var sa=ia.current;sa&&W>=sa.cleanAt&&(sa.reaction.dispose(),ia.current=null,n.delete(ia))});0<n.size&&b()}var n=new Set,I;return{addReactionToTrack:function(W,ia,sa){W.current=ck(ia);n.add(W);b();return W.current},recordReactionAsCommitted:function(W){n.delete(W)},forceCleanupTimerToRunNowForTests:function(){I&&
(clearTimeout(I),g())},resetCleanupScheduleForTests:function(){var W;if(0<n.size){try{for(var ia=PD(n),sa=ia.next();!sa.done;sa=ia.next()){var La=sa.value,Xa=La.current;Xa&&(Xa.reaction.dispose(),La.current=null)}}catch(kb){var $a={error:kb}}finally{try{sa&&!sa.done&&(W=ia.return)&&W.call(ia)}finally{if($a)throw $a.error;}}n.clear()}I&&(clearTimeout(I),I=void 0)}}}function ph(){return new wD}function Li(b,g){void 0===g&&(g="observed");var n=Dy(Ms.default.useState(ph),1)[0],I=Dy(Ms.default.useState(),
2)[1],W=Ms.default.useRef(null);if(!W.current)var ia=new me("observer".concat(g),function(){sa.mounted?I([]):sa.changedBeforeMount=!0}),sa=yD(W,ia,n);n=W.current.reaction;Ms.default.useDebugValue(n,Rl);Ms.default.useEffect(function(){xD(W);W.current?(W.current.mounted=!0,W.current.changedBeforeMount&&(W.current.changedBeforeMount=!1,I([]))):(W.current={reaction:new me("observer".concat(g),function(){I([])}),mounted:!0,changedBeforeMount:!1,cleanAt:Infinity},I([]));return function(){W.current.reaction.dispose();
W.current=null}},[]);var La,Xa;n.track(function(){try{La=b()}catch($a){Xa=$a}});if(Xa)throw Xa;return La}function lf(b,g){var n;if(Cy&&b.$$typeof===Cy)throw Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");g=null!==(n=null===g||void 0===g?void 0:g.forwardRef)&&void 0!==n?n:!1;var I=b,W=b.displayName||b.name;if(By&&b.$$typeof===By&&(g=!0,I=b.render,"function"!==
typeof I))throw Error("[mobx-react-lite] `render` property of ForwardRef was not a function");n=function(ia,sa){return Li(function(){return I(ia,sa)},W)};""!==W&&(n.displayName=W);b.contextTypes&&(n.contextTypes=b.contextTypes);g&&(n=(0,Br.forwardRef)(n));n=(0,Br.memo)(n);xj(b,n);return n}function xj(b,g){Object.keys(b).forEach(function(n){tD[n]||Object.defineProperty(g,n,Object.getOwnPropertyDescriptor(b,n))})}function Mi(b){var g=b.render;b=b.children||g;return"function"!==typeof b?null:Li(b)}function Ck(b){const g=
rg(),{callbacks:n}=Ji(),I=Ry.useRef(!1);Ry.useEffect(()=>{const W=Xa=>{var $a,kb;if(null==($a=b.current)?0:$a.contains(document.activeElement))null==(kb=n.onKeyDown)?void 0:kb.call(n,{type:"canvas",order:-1},Xa),I.current=Xa.shiftKey},ia=Xa=>{var $a,kb;if(null==($a=b.current)?0:$a.contains(document.activeElement))null==(kb=n.onKeyUp)?void 0:kb.call(n,{type:"canvas",order:-1},Xa),I.current=Xa.shiftKey},sa=Xa=>{var $a,kb,tb;!g.editingShape&&(null==($a=b.current)?0:$a.contains(document.activeElement))&&
!["INPUT","TEXTAREA"].includes(null!=(tb=null==(kb=document.activeElement)?void 0:kb.tagName)?tb:"")&&(Xa.preventDefault(),g.paste(Xa,I.current))},La=Xa=>{var $a,kb,tb;!g.editingShape&&0<g.selectedShapes.size&&(null==($a=b.current)?0:$a.contains(document.activeElement))&&!["INPUT","TEXTAREA"].includes(null!=(tb=null==(kb=document.activeElement)?void 0:kb.tagName)?tb:"")&&(Xa.preventDefault(),g.copy())};window.addEventListener("keydown",W);window.addEventListener("keyup",ia);document.addEventListener("paste",
sa);document.addEventListener("copy",La);return()=>{window.removeEventListener("keydown",W);window.removeEventListener("keyup",ia);document.removeEventListener("paste",sa);document.removeEventListener("copy",La)}},[])}function ek(b){const {inputs:g,callbacks:n}=Ji(),I=Vy.useRef(-1);return Vy.useMemo(()=>({onPointerDown:W=>{var ia,sa;const {order:La=0}=W;La||(null==(ia=W.currentTarget)?void 0:ia.setPointerCapture(W.pointerId));null==(sa=n.onPointerDown)?void 0:sa.call(n,{type:"shape",shape:b,order:La},
W);W.order=La+1},onPointerMove:W=>{var ia;const {order:sa=0}=W;null==(ia=n.onPointerMove)?void 0:ia.call(n,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onPointerUp:W=>{var ia,sa,La;const {order:Xa=0}=W;Xa||(null==(ia=W.currentTarget)?void 0:ia.releasePointerCapture(W.pointerId));null==(sa=n.onPointerUp)?void 0:sa.call(n,{type:"shape",shape:b,order:Xa},W);ia=Date.now();sa=ia-I.current;300<sa?I.current=ia:300>=sa&&(null==(La=n.onDoubleClick)?void 0:La.call(n,{type:"shape",shape:b,order:Xa},W),I.current=
-1);W.order=Xa+1},onPointerEnter:W=>{var ia;const {order:sa=0}=W;null==(ia=n.onPointerEnter)?void 0:ia.call(n,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onPointerLeave:W=>{var ia;const {order:sa=0}=W;null==(ia=n.onPointerLeave)?void 0:ia.call(n,{type:"shape",shape:b,order:sa},W);W.order=sa+1},onKeyUp:W=>{var ia;null==(ia=n.onKeyUp)?void 0:ia.call(n,{type:"shape",shape:b,order:-1},W)},onKeyDown:W=>{var ia;null==(ia=n.onKeyDown)?void 0:ia.call(n,{type:"shape",shape:b,order:-1},W)}}),[b.id,g,n])}
function cm(b){var {viewport:g,inputs:n,callbacks:I,components:W}=b;b=Ha(b,["viewport","inputs","callbacks","components"]);return(0,ob.jsx)(CD,{id:b.id,viewport:g,inputs:n,callbacks:I,components:W,meta:b.meta,children:(0,ob.jsx)(ED,Fa({},b))})}function se(){se=Object.assign?Object.assign.bind():function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],I;for(I in n)Object.prototype.hasOwnProperty.call(n,I)&&(b[I]=n[I])}return b};return se.apply(this,arguments)}function Xf(b,g,{checkForDefaultPrevented:n=
!0}={}){return function(I){null===b||void 0===b||b(I);if(!1===n||!I.defaultPrevented)return null===g||void 0===g?void 0:g(I)}}function Zi(...b){return g=>b.forEach(n=>{"function"===typeof n?n(g):null!==n&&void 0!==n&&(n.current=g)})}function ah(...b){return(0,YD.useCallback)(Zi(...b),b)}function ng(b,g=[]){let n=[];const I=()=>{const W=n.map(ia=>(0,Kq.createContext)(ia));return function(ia){const sa=(null===ia||void 0===ia?void 0:ia[b])||W;return(0,Kq.useMemo)(()=>({[`__scope${b}`]:Wa(Fa({},ia),{[b]:sa})}),
[ia,sa])}};I.scopeName=b;return[function(W,ia){function sa($a){const {scope:kb,children:tb}=$a,Ob=Ha($a,["scope","children"]);$a=(null===kb||void 0===kb?void 0:kb[b][Xa])||La;const ec=(0,Kq.useMemo)(()=>Ob,Object.values(Ob));return(0,Kq.createElement)($a.Provider,{value:ec},tb)}const La=(0,Kq.createContext)(ia),Xa=n.length;n=[...n,ia];sa.displayName=W+"Provider";return[sa,function($a,kb){if(kb=(0,Kq.useContext)((null===kb||void 0===kb?void 0:kb[b][Xa])||La))return kb;if(void 0!==ia)return ia;throw Error(`\`${$a}\` must be used within \`${W}\``);
}]},dm(I,...g)]}function dm(...b){const g=b[0];if(1===b.length)return g;const n=()=>{const I=b.map(W=>({useScope:W(),scopeName:W.scopeName}));return function(W){const ia=I.reduce((sa,{useScope:La,scopeName:Xa})=>{La=La(W)[`__scope${Xa}`];return Fa(Fa({},sa),La)},{});return(0,Kq.useMemo)(()=>({[`__scope${g.scopeName}`]:ia}),[ia])}};n.scopeName=g.scopeName;return n}function Mk(b){return(0,Gm.isValidElement)(b)&&b.type===$y}function kg(b,g){const n=Fa({},g);for(const I in g){const W=b[I],ia=g[I];/^on[A-Z]/.test(I)?
W&&ia?n[I]=(...sa)=>{ia(...sa);W(...sa)}:W&&(n[I]=W):"style"===I?n[I]=Fa(Fa({},W),ia):"className"===I&&(n[I]=[W,ia].filter(Boolean).join(" "))}return Fa(Fa({},b),n)}function Ti(b,g){b&&(0,ZD.flushSync)(()=>b.dispatchEvent(g))}function ij(b){const g=(0,Gv.useRef)(b);(0,Gv.useEffect)(()=>{g.current=b});return(0,Gv.useMemo)(()=>(...n)=>{var I;return null===(I=g.current)||void 0===I?void 0:I.call(g,...n)},[])}function Gf(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=ij(b);
(0,$D.useEffect)(()=>{const I=W=>{"Escape"===W.key&&n(W)};g.addEventListener("keydown",I);return()=>g.removeEventListener("keydown",I)},[n,g])}function sk(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=ij(b),I=(0,yn.useRef)(!1),W=(0,yn.useRef)(()=>{});(0,yn.useEffect)(()=>{const ia=La=>{if(La.target&&!I.current){let Xa=function(){Ak("dismissableLayer.pointerDownOutside",n,$a,{discrete:!0})};const $a={originalEvent:La};"touch"===La.pointerType?(g.removeEventListener("click",
W.current),W.current=Xa,g.addEventListener("click",W.current,{once:!0})):Xa()}I.current=!1},sa=window.setTimeout(()=>{g.addEventListener("pointerdown",ia)},0);return()=>{window.clearTimeout(sa);g.removeEventListener("pointerdown",ia);g.removeEventListener("click",W.current)}},[g,n]);return{onPointerDownCapture:()=>I.current=!0}}function Dj(b,g=null===globalThis||void 0===globalThis?void 0:globalThis.document){const n=ij(b),I=(0,yn.useRef)(!1);(0,yn.useEffect)(()=>{const W=ia=>{ia.target&&!I.current&&
Ak("dismissableLayer.focusOutside",n,{originalEvent:ia},{discrete:!1})};g.addEventListener("focusin",W);return()=>g.removeEventListener("focusin",W)},[g,n]);return{onFocusCapture:()=>I.current=!0,onBlurCapture:()=>I.current=!1}}function nl(){const b=new CustomEvent("dismissableLayer.update");document.dispatchEvent(b)}function Ak(b,g,n,{discrete:I}){const W=n.originalEvent.target;n=new CustomEvent(b,{bubbles:!1,cancelable:!0,detail:n});g&&W.addEventListener(b,g,{once:!0});I?Ti(W,n):W.dispatchEvent(n)}
function ql(b){const [g,n]=bz.useState(cE());zn(()=>{b||n(I=>null!==I&&void 0!==I?I:String(dE++))},[b]);return b||(g?`radix-${g}`:"")}function ui(b){return b.split("-")[0]}function Ui(b){return["top","bottom"].includes(ui(b))?"x":"y"}function cl(b){return"y"===b?"height":"width"}function tk(b,g,n){let {reference:I,floating:W}=b;var ia=I.x+I.width/2-W.width/2;const sa=I.y+I.height/2-W.height/2;b=Ui(g);var La=cl(b);La=I[La]/2-W[La]/2;const Xa="x"===b;switch(ui(g)){case "top":ia={x:ia,y:I.y-W.height};
break;case "bottom":ia={x:ia,y:I.y+I.height};break;case "right":ia={x:I.x+I.width,y:sa};break;case "left":ia={x:I.x-W.width,y:sa};break;default:ia={x:I.x,y:I.y}}switch(g.split("-")[1]){case "start":ia[b]-=La*(n&&Xa?-1:1);break;case "end":ia[b]+=La*(n&&Xa?-1:1)}return ia}function dl(b){return"number"!=typeof b?Fa({top:0,right:0,bottom:0,left:0},b):{top:b,right:b,bottom:b,left:b}}function sm(b){return Wa(Fa({},b),{top:b.y,left:b.x,right:b.x+b.width,bottom:b.y+b.height})}function Cm(b,g){return Rd(this,
null,function*(){var n;void 0===g&&(g={});const {x:I,y:W,platform:ia,rects:sa,elements:La,strategy:Xa}=b,{boundary:$a="clippingAncestors",rootBoundary:kb="viewport",elementContext:tb="floating",altBoundary:Ob=!1,padding:ec=0}=g,Ub=dl(ec),pc=La[Ob?"floating"===tb?"reference":"floating":tb],mc=sm(yield ia.getClippingRect({element:null==(n=yield null==ia.isElement?void 0:ia.isElement(pc))||n?pc:pc.contextElement||(yield null==ia.getDocumentElement?void 0:ia.getDocumentElement(La.floating)),boundary:$a,
rootBoundary:kb,strategy:Xa}));n=sm(ia.convertOffsetParentRelativeRectToViewportRelativeRect?yield ia.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===tb?Wa(Fa({},sa.floating),{x:I,y:W}):sa.reference,offsetParent:yield null==ia.getOffsetParent?void 0:ia.getOffsetParent(La.floating),strategy:Xa}):sa[tb]);return{top:mc.top-n.top+Ub.top,bottom:n.bottom-mc.bottom+Ub.bottom,left:mc.left-n.left+Ub.left,right:n.right-mc.right+Ub.right}})}function ol(b){return b.replace(/left|right|bottom|top/g,
g=>fE[g])}function Pm(b,g,n){void 0===n&&(n=!1);const I=b.split("-")[1],W=Ui(b);b=cl(W);n="x"===W?I===(n?"end":"start")?"right":"left":"start"===I?"bottom":"top";return g.reference[b]>g.floating[b]&&(n=ol(n)),{main:n,cross:ol(n)}}function Nk(b){return b.replace(/start|end/g,g=>gE[g])}function Fj(b,g){return{top:b.top-g.height,right:b.right-g.width,bottom:b.bottom-g.height,left:b.left-g.width}}function Dk(b){return dz.some(g=>0<=b[g])}function Vi(b){return null==b?window:b&&b.document&&b.location&&
b.alert&&b.setInterval?b:(b=b.ownerDocument)&&b.defaultView||window}function Pk(b){return Vi(b).getComputedStyle(b)}function Gj(b){return b&&b.document&&b.location&&b.alert&&b.setInterval?"":b?(b.nodeName||"").toLowerCase():""}function Qk(){const b=navigator.userAgentData;return null!=b&&b.brands?b.brands.map(g=>g.brand+"/"+g.version).join(" "):navigator.userAgent}function Hj(b){return b instanceof Vi(b).HTMLElement}function Tj(b){return b instanceof Vi(b).Element}function uk(b){return"undefined"==
typeof ShadowRoot?!1:b instanceof Vi(b).ShadowRoot||b instanceof ShadowRoot}function yj(b){const {overflow:g,overflowX:n,overflowY:I}=Pk(b);return/auto|scroll|overlay|hidden/.test(g+I+n)}function rm(b){const g=/firefox/i.test(Qk());b=Pk(b);return"none"!==b.transform||"none"!==b.perspective||"paint"===b.contain||["transform","perspective"].includes(b.willChange)||g&&"filter"===b.willChange||g&&!!b.filter&&"none"!==b.filter}function Tl(){return!/^((?!chrome|android).)*safari/i.test(Qk())}function sj(b,
g,n){var I,W,ia,sa;void 0===g&&(g=!1);void 0===n&&(n=!1);var La=b.getBoundingClientRect();let Xa=1,$a=1;g&&Hj(b)&&(Xa=0<b.offsetWidth&&Rt(La.width)/b.offsetWidth||1,$a=0<b.offsetHeight&&Rt(La.height)/b.offsetHeight||1);b=Tj(b)?Vi(b):window;g=!Tl()&&n;n=(La.left+(g&&null!=(I=null==(W=b.visualViewport)?void 0:W.offsetLeft)?I:0))/Xa;I=(La.top+(g&&null!=(ia=null==(sa=b.visualViewport)?void 0:sa.offsetTop)?ia:0))/$a;ia=La.width/Xa;La=La.height/$a;return{width:ia,height:La,top:I,right:n+ia,bottom:I+La,
left:n,x:n,y:I}}function rj(b){return(g=b,(g instanceof Vi(g).Node?b.ownerDocument:b.document)||window.document).documentElement;var g}function fm(b){return Tj(b)?{scrollLeft:b.scrollLeft,scrollTop:b.scrollTop}:{scrollLeft:b.pageXOffset,scrollTop:b.pageYOffset}}function rk(b){return sj(rj(b)).left+fm(b).scrollLeft}function fk(b){return"html"===Gj(b)?b:b.assignedSlot||b.parentNode||(uk(b)?b.host:null)||rj(b)}function Hh(b){return Hj(b)&&"fixed"!==getComputedStyle(b).position?b.offsetParent:null}function gj(b){for(var g=
Vi(b),n=Hh(b);n&&["table","td","th"].includes(Gj(n))&&"static"===getComputedStyle(n).position;)n=Hh(n);if(!n||"html"!==Gj(n)&&("body"!==Gj(n)||"static"!==getComputedStyle(n).position||rm(n))){if(!n)a:{b=fk(b);for(uk(b)&&(b=b.host);Hj(b)&&!["html","body"].includes(Gj(b));){if(rm(b)){n=b;break a}b=b.parentNode}n=null}g=n||g}return g}function vk(b){if(Hj(b))return{width:b.offsetWidth,height:b.offsetHeight};b=sj(b);return{width:b.width,height:b.height}}function nk(b){const g=fk(b);return["html","body",
"#document"].includes(Gj(g))?b.ownerDocument.body:Hj(g)&&yj(g)?g:nk(g)}function oh(b,g){var n;void 0===g&&(g=[]);var I=nk(b);b=I===(null==(n=b.ownerDocument)?void 0:n.body);n=Vi(I);I=b?[n].concat(n.visualViewport||[],yj(I)?I:[]):I;g=g.concat(I);return b?g:g.concat(oh(I))}function ih(b,g,n){return"viewport"===g?sm(function(I,W){var ia=Vi(I),sa=rj(I);ia=ia.visualViewport;I=sa.clientWidth;sa=sa.clientHeight;let La=0,Xa=0;if(ia){I=ia.width;sa=ia.height;const $a=Tl();($a||!$a&&"fixed"===W)&&(La=ia.offsetLeft,
Xa=ia.offsetTop)}return{width:I,height:sa,x:La,y:Xa}}(b,n)):Tj(g)?function(I,W){var ia=sj(I,!1,"fixed"===W);W=ia.top+I.clientTop;ia=ia.left+I.clientLeft;return{top:W,left:ia,x:ia,y:W,right:ia+I.clientWidth,bottom:W+I.clientHeight,width:I.clientWidth,height:I.clientHeight}}(g,n):sm(function(I){var W;const ia=rj(I);var sa=fm(I);const La=null==(W=I.ownerDocument)?void 0:W.body;W=Ns(ia.scrollWidth,ia.clientWidth,La?La.scrollWidth:0,La?La.clientWidth:0);const Xa=Ns(ia.scrollHeight,ia.clientHeight,La?La.scrollHeight:
0,La?La.clientHeight:0);I=-sa.scrollLeft+rk(I);sa=-sa.scrollTop;return"rtl"===Pk(La||ia).direction&&(I+=Ns(ia.clientWidth,La?La.clientWidth:0)-W),{width:W,height:Xa,x:I,y:sa}}(rj(b)))}function Cg(b){const g=oh(b),n=["absolute","fixed"].includes(Pk(b).position)&&Hj(b)?gj(b):b;return Tj(n)?g.filter(I=>{var W;if(W=Tj(I))a:if(W=null==n.getRootNode?void 0:n.getRootNode(),I.contains(n))W=!0;else{if(W&&uk(W)){W=n;do{if(W&&I===W){W=!0;break a}W=W.parentNode||W.host}while(W)}W=!1}return W&&"body"!==Gj(I)}):
[]}function Wj(b,g,n,I){void 0===I&&(I={});const {ancestorScroll:W=!0,ancestorResize:ia=!0,elementResize:sa=!0,animationFrame:La=!1}=I,Xa=W&&!La,$a=ia&&!La,kb=Xa||$a?[...(Tj(b)?oh(b):[]),...oh(g)]:[];kb.forEach(Ub=>{Xa&&Ub.addEventListener("scroll",n,{passive:!0});$a&&Ub.addEventListener("resize",n)});let tb,Ob=null;if(sa){let Ub=!0;Ob=new ResizeObserver(()=>{Ub||n();Ub=!1});Tj(b)&&!La&&Ob.observe(b);Ob.observe(g)}let ec=La?sj(b):null;return La&&function pc(){const mc=sj(b);!ec||mc.x===ec.x&&mc.y===
ec.y&&mc.width===ec.width&&mc.height===ec.height||n();ec=mc;tb=requestAnimationFrame(pc)}(),n(),()=>{var pc;kb.forEach(mc=>{Xa&&mc.removeEventListener("scroll",n);$a&&mc.removeEventListener("resize",n)});null==(pc=Ob)||pc.disconnect();Ob=null;La&&cancelAnimationFrame(tb)}}function Ch(b,g){if(b===g)return!0;if(typeof b!==typeof g)return!1;if("function"===typeof b&&b.toString()===g.toString())return!0;let n,I;if(b&&g&&"object"==typeof b){if(Array.isArray(b)){var W=b.length;if(W!=g.length)return!1;for(n=
W;0!==n--;)if(!Ch(b[n],g[n]))return!1;return!0}I=Object.keys(b);W=I.length;if(W!==Object.keys(g).length)return!1;for(n=W;0!==n--;)if(!Object.prototype.hasOwnProperty.call(g,I[n]))return!1;for(n=W;0!==n--;)if(W=I[n],!("_owner"===W&&b.$$typeof||Ch(b[W],g[W])))return!1;return!0}return b!==b&&g!==g}function $i(b){const g=Nn.useRef(b);Jv(()=>{g.current=b});return g}function ug(b){let {middleware:g,placement:n="bottom",strategy:I="absolute",whileElementsMounted:W}=void 0===b?{}:b;const ia=Nn.useRef(null),
sa=Nn.useRef(null),La=$i(W),Xa=Nn.useRef(null),[$a,kb]=Nn.useState({x:null,y:null,strategy:I,placement:n,middlewareData:{}}),[tb,Ob]=Nn.useState(g);Ch(null==tb?void 0:tb.map(Ic=>{({options:Ic}=Ic);return Ic}),null==g?void 0:g.map(Ic=>{({options:Ic}=Ic);return Ic}))||Ob(g);const ec=Nn.useCallback(()=>{ia.current&&sa.current&&nE(ia.current,sa.current,{middleware:tb,placement:n,strategy:I}).then(Ic=>{Ub.current&&oE.flushSync(()=>{kb(Ic)})})},[tb,n,I]);Jv(()=>{Ub.current&&ec()},[ec]);const Ub=Nn.useRef(!1);
Jv(()=>{Ub.current=!0;return()=>{Ub.current=!1}},[]);const pc=Nn.useCallback(()=>{"function"===typeof Xa.current&&(Xa.current(),Xa.current=null);if(ia.current&&sa.current)if(La.current){const Ic=La.current(ia.current,sa.current,ec);Xa.current=Ic}else ec()},[ec,La]),mc=Nn.useCallback(Ic=>{ia.current=Ic;pc()},[pc]),Vb=Nn.useCallback(Ic=>{sa.current=Ic;pc()},[pc]),uc=Nn.useMemo(()=>({reference:ia,floating:sa}),[]);return Nn.useMemo(()=>Wa(Fa({},$a),{update:ec,refs:uc,reference:mc,floating:Vb}),[$a,ec,
uc,mc,Vb])}function Oi(b){const [g,n]=(0,rE.useState)(void 0);zn(()=>{if(b){n({width:b.offsetWidth,height:b.offsetHeight});const I=new ResizeObserver(W=>{if(Array.isArray(W)&&W.length){W=W[0];if("borderBoxSize"in W){W=W.borderBoxSize;var ia=Array.isArray(W)?W[0]:W;W=ia.inlineSize;ia=ia.blockSize}else W=b.offsetWidth,ia=b.offsetHeight;n({width:W,height:ia})}});I.observe(b,{box:"border-box"});return()=>I.unobserve(b)}n(void 0)},[b]);return g}function Qf(b){return void 0!==b}function Jg(b){return null!==
b}function jj(b){const [g,n="center"]=b.split("-");return[g,n]}function ni(b,g){return(0,lp.useReducer)((n,I)=>{I=g[n][I];return null!==I&&void 0!==I?I:n},b)}function nh(b){const [g,n]=(0,lp.useState)(),I=(0,lp.useRef)({}),W=(0,lp.useRef)(b),ia=(0,lp.useRef)("none"),[sa,La]=ni(b?"mounted":"unmounted",{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});(0,lp.useEffect)(()=>{const Xa=gg(I.current);
ia.current="mounted"===sa?Xa:"none"},[sa]);zn(()=>{const Xa=I.current,$a=W.current;if($a!==b){const kb=ia.current,tb=gg(Xa);b?La("MOUNT"):"none"===tb||"none"===(null===Xa||void 0===Xa?void 0:Xa.display)?La("UNMOUNT"):$a&&kb!==tb?La("ANIMATION_OUT"):La("UNMOUNT");W.current=b}},[b,La]);zn(()=>{if(g){const Xa=kb=>{const tb=gg(I.current).includes(kb.animationName);kb.target===g&&tb&&(0,xE.flushSync)(()=>La("ANIMATION_END"))},$a=kb=>{kb.target===g&&(ia.current=gg(I.current))};g.addEventListener("animationstart",
$a);g.addEventListener("animationcancel",Xa);g.addEventListener("animationend",Xa);return()=>{g.removeEventListener("animationstart",$a);g.removeEventListener("animationcancel",Xa);g.removeEventListener("animationend",Xa)}}La("ANIMATION_END")},[g,La]);return{isPresent:["mounted","unmountSuspended"].includes(sa),ref:(0,lp.useCallback)(Xa=>{Xa&&(I.current=getComputedStyle(Xa));n(Xa)},[])}}function gg(b){return(null===b||void 0===b?void 0:b.animationName)||"none"}function Qg({prop:b,defaultProp:g,onChange:n=
()=>{}}){const [I,W]=Jl({defaultProp:g,onChange:n}),ia=void 0!==b;g=ia?b:I;const sa=ij(n);n=(0,St.useCallback)(La=>{ia?(La="function"===typeof La?La(b):La,La!==b&&sa(La)):W(La)},[ia,b,W,sa]);return[g,n]}function Jl({defaultProp:b,onChange:g}){b=(0,St.useState)(b);const [n]=b,I=(0,St.useRef)(n),W=ij(g);(0,St.useEffect)(()=>{I.current!==n&&(W(n),I.current=n)},[n,I,W]);return b}function zi(b,g){const n=Math.abs(g.top-b.y),I=Math.abs(g.bottom-b.y),W=Math.abs(g.right-b.x);b=Math.abs(g.left-b.x);switch(Math.min(n,
I,W,b)){case b:return"left";case W:return"right";case n:return"top";case I:return"bottom";default:return null}}function Qi(b){b=b.slice();b.sort((g,n)=>g.x<n.x?-1:g.x>n.x?1:g.y<n.y?-1:g.y>n.y?1:0);return Qb(b)}function Qb(b){if(1>=b.length)return b.slice();const g=[];for(var n=0;n<b.length;n++){for(var I=b[n];2<=g.length;){var W=g[g.length-1],ia=g[g.length-2];if((W.x-ia.x)*(I.y-ia.y)>=(W.y-ia.y)*(I.x-ia.x))g.pop();else break}g.push(I)}g.pop();n=[];for(I=b.length-1;0<=I;I--){for(W=b[I];2<=n.length;){ia=
n[n.length-1];const sa=n[n.length-2];if((ia.x-sa.x)*(W.y-sa.y)>=(ia.y-sa.y)*(W.x-sa.x))n.pop();else break}n.push(W)}n.pop();return 1===g.length&&1===n.length&&g[0].x===n[0].x&&g[0].y===n[0].y?g:g.concat(n)}function fc(b){var {side:g,content:n,sideOffset:I=10}=b;b=Ha(b,["side","content","sideOffset"]);return n?(0,ob.jsx)(IE,{delayDuration:300,children:(0,ob.jsxs)(JE,{children:[(0,ob.jsx)(KE,{asChild:!0,children:b.children}),(0,ob.jsx)(LE,{children:(0,ob.jsxs)(ME,Wa(Fa({className:"tl-tooltip-content",
sideOffset:I,side:g},b),{children:[n,(0,ob.jsx)(NE,{className:"tl-tooltip-arrow"})]}))})]})}):(0,ob.jsx)(ob.Fragment,{children:b.children})}function dc(b){var {className:g,tooltip:n,tooltipSide:I}=b;b=Ha(b,["className","tooltip","tooltipSide"]);return(0,ob.jsx)(fc,{content:n,side:I,children:(0,ob.jsx)("button",Fa({className:"tl-button "+(null!=g?g:"")},b))})}function ja(b){var g=b+"CollectionProvider";const [n,I]=ng(g),[W,ia]=n(g,{collectionRef:{current:null},itemMap:new Map}),sa=kb=>{const {scope:tb,
children:Ob}=kb;kb=Uo.default.useRef(null);const ec=Uo.default.useRef(new Map).current;return Uo.default.createElement(W,{scope:tb,itemMap:ec,collectionRef:kb},Ob)};Object.assign(sa,{displayName:g});const La=b+"CollectionSlot";g=Uo.default.forwardRef((kb,tb)=>{const {scope:Ob,children:ec}=kb;kb=ia(La,Ob);tb=ah(tb,kb.collectionRef);return Uo.default.createElement(Lq,{ref:tb},ec)});Object.assign(g,{displayName:La});const Xa=b+"CollectionItemSlot",$a=Uo.default.forwardRef((kb,tb)=>{const {scope:Ob,children:ec}=
kb,Ub=Ha(kb,["scope","children"]),pc=Uo.default.useRef(null);kb=ah(tb,pc);const mc=ia(Xa,Ob);Uo.default.useEffect(()=>{mc.itemMap.set(pc,Fa({ref:pc},Ub));return()=>void mc.itemMap.delete(pc)});return Uo.default.createElement(Lq,{["data-radix-collection-item"]:"",ref:kb},ec)});Object.assign($a,{displayName:Xa});return[{Provider:sa,Slot:g,ItemSlot:$a},function(kb){const tb=ia(b+"CollectionConsumer",kb);return Uo.default.useCallback(()=>{const Ob=tb.collectionRef.current;if(!Ob)return[];const ec=Array.from(Ob.querySelectorAll("[data-radix-collection-item]"));
return Array.from(tb.itemMap.values()).sort((Ub,pc)=>ec.indexOf(Ub.ref.current)-ec.indexOf(pc.ref.current))},[tb.collectionRef,tb.itemMap])},I]}function Eb(b){const g=(0,sz.useContext)(OE);return b||g||"ltr"}function Sb(){(0,PE.useEffect)(()=>{var b,g;const n=document.querySelectorAll("[data-radix-focus-guard]");document.body.insertAdjacentElement("afterbegin",null!==(b=n[0])&&void 0!==b?b:vb());document.body.insertAdjacentElement("beforeend",null!==(g=n[1])&&void 0!==g?g:vb());Qv++;return()=>{1===
Qv&&document.querySelectorAll("[data-radix-focus-guard]").forEach(I=>I.remove());Qv--}},[])}function vb(){const b=document.createElement("span");b.setAttribute("data-radix-focus-guard","");b.tabIndex=0;b.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none";return b}function yb(b,{select:g=!1}={}){const n=document.activeElement;for(const I of b)if(Zb(I,{select:g}),document.activeElement!==n)break}function Pb(b){const g=[];for(b=document.createTreeWalker(b,NodeFilter.SHOW_ELEMENT,
{acceptNode:n=>{const I="INPUT"===n.tagName&&"hidden"===n.type;return n.disabled||n.hidden||I?NodeFilter.FILTER_SKIP:0<=n.tabIndex?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});b.nextNode();)g.push(b.currentNode);return g}function sb(b,g){for(const n of b)if(!Lb(n,{upTo:g}))return n}function Lb(b,{upTo:g}){if("hidden"===getComputedStyle(b).visibility)return!0;for(;b&&(void 0===g||b!==g);){if("none"===getComputedStyle(b).display)return!0;b=b.parentElement}return!1}function Zb(b,{select:g=!1}=
{}){if(b&&b.focus){const n=document.activeElement;b.focus({preventScroll:!0});b!==n&&b instanceof HTMLInputElement&&"select"in b&&g&&b.select()}}function Cc(b,g){b=[...b];g=b.indexOf(g);-1!==g&&b.splice(g,1);return b}function Pc(b){return b.filter(g=>"A"!==g.tagName)}function Tc(b,g,n){b=b.key;n="rtl"!==n?b:"ArrowLeft"===b?"ArrowRight":"ArrowRight"===b?"ArrowLeft":b;if("vertical"!==g||!["ArrowLeft","ArrowRight"].includes(n))if("horizontal"!==g||!["ArrowUp","ArrowDown"].includes(n))return WE[n]}function vd(b){const g=
document.activeElement;for(const n of b){if(n===g)break;n.focus();if(document.activeElement!==g)break}}function Td(b,g){return b.map((n,I)=>b[(g+I)%b.length])}function Gd(b,g){var n=(0,$E.useState)(function(){return{value:b,callback:g,facade:{get current(){return n.value},set current(I){var W=n.value;W!==I&&(n.value=I,n.callback(I,W))}}}})[0];n.callback=g;return n.facade}function Dd(b,g){return Gd(g||null,function(n){return b.forEach(function(I){"function"===typeof I?I(n):I&&(I.current=n);return I})})}
function Id(b){return b}function ye(b,g){void 0===g&&(g=Id);var n=[],I=!1;return{read:function(){if(I)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:b},useMedium:function(W){var ia=g(W,I);n.push(ia);return function(){n=n.filter(function(sa){return sa!==ia})}},assignSyncMedium:function(W){for(I=!0;n.length;){var ia=n;n=[];ia.forEach(W)}n={push:function(sa){return W(sa)},filter:function(){return n}}},assignMedium:function(W){I=
!0;var ia=[];if(n.length){var sa=n;n=[];sa.forEach(W);ia=n}var La=function(){var Xa=ia;ia=[];Xa.forEach(W)};Promise.resolve().then(La);n={push:function(Xa){ia.push(Xa);Promise.resolve().then(La)},filter:function(Xa){ia=ia.filter(Xa);return n}}}}}function Rf(b){const g=document.activeElement;for(const n of b){if(n===g)break;n.focus();if(document.activeElement!==g)break}}function te(b,g){return b.map((n,I)=>b[(g+I)%b.length])}function Ze(b,g,n){const I=1<g.length&&Array.from(g).every(ia=>ia===g[0])?
g[0]:g,W=n?b.indexOf(n):-1;b=te(b,Math.max(W,0));1===I.length&&(b=b.filter(ia=>ia!==n));b=b.find(ia=>ia.toLowerCase().startsWith(I.toLowerCase()));return b!==n?b:void 0}function Pe(b){return g=>"mouse"===g.pointerType?b(g):void 0}function Re(b,[g,n]){return Math.min(n,Math.max(g,b))}function mg(b){const g=(0,aA.useRef)({value:b,previous:b});return(0,aA.useMemo)(()=>{g.current.value!==b&&(g.current.previous=g.current.value,g.current.value=b);return g.current.previous},[b])}function Pf(b=[],g,n){b=
[...b];b[n]=g;return b.sort((I,W)=>I-W)}function Ni(b,g,n){return 100/(n-g)*(b-g)}function Nf(b,g){if(2<g)return`Value ${b+1} of ${g}`;if(2===g)return["Minimum","Maximum"][b]}function eg(b,g){if(1===b.length)return 0;b=b.map(I=>Math.abs(I-g));const n=Math.min(...b);return b.indexOf(n)}function mh(b,g,n){b/=2;const I=Lg([0,50],[0,b]);return(b-I(g)*n)*n}function Og(b){return b.slice(0,-1).map((g,n)=>b[n+1]-g)}function Lg(b,g){return n=>b[0]===b[1]||g[0]===g[1]?g[0]:g[0]+(g[1]-g[0])/(b[1]-b[0])*(n-b[0])}
function lh(b,g){g=Math.pow(10,g);return Math.round(b*g)/g}function tg(b){function g(La){return La?(0,ob.jsx)("div",{className:"tl-color-bg",style:{backgroundColor:La},children:(0,ob.jsx)("div",{className:`w-full h-full bg-${La}-500`})}):(0,ob.jsx)("div",{className:"tl-color-bg",children:(0,ob.jsx)(Gh,{name:"color-swatch"})})}var {color:n,opacity:I,popoverSide:W,setColor:ia,setOpacity:sa}=b;b=Ha(b,["color","opacity","popoverSide","setColor","setOpacity"]);return(0,ob.jsx)(iA,Wa(Fa({},b),{border:!0,
arrow:!0,side:W,label:(0,ob.jsx)(fc,{content:"Color",side:W,sideOffset:14,children:g(n)}),children:(0,ob.jsxs)("div",{className:"p-1",children:[(0,ob.jsx)("div",{className:"tl-color-palette",children:Object.values(xc).map(La=>(0,ob.jsx)("button",{className:`tl-color-drip m-1${La===n?" active":""}`,onClick:()=>ia(La),children:g(La)},La))}),sa&&(0,ob.jsx)("div",{className:"mx-1 my-2",children:(0,ob.jsxs)(UF,{defaultValue:[null!=I?I:0],onValueCommit:La=>sa(La[0]),max:1,step:.1,"aria-label":"Opacity",
className:"tl-slider-root",children:[(0,ob.jsx)(VF,{className:"tl-slider-track",children:(0,ob.jsx)(WF,{className:"tl-slider-range"})}),(0,ob.jsx)(XF,{className:"tl-slider-thumb"})]})})]})}))}function fg(b){const g=ij(b),n=(0,yf.useRef)(""),I=(0,yf.useRef)(0);b=(0,yf.useCallback)(ia=>{ia=n.current+ia;g(ia);(function Xa(La){n.current=La;window.clearTimeout(I.current);""!==La&&(I.current=window.setTimeout(()=>Xa(""),1E3))})(ia)},[g]);const W=(0,yf.useCallback)(()=>{n.current="";window.clearTimeout(I.current)},
[]);(0,yf.useEffect)(()=>()=>window.clearTimeout(I.current),[]);return[n,b,W]}function Zg(b,g,n){const I=1<g.length&&Array.from(g).every(ia=>ia===g[0])?g[0]:g,W=n?b.indexOf(n):-1;b=Kf(b,Math.max(W,0));1===I.length&&(b=b.filter(ia=>ia!==n));b=b.find(ia=>ia.textValue.toLowerCase().startsWith(I.toLowerCase()));return b!==n?b:void 0}function Kf(b,g){return b.map((n,I)=>b[(g+I)%b.length])}function Ri(b){var {options:g,tooltip:n,value:I,onValueChange:W}=b;b=Ha(b,["options","tooltip","value","onValueChange"]);
const [ia,sa]=aG.useState(!1);return(0,ob.jsx)("div",Wa(Fa({},b),{className:"tl-select-input",children:(0,ob.jsxs)(tG,{open:ia,onOpenChange:sa,value:I,onValueChange:W,children:[(0,ob.jsx)(fc,{content:n,children:(0,ob.jsxs)(uG,{className:"tl-select-input-trigger",children:[(0,ob.jsx)("div",{className:"tl-select-input-trigger-value",children:(0,ob.jsx)(vG,{})}),(0,ob.jsx)(wG,{style:{lineHeight:1},children:(0,ob.jsx)(Gh,{name:ia?"chevron-up":"chevron-down"})})]})}),(0,ob.jsx)(xG,{className:"tl-select-input-portal",
children:(0,ob.jsxs)(yG,{className:"tl-select-input-content",children:[(0,ob.jsx)(CG,{}),(0,ob.jsx)(zG,{className:"tl-select-input-viewport",children:g.map(La=>(0,ob.jsx)(AG,{className:"tl-select-input-select-item",value:La.value,children:(0,ob.jsx)(BG,{children:La.label})},La.value))}),(0,ob.jsx)(DG,{})]})})]})}))}function kh(b,g){return function(n){return b(g(n))}}function fi(b,g){return g(b)}function Nj(b,g){return function(n){return b(g,n)}}function ri(b,g){return function(){return b(g)}}function Mj(b,
g){g(b);return b}function Nh(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return g}function Ij(b){b()}function Yl(b){return function(){return b}}function zm(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(){g.map(Ij)}}function $f(){}function bi(b,g){return b(1,g)}function Im(b,g){b(0,g)}function $l(b){b(2)}function Xk(b){return b(4)}function Wf(b,g){return bi(b,Nj(g,0))}function Bi(b,g){var n=b(1,function(I){n();g(I)});return n}function Hf(){var b=
[];return function(g,n){switch(g){case 2:b.splice(0,b.length);break;case 1:return b.push(n),function(){var I=b.indexOf(n);-1<I&&b.splice(I,1)};case 0:b.slice().forEach(function(I){I(n)});break;default:throw Error("unrecognized action "+g);}}}function qf(b){var g=b,n=Hf();return function(I,W){switch(I){case 1:W(g);break;case 0:g=W;break;case 4:return g}return n(I,W)}}function Zl(b){var g,n;return function(I,W){switch(I){case 1:if(W){if(n===W)break;g&&g();n=W;return g=b(1,W)}g&&g();return $f;case 2:g&&
g();n=null;break;default:throw Error("unrecognized action "+I);}}}function uj(b){return Mj(Hf(),function(g){return Wf(b,g)})}function vh(b,g){return Mj(qf(g),function(n){return Wf(b,n)})}function xl(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(I){return g.reduceRight(fi,I)}}function Jd(b){for(var g=arguments.length,n=Array(1<g?g-1:0),I=1;I<g;I++)n[I-1]=arguments[I];var W=xl.apply(void 0,n);return function(ia,sa){switch(ia){case 1:return bi(b,W(sa));case 2:b(2);
break;default:throw Error("unrecognized action "+ia);}}}function Cf(b,g){return b===g}function ze(b){void 0===b&&(b=Cf);var g;return function(n){return function(I){b(g,I)||(g=I,n(I))}}}function Ae(b){return function(g){return function(n){b(n)&&g(n)}}}function Ef(b){return function(g){return kh(g,b)}}function Kg(b){return function(g){return function(){return g(b)}}}function gi(b,g){return function(n){return function(I){return n(g=b(g,I))}}}function qh(b){return function(g){return function(n){0<b?b--:
g(n)}}}function gk(b){var g,n;return function(I){return function(W){g=W;n||=setTimeout(function(){n=void 0;I(g)},b)}}}function He(b){var g,n;return function(I){return function(W){g=W;n&&clearTimeout(n);n=setTimeout(function(){I(g)},b)}}}function ue(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];var I=Array(g.length),W=0,ia=null,sa=Math.pow(2,g.length)-1;g.forEach(function(La,Xa){var $a=Math.pow(2,Xa);bi(La,function(kb){var tb=W;W|=$a;I[Xa]=kb;tb!==sa&&W===sa&&ia&&(ia(),ia=null)})});
return function(La){return function(Xa){var $a=function(){return La([Xa].concat(I))};W===sa?$a():ia=$a}}}function qi(){for(var b=arguments.length,g=Array(b),n=0;n<b;n++)g[n]=arguments[n];return function(I,W){switch(I){case 1:return zm.apply(void 0,g.map(function(ia){return ia(1,W)}));case 2:break;default:throw Error("unrecognized action "+I);}}}function ee(b,g){void 0===g&&(g=Cf);return Jd(b,ze(g))}function wi(){for(var b=Hf(),g=arguments.length,n=Array(g),I=0;I<g;I++)n[I]=arguments[I];var W=Array(n.length),
ia=0,sa=Math.pow(2,n.length)-1;n.forEach(function(La,Xa){var $a=Math.pow(2,Xa);bi(La,function(kb){W[Xa]=kb;ia|=$a;ia===sa&&b(0,W)})});return function(La,Xa){switch(La){case 1:return ia===sa&&Xa(W),b(1,Xa);case 2:b(2);break;default:throw Error("unrecognized action "+La);}}}function rh(b,g,n){void 0===g&&(g=[]);n=(void 0===n?{singleton:!0}:n).singleton;return{id:Symbol(),constructor:b,dependencies:g,singleton:n}}function yl(b){var g=new Map;return function W(I){var ia=I.id,sa=I.constructor,La=I.dependencies;
if((I=I.singleton)&&g.has(ia))return g.get(ia);sa=sa(La.map(function(Xa){return W(Xa)}));I&&g.set(ia,sa);return sa}(b)}function si(b,g){if(null==b)return{};var n={},I=Object.keys(b),W;for(W=0;W<I.length;W++){var ia=I[W];0<=g.indexOf(ia)||(n[ia]=b[ia])}return n}function wh(b,g){if(b){if("string"===typeof b)return Df(b,g);var n=Object.prototype.toString.call(b).slice(8,-1);"Object"===n&&b.constructor&&(n=b.constructor.name);if("Map"===n||"Set"===n)return Array.from(b);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Df(b,
g)}}function Df(b,g){if(null==g||g>b.length)g=b.length;for(var n=0,I=Array(g);n<g;n++)I[n]=b[n];return I}function Xg(b,g){var n="undefined"!==typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=n.call(b)).next.bind(n);if(Array.isArray(b)||(n=wh(b))||g&&b&&"number"===typeof b.length){n&&(b=n);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}function Ul(b,g){for(var n={},I={},W=0,ia=b.length;W<ia;)I[b[W]]=1,W+=1;for(var sa in g)I.hasOwnProperty(sa)||(n[sa]=g[sa]);return n}function zl(b,g,n){function I(tb,Ob){tb.propsReady&&(0,tb.propsReady)(0,!1);for(var ec=Xg(sa),Ub;!(Ub=ec()).done;)Ub=Ub.value,(0,tb[g.required[Ub]])(0,Ob[Ub]);for(ec=Xg(La);!(Ub=ec()).done;)if(Ub=Ub.value,Ub in Ob)(0,tb[g.optional[Ub]])(0,Ob[Ub]);tb.propsReady&&(0,tb.propsReady)(0,!0)}function W(tb){return Xa.reduce(function(Ob,ec){Ob[ec]=function(Ub){(0,tb[g.methods[ec]])(0,
Ub)};return Ob},{})}function ia(tb){return $a.reduce(function(Ob,ec){Ob[ec]=Zl(tb[g.events[ec]]);return Ob},{})}var sa=Object.keys(g.required||{}),La=Object.keys(g.optional||{}),Xa=Object.keys(g.methods||{}),$a=Object.keys(g.events||{}),kb=(0,An.createContext)({});return{Component:(0,An.forwardRef)(function(tb,Ob){var ec=tb.children,Ub=si(tb,GG),pc=(0,An.useState)(function(){return Mj(yl(b),function(Vb){return I(Vb,Ub)})})[0],mc=(0,An.useState)(ri(ia,pc))[0];ju(function(){for(var Vb=Xg($a),uc;!(uc=
Vb()).done;)if(uc=uc.value,uc in Ub)(0,mc[uc])(1,Ub[uc]);return function(){Object.values(mc).map($l)}},[Ub,mc,pc]);ju(function(){I(pc,Ub)});(0,An.useImperativeHandle)(Ob,Yl(W(pc)));return(0,An.createElement)(kb.Provider,{value:pc},n?(0,An.createElement)(n,Ul([].concat(sa,La,$a),Ub),ec):ec)}),usePublisher:function(tb){return(0,An.useCallback)(Nj(Im,(0,An.useContext)(kb)[tb]),[tb])},useEmitterValue:function(tb){var Ob=(0,An.useContext)(kb)[tb];tb=(0,An.useState)(ri(Xk,Ob));var ec=tb[0],Ub=tb[1];ju(function(){return bi(Ob,
function(pc){pc!==ec&&Ub(Yl(pc))})},[Ob,ec]);return ec},useEmitter:function(tb,Ob){var ec=(0,An.useContext)(kb)[tb];ju(function(){return ec(1,Ob)},[Ob,ec])}}}function Ve(){return Ve=Object.assign||function(b){for(var g=1;g<arguments.length;g++){var n=arguments[g],I;for(I in n)Object.prototype.hasOwnProperty.call(n,I)&&(b[I]=n[I])}return b},Ve.apply(this,arguments)}function Ol(b,g){if(null==b)return{};var n,I,W={},ia=Object.keys(b);for(I=0;I<ia.length;I++)0<=g.indexOf(n=ia[I])||(W[n]=b[n]);return W}
function el(b,g){(null==g||g>b.length)&&(g=b.length);for(var n=0,I=Array(g);n<g;n++)I[n]=b[n];return I}function zf(b,g){var n="undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(n)return(n=n.call(b)).next.bind(n);if(Array.isArray(b)||(n=function(W,ia){if(W){if("string"==typeof W)return el(W,ia);var sa=Object.prototype.toString.call(W).slice(8,-1);return"Object"===sa&&W.constructor&&(sa=W.constructor.name),"Map"===sa||"Set"===sa?Array.from(W):"Arguments"===sa||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(sa)?
el(W,ia):void 0}}(b))||g&&b&&"number"==typeof b.length){n&&(b=n);var I=0;return function(){return I>=b.length?{done:!0}:{done:!1,value:b[I++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function fl(b,g){void 0===g&&(g=!0);var n=(0,$h.useRef)(null),I=function(ia){};if("undefined"!=typeof ResizeObserver){var W=new ResizeObserver(function(ia){ia=ia[0].target;null!==ia.offsetParent&&b(ia)});
I=function(ia){ia&&g?(W.observe(ia),n.current=ia):(n.current&&W.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:I}}function bh(b,g){return void 0===g&&(g=!0),fl(b,g).callbackRef}function hi(b,g,n,I,W,ia,sa){return fl(function(La){for(var Xa=function(tb,Ob,ec,Ub){ec=tb.length;if(0===ec)return null;for(var pc=[],mc=0;mc<ec;mc++){var Vb=tb.item(mc);if(Vb&&void 0!==Vb.dataset.index){var uc=parseInt(Vb.dataset.index),Ic=parseFloat(Vb.dataset.knownSize),Rc=Ob(Vb,"offsetHeight");if(0===Rc&&
Ub("Zero-sized element, this should not happen",{child:Vb},mm.ERROR),Rc!==Ic)Vb=pc[pc.length-1],0===pc.length||Vb.size!==Rc||Vb.endIndex!==uc-1?pc.push({startIndex:uc,endIndex:uc,size:Rc}):pc[pc.length-1].endIndex++}}return pc}(La.children,g,0,W),$a=La.parentElement;!$a.dataset.virtuosoScroller;)$a=$a.parentElement;var kb="window"===$a.firstElementChild.dataset.viewportType;I({scrollTop:Math.max(sa?sa.scrollTop:kb?window.pageYOffset||document.documentElement.scrollTop:$a.scrollTop,0),scrollHeight:sa?
sa.scrollHeight:kb?document.documentElement.scrollHeight:$a.scrollHeight,viewportHeight:sa?sa.offsetHeight:kb?window.innerHeight:$a.offsetHeight});null==ia||ia(function(tb,Ob,ec){return"normal"===Ob||null!=Ob&&Ob.endsWith("px")||ec("row-gap was not resolved to pixel value correctly",Ob,mm.WARN),"normal"===Ob?0:parseInt(null!=Ob?Ob:"0",10)}(0,getComputedStyle(La).rowGap,W));null!==Xa&&b(Xa)},n)}function Sk(b,g){return Math.round(b.getBoundingClientRect()[g])}function Al(b,g,n,I,W){void 0===I&&(I=$f);
var ia=(0,$h.useRef)(null),sa=(0,$h.useRef)(null),La=(0,$h.useRef)(null),Xa=(0,$h.useRef)(!1),$a=(0,$h.useCallback)(function(kb){kb=kb.target;var tb=kb===window||kb===document,Ob=tb?window.pageYOffset||document.documentElement.scrollTop:kb.scrollTop,ec=tb?document.documentElement.scrollHeight:kb.scrollHeight,Ub=tb?window.innerHeight:kb.offsetHeight;kb=function(){b({scrollTop:Math.max(Ob,0),scrollHeight:ec,viewportHeight:Ub})};Xa.current?(0,HG.flushSync)(kb):kb();Xa.current=!1;null!==sa.current&&(Ob===
sa.current||0>=Ob||Ob===ec-Ub)&&(sa.current=null,g(!0),La.current&&(clearTimeout(La.current),La.current=null))},[b,g]);return(0,$h.useEffect)(function(){var kb=W||ia.current;return I(W||ia.current),$a({target:kb}),kb.addEventListener("scroll",$a,{passive:!0}),function(){I(null);kb.removeEventListener("scroll",$a)}},[ia,$a,n,I,W]),{scrollerRef:ia,scrollByCallback:function(kb){Xa.current=!0;ia.current.scrollBy(kb)},scrollToCallback:function(kb){var tb=ia.current;if(tb&&!("offsetHeight"in tb&&0===tb.offsetHeight)){var Ob,
ec,Ub,pc="smooth"===kb.behavior;if(tb===window?(ec=Math.max(Sk(document.documentElement,"height"),document.documentElement.scrollHeight),Ob=window.innerHeight,Ub=document.documentElement.scrollTop):(ec=tb.scrollHeight,Ob=Sk(tb,"height"),Ub=tb.scrollTop),kb.top=Math.ceil(Math.max(Math.min(ec-Ob,kb.top),0)),1.01>Math.abs(Ob-ec)||kb.top===Ub)return b({scrollTop:Ub,scrollHeight:ec,viewportHeight:Ob}),void(pc&&g(!0));pc?(sa.current=kb.top,La.current&&clearTimeout(La.current),La.current=setTimeout(function(){La.current=
null;sa.current=null;g(!0)},1E3)):sa.current=null;tb.scrollTo(kb)}}}}function gl(b,g,n,I,W){return void 0===I&&(I=Gi),void 0===W&&(W=Gi),{k:b,v:g,lvl:n,l:I,r:W}}function jl(b,g){if(b===Gi)return Gi;var n=b.k,I=b.l,W=b.r;if(g===n){if(I===Gi)return W;if(W===Gi)return I;g=Uh(I);return Jm(xh(b,{k:g[0],v:g[1],l:Km(I)}))}return Jm(xh(b,g<n?{l:jl(I,g)}:{r:jl(W,g)}))}function Uj(b,g,n){return(void 0===n&&(n="k"),b===Gi)?[-Infinity,void 0]:b[n]===g?[b.k,b.v]:b[n]<g?(g=Uj(b.r,g,n),-Infinity===g[0]?[b.k,b.v]:
g):Uj(b.l,g,n)}function ti(b,g,n){return b===Gi?gl(g,n,1):g===b.k?xh(b,{k:g,v:n}):bg(Ii(xh(b,g<b.k?{l:ti(b.l,g,n)}:{r:ti(b.r,g,n)})))}function un(b,g,n){if(b===Gi)return[];var I=b.k,W=b.v,ia=b.r,sa=[];return I>g&&(sa=sa.concat(un(b.l,g,n))),I>=g&&I<=n&&sa.push({k:I,v:W}),I<=n&&(sa=sa.concat(un(ia,g,n))),sa}function Yk(b){return b===Gi?[]:[].concat(Yk(b.l),[{k:b.k,v:b.v}],Yk(b.r))}function Uh(b){return b.r===Gi?[b.k,b.v]:Uh(b.r)}function Km(b){return b.r===Gi?b.l:Jm(xh(b,{r:Km(b.r)}))}function xh(b,
g){return gl(void 0!==g.k?g.k:b.k,void 0!==g.v?g.v:b.v,void 0!==g.lvl?g.lvl:b.lvl,void 0!==g.l?g.l:b.l,void 0!==g.r?g.r:b.r)}function Ei(b){return b===Gi||b.lvl>b.r.lvl}function Jm(b){var g=b.l,n=b.r,I=b.lvl;if(n.lvl>=I-1&&g.lvl>=I-1)return b;if(I>n.lvl+1){if(Ei(g))return Ii(xh(b,{lvl:I-1}));if(g===Gi||g.r===Gi)throw Error("Unexpected empty nodes");return xh(g.r,{l:xh(g,{r:g.r.l}),r:xh(b,{l:g.r.r,lvl:I-1}),lvl:I})}if(Ei(b))return bg(xh(b,{lvl:I-1}));if(n===Gi||n.l===Gi)throw Error("Unexpected empty nodes");
g=n.l;var W=Ei(g)?n.lvl-1:n.lvl;return xh(g,{l:xh(b,{r:g.l,lvl:I-1}),r:bg(xh(n,{l:g.r,lvl:W})),lvl:g.lvl+1})}function tm(b,g,n){return b===Gi?[]:Aj(un(b,Uj(b,g)[0],n),function(I){return{index:I.k,value:I.v}})}function Aj(b,g){var n=b.length;if(0===n)return[];var I=g(b[0]),W=I.index;I=I.value;for(var ia=[],sa=1;sa<n;sa++){var La=g(b[sa]),Xa=La.index;La=La.value;ia.push({start:W,end:Xa-1,value:I});W=Xa;I=La}return ia.push({start:W,end:Infinity,value:I}),ia}function bg(b){var g=b.r,n=b.lvl;return g===
Gi||g.r===Gi||g.lvl!==n||g.r.lvl!==n?b:xh(g,{l:xh(b,{r:g.l}),lvl:n+1})}function Ii(b){var g=b.l;return g===Gi||g.lvl!==b.lvl?b:xh(g,{r:xh(b,{l:g.r})})}function um(b,g,n,I){void 0===I&&(I=0);for(var W=b.length-1;I<=W;){var ia=Math.floor((I+W)/2),sa=n(b[ia],g);if(0===sa)return ia;if(-1===sa){if(2>W-I)return ia-1;W=ia-1}else{if(W===I)return ia;I=ia+1}}throw Error("Failed binary finding record in array - "+b.join(",")+", searched for "+g);}function Am(b){var g=b.size,n=b.startIndex,I=b.endIndex;return function(W){return W.start===
n&&(W.end===I||Infinity===W.end)&&W.value===g}}function y(b,g){b=b.index;return g===b?0:g<b?-1:1}function U(b,g){b=b.offset;return g===b?0:g<b?-1:1}function xa(b){return{index:b.index,value:b}}function ua(b,g,n,I){var W=0,ia=0,sa=0,La;0!==g?(sa=b[La=um(b,g-1,y)].offset,ia=Uj(n,g-1),W=ia[0],ia=ia[1],b.length&&b[La].size===Uj(n,g)[1]&&--La,b=b.slice(0,La+1)):b=[];for(g=zf(tm(n,g,Infinity));!(n=g()).done;)La=n.value,n=La.start,La=La.value,W=n-W,sa=W*ia+sa+W*I,b.push({offset:sa,size:La,index:n}),W=n,
ia=La;return{offsetTree:b,lastIndex:W,lastOffset:sa,lastSize:ia}}function Ga(b,g){var n=g[0],I=g[1],W=g[3];0<n.length&&(0,g[2])("received item sizes",n,mm.DEBUG);var ia=b.sizeTree;g=ia;var sa=0;if(0<I.length&&ia===Gi&&2===n.length){var La=n[0].size,Xa=n[1].size;g=I.reduce(function(kb,tb){return ti(ti(kb,tb,La),tb+1,Xa)},g)}else n=function(kb,tb){var Ob,ec=kb===Gi?0:Infinity;for(tb=zf(tb);!(Ob=tb()).done;){var Ub=Ob.value;Ob=Ub.size;var pc=Ub.startIndex,mc=Ub.endIndex;if(ec=Math.min(ec,pc),kb===Gi)kb=
ti(kb,0,Ob);else{var Vb=tm(kb,pc-1,mc+1);if(!Vb.some(Am(Ub))){var uc,Ic=Ub=!1;for(Vb=zf(Vb);!(uc=Vb()).done;){var Rc=uc.value;uc=Rc.start;var Vc=Rc.end;Rc=Rc.value;Ub?(mc>=uc||Ob===Rc)&&(kb=jl(kb,uc)):(Ic=Rc!==Ob,Ub=!0);Vc>mc&&mc>=uc&&Rc!==Ob&&(kb=ti(kb,mc+1,Rc))}Ic&&(kb=ti(kb,pc,Ob))}}}return[kb,ec]}(g,n),g=n[0],sa=n[1];if(g===ia)return b;b=ua(b.offsetTree,sa,g,W);var $a=b.offsetTree;return{sizeTree:g,offsetTree:$a,lastIndex:b.lastIndex,lastOffset:b.lastOffset,lastSize:b.lastSize,groupOffsetTree:I.reduce(function(kb,
tb){return ti(kb,tb,ab(tb,$a,W))},Gi),groupIndices:I}}function ab(b,g,n){if(0===g.length)return 0;g=g[um(g,b,y)];b-=g.index;b=g.size*b+(b-1)*n+g.offset;return 0<b?b+n:b}function qb(b,g,n){if(void 0!==b.groupIndex)return g.groupIndices[b.groupIndex]+1;b=ub("LAST"===b.index?n:b.index,g);return Math.max(0,b,Math.min(n,b))}function ub(b,g){if(g.groupOffsetTree===Gi)return b;for(var n=0;g.groupIndices[n]<=b+n;)n++;return b+n}function $b(b){b="number"==typeof b?{index:b}:b;return b.align||(b.align="start"),
b.behavior&&LG||(b.behavior="auto"),b.offset||(b.offset=0),b}function Bc(b){return!!b&&("smooth"===b?"smooth":"auto")}function Dc(b){return b.reduce(function(g,n){return g.groupIndices.push(g.totalCount),g.totalCount+=n+1,g},{totalCount:0,groupIndices:[]})}function Hd(b,g){return!(!b||b[0]!==g[0]||b[1]!==g[1])}function Pd(b,g){return!(!b||b.startIndex!==g.startIndex||b.endIndex!==g.endIndex)}function sd(b,g,n){return"number"==typeof b?"up"===n&&"top"===g||"down"===n&&"bottom"===g?b:0:"up"===n?"top"===
g?b.main:b.reverse:"bottom"===g?b.main:b.reverse}function Ce(b,g,n){if(0===b.length)return[];if(g.groupOffsetTree===Gi)return b.map(function(Xa){return Ve({},Xa,{index:Xa.index+n,originalIndex:Xa.index})});var I,W=[],ia=tm(g.groupOffsetTree,b[0].index,b[b.length-1].index),sa=void 0,La=0;for(b=zf(b);!(I=b()).done;)I=I.value,(!sa||sa.end<I.index)&&(sa=ia.shift(),La=g.groupIndices.indexOf(sa.start)),W.push(Ve({},I.index===sa.start?{type:"group",index:La}:{index:I.index-(La+1)+n,groupIndex:La},{size:I.size,
offset:I.offset,originalIndex:I.index,data:I.data}));return W}function wf(b,g,n,I,W,ia){var sa=0,La=0;0<b.length&&(sa=b[0].offset,La=b[b.length-1],La=La.offset+La.size);var Xa=n-W.lastIndex,$a=sa;I=W.lastOffset+Xa*W.lastSize+(Xa-1)*I-La;return{items:Ce(b,W,ia),topItems:Ce(g,W,ia),topListHeight:g.reduce(function(kb,tb){return tb.size+kb},0),offsetTop:sa,offsetBottom:I,top:$a,bottom:La,totalCount:n,firstItemIndex:ia}}function Dg(b){var g,n=!1;return function(){return n||(n=!0,g=b()),g}}function kj(b,
g){var n=(0,$h.useRef)(null),I=(0,$h.useCallback)(function(Xa){if(null!==Xa&&Xa.offsetParent){var $a=Xa.getBoundingClientRect();Xa=$a.width;if(g){var kb=g.getBoundingClientRect();$a=$a.top-kb.top;kb=kb.height-Math.max(0,$a);$a+=g.scrollTop}else kb=window.innerHeight-Math.max(0,$a.top),$a=$a.top+window.pageYOffset;n.current={offsetTop:$a,visibleHeight:kb,visibleWidth:Xa};b(n.current)}},[b,g]),W=fl(I),ia=W.callbackRef,sa=W.ref,La=(0,$h.useCallback)(function(){I(sa.current)},[I,sa]);return(0,$h.useEffect)(function(){if(g){g.addEventListener("scroll",
La);var Xa=new ResizeObserver(La);return Xa.observe(g),function(){g.removeEventListener("scroll",La);Xa.unobserve(g)}}return window.addEventListener("scroll",La),window.addEventListener("resize",La),function(){window.removeEventListener("scroll",La);window.removeEventListener("resize",La)}},[La,g]),ia}function ig(b){return b}function Vg(b,g){var n=Hf();return bi(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+g,"color: red;","color: inherit;","color: blue;")}),
Wf(n,b),n}function Hg(b,g){if("string"!=typeof b)return{context:g}}function ii(b){var g=b.usePublisher,n=b.useEmitter,I=b.useEmitterValue;return gh.memo(function(W){var ia=W.style,sa=W.children;W=Ol(W,YG);var La=g("scrollContainerState"),Xa=I("ScrollerComponent"),$a=g("smoothScrollTargetReached"),kb=I("scrollerRef"),tb=I("context");La=Al(La,$a,Xa,kb);$a=La.scrollerRef;kb=La.scrollByCallback;return n("scrollTo",La.scrollToCallback),n("scrollBy",kb),(0,$h.createElement)(Xa,Ve({ref:$a,style:Ve({},eH,
ia),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},W,Hg(Xa,tb)),sa)})}function Mh(b){var g=b.usePublisher,n=b.useEmitter,I=b.useEmitterValue;return gh.memo(function(W){var ia=W.style,sa=W.children;W=Ol(W,ZG);var La=g("windowScrollContainerState"),Xa=I("ScrollerComponent"),$a=g("smoothScrollTargetReached"),kb=I("totalListHeight"),tb=I("deviation"),Ob=I("customScrollParent"),ec=I("context");$a=Al(La,$a,Xa,$f,Ob);var Ub=$a.scrollerRef;La=$a.scrollByCallback;$a=$a.scrollToCallback;
return IG(function(){return Ub.current=Ob||window,function(){Ub.current=null}},[Ub,Ob]),n("windowScrollTo",$a),n("scrollBy",La),(0,$h.createElement)(Xa,Ve({style:Ve({position:"relative"},ia,0!==kb?{height:kb+tb}:{}),"data-virtuoso-scroller":!0},W,Hg(Xa,ec)),sa)})}function ag(b,g,n){return Array.from({length:g-b+1}).map(function(I,W){return{index:W+b,data:null==n?void 0:n[W+b]}})}function Lf(b,g){return b&&b.column===g.column&&b.row===g.row}function yh(b,g,n,I){var W=n.height;return void 0===W||0===
I.length?{top:0,bottom:0}:{top:ch(b,g,n,I[0].index),bottom:ch(b,g,n,I[I.length-1].index)+W}}function ch(b,g,n,I){var W=g.column;b=Mr(1,mu((b.width+W)/(n.width+W)));I=mu(I/b);n=I*n.height+Mr(0,I-1)*g.row;return 0<n?n+g.row:n}function lj(b,g,n){return"normal"===g||null!=g&&g.endsWith("px")||n(b+" was not resolved to pixel value correctly",g,mm.WARN),"normal"===g?0:parseInt(null!=g?g:"0",10)}function Ah(b,g){void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));void 0!==g.opacity&&(g.opacity=
Math.min(1,Math.max(g.opacity,0)));return g}function zj({strokeWidth:b,size:g,mode:n}){return"svg"===n?(0,ob.jsx)("rect",{className:"tl-binding-indicator",x:b,y:b,rx:2,ry:2,width:Math.max(0,g[0]-2*b),height:Math.max(0,g[1]-2*b),strokeWidth:4*b}):(0,ob.jsx)("div",{className:"tl-binding-indicator",style:{position:"absolute",left:0,top:0,right:0,bottom:0,boxShadow:"0 0 0 4px var(--tl-binding)",borderRadius:4}})}function il(){const b=rg();return"panning"===b.inputs.state||"pinching"===b.inputs.state}
function Fk({left:b,middle:g,right:n,stroke:I,strokeWidth:W}){return(0,ob.jsxs)("g",{children:[(0,ob.jsx)("path",{className:"tl-stroke-hitarea",d:`M ${b} L ${g} ${n}`}),(0,ob.jsx)("path",{d:`M ${b} L ${g} ${n}`,fill:"none",stroke:I,strokeWidth:W,strokeLinecap:"round",strokeLinejoin:"round",pointerEvents:"none"})]})}function gm(b,g,n){g=G(b,g,b,n).points;if(!g)return console.warn("Could not find an intersection for the arrow head."),{left:b,right:b};g=(n=g[0])?Zd.rotWith(n,b,Math.PI/6):b;b=n?Zd.rotWith(n,
b,-Math.PI/6):b;return{left:g,right:b}}function No(b,g,n){const {left:I,right:W}=gm(b,g,n);return`M ${I} L ${b} ${W}`}function tn(b,g,n,I,W){b=b.strokeWidth;var ia=Zd.dist(g,n);b=Math.min(ia/3,16*b);ia=[];ia.push(`M ${g} L ${n}`);I&&ia.push(No(g,n,b));W&&ia.push(No(n,g,b));return ia.join(" ")}function jh({id:b,bounds:g,labelSize:n,offset:I,scale:W=1}){return(0,ob.jsx)("defs",{children:(0,ob.jsxs)("mask",{id:b+"_clip",children:[(0,ob.jsx)("rect",{x:-100,y:-100,width:g.width+200,height:g.height+200,
fill:"white"}),(0,ob.jsx)("rect",{x:g.width/2-n[0]/2*W+((null==I?void 0:I[0])||0),y:g.height/2-n[1]/2*W+((null==I?void 0:I[1])||0),width:n[0]*W,height:n[1]*W,rx:4*W,ry:4*W,fill:"black"})]})})}function jn(b,g,n,I=W=>W){return b*I(.5-g*(.5-n))}function kl(b){return[-b[0],-b[1]]}function Bl(b,g){return[b[0]+g[0],b[1]+g[1]]}function kk(b,g){return[b[0]-g[0],b[1]-g[1]]}function Cl(b,g){return[b[0]*g,b[1]*g]}function an(b){return[b[1],-b[0]]}function pm(b,g){return b[0]===g[0]&&b[1]===g[1]}function Lm(b){return b[0]*
b[0]+b[1]*b[1]}function Lk(b){var g=Math.hypot(b[0],b[1]);return[b[0]/g,b[1]/g]}function ll(b,g){return Math.hypot(b[1]-g[1],b[0]-g[0])}function am(b,g,n){let I=Math.sin(n);n=Math.cos(n);let W=b[0]-g[0];b=b[1]-g[1];return[W*n-b*I+g[0],W*I+b*n+g[1]]}function hn(b,g,n){return Bl(b,Cl(kk(g,b),n))}function Qm(b,g,n){return Bl(b,Cl(g,n))}function Zo(b,g={}){let {size:n=16,smoothing:I=.5,thinning:W=.5,simulatePressure:ia=!0,easing:sa=kd=>kd,start:La={},end:Xa={},last:$a=!1}=g,{cap:kb=!0,easing:tb=kd=>kd*
(2-kd)}=La,{cap:Ob=!0,easing:ec=kd=>--kd*kd*kd+1}=Xa;if(0===b.length||0>=n)return[];var Ub=b[b.length-1].runningLength;let pc=!1===La.taper?0:!0===La.taper?Math.max(n,Ub):La.taper,mc=!1===Xa.taper?0:!0===Xa.taper?Math.max(n,Ub):Xa.taper;var Vb=Math.pow(n*I,2);g=[];let uc=[];var Ic=b.slice(0,10).reduce((kd,md)=>{var Cd=md.pressure;ia&&(md=Qr(1,md.distance/n),Cd=Qr(1,1-md),Cd=Qr(1,kd+.275*(Cd-kd)*md));return(kd+Cd)/2},b[0].pressure),Rc=jn(n,W,b[b.length-1].pressure,sa),Vc;let Wd=b[0].vector;var be=
b[0].point;let Ee=be;var Oe=be;let rf=Ee;var nf=!1;for(var cf=0;cf<b.length;cf++){var {pressure:Ie}=b[cf];let {point:kd,vector:md,distance:Cd,runningLength:we}=b[cf];if(cf<b.length-1&&3>Ub-we)continue;W?(ia&&(Rc=Qr(1,Cd/n),Ie=Qr(1,1-Rc),Ie=Qr(1,Ic+.275*(Ie-Ic)*Rc)),Rc=jn(n,W,Ie,sa)):Rc=n/2;void 0===Vc&&(Vc=Rc);var Bd=we<pc?tb(we/pc):1,gd=Ub-we<mc?ec((Ub-we)/mc):1;Rc=Math.max(.01,Rc*Math.min(Bd,gd));gd=(cf<b.length-1?b[cf+1]:b[cf]).vector;let Fe=cf<b.length-1?md[0]*gd[0]+md[1]*gd[1]:1;Bd=null!==Fe&&
0>Fe;if(0>md[0]*Wd[0]+md[1]*Wd[1]&&!nf||Bd){be=Cl(an(Wd),Rc);for(let of=1/13,gf=0;1>=gf;gf+=of)Oe=am(kk(kd,be),kd,Ys*gf),g.push(Oe),rf=am(Bl(kd,be),kd,Ys*-gf),uc.push(rf);be=Oe;Ee=rf;Bd&&(nf=!0)}else(nf=!1,cf===b.length-1)?(Ie=Cl(an(md),Rc),g.push(kk(kd,Ie)),uc.push(Bl(kd,Ie))):(Ic=Cl(an(hn(gd,md,Fe)),Rc),Oe=kk(kd,Ic),(1>=cf||Lm(kk(be,Oe))>Vb)&&(g.push(Oe),be=Oe),rf=Bl(kd,Ic),(1>=cf||Lm(kk(Ee,rf))>Vb)&&(uc.push(rf),Ee=rf),Ic=Ie,Wd=md)}Ub=b[0].point.slice(0,2);Vb=1<b.length?b[b.length-1].point.slice(0,
2):Bl(b[0].point,[1,1]);Oe=[];nf=[];if(1===b.length){if(!pc&&!mc||$a){b=Qm(Ub,Lk(an(kk(Ub,Vb))),-(Vc||Rc));g=[];for(let kd=1/13,md=kd;1>=md;md+=kd)g.push(am(b,Ub,2*Ys*md));return g}}else{if(!(pc||mc&&1===b.length))if(kb)for(let kd=1/13,md=kd;1>=md;md+=kd)Vc=am(uc[0],Ub,Ys*md),Oe.push(Vc);else cf=kk(g[0],uc[0]),Vc=Cl(cf,.5),cf=Cl(cf,.51),Oe.push(kk(Ub,Vc),kk(Ub,cf),Bl(Ub,cf),Bl(Ub,Vc));Vc=an(kl(b[b.length-1].vector));if(mc||pc&&1===b.length)nf.push(Vb);else if(Ob){b=Qm(Vb,Vc,Rc);for(let kd=1/29,md=
kd;1>md;md+=kd)nf.push(am(b,Vb,3*Ys*md))}else nf.push(Bl(Vb,Cl(Vc,Rc)),Bl(Vb,Cl(Vc,.99*Rc)),kk(Vb,Cl(Vc,.99*Rc)),kk(Vb,Cl(Vc,Rc)))}return g.concat(nf,uc.reverse(),Oe)}function lo(b,g={}){var n;let {streamline:I=.5,size:W=16,last:ia=!1}=g;if(0===b.length)return[];g=.15+.85*(1-I);b=Array.isArray(b[0])?b:b.map(({x:tb,y:Ob,pressure:ec=.5})=>[tb,Ob,ec]);if(2===b.length){var sa=b[1];b=b.slice(0,-1);for(var La=1;5>La;La++)b.push(hn(b[0],sa,La/4))}1===b.length&&(b=[...b,[...Bl(b[0],[1,1]),...b[0].slice(2)]]);
sa=[{point:[b[0][0],b[0][1]],pressure:0<=b[0][2]?b[0][2]:.25,vector:[1,1],distance:0,runningLength:0}];La=!1;let Xa=0,$a=sa[0],kb=b.length-1;for(let tb=1;tb<b.length;tb++){let Ob=ia&&tb===kb?b[tb].slice(0,2):hn($a.point,b[tb],g);if(pm($a.point,Ob))continue;let ec=ll(Ob,$a.point);if(Xa+=ec,tb<kb&&!La){if(Xa<W)continue;La=!0}$a={point:Ob,pressure:0<=b[tb][2]?b[tb][2]:.5,vector:Lk(kk($a.point,Ob)),distance:ec,runningLength:Xa};sa.push($a)}return sa[0].vector=(null==(n=sa[1])?void 0:n.vector)||[0,0],
sa}function Ho(b,g=4/3){return(new xw(b)).exportAsSVG(g)}function Il(b,g=4/3){return(new xw(b)).generatePreviewJsx(void 0,g)}function Po({id:b,type:g,onRemove:n,showContent:I}){const W=rg(),{handlers:ia}=EG.default.useContext(Vm);return(0,ob.jsxs)("div",{className:"tl-shape-links-panel-item color-level relative",children:[(0,ob.jsx)("div",{className:"whitespace-pre break-all overflow-hidden text-ellipsis inline-flex",children:(0,ob.jsx)(nA,{id:b,showReferenceContent:I})}),(0,ob.jsx)("div",{className:"flex-1"}),
ia.getBlockPageName(b)!==W.currentPage.name&&(0,ob.jsx)(dc,{tooltip:"Open Page",type:"button",onClick:()=>null==ia?void 0:ia.redirectToPage(b),children:(0,ob.jsx)(Gh,{name:"open-as-page"})}),(0,ob.jsx)(dc,{tooltip:"Open Page in Right Sidebar",type:"button",onClick:()=>null==ia?void 0:ia.sidebarAddBlock(b,"B"===g?"block":"page"),children:(0,ob.jsx)(Gh,{name:"move-to-sidebar-right"})}),n&&(0,ob.jsx)(dc,{className:"tl-shape-links-panel-item-remove-button",tooltip:"Remove link",type:"button",onClick:n,
children:(0,ob.jsx)(Gh,{name:"x",className:"!translate-y-0"})})]})}function po({options:b,value:g,onValueChange:n}){return(0,ob.jsx)(bB,{className:"tl-toggle-group-input",type:"single",value:g,onValueChange:n,children:b.map(I=>(0,ob.jsx)(fc,{content:I.tooltip,children:(0,ob.jsx)("div",{className:"inline-block",children:(0,ob.jsx)(cB,{className:"tl-toggle-group-input-button",value:I.value,disabled:I.value===g,children:(0,ob.jsx)(Gh,{name:I.icon})})})},I.value))})}function bn({options:b,value:g,onValueChange:n}){return(0,ob.jsx)(bB,
{className:"tl-toggle-group-input",type:"multiple",value:g,onValueChange:n,children:b.map(I=>(0,ob.jsx)(cB,{className:"tl-toggle-group-input-button",value:I.value,children:(0,ob.jsx)(Gh,{name:I.icon})},I.value))})}function cn(b){var {toggle:g=!0,pressed:n,onPressedChange:I,className:W,tooltip:ia}=b;b=Ha(b,["toggle","pressed","onPressedChange","className","tooltip"]);return(0,ob.jsx)(fc,{content:ia,children:(0,ob.jsx)("div",{className:"inline-block",children:(0,ob.jsx)(bI,Wa(Fa({},b),{"data-toggle":g,
className:"tl-toggle-input"+(W?" "+W:""),pressed:n,onPressedChange:I}))})})}function xk(b,g){return b.filter(n=>{var I;return null==(I=yw[n.props.type])?void 0:I.includes(g)})}function Hn(b){return g=>"mouse"!==g.pointerType?b(g):void 0}function ko(b){b=b.match(/\.[0-9a-z]+$/i);if(!b)return"unknown";b=b[0].toLowerCase();return GI.includes(b)?"image":HI.includes(b)?"video":"unknown"}function In(...b){return(...g)=>Rd(this,null,function*(){for(const n of b){const I=yield n(...g);if(I&&0<I.length)return I}return null})}
function Yn(b,g){return Rd(this,null,function*(){return b.types.includes(g)?b instanceof DataTransfer?b.getData(g):yield(yield b.getType(g)).text():null})}function Sl(){const {handlers:b}=iB.useContext(Vm);return iB.useCallback((g,n)=>Rd(this,null,function*(){if(n.shiftKey&&1===g.selectedShapesArray.length){var I=yield navigator.clipboard.read();let W;0<I.length&&(I=(yield(yield I[0].getType("text/plain")).text()).trim())&&(/^\(\(.*\)\)$/.test(I)&&40===I.length?(I=I.slice(2,-2),Th(I)&&(W=I)):/^\[\[.*\]\]$/.test(I)&&
(W=I.slice(2,-2)));if(W){g.selectedShapesArray[0].update({refs:[W]});g.persist();return}}II(g,n,b)}),[])}function Mm(){const b=Sl();return FI.useCallback((g,n)=>Rd(this,[g,n],function*(I,{dataTransfer:W,point:ia}){b(I,{point:ia,shiftKey:!1,dataTransfer:W,fromDrop:!0})}),[])}function mo(){const {handlers:b}=jB.useContext(Vm);return jB.useCallback((g,{text:n,html:I})=>{b.copyToClipboard(n,I)},[])}function Io(){return JI.default.useCallback(b=>Rd(this,null,function*(){setTimeout(()=>{b.selectTool("logseq-portal").selectedTool.transition("creating")},
100)}),[])}var qo=Object.create,dk=Object.defineProperty,Mo=Object.defineProperties,Un=Object.getOwnPropertyDescriptor,Vn=Object.getOwnPropertyDescriptors,en=Object.getOwnPropertyNames,dn=Object.getOwnPropertySymbols,Nm=Object.getPrototypeOf,Ko=Object.prototype.hasOwnProperty,no=Object.prototype.propertyIsEnumerable,Wn=(b,g,n)=>g in b?dk(b,g,{enumerable:!0,configurable:!0,writable:!0,value:n}):b[g]=n,Fa=(b,g)=>{for(var n in g||={})Ko.call(g,n)&&Wn(b,n,g[n]);if(dn)for(n of dn(g))no.call(g,n)&&Wn(b,
n,g[n]);return b},Wa=(b,g)=>Mo(b,Vn(g)),Ha=(b,g)=>{var n={},I;for(I in b)Ko.call(b,I)&&0>g.indexOf(I)&&(n[I]=b[I]);if(null!=b&&dn)for(I of dn(b))0>g.indexOf(I)&&no.call(b,I)&&(n[I]=b[I]);return n},hb=(b,g)=>function(){return g||(0,b[en(b)[0]])((g={exports:{}}).exports,g),g.exports},Jb=(b,g,n,I)=>{if(g&&"object"===typeof g||"function"===typeof g)for(let W of en(g))Ko.call(b,W)||W===n||dk(b,W,{get:()=>g[W],enumerable:!(I=Un(g,W))||I.enumerable});return b},ac=(b,g,n)=>(n=null!=b?qo(Nm(b)):{},Jb(!g&&
b&&b.__esModule?n:dk(n,"default",{value:b,enumerable:!0}),b)),nc=(b,g,n,I)=>{for(var W=1<I?void 0:I?Un(g,n):g,ia=b.length-1,sa;0<=ia;ia--)if(sa=b[ia])W=(I?sa(g,n,W):sa(W))||W;I&&W&&dk(g,n,W);return W},Ua=(b,g,n)=>{Wn(b,"symbol"!==typeof g?g+"":g,n);return n},Rd=(b,g,n)=>new Promise((I,W)=>{var ia=Xa=>{try{La(n.next(Xa))}catch($a){W($a)}},sa=Xa=>{try{La(n.throw(Xa))}catch($a){W($a)}},La=Xa=>Xa.done?I(Xa.value):Promise.resolve(Xa.value).then(ia,sa);La((n=n.apply(b,g)).next())}),Je=hb({["../../node_modules/mousetrap/mousetrap.js"](b,
g){(function(n,I,W){function ia(mc,Vb,uc){mc.addEventListener?mc.addEventListener(Vb,uc,!1):mc.attachEvent("on"+Vb,uc)}function sa(mc){if("keypress"==mc.type){var Vb=String.fromCharCode(mc.which);mc.shiftKey||(Vb=Vb.toLowerCase());return Vb}return tb[mc.which]?tb[mc.which]:Ob[mc.which]?Ob[mc.which]:String.fromCharCode(mc.which).toLowerCase()}function La(mc){return"shift"==mc||"ctrl"==mc||"alt"==mc||"meta"==mc}function Xa(mc,Vb){var uc,Ic=[];"+"===mc?mc=["+"]:(mc=mc.replace(/\+{2}/g,"+plus"),mc=mc.split("+"));
for(uc=0;uc<mc.length;++uc){var Rc=mc[uc];Ub[Rc]&&(Rc=Ub[Rc]);Vb&&"keypress"!=Vb&&ec[Rc]&&(Rc=ec[Rc],Ic.push("shift"));La(Rc)&&Ic.push(Rc)}mc=Rc;if(!Vb){if(!pc){pc={};for(var Vc in tb)95<Vc&&112>Vc||tb.hasOwnProperty(Vc)&&(pc[tb[Vc]]=Vc)}Vb=pc[mc]?"keydown":"keypress"}"keypress"==Vb&&Ic.length&&(Vb="keydown");return{key:Rc,modifiers:Ic,action:Vb}}function $a(mc,Vb){return null===mc||mc===I?!1:mc===Vb?!0:$a(mc.parentNode,Vb)}function kb(mc){function Vb(Ie){Ie=Ie||{};var Bd=!1,gd;for(gd in Ee)Ie[gd]?
Bd=!0:Ee[gd]=0;Bd||(cf=!1)}function uc(Ie,Bd,gd,kd,md,Cd){var we,Fe=[],of=gd.type;if(!be._callbacks[Ie])return[];"keyup"==of&&La(Ie)&&(Bd=[Ie]);for(we=0;we<be._callbacks[Ie].length;++we){var gf=be._callbacks[Ie][we];if((kd||!gf.seq||Ee[gf.seq]==gf.level)&&of==gf.action){var ff;(ff="keypress"==of&&!gd.metaKey&&!gd.ctrlKey)||(ff=gf.modifiers,ff=Bd.sort().join(",")===ff.sort().join(","));ff&&(ff=kd&&gf.seq==kd&&gf.level==Cd,(!kd&&gf.combo==md||ff)&&be._callbacks[Ie].splice(we,1),Fe.push(gf))}}return Fe}
function Ic(Ie,Bd,gd,kd){be.stopCallback(Bd,Bd.target||Bd.srcElement,gd,kd)||!1!==Ie(Bd,gd)||(Bd.preventDefault?Bd.preventDefault():Bd.returnValue=!1,Bd.stopPropagation?Bd.stopPropagation():Bd.cancelBubble=!0)}function Rc(Ie){"number"!==typeof Ie.which&&(Ie.which=Ie.keyCode);var Bd=sa(Ie);if(Bd)if("keyup"==Ie.type&&rf===Bd)rf=!1;else{var gd=be,kd=gd.handleKey,md=[];Ie.shiftKey&&md.push("shift");Ie.altKey&&md.push("alt");Ie.ctrlKey&&md.push("ctrl");Ie.metaKey&&md.push("meta");kd.call(gd,Bd,md,Ie)}}
function Vc(Ie,Bd,gd,kd){function md(of){return function(){cf=of;++Ee[Ie];clearTimeout(Oe);Oe=setTimeout(Vb,1E3)}}function Cd(of){Ic(gd,of,Ie);"keyup"!==kd&&(rf=sa(of));setTimeout(Vb,10)}for(var we=Ee[Ie]=0;we<Bd.length;++we){var Fe=we+1===Bd.length?Cd:md(kd||Xa(Bd[we+1]).action);Wd(Bd[we],Fe,kd,Ie,we)}}function Wd(Ie,Bd,gd,kd,md){be._directMap[Ie+":"+gd]=Bd;Ie=Ie.replace(/\s+/g," ");var Cd=Ie.split(" ");1<Cd.length?Vc(Ie,Cd,Bd,gd):(gd=Xa(Ie,gd),be._callbacks[gd.key]=be._callbacks[gd.key]||[],uc(gd.key,
gd.modifiers,{type:gd.action},kd,Ie,md),be._callbacks[gd.key][kd?"unshift":"push"]({callback:Bd,modifiers:gd.modifiers,action:gd.action,seq:kd,level:md,combo:Ie}))}var be=this;mc=mc||I;if(!(be instanceof kb))return new kb(mc);be.target=mc;be._callbacks={};be._directMap={};var Ee={},Oe,rf=!1,nf=!1,cf=!1;be._handleKey=function(Ie,Bd,gd){var kd=uc(Ie,Bd,gd),md;Bd={};var Cd=0,we=!1;for(md=0;md<kd.length;++md)kd[md].seq&&(Cd=Math.max(Cd,kd[md].level));for(md=0;md<kd.length;++md)kd[md].seq?kd[md].level==
Cd&&(we=!0,Bd[kd[md].seq]=1,Ic(kd[md].callback,gd,kd[md].combo,kd[md].seq)):we||Ic(kd[md].callback,gd,kd[md].combo);kd="keypress"==gd.type&&nf;gd.type!=cf||La(Ie)||kd||Vb(Bd);nf=we&&"keydown"==gd.type};be._bindMultiple=function(Ie,Bd,gd){for(var kd=0;kd<Ie.length;++kd)Wd(Ie[kd],Bd,gd)};ia(mc,"keypress",Rc);ia(mc,"keydown",Rc);ia(mc,"keyup",Rc)}if(n){var tb={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",
37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Ob={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},ec={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","\x26":"7","*":"8","(":"9",")":"0",_:"-","+":"\x3d",":":";",'"':"'","\x3c":",","\x3e":".","?":"/","|":"\\"},Ub={option:"alt",command:"meta","return":"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?
"meta":"ctrl"},pc;for(W=1;20>W;++W)tb[111+W]="f"+W;for(W=0;9>=W;++W)tb[W+96]=W.toString();kb.prototype.bind=function(mc,Vb,uc){mc=mc instanceof Array?mc:[mc];this._bindMultiple.call(this,mc,Vb,uc);return this};kb.prototype.unbind=function(mc,Vb){return this.bind.call(this,mc,function(){},Vb)};kb.prototype.trigger=function(mc,Vb){if(this._directMap[mc+":"+Vb])this._directMap[mc+":"+Vb]({},mc);return this};kb.prototype.reset=function(){this._callbacks={};this._directMap={};return this};kb.prototype.stopCallback=
function(mc,Vb){if(-1<(" "+Vb.className+" ").indexOf(" mousetrap ")||$a(Vb,this.target))return!1;if("composedPath"in mc&&"function"===typeof mc.composedPath){var uc=mc.composedPath()[0];uc!==mc.target&&(Vb=uc)}return"INPUT"==Vb.tagName||"SELECT"==Vb.tagName||"TEXTAREA"==Vb.tagName||Vb.isContentEditable};kb.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)};kb.addKeycodes=function(mc){for(var Vb in mc)mc.hasOwnProperty(Vb)&&(tb[Vb]=mc[Vb]);pc=null};kb.init=function(){var mc=
kb(I),Vb;for(Vb in mc)"_"!==Vb.charAt(0)&&(kb[Vb]=function(uc){return function(){return mc[uc].apply(mc,arguments)}}(Vb))};kb.init();n.Mousetrap=kb;"undefined"!==typeof g&&g.exports&&(g.exports=kb);"function"===typeof define&&define.amd&&define(function(){return kb})}})("undefined"!==typeof window?window:null,"undefined"!==typeof window?document:null)}}),da=hb({["../../node_modules/rbush/rbush.min.js"](b,g){!function(n,I){"object"==typeof b&&"undefined"!=typeof g?g.exports=I():"function"==typeof define&&
define.amd?define(I):(n=n||self).RBush=I()}(b,function(){function n(Vb,uc,Ic,Rc,Vc){!function cf(be,Ee,Oe,rf,nf){for(;rf>Oe;){if(600<rf-Oe){var Ie=rf-Oe+1,Bd=Ee-Oe+1,gd=Math.log(Ie),kd=.5*Math.exp(2*gd/3);gd=.5*Math.sqrt(gd*kd*(Ie-kd)/Ie)*(0>Bd-Ie/2?-1:1);cf(be,Ee,Math.max(Oe,Math.floor(Ee-Bd*kd/Ie+gd)),Math.min(rf,Math.floor(Ee+(Ie-Bd)*kd/Ie+gd)),nf)}Ie=be[Ee];Bd=Oe;kd=rf;I(be,Oe,Ee);for(0<nf(be[rf],Ie)&&I(be,Oe,rf);Bd<kd;){I(be,Bd,kd);Bd++;for(kd--;0>nf(be[Bd],Ie);)Bd++;for(;0<nf(be[kd],Ie);)kd--}0===
nf(be[Oe],Ie)?I(be,Oe,kd):I(be,++kd,rf);kd<=Ee&&(Oe=kd+1);Ee<=kd&&(rf=kd-1)}}(Vb,uc,Ic||0,Rc||Vb.length-1,Vc||W)}function I(Vb,uc,Ic){var Rc=Vb[uc];Vb[uc]=Vb[Ic];Vb[Ic]=Rc}function W(Vb,uc){return Vb<uc?-1:Vb>uc?1:0}function ia(Vb,uc){sa(Vb,0,Vb.children.length,uc,Vb)}function sa(Vb,uc,Ic,Rc,Vc){Vc||=Ub(null);Vc.minX=1/0;Vc.minY=1/0;Vc.maxX=-1/0;for(Vc.maxY=-1/0;uc<Ic;uc++){var Wd=Vb.children[uc];La(Vc,Vb.leaf?Rc(Wd):Wd)}return Vc}function La(Vb,uc){return Vb.minX=Math.min(Vb.minX,uc.minX),Vb.minY=
Math.min(Vb.minY,uc.minY),Vb.maxX=Math.max(Vb.maxX,uc.maxX),Vb.maxY=Math.max(Vb.maxY,uc.maxY),Vb}function Xa(Vb,uc){return Vb.minX-uc.minX}function $a(Vb,uc){return Vb.minY-uc.minY}function kb(Vb){return(Vb.maxX-Vb.minX)*(Vb.maxY-Vb.minY)}function tb(Vb){return Vb.maxX-Vb.minX+(Vb.maxY-Vb.minY)}function Ob(Vb,uc){return Vb.minX<=uc.minX&&Vb.minY<=uc.minY&&uc.maxX<=Vb.maxX&&uc.maxY<=Vb.maxY}function ec(Vb,uc){return uc.minX<=Vb.maxX&&uc.minY<=Vb.maxY&&uc.maxX>=Vb.minX&&uc.maxY>=Vb.minY}function Ub(Vb){return{children:Vb,
height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function pc(Vb,uc,Ic,Rc,Vc){for(var Wd=[uc,Ic];Wd.length;)if(!((Ic=Wd.pop())-(uc=Wd.pop())<=Rc)){var be=uc+Math.ceil((Ic-uc)/Rc/2)*Rc;n(Vb,be,uc,Ic,Vc);Wd.push(uc,be,be,Ic)}}var mc=function(Vb){void 0===Vb&&(Vb=9);this._maxEntries=Math.max(4,Vb);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));this.clear()};return mc.prototype.all=function(){return this._all(this.data,[])},mc.prototype.search=function(Vb){var uc=this.data,Ic=[];if(!ec(Vb,
uc))return Ic;for(var Rc=this.toBBox,Vc=[];uc;){for(var Wd=0;Wd<uc.children.length;Wd++){var be=uc.children[Wd],Ee=uc.leaf?Rc(be):be;ec(Vb,Ee)&&(uc.leaf?Ic.push(be):Ob(Vb,Ee)?this._all(be,Ic):Vc.push(be))}uc=Vc.pop()}return Ic},mc.prototype.collides=function(Vb){var uc=this.data;if(!ec(Vb,uc))return!1;for(var Ic=[];uc;){for(var Rc=0;Rc<uc.children.length;Rc++){var Vc=uc.children[Rc],Wd=uc.leaf?this.toBBox(Vc):Vc;if(ec(Vb,Wd)){if(uc.leaf||Ob(Vb,Wd))return!0;Ic.push(Vc)}}uc=Ic.pop()}return!1},mc.prototype.load=
function(Vb){if(!Vb||!Vb.length)return this;if(Vb.length<this._minEntries){for(var uc=0;uc<Vb.length;uc++)this.insert(Vb[uc]);return this}Vb=this._build(Vb.slice(),0,Vb.length-1,0);this.data.children.length?this.data.height===Vb.height?this._splitRoot(this.data,Vb):(this.data.height<Vb.height&&(uc=this.data,this.data=Vb,Vb=uc),this._insert(Vb,this.data.height-Vb.height-1,!0)):this.data=Vb;return this},mc.prototype.insert=function(Vb){return Vb&&this._insert(Vb,this.data.height-1),this},mc.prototype.clear=
function(){return this.data=Ub([]),this},mc.prototype.remove=function(Vb,uc){if(!Vb)return this;for(var Ic,Rc,Vc,Wd=this.data,be=this.toBBox(Vb),Ee=[],Oe=[];Wd||Ee.length;){if(Wd||(Wd=Ee.pop(),Rc=Ee[Ee.length-1],Ic=Oe.pop(),Vc=!0),Wd.leaf){a:{var rf=Vb;var nf=Wd.children,cf=uc;if(cf){for(var Ie=0;Ie<nf.length;Ie++)if(cf(rf,nf[Ie])){rf=Ie;break a}rf=-1}else rf=nf.indexOf(rf)}if(-1!==rf)return Wd.children.splice(rf,1),Ee.push(Wd),this._condense(Ee),this}Vc||Wd.leaf||!Ob(Wd,be)?Rc?(Ic++,Wd=Rc.children[Ic],
Vc=!1):Wd=null:(Ee.push(Wd),Oe.push(Ic),Ic=0,Rc=Wd,Wd=Wd.children[0])}return this},mc.prototype.toBBox=function(Vb){return Vb},mc.prototype.compareMinX=function(Vb,uc){return Vb.minX-uc.minX},mc.prototype.compareMinY=function(Vb,uc){return Vb.minY-uc.minY},mc.prototype.toJSON=function(){return this.data},mc.prototype.fromJSON=function(Vb){return this.data=Vb,this},mc.prototype._all=function(Vb,uc){for(var Ic=[];Vb;)Vb.leaf?uc.push.apply(uc,Vb.children):Ic.push.apply(Ic,Vb.children),Vb=Ic.pop();return uc},
mc.prototype._build=function(Vb,uc,Ic,Rc){var Vc,Wd=Ic-uc+1,be=this._maxEntries;if(Wd<=be)return ia(Vc=Ub(Vb.slice(uc,Ic+1)),this.toBBox),Vc;Rc||(Rc=Math.ceil(Math.log(Wd)/Math.log(be)),be=Math.ceil(Wd/Math.pow(be,Rc-1)));(Vc=Ub([])).leaf=!1;Vc.height=Rc;Wd=Math.ceil(Wd/be);be=Wd*Math.ceil(Math.sqrt(be));for(pc(Vb,uc,Ic,be,this.compareMinX);uc<=Ic;uc+=be){var Ee=Math.min(uc+be-1,Ic);pc(Vb,uc,Ee,Wd,this.compareMinY);for(var Oe=uc;Oe<=Ee;Oe+=Wd)Vc.children.push(this._build(Vb,Oe,Math.min(Oe+Wd-1,Ee),
Rc-1))}return ia(Vc,this.toBBox),Vc},mc.prototype._chooseSubtree=function(Vb,uc,Ic,Rc){for(;Rc.push(uc),!uc.leaf&&Rc.length-1!==Ic;){for(var Vc=1/0,Wd=1/0,be=void 0,Ee=0;Ee<uc.children.length;Ee++){var Oe=uc.children[Ee],rf=kb(Oe),nf=(cf=Vb,Ie=Oe,(Math.max(Ie.maxX,cf.maxX)-Math.min(Ie.minX,cf.minX))*(Math.max(Ie.maxY,cf.maxY)-Math.min(Ie.minY,cf.minY))-rf);nf<Wd?(Wd=nf,Vc=rf<Vc?rf:Vc,be=Oe):nf===Wd&&rf<Vc&&(Vc=rf,be=Oe)}uc=be||uc.children[0]}var cf,Ie;return uc},mc.prototype._insert=function(Vb,uc,
Ic){Ic=Ic?Vb:this.toBBox(Vb);var Rc=[],Vc=this._chooseSubtree(Ic,this.data,uc,Rc);Vc.children.push(Vb);for(La(Vc,Ic);0<=uc&&Rc[uc].children.length>this._maxEntries;)this._split(Rc,uc),uc--;this._adjustParentBBoxes(Ic,Rc,uc)},mc.prototype._split=function(Vb,uc){var Ic=Vb[uc],Rc=Ic.children.length,Vc=this._minEntries;this._chooseSplitAxis(Ic,Vc,Rc);Rc=this._chooseSplitIndex(Ic,Vc,Rc);Rc=Ub(Ic.children.splice(Rc,Ic.children.length-Rc));Rc.height=Ic.height;Rc.leaf=Ic.leaf;ia(Ic,this.toBBox);ia(Rc,this.toBBox);
uc?Vb[uc-1].children.push(Rc):this._splitRoot(Ic,Rc)},mc.prototype._splitRoot=function(Vb,uc){this.data=Ub([Vb,uc]);this.data.height=Vb.height+1;this.data.leaf=!1;ia(this.data,this.toBBox)},mc.prototype._chooseSplitIndex=function(Vb,uc,Ic){for(var Rc,Vc,Wd,be,Ee,Oe,rf,nf=1/0,cf=1/0,Ie=uc;Ie<=Ic-uc;Ie++){var Bd=sa(Vb,0,Ie,this.toBBox),gd=sa(Vb,Ie,Ic,this.toBBox),kd=(Vc=Bd,Wd=gd,be=void 0,Ee=void 0,Oe=void 0,rf=void 0,be=Math.max(Vc.minX,Wd.minX),Ee=Math.max(Vc.minY,Wd.minY),Oe=Math.min(Vc.maxX,Wd.maxX),
rf=Math.min(Vc.maxY,Wd.maxY),Math.max(0,Oe-be)*Math.max(0,rf-Ee));Bd=kb(Bd)+kb(gd);kd<nf?(nf=kd,Rc=Ie,cf=Bd<cf?Bd:cf):kd===nf&&Bd<cf&&(cf=Bd,Rc=Ie)}return Rc||Ic-uc},mc.prototype._chooseSplitAxis=function(Vb,uc,Ic){var Rc=Vb.leaf?this.compareMinX:Xa,Vc=Vb.leaf?this.compareMinY:$a;this._allDistMargin(Vb,uc,Ic,Rc)<this._allDistMargin(Vb,uc,Ic,Vc)&&Vb.children.sort(Rc)},mc.prototype._allDistMargin=function(Vb,uc,Ic,Rc){Vb.children.sort(Rc);Rc=this.toBBox;for(var Vc=sa(Vb,0,uc,Rc),Wd=sa(Vb,Ic-uc,Ic,Rc),
be=tb(Vc)+tb(Wd),Ee=uc;Ee<Ic-uc;Ee++){var Oe=Vb.children[Ee];La(Vc,Vb.leaf?Rc(Oe):Oe);be+=tb(Vc)}for(Ic=Ic-uc-1;Ic>=uc;Ic--)Vc=Vb.children[Ic],La(Wd,Vb.leaf?Rc(Vc):Vc),be+=tb(Wd);return be},mc.prototype._adjustParentBBoxes=function(Vb,uc,Ic){for(;0<=Ic;Ic--)La(uc[Ic],Vb)},mc.prototype._condense=function(Vb){for(var uc=Vb.length-1,Ic=void 0;0<=uc;uc--)0===Vb[uc].children.length?0<uc?(Ic=Vb[uc-1].children).splice(Ic.indexOf(Vb[uc]),1):this.clear():ia(Vb[uc],this.toBBox)},mc})}}),wa=hb({["../../node_modules/fast-deep-equal/index.js"](b,
g){g.exports=function ia(I,W){if(I===W)return!0;if(I&&W&&"object"==typeof I&&"object"==typeof W){if(I.constructor!==W.constructor)return!1;var sa;if(Array.isArray(I)){var La=I.length;if(La!=W.length)return!1;for(sa=La;0!==sa--;)if(!ia(I[sa],W[sa]))return!1;return!0}if(I.constructor===RegExp)return I.source===W.source&&I.flags===W.flags;if(I.valueOf!==Object.prototype.valueOf)return I.valueOf()===W.valueOf();if(I.toString!==Object.prototype.toString)return I.toString()===W.toString();var Xa=Object.keys(I);
La=Xa.length;if(La!==Object.keys(W).length)return!1;for(sa=La;0!==sa--;)if(!Object.prototype.hasOwnProperty.call(W,Xa[sa]))return!1;for(sa=La;0!==sa--;)if(La=Xa[sa],!ia(I[La],W[La]))return!1;return!0}return I!==I&&W!==W}}}),Ya=hb({["../../../node_modules/deepmerge/dist/cjs.js"](b,g){function n(tb,Ob){return!1!==Ob.clone&&Ob.isMergeableObject(tb)?Xa(Array.isArray(tb)?[]:{},tb,Ob):tb}function I(tb,Ob,ec){return tb.concat(Ob).map(function(Ub){return n(Ub,ec)})}function W(tb){return Object.getOwnPropertySymbols?
Object.getOwnPropertySymbols(tb).filter(function(Ob){return tb.propertyIsEnumerable(Ob)}):[]}function ia(tb){return Object.keys(tb).concat(W(tb))}function sa(tb,Ob){try{return Ob in tb}catch(ec){return!1}}function La(tb,Ob,ec){var Ub={};ec.isMergeableObject(tb)&&ia(tb).forEach(function(pc){Ub[pc]=n(tb[pc],ec)});ia(Ob).forEach(function(pc){if(!sa(tb,pc)||Object.hasOwnProperty.call(tb,pc)&&Object.propertyIsEnumerable.call(tb,pc))if(sa(tb,pc)&&ec.isMergeableObject(Ob[pc])){if(ec.customMerge){var mc=
ec.customMerge(pc);mc="function"===typeof mc?mc:Xa}else mc=Xa;Ub[pc]=mc(tb[pc],Ob[pc],ec)}else Ub[pc]=n(Ob[pc],ec)});return Ub}function Xa(tb,Ob,ec){ec=ec||{};ec.arrayMerge=ec.arrayMerge||I;ec.isMergeableObject=ec.isMergeableObject||$a;ec.cloneUnlessOtherwiseSpecified=n;var Ub=Array.isArray(Ob),pc=Array.isArray(tb);return Ub!==pc?n(Ob,ec):Ub?ec.arrayMerge(tb,Ob,ec):La(tb,Ob,ec)}var $a=function(tb){var Ob;if(Ob=!!tb&&"object"===typeof tb)Ob=Object.prototype.toString.call(tb),Ob=!("[object RegExp]"===
Ob||"[object Date]"===Ob||tb.$$typeof===kb);return Ob},kb="function"===typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;Xa.all=function(tb,Ob){if(!Array.isArray(tb))throw Error("first argument should be an array");return tb.reduce(function(ec,Ub){return Xa(ec,Ub,Ob)},{})};g.exports=Xa}}),xb=hb({["../../node_modules/tslib/tslib.js"](b,g){var n,I,W,ia,sa,La,Xa,$a,kb,tb,Ob,ec,Ub,pc,mc,Vb,uc,Ic,Rc,Vc,Wd,be,Ee,Oe,rf;(function(nf){function cf(Bd,gd){Bd!==Ie&&("function"===typeof Object.create?
Object.defineProperty(Bd,"__esModule",{value:!0}):Bd.__esModule=!0);return function(kd,md){return Bd[kd]=gd?gd(kd,md):md}}var Ie="object"===typeof va?va:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(Bd){nf(cf(Ie,cf(Bd)))}):"object"===typeof g&&"object"===typeof g.exports?nf(cf(Ie,cf(g.exports))):nf(cf(Ie))})(function(nf){var cf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Bd,gd){Bd.__proto__=
gd}||function(Bd,gd){for(var kd in gd)Object.prototype.hasOwnProperty.call(gd,kd)&&(Bd[kd]=gd[kd])};n=function(Bd,gd){function kd(){this.constructor=Bd}if("function"!==typeof gd&&null!==gd)throw new TypeError("Class extends value "+String(gd)+" is not a constructor or null");cf(Bd,gd);Bd.prototype=null===gd?Object.create(gd):(kd.prototype=gd.prototype,new kd)};I=Object.assign||function(Bd){for(var gd,kd=1,md=arguments.length;kd<md;kd++){gd=arguments[kd];for(var Cd in gd)Object.prototype.hasOwnProperty.call(gd,
Cd)&&(Bd[Cd]=gd[Cd])}return Bd};W=function(Bd,gd){var kd={},md;for(md in Bd)Object.prototype.hasOwnProperty.call(Bd,md)&&0>gd.indexOf(md)&&(kd[md]=Bd[md]);if(null!=Bd&&"function"===typeof Object.getOwnPropertySymbols){var Cd=0;for(md=Object.getOwnPropertySymbols(Bd);Cd<md.length;Cd++)0>gd.indexOf(md[Cd])&&Object.prototype.propertyIsEnumerable.call(Bd,md[Cd])&&(kd[md[Cd]]=Bd[md[Cd]])}return kd};ia=function(Bd,gd,kd,md){var Cd=arguments.length,we=3>Cd?gd:null===md?md=Object.getOwnPropertyDescriptor(gd,
kd):md,Fe;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)we=Reflect.decorate(Bd,gd,kd,md);else for(var of=Bd.length-1;0<=of;of--)if(Fe=Bd[of])we=(3>Cd?Fe(we):3<Cd?Fe(gd,kd,we):Fe(gd,kd))||we;return 3<Cd&&we&&Object.defineProperty(gd,kd,we),we};sa=function(Bd,gd){return function(kd,md){gd(kd,md,Bd)}};La=function(Bd,gd){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(Bd,gd)};Xa=function(Bd,gd,kd,md){function Cd(we){return we instanceof kd?
we:new kd(function(Fe){Fe(we)})}return new (kd||=Promise)(function(we,Fe){function of(Ug){try{ff(md.next(Ug))}catch(Fg){Fe(Fg)}}function gf(Ug){try{ff(md["throw"](Ug))}catch(Fg){Fe(Fg)}}function ff(Ug){Ug.done?we(Ug.value):Cd(Ug.value).then(of,gf)}ff((md=md.apply(Bd,gd||[])).next())})};$a=function(Bd,gd){function kd(ff){return function(Ug){return md([ff,Ug])}}function md(ff){if(we)throw new TypeError("Generator is already executing.");for(;Cd;)try{if(we=1,Fe&&(of=ff[0]&2?Fe["return"]:ff[0]?Fe["throw"]||
((of=Fe["return"])&&of.call(Fe),0):Fe.next)&&!(of=of.call(Fe,ff[1])).done)return of;if(Fe=0,of)ff=[ff[0]&2,of.value];switch(ff[0]){case 0:case 1:of=ff;break;case 4:return Cd.label++,{value:ff[1],done:!1};case 5:Cd.label++;Fe=ff[1];ff=[0];continue;case 7:ff=Cd.ops.pop();Cd.trys.pop();continue;default:if(!(of=Cd.trys,of=0<of.length&&of[of.length-1])&&(6===ff[0]||2===ff[0])){Cd=0;continue}if(3===ff[0]&&(!of||ff[1]>of[0]&&ff[1]<of[3]))Cd.label=ff[1];else if(6===ff[0]&&Cd.label<of[1])Cd.label=of[1],of=
ff;else if(of&&Cd.label<of[2])Cd.label=of[2],Cd.ops.push(ff);else{of[2]&&Cd.ops.pop();Cd.trys.pop();continue}}ff=gd.call(Bd,Cd)}catch(Ug){ff=[6,Ug],Fe=0}finally{we=of=0}if(ff[0]&5)throw ff[1];return{value:ff[0]?ff[1]:void 0,done:!0}}var Cd={label:0,sent:function(){if(of[0]&1)throw of[1];return of[1]},trys:[],ops:[]},we,Fe,of,gf;return gf={next:kd(0),"throw":kd(1),"return":kd(2)},"function"===typeof Symbol&&(gf[Symbol.iterator]=function(){return this}),gf};kb=function(Bd,gd){for(var kd in Bd)"default"===
kd||Object.prototype.hasOwnProperty.call(gd,kd)||rf(gd,Bd,kd)};rf=Object.create?function(Bd,gd,kd,md){void 0===md&&(md=kd);var Cd=Object.getOwnPropertyDescriptor(gd,kd);if(!Cd||("get"in Cd?!gd.__esModule:Cd.writable||Cd.configurable))Cd={enumerable:!0,get:function(){return gd[kd]}};Object.defineProperty(Bd,md,Cd)}:function(Bd,gd,kd,md){void 0===md&&(md=kd);Bd[md]=gd[kd]};tb=function(Bd){var gd="function"===typeof Symbol&&Symbol.iterator,kd=gd&&Bd[gd],md=0;if(kd)return kd.call(Bd);if(Bd&&"number"===
typeof Bd.length)return{next:function(){Bd&&md>=Bd.length&&(Bd=void 0);return{value:Bd&&Bd[md++],done:!Bd}}};throw new TypeError(gd?"Object is not iterable.":"Symbol.iterator is not defined.");};Ob=function(Bd,gd){var kd="function"===typeof Symbol&&Bd[Symbol.iterator];if(!kd)return Bd;Bd=kd.call(Bd);var md,Cd=[];try{for(;(void 0===gd||0<gd--)&&!(md=Bd.next()).done;)Cd.push(md.value)}catch(Fe){var we={error:Fe}}finally{try{md&&!md.done&&(kd=Bd["return"])&&kd.call(Bd)}finally{if(we)throw we.error;}}return Cd};
ec=function(){for(var Bd=[],gd=0;gd<arguments.length;gd++)Bd=Bd.concat(Ob(arguments[gd]));return Bd};Ub=function(){for(var Bd=0,gd=0,kd=arguments.length;gd<kd;gd++)Bd+=arguments[gd].length;Bd=Array(Bd);var md=0;for(gd=0;gd<kd;gd++)for(var Cd=arguments[gd],we=0,Fe=Cd.length;we<Fe;we++,md++)Bd[md]=Cd[we];return Bd};pc=function(Bd,gd,kd){if(kd||2===arguments.length)for(var md=0,Cd=gd.length,we;md<Cd;md++)!we&&md in gd||(we||=Array.prototype.slice.call(gd,0,md),we[md]=gd[md]);return Bd.concat(we||Array.prototype.slice.call(gd))};
mc=function(Bd){return this instanceof mc?(this.v=Bd,this):new mc(Bd)};Vb=function(Bd,gd,kd){function md(Fg){gf[Fg]&&(ff[Fg]=function(pi){return new Promise(function(Kk,Vk){1<Ug.push([Fg,pi,Kk,Vk])||Cd(Fg,pi)})})}function Cd(Fg,pi){try{var Kk=gf[Fg](pi);Kk.value instanceof mc?Promise.resolve(Kk.value.v).then(we,Fe):of(Ug[0][2],Kk)}catch(Vk){of(Ug[0][3],Vk)}}function we(Fg){Cd("next",Fg)}function Fe(Fg){Cd("throw",Fg)}function of(Fg,pi){(Fg(pi),Ug.shift(),Ug.length)&&Cd(Ug[0][0],Ug[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");
var gf=kd.apply(Bd,gd||[]),ff,Ug=[];return ff={},md("next"),md("throw"),md("return"),ff[Symbol.asyncIterator]=function(){return this},ff};uc=function(Bd){function gd(Cd,we){kd[Cd]=Bd[Cd]?function(Fe){return(md=!md)?{value:mc(Bd[Cd](Fe)),done:"return"===Cd}:we?we(Fe):Fe}:we}var kd,md;return kd={},gd("next"),gd("throw",function(Cd){throw Cd;}),gd("return"),kd[Symbol.iterator]=function(){return this},kd};Ic=function(Bd){function gd(we){Cd[we]=Bd[we]&&function(Fe){return new Promise(function(of,gf){Fe=
Bd[we](Fe);kd(of,gf,Fe.done,Fe.value)})}}function kd(we,Fe,of,gf){Promise.resolve(gf).then(function(ff){we({value:ff,done:of})},Fe)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var md=Bd[Symbol.asyncIterator],Cd;return md?md.call(Bd):(Bd="function"===typeof tb?tb(Bd):Bd[Symbol.iterator](),Cd={},gd("next"),gd("throw"),gd("return"),Cd[Symbol.asyncIterator]=function(){return this},Cd)};Rc=function(Bd,gd){Object.defineProperty?Object.defineProperty(Bd,"raw",{value:gd}):
Bd.raw=gd;return Bd};var Ie=Object.create?function(Bd,gd){Object.defineProperty(Bd,"default",{enumerable:!0,value:gd})}:function(Bd,gd){Bd["default"]=gd};Vc=function(Bd){if(Bd&&Bd.__esModule)return Bd;var gd={};if(null!=Bd)for(var kd in Bd)"default"!==kd&&Object.prototype.hasOwnProperty.call(Bd,kd)&&rf(gd,Bd,kd);Ie(gd,Bd);return gd};Wd=function(Bd){return Bd&&Bd.__esModule?Bd:{"default":Bd}};be=function(Bd,gd,kd,md){if("a"===kd&&!md)throw new TypeError("Private accessor was defined without a getter");
if("function"===typeof gd?Bd!==gd||!md:!gd.has(Bd))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===kd?md:"a"===kd?md.call(Bd):md?md.value:gd.get(Bd)};Ee=function(Bd,gd,kd,md,Cd){if("m"===md)throw new TypeError("Private method is not writable");if("a"===md&&!Cd)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof gd?Bd!==gd||!Cd:!gd.has(Bd))throw new TypeError("Cannot write private member to an object whose class did not declare it");
return"a"===md?Cd.call(Bd,kd):Cd?Cd.value=kd:gd.set(Bd,kd),kd};Oe=function(Bd,gd){if(null===gd||"object"!==typeof gd&&"function"!==typeof gd)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof Bd?gd===Bd:Bd.has(gd)};nf("__extends",n);nf("__assign",I);nf("__rest",W);nf("__decorate",ia);nf("__param",sa);nf("__metadata",La);nf("__awaiter",Xa);nf("__generator",$a);nf("__exportStar",kb);nf("__createBinding",rf);nf("__values",tb);nf("__read",Ob);nf("__spread",ec);nf("__spreadArrays",
Ub);nf("__spreadArray",pc);nf("__await",mc);nf("__asyncGenerator",Vb);nf("__asyncDelegator",uc);nf("__asyncValues",Ic);nf("__makeTemplateObject",Rc);nf("__importStar",Vc);nf("__importDefault",Wd);nf("__classPrivateFieldGet",be);nf("__classPrivateFieldSet",Ee);nf("__classPrivateFieldIn",Oe)})}}),bc={};((b,g)=>{for(var n in g)dk(b,n,{get:g[n],enumerable:!0})})(bc,{App:()=>OI,PreviewManager:()=>xw,generateJSXFromModel:()=>Il,generateSVGFromModel:()=>Ho});Sa.exports=(b=>Jb(dk({},"__esModule",{value:!0}),
b))(bc);var xc=(b=>{b.Yellow="yellow";b.Red="red";b.Pink="pink";b.Green="green";b.Blue="blue";b.Purple="purple";b.Gray="gray";b.Default="";return b})(xc||{}),Xc,pd=new Uint8Array(16),Ad=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Nd=[];for(let b=0;256>b;++b)Nd.push((b+256).toString(16).slice(1));var xe,Xe,tf=0,sg=0,Sf=function(b,g,n){n=g&&n||0;const I=g||Array(16);b=b||{};let W=b.node||xe;var ia=void 0!==b.clockseq?b.clockseq:
Xe;if(null==W||null==ia){var sa=b.random||(b.rng||q)();null==W&&(W=xe=[sa[0]|1,sa[1],sa[2],sa[3],sa[4],sa[5]]);null==ia&&(ia=Xe=(sa[6]<<8|sa[7])&16383)}sa=void 0!==b.msecs?b.msecs:Date.now();let La=void 0!==b.nsecs?b.nsecs:sg+1;const Xa=sa-tf+(La-sg)/1E4;0>Xa&&void 0===b.clockseq&&(ia=ia+1&16383);(0>Xa||sa>tf)&&void 0===b.nsecs&&(La=0);if(1E4<=La)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");tf=sa;sg=La;Xe=ia;sa+=122192928E5;b=(1E4*(sa&268435455)+La)%4294967296;I[n++]=b>>>24&255;
I[n++]=b>>>16&255;I[n++]=b>>>8&255;I[n++]=b&255;b=sa/4294967296*1E4&268435455;I[n++]=b>>>8&255;I[n++]=b&255;I[n++]=b>>>24&15|16;I[n++]=b>>>16&255;I[n++]=ia>>>8|128;I[n++]=ia&255;for(ia=0;6>ia;++ia)I[n+ia]=W[ia];return g||S(I)},Mf=class{static clamp(b,g,n){return Math.max(g,"undefined"!==typeof n?Math.min(b,n):b)}static clampV(b,g,n){return b.map(I=>n?Mf.clamp(I,g,n):Mf.clamp(I,g))}static cross(b,g,n){return(g[0]-b[0])*(n[1]-b[1])-(n[0]-b[0])*(g[1]-b[1])}static snap(b,g=1){return[Math.round(b[0]/g)*
g,Math.round(b[1]/g)*g]}},xd=Mf;xd.neg=b=>[-b[0],-b[1]];xd.add=(b,g)=>[b[0]+g[0],b[1]+g[1]];xd.addScalar=(b,g)=>[b[0]+g,b[1]+g];xd.sub=(b,g)=>[b[0]-g[0],b[1]-g[1]];xd.subScalar=(b,g)=>[b[0]-g,b[1]-g];xd.vec=(b,g)=>[g[0]-b[0],g[1]-b[1]];xd.mul=(b,g)=>[b[0]*g,b[1]*g];xd.mulV=(b,g)=>[b[0]*g[0],b[1]*g[1]];xd.div=(b,g)=>[b[0]/g,b[1]/g];xd.divV=(b,g)=>[b[0]/g[0],b[1]/g[1]];xd.per=b=>[b[1],-b[0]];xd.dpr=(b,g)=>b[0]*g[0]+b[1]*g[1];xd.cpr=(b,g)=>b[0]*g[1]-g[0]*b[1];xd.len2=b=>b[0]*b[0]+b[1]*b[1];xd.len=b=>
Math.hypot(b[0],b[1]);xd.pry=(b,g)=>Mf.dpr(b,g)/Mf.len(g);xd.uni=b=>Mf.div(b,Mf.len(b));xd.normalize=b=>Mf.uni(b);xd.tangent=(b,g)=>Mf.uni(Mf.sub(b,g));xd.dist2=(b,g)=>Mf.len2(Mf.sub(b,g));xd.dist=(b,g)=>Math.hypot(b[1]-g[1],b[0]-g[0]);xd.fastDist=(b,g)=>{b=[g[0]-b[0],g[1]-b[1]];g=[Math.abs(b[0]),Math.abs(b[1])];let n=1/Math.max(g[0],g[1]);n*=1.29289-(g[0]+g[1])*n*.29289;return[b[0]*n,b[1]*n]};xd.ang=(b,g)=>Math.atan2(Mf.cpr(b,g),Mf.dpr(b,g));xd.angle=(b,g)=>Math.atan2(g[1]-b[1],g[0]-b[0]);xd.med=
(b,g)=>Mf.mul(Mf.add(b,g),.5);xd.rot=(b,g=0)=>[b[0]*Math.cos(g)-b[1]*Math.sin(g),b[0]*Math.sin(g)+b[1]*Math.cos(g)];xd.rotWith=(b,g,n=0)=>{if(0===n)return b;const I=Math.sin(n);n=Math.cos(n);const W=b[0]-g[0];b=b[1]-g[1];return[W*n-b*I+g[0],W*I+b*n+g[1]]};xd.isEqual=(b,g)=>b[0]===g[0]&&b[1]===g[1];xd.lrp=(b,g,n)=>Mf.add(b,Mf.mul(Mf.sub(g,b),n));xd.int=(b,g,n,I,W=1)=>{n=(Mf.clamp(n,I)-n)/(I-n);return Mf.add(Mf.mul(b,1-n),Mf.mul(g,W))};xd.ang3=(b,g,n)=>{b=Mf.vec(g,b);g=Mf.vec(g,n);return Mf.ang(b,g)};
xd.abs=b=>[Math.abs(b[0]),Math.abs(b[1])];xd.rescale=(b,g)=>{const n=Mf.len(b);return[g*b[0]/n,g*b[1]/n]};xd.isLeft=(b,g,n)=>(g[0]-b[0])*(n[1]-b[1])-(n[0]-b[0])*(g[1]-b[1]);xd.clockwise=(b,g,n)=>0<Mf.isLeft(b,g,n);xd.toFixed=b=>b.map(g=>Math.round(100*g)/100);xd.nearestPointOnLineThroughPoint=(b,g,n)=>Mf.add(b,Mf.mul(g,Mf.pry(Mf.sub(n,b),g)));xd.distanceToLineThroughPoint=(b,g,n)=>Mf.dist(n,Mf.nearestPointOnLineThroughPoint(b,g,n));xd.nearestPointOnLineSegment=(b,g,n,I=!0)=>{const W=Mf.uni(Mf.sub(g,
b));n=Mf.add(b,Mf.mul(W,Mf.pry(Mf.sub(n,b),W)));if(I){if(n[0]<Math.min(b[0],g[0]))return b[0]<g[0]?b:g;if(n[0]>Math.max(b[0],g[0]))return b[0]>g[0]?b:g;if(n[1]<Math.min(b[1],g[1]))return b[1]<g[1]?b:g;if(n[1]>Math.max(b[1],g[1]))return b[1]>g[1]?b:g}return n};xd.distanceToLineSegment=(b,g,n,I=!0)=>Mf.dist(n,Mf.nearestPointOnLineSegment(b,g,n,I));xd.nudge=(b,g,n)=>Mf.isEqual(b,g)?b:Mf.add(b,Mf.mul(Mf.uni(Mf.sub(g,b)),n));xd.nudgeAtAngle=(b,g,n)=>[Math.cos(g)*n+b[0],Math.sin(g)*n+b[1]];xd.toPrecision=
(b,g=4)=>[+b[0].toPrecision(g),+b[1].toPrecision(g)];xd.pointsBetween=(b,g,n=6)=>Array.from(Array(n)).map((I,W)=>{I=W/(n-1);W=Math.min(1,.5+Math.abs(.5-I));return[...Mf.lrp(b,g,I),W]});xd.slope=(b,g)=>b[0]===g[0]?NaN:(b[1]-g[1])/(b[0]-g[0]);xd.toAngle=b=>{b=Math.atan2(b[1],b[0]);return 0>b?b+2*Math.PI:b};xd.max=(...b)=>[Math.max(...b.map(g=>g[0])),Math.max(...b.map(g=>g[1]))];xd.min=(...b)=>[Math.min(...b.map(g=>g[0])),Math.min(...b.map(g=>g[1]))];var Zd=xd,Ge=class{static getRectangleSides(b,g,n=
0){const I=[b[0]+g[0]/2,b[1]+g[1]/2],W=xd.rotWith(b,I,n),ia=xd.rotWith(xd.add(b,[g[0],0]),I,n),sa=xd.rotWith(xd.add(b,g),I,n);b=xd.rotWith(xd.add(b,[0,g[1]]),I,n);return[["top",[W,ia]],["right",[ia,sa]],["bottom",[sa,b]],["left",[b,W]]]}static getBoundsSides(b){return Ge.getRectangleSides([b.minX,b.minY],[b.width,b.height])}static expandBounds(b,g){return{minX:b.minX-g,minY:b.minY-g,maxX:b.maxX+g,maxY:b.maxY+g,width:b.width+2*g,height:b.height+2*g}}static boundsCollide(b,g){return!(b.maxX<g.minX||
b.minX>g.maxX||b.maxY<g.minY||b.minY>g.maxY)}static boundsContain(b,g){return Array.isArray(g)?b.minX<g[0]&&b.minY<g[1]&&b.maxY>g[1]&&b.maxX>g[0]:b.minX<g.minX&&b.minY<g.minY&&b.maxY>g.maxY&&b.maxX>g.maxX}static boundsContained(b,g){return Ge.boundsContain(g,b)}static boundsAreEqual(b,g){return!(g.maxX!==b.maxX||g.minX!==b.minX||g.maxY!==b.maxY||g.minY!==b.minY)}static getBoundsFromPoints(b,g=0){let n=Infinity,I=Infinity,W=-Infinity,ia=-Infinity;if(2>b.length)I=n=0,ia=W=1;else for(const sa of b)n=
Math.min(sa[0],n),I=Math.min(sa[1],I),W=Math.max(sa[0],W),ia=Math.max(sa[1],ia);return 0!==g?Ge.getBoundsFromPoints(b.map(sa=>xd.rotWith(sa,[(n+W)/2,(I+ia)/2],g))):{minX:n,minY:I,maxX:W,maxY:ia,width:Math.max(1,W-n),height:Math.max(1,ia-I)}}static centerBounds(b,g){const n=Ge.getBoundsCenter(b);return Ge.translateBounds(b,[g[0]-n[0],g[1]-n[1]])}static snapBoundsToGrid(b,g){const n=Math.round(b.minX/g)*g,I=Math.round(b.minY/g)*g,W=Math.round(b.maxX/g)*g;b=Math.round(b.maxY/g)*g;return{minX:n,minY:I,
maxX:W,maxY:b,width:Math.max(1,W-n),height:Math.max(1,b-I)}}static translateBounds(b,g){return{minX:b.minX+g[0],minY:b.minY+g[1],maxX:b.maxX+g[0],maxY:b.maxY+g[1],width:b.width,height:b.height}}static multiplyBounds(b,g){const n=Ge.getBoundsCenter(b);return Ge.centerBounds({minX:b.minX*g,minY:b.minY*g,maxX:b.maxX*g,maxY:b.maxY*g,width:b.width*g,height:b.height*g},[n[0]*g,n[1]*g])}static divideBounds(b,g){const n=Ge.getBoundsCenter(b);return Ge.centerBounds({minX:b.minX/g,minY:b.minY/g,maxX:b.maxX/
g,maxY:b.maxY/g,width:b.width/g,height:b.height/g},[n[0]/g,n[1]/g])}static getRotatedBounds(b,g=0){b=Ge.getRotatedCorners(b,g);let n=g=Infinity,I=-Infinity,W=-Infinity;for(const ia of b)g=Math.min(ia[0],g),n=Math.min(ia[1],n),I=Math.max(ia[0],I),W=Math.max(ia[1],W);return{minX:g,minY:n,maxX:I,maxY:W,width:Math.max(1,I-g),height:Math.max(1,W-n),rotation:0}}static getRotatedEllipseBounds(b,g,n,I,W=0){var ia=Math.cos(W);const sa=Math.sin(W);W=Math.hypot(n*ia,I*sa);ia=Math.hypot(n*sa,I*ia);return{minX:b+
n-W,minY:g+I-ia,maxX:b+n+W,maxY:g+I+ia,width:2*W,height:2*ia}}static getExpandedBounds(b,g){const n=Math.min(b.minX,g.minX),I=Math.min(b.minY,g.minY),W=Math.max(b.maxX,g.maxX);b=Math.max(b.maxY,g.maxY);return{minX:n,minY:I,maxX:W,maxY:b,width:Math.abs(W-n),height:Math.abs(b-I)}}static getCommonBounds(b){if(2>b.length)return b[0];let g=b[0];for(let n=1;n<b.length;n++)g=Ge.getExpandedBounds(g,b[n]);return g}static getRotatedCorners(b,g=0){const n=[b.minX+b.width/2,b.minY+b.height/2];b=[[b.minX,b.minY],
[b.maxX,b.minY],[b.maxX,b.maxY],[b.minX,b.maxY]];return g?b.map(I=>xd.rotWith(I,n,g)):b}static getTransformedBoundingBox(b,g,n,I=0,W=!1){const [ia,sa]=[b.minX,b.minY],[La,Xa]=[b.maxX,b.maxY];let [$a,kb]=[b.minX,b.minY],[tb,Ob]=[b.maxX,b.maxY];if("center"===g)return{minX:$a+n[0],minY:kb+n[1],maxX:tb+n[0],maxY:Ob+n[1],width:tb-$a,height:Ob-kb,scaleX:1,scaleY:1};const [ec,Ub]=xd.rot(n,-I);switch(g){case "top_edge":case "top_left_corner":case "top_right_corner":kb+=Ub;break;case "bottom_edge":case "bottom_left_corner":case "bottom_right_corner":Ob+=
Ub}switch(g){case "left_edge":case "top_left_corner":case "bottom_left_corner":$a+=ec;break;case "right_edge":case "top_right_corner":case "bottom_right_corner":tb+=ec}var pc=La-ia;const mc=Xa-sa;var Vb=(tb-$a)/pc,uc=(Ob-kb)/mc;b=0>Vb;n=0>uc;var Ic=Math.abs(tb-$a),Rc=Math.abs(Ob-kb);if(W)switch(W=pc/mc,pc=W<Ic/Rc,uc=1/W*(0>uc?1:-1)*Ic,Vb=Rc*(0>Vb?1:-1)*W,g){case "top_left_corner":pc?kb=Ob+uc:$a=tb+Vb;break;case "top_right_corner":pc?kb=Ob+uc:tb=$a-Vb;break;case "bottom_right_corner":pc?Ob=kb-uc:tb=
$a-Vb;break;case "bottom_left_corner":pc?Ob=kb-uc:$a=tb+Vb;break;case "bottom_edge":case "top_edge":Ic=($a+tb)/2;Rc*=W;$a=Ic-Rc/2;tb=Ic+Rc/2;break;case "left_edge":case "right_edge":Rc=(kb+Ob)/2,Ic/=W,kb=Rc-Ic/2,Ob=Rc+Ic/2}if(0!==I%(2*Math.PI)){Ic=[0,0];Rc=xd.med([ia,sa],[La,Xa]);Vb=xd.med([$a,kb],[tb,Ob]);switch(g){case "top_left_corner":Ic=xd.sub(xd.rotWith([tb,Ob],Vb,I),xd.rotWith([La,Xa],Rc,I));break;case "top_right_corner":Ic=xd.sub(xd.rotWith([$a,Ob],Vb,I),xd.rotWith([ia,Xa],Rc,I));break;case "bottom_right_corner":Ic=
xd.sub(xd.rotWith([$a,kb],Vb,I),xd.rotWith([ia,sa],Rc,I));break;case "bottom_left_corner":Ic=xd.sub(xd.rotWith([tb,kb],Vb,I),xd.rotWith([La,sa],Rc,I));break;case "top_edge":Ic=xd.sub(xd.rotWith(xd.med([$a,Ob],[tb,Ob]),Vb,I),xd.rotWith(xd.med([ia,Xa],[La,Xa]),Rc,I));break;case "left_edge":Ic=xd.sub(xd.rotWith(xd.med([tb,kb],[tb,Ob]),Vb,I),xd.rotWith(xd.med([La,sa],[La,Xa]),Rc,I));break;case "bottom_edge":Ic=xd.sub(xd.rotWith(xd.med([$a,kb],[tb,kb]),Vb,I),xd.rotWith(xd.med([ia,sa],[La,sa]),Rc,I));break;
case "right_edge":Ic=xd.sub(xd.rotWith(xd.med([$a,kb],[$a,Ob]),Vb,I),xd.rotWith(xd.med([ia,sa],[ia,Xa]),Rc,I))}[$a,kb]=xd.sub([$a,kb],Ic);[tb,Ob]=xd.sub([tb,Ob],Ic)}tb<$a&&([tb,$a]=[$a,tb]);Ob<kb&&([Ob,kb]=[kb,Ob]);return{minX:$a,minY:kb,maxX:tb,maxY:Ob,width:tb-$a,height:Ob-kb,scaleX:(tb-$a)/(La-ia||1)*(b?-1:1),scaleY:(Ob-kb)/(Xa-sa||1)*(n?-1:1)}}static getTransformAnchor(b,g,n){let I=b;switch(b){case "top_left_corner":I=g&&n?"bottom_right_corner":g?"top_right_corner":n?"bottom_left_corner":"bottom_right_corner";
break;case "top_right_corner":I=g&&n?"bottom_left_corner":g?"top_left_corner":n?"bottom_right_corner":"bottom_left_corner";break;case "bottom_right_corner":I=g&&n?"top_left_corner":g?"bottom_left_corner":n?"top_right_corner":"top_left_corner";break;case "bottom_left_corner":I=g&&n?"top_right_corner":g?"bottom_right_corner":n?"top_left_corner":"top_right_corner"}return I}static getRelativeTransformedBoundingBox(b,g,n,I,W){I=b.minX+(I?g.maxX-n.maxX:n.minX-g.minX)/g.width*b.width;W=b.minY+(W?g.maxY-
n.maxY:n.minY-g.minY)/g.height*b.height;const ia=n.width/g.width*b.width;b=n.height/g.height*b.height;return{minX:I,minY:W,maxX:I+ia,maxY:W+b,width:ia,height:b}}static getRotatedSize(b,g){const n=xd.div(b,2);b=[[0,0],[b[0],0],b,[0,b[1]]].map(I=>xd.rotWith(I,n,g));b=Ge.getBoundsFromPoints(b);return[b.width,b.height]}static getBoundsCenter(b){return[b.minX+b.width/2,b.minY+b.height/2]}static getBoundsWithCenter(b){const g=Ge.getBoundsCenter(b);return Wa(Fa({},b),{midX:g[0],midY:g[1]})}static getCommonTopLeft(b){const g=
[Infinity,Infinity];b.forEach(n=>{g[0]=Math.min(g[0],n[0]);g[1]=Math.min(g[1],n[1])});return g}static getTLSnapPoints(b,g,n){const I=Fa({},b);b=[0,0];const W=[],ia={minX:{id:"minX",isSnapped:!1},midX:{id:"midX",isSnapped:!1},maxX:{id:"maxX",isSnapped:!1},minY:{id:"minY",isSnapped:!1},midY:{id:"midY",isSnapped:!1},maxY:{id:"maxY",isSnapped:!1}},sa=["midX","minX","maxX"],La=["midY","minY","maxY"];g=g.map(Ob=>{const ec=sa.flatMap((pc,mc)=>sa.map((Vb,uc)=>{const Ic=I[pc]-Ob[Vb];return{f:pc,t:Vb,gap:Ic,
distance:Math.abs(Ic),isCareful:0===mc||3===mc+uc}})),Ub=La.flatMap((pc,mc)=>La.map((Vb,uc)=>{const Ic=I[pc]-Ob[Vb];return{f:pc,t:Vb,gap:Ic,distance:Math.abs(Ic),isCareful:0===mc||3===mc+uc}}));return[Ob,ec,Ub]});let Xa=Infinity,$a=Infinity,kb=Infinity,tb=Infinity;g.forEach(([,Ob,ec])=>{Ob.forEach(Ub=>{Ub.distance<n&&Ub.distance<kb&&(kb=Ub.distance,Xa=Ub.gap)});ec.forEach(Ub=>{Ub.distance<n&&Ub.distance<tb&&(tb=Ub.distance,$a=Ub.gap)})});g.forEach(([Ob,ec,Ub])=>{Infinity!==Xa&&ec.forEach(pc=>{2>Math.abs(pc.gap-
Xa)&&(ia[pc.f]=Wa(Fa({},ia[pc.f]),{isSnapped:!0,to:Ob[pc.t],B:Ob,distance:pc.distance}))});Infinity!==$a&&Ub.forEach(pc=>{2>Math.abs(pc.gap-$a)&&(ia[pc.f]=Wa(Fa({},ia[pc.f]),{isSnapped:!0,to:Ob[pc.t],B:Ob,distance:pc.distance}))})});b[0]=Infinity===Xa?0:Xa;b[1]=Infinity===$a?0:$a;I.minX-=b[0];I.midX-=b[0];I.maxX-=b[0];I.minY-=b[1];I.midY-=b[1];I.maxY-=b[1];sa.forEach(Ob=>{Ob=ia[Ob];if(Ob.isSnapped){var {id:ec,B:Ub}=Ob;Ob=I[ec];W.push("minX"===ec?[[Ob,I.midY],[Ob,Ub.minY],[Ob,Ub.maxY]]:[[Ob,I.minY],
[Ob,I.maxY],[Ob,Ub.minY],[Ob,Ub.maxY]])}});La.forEach(Ob=>{Ob=ia[Ob];if(Ob.isSnapped){var {id:ec,B:Ub}=Ob;Ob=I[ec];W.push("midY"===ec?[[I.midX,Ob],[Ub.minX,Ob],[Ub.maxX,Ob]]:[[I.minX,Ob],[I.maxX,Ob],[Ub.minX,Ob],[Ub.maxX,Ob]])}});return{offset:b,snapLines:W}}static ensureRatio(b,g){const {width:n,height:I}=b,W=Fa({},b);n/I<g?(W.width=I*g,W.maxX+=n-b.width):(W.height=n/g,W.maxY+=I-b.height);return W}static getDistributions(b,g){var n=b.map(ia=>{const sa=ia.getBounds();return{id:ia.id,point:[sa.minX,
sa.minY],bounds:sa,center:ia.getCenter()}});b=n.length;var I=Ge.getCommonBounds(n.map(({bounds:ia})=>ia));const W=[];switch(g){case "horizontal":g=n.reduce((ia,sa)=>ia+sa.bounds.width,0);if(g>I.width){const ia=n.sort(($a,kb)=>$a.bounds.minX-kb.bounds.minX)[0],sa=n.sort(($a,kb)=>kb.bounds.maxX-$a.bounds.maxX)[0];I=n.filter($a=>$a!==ia&&$a!==sa).sort(($a,kb)=>$a.center[0]-kb.center[0]);const La=(sa.center[0]-ia.center[0])/(b-1),Xa=ia.center[0]+La;I.forEach(({id:$a,point:kb,bounds:tb},Ob)=>{W.push({id:$a,
prev:kb,next:[Xa+La*Ob-tb.width/2,tb.minY]})})}else{n=n.sort((La,Xa)=>La.center[0]-Xa.center[0]);let ia=I.minX;const sa=(I.width-g)/(b-1);n.forEach(({id:La,point:Xa,bounds:$a})=>{W.push({id:La,prev:Xa,next:[ia,$a.minY]});ia+=$a.width+sa})}break;case "vertical":if(g=n.reduce((ia,sa)=>ia+sa.bounds.height,0),g>I.height){const ia=n.sort(($a,kb)=>$a.bounds.minY-kb.bounds.minY)[0],sa=n.sort(($a,kb)=>kb.bounds.maxY-$a.bounds.maxY)[0];I=n.filter($a=>$a!==ia&&$a!==sa).sort(($a,kb)=>$a.center[1]-kb.center[1]);
const La=(sa.center[1]-ia.center[1])/(b-1),Xa=ia.center[1]+La;I.forEach(({id:$a,point:kb,bounds:tb},Ob)=>{W.push({id:$a,prev:kb,next:[tb.minX,Xa+La*Ob-tb.height/2]})})}else{n=n.sort((La,Xa)=>La.center[1]-Xa.center[1]);let ia=I.minY;const sa=(I.height-g)/(b-1);n.forEach(({id:La,point:Xa,bounds:$a})=>{W.push({id:La,prev:Xa,next:[$a.minX,ia]});ia+=$a.height+sa})}}return W}static getPackedDistributions(b){const g=Ge.getCommonBounds(b.map(({bounds:W})=>W)),n=[g.minX,g.minY],I=Object.fromEntries(b.map(W=>
[W.id,[W.bounds.minX,W.bounds.minY]]));b=b.filter(W=>{var ia,sa,La,Xa;return!((null==(sa=null==(ia=W.props.handles)?void 0:ia.start)?0:sa.bindingId)||(null==(Xa=null==(La=W.props.handles)?void 0:La.end)?0:Xa.bindingId))}).map(W=>{const ia=W.getBounds();return{id:W.id,w:ia.width+16,h:ia.height+16,x:ia.minX,y:ia.minY}});A(b);return b.map(({id:W,x:ia,y:sa})=>({id:W,prev:I[W],next:[ia+n[0],sa+n[1]]}))}},Si=class{static pointInCircle(b,g,n){return xd.dist(b,g)<=n}static pointInEllipse(b,g,n,I,W=0){W=W||
0;var ia=Math.cos(W);W=Math.sin(W);g=xd.sub(b,g);b=ia*g[0]+W*g[1];ia=W*g[0]-ia*g[1];return 1>=b*b/(n*n)+ia*ia/(I*I)}static pointInRect(b,g){return!(b[0]<g[0]||b[0]>b[0]+g[0]||b[1]<g[1]||b[1]>b[1]+g[1])}static pointInPolygon(b,g){let n=0;g.forEach((I,W)=>{W=g[(W+1)%g.length];I[1]<=b[1]?W[1]>b[1]&&0<xd.cross(I,W,b)&&(n+=1):W[1]<=b[1]&&0>xd.cross(I,W,b)&&--n});return 0!==n}static pointInBounds(b,g){return!(b[0]<g.minX||b[0]>g.maxX||b[1]<g.minY||b[1]>g.maxY)}static pointInPolyline(b,g,n=3){for(let I=
1;I<g.length;I++)if(xd.distanceToLineSegment(g[I-1],g[I],b)<n)return!0;return!1}static _getSqSegDist(b,g,n){let I=g[0];g=g[1];let W=n[0]-I,ia=n[1]-g;if(0!==W||0!==ia){const sa=((b[0]-I)*W+(b[1]-g)*ia)/(W*W+ia*ia);1<sa?(I=n[0],g=n[1]):0<sa&&(I+=W*sa,g+=ia*sa)}W=b[0]-I;ia=b[1]-g;return W*W+ia*ia}static _simplifyStep(b,g,n,I,W){let ia=I,sa=-1;for(let La=g+1;La<n;La++){const Xa=Si._getSqSegDist(b[La],b[g],b[n]);Xa>ia&&(sa=La,ia=Xa)}-1<sa&&ia>I&&(1<sa-g&&Si._simplifyStep(b,g,sa,I,W),W.push(b[sa]),1<n-
sa&&Si._simplifyStep(b,sa,n,I,W))}static simplify2(b,g=1){if(2>=b.length)return b;g*=g;var n=b[0],I=b[1];const W=[n];for(let ia=1,sa=b.length;ia<sa;ia++)I=b[ia],(I[0]-n[0])*(I[0]-n[0])+(I[1]-n[1])*(I[1]-n[1])>g&&(W.push(I),n=I);n!==I&&W.push(I);n=W.length-1;I=[W[0]];Si._simplifyStep(W,0,n,g,I);I.push(W[n],b[b.length-1]);return I}static pointNearToPolyline(b,g,n=8){const I=g.length;for(let W=1;W<I;W++)if(xd.distanceToLineSegment(g[W-1],g[W],b)<n)return!0;return!1}},Xh=Si;Ua(Xh,"simplify",(b,g=1)=>
{var n=b.length;const I=b[0],W=b[n-1],[ia,sa]=I,[La,Xa]=W;if(2<n){let $a=0,kb=0;const tb=xd.len2([Xa-sa,La-ia]);for(let Ob=1;Ob<n-1;Ob++){const [ec,Ub]=b[Ob],pc=Math.pow(ec*(Xa-sa)+ia*(Ub-Xa)+La*(sa-Ub),2)/tb;$a>pc||($a=pc,kb=Ob)}if($a>g)return n=Si.simplify(b.slice(0,kb+1),g),b=Si.simplify(b.slice(kb+1),g),n.concat(b.slice(1))}return[I,W]});var sn=ac(Je()),pq=({target:b},g)=>{b=b&&b.tagName;return!!(b&&g&&g.includes(b))},$o=class{static registerShortcut(b,g){sn.default.bind(b,(n,I)=>{var W;n.preventDefault();
pq(n,["INPUT","TEXTAREA","SELECT"])||(null==(W=n.target)?0:W.isContentEditable)||g(n,I)},"keydown");return()=>{sn.default.unbind(b,"keydown")}}},em=Math.PI,Rg=em/2,Ki=2*em,Ok={},Hl={bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize",bottom_left_resize_corner:"swne-rotate",bottom_right_resize_corner:"senw-rotate",top_left_resize_corner:"nwse-rotate",
top_right_resize_corner:"nesw-rotate",rotate:"rotate",center:"grab",background:"grab"},Ek=class{static circleFromThreePoints(b,g,n){const [I,W]=b,[ia,sa]=g,[La,Xa]=n;g=I*(sa-Xa)-W*(ia-La)+ia*Xa-La*sa;b=-((I*I+W*W)*(Xa-sa)+(ia*ia+sa*sa)*(W-Xa)+(La*La+Xa*Xa)*(sa-W))/(2*g);g=-((I*I+W*W)*(ia-La)+(ia*ia+sa*sa)*(La-I)+(La*La+Xa*Xa)*(I-ia))/(2*g);return[b,g,Math.hypot(b-I,g-W)]}static perimeterOfEllipse(b,g){const n=Math.pow(b-g,2)/Math.pow(b+g,2);return em*(b+g)*(1+3*n/(10+Math.sqrt(4-3*n)))}static shortAngleDist(b,
g){b=(g-b)%Ki;return 2*b%Ki-b}static longAngleDist(b,g){return Ki-Ek.shortAngleDist(b,g)}static lerpAngles(b,g,n){return b+Ek.shortAngleDist(b,g)*n}static angleDelta(b,g){return Ek.shortAngleDist(b,g)}static getSweep(b,g,n){return Ek.angleDelta(Zd.angle(b,g),Zd.angle(b,n))}static clampRadians(b){return(Ki+b)%Ki}static snapAngleToSegments(b,g){g=Ki/g;b=Math.floor((Ek.clampRadians(b)+g/2)/g)*g%Ki;b<em&&(b+=Ki);b>em&&(b-=Ki);return b}static isAngleBetween(b,g,n){if(n===b||n===g)return!0;g=(g-b+Rg)%Rg;
return g<=em!==(n-b+Rg)%Rg>g}static degreesToRadians(b){return b*em/180}static radiansToDegrees(b){return 180*b/em}static getArcLength(b,g,n,I){b=Ek.getSweep(b,n,I);return b/Ki*Ki*g}static getSweepFlag(b,g,n){n=Zd.angle(b,n);return 0<(Zd.angle(b,g)-n+3*em)%Ki-em?0:1}static getLargeArcFlag(b,g,n){b=Zd.angle(n,b);g=(Zd.angle(n,g)-b+3*em)%Ki-em;return Math.abs(g)>Rg?0:1}static getArcDashOffset(b,g,n,I,W){const ia=Ek.getSweepFlag(b,n,I);g=Ek.getArcLength(b,g,n,I);return-(0>ia?g:Ki*b[2]-g)/2+W}static getEllipseDashOffset(b,
g){return-(Ki*b[2])/2+-g}static radiansToCardinalDirection(b){return b<.25*Math.PI?"north":b<.75*Math.PI?"east":b<1.25*Math.PI?"south":b<1.75*Math.PI?"west":"north"}},Rk=class{static getPolygonCentroid(b){var g=b.map(n=>n[0]);b=b.map(n=>n[1]);g=Math.min(...g)+Math.max(...g);b=Math.min(...b)+Math.max(...b);return[g?g/2:0,b?b/2:0]}};Ua(Rk,"getEdges",b=>{const g=b.length;return b.map((n,I)=>[n,b[(I+1)%g]])});Ua(Rk,"getEdgeOutwardNormal",(b,g)=>Zd.per(Zd.uni(Zd.sub(g,b))));Ua(Rk,"getEdgeInwardNormal",
(b,g)=>Zd.neg(Rk.getEdgeOutwardNormal(b,g)));Ua(Rk,"getOffsetEdge",(b,g,n)=>{n=Zd.mul(Zd.per(Zd.uni(Zd.sub(g,b))),n);return[Zd.add(b,n),Zd.add(g,n)]});Ua(Rk,"getOffsetEdges",(b,g)=>b.map(([n,I])=>Rk.getOffsetEdge(n,I,g)));Ua(Rk,"getOffsetPolygon",(b,g)=>{if(1>b.length)throw Error("Expected at least one point.");if(1===b.length)return b=b[0],[Zd.add(b,[-g,-g]),Zd.add(b,[g,-g]),Zd.add(b,[g,g]),Zd.add(b,[-g,g])];if(2===b.length){const [n,I]=b;return[...Rk.getOffsetEdge(n,I,g),...Rk.getOffsetEdge(I,n,
g)]}return Rk.getOffsetEdges(Rk.getEdges(b),g).flatMap((n,I,W)=>{{I=W[(I+1)%W.length];const ia=xd.slope(n[0],n[1]);W=xd.slope(I[0],I[1]);ia!==W?Number.isNaN(ia)&&!Number.isNaN(W)?n=[n[0][0],(n[0][0]-I[0][0])*W+I[0][1]]:Number.isNaN(W)&&!Number.isNaN(ia)?n=[I[0][0],(I[0][0]-n[0][0])*ia+n[0][1]]:(n=(ia*n[0][0]-W*I[0][0]+I[0][1]-n[0][1])/(ia-W),n=[n,W*(n-I[0][0])+I[0][1]]):n=void 0}if(void 0===n)throw Error("Expected an intersection");return n})});Ua(Rk,"getPolygonVertices",(b,g,n=0,I=1)=>{b=Zd.div(b,
2);const [W,ia]=[Math.max(1,b[0]-n),Math.max(1,b[1]-n)];n=[];for(let $a=0,kb=Ki/g;$a<g;$a++){var sa=(-Rg+$a*kb)%Ki,La=(-Rg+($a+1)*kb)%Ki;sa=Zd.add(b,[W*Math.cos(sa),ia*Math.sin(sa)]);La=Zd.add(b,[W*Math.cos(La),ia*Math.sin(La)]);var Xa=Zd.med(sa,La);Xa=Zd.nudge(Xa,b,Zd.dist(b,Xa)*(1-I));n.push(sa,Xa,La)}return n});Ua(Rk,"getTriangleVertices",(b,g=0,n=1)=>{const [I,W]=b;var ia=1-n;b=[I/2,g/2];n=[I-g,W-g];g=[g/2,W-g];const sa=Rk.getPolygonCentroid([b,n,g]),La=Zd.med(b,n),Xa=Zd.med(n,g),$a=Zd.med(g,
b),kb=Zd.dist(La,sa)*ia,tb=Zd.dist(Xa,sa)*ia;ia*=Zd.dist($a,sa);return[b,kb?Zd.nudge(La,sa,kb):La,n,tb?Zd.nudge(Xa,sa,tb):Xa,g,ia?Zd.nudge($a,sa,ia):$a]});Ua(Rk,"getStarVertices",(b,g,n,I=1)=>{const W=Zd.div(g,2),ia=Zd.mul(W,I/2),sa=Ki/n/2;return Array.from(Array(2*n)).map((La,Xa)=>{La=-Rg+Xa*sa;const [$a,kb]=Xa%2?ia:W;return Zd.add(b,[$a*Math.cos(La),kb*Math.sin(La)])})});var Gl=class{static getCurvedPathForPolygon(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=
["M",...b[0].slice(0,2),"Q"],n=b.length;for(let I=1;I<n;I++){const [W,ia]=b[I],[sa,La]=b[(I+1)%n];g.push(W,ia,(W+sa)/2,(ia+La)/2)}g.push("Z");return g.join(" ")}static getCurvedPathForPoints(b){if(3>b.length)return"M -4, 0\n      a 4,4 0 1,0 8,0\n      a 4,4 0 1,0 -8,0";const g=["M",...b[0].slice(0,2),"Q"],n=b.length;for(let I=1;I<n-1;I++){const [W,ia]=b[I],[sa,La]=b[I+1];g.push(W,ia,(W+sa)/2,(ia+La)/2)}return g.join(" ")}static getSvgPathFromStroke(b,g=!0){const n=b.length;if(4>n)return"";let I=
b[0],W=b[1];var ia=b[2];ia=`M${I[0].toFixed(2)},${I[1].toFixed(2)} Q${W[0].toFixed(2)},${W[1].toFixed(2)} ${((W[0]+ia[0])/2).toFixed(2)},${((W[1]+ia[1])/2).toFixed(2)} T`;for(let sa=2,La=n-1;sa<La;sa++)I=b[sa],W=b[sa+1],ia+=`${((I[0]+W[0])/2).toFixed(2)},${((I[1]+W[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}static getSvgPathFromStrokePoints(b,g=!1){const n=b.length;if(4>n)return"";let I=b[0].point,W=b[1].point;var ia=b[2].point;ia=`M${I[0].toFixed(2)},${I[1].toFixed(2)} Q${W[0].toFixed(2)},${W[1].toFixed(2)} ${((W[0]+
ia[0])/2).toFixed(2)},${((W[1]+ia[1])/2).toFixed(2)} T`;for(let sa=2,La=n-1;sa<La;sa++)I=b[sa].point,W=b[sa+1].point,ia+=`${((I[0]+W[0])/2).toFixed(2)},${((I[1]+W[1])/2).toFixed(2)} `;g&&(ia+="Z");return ia}};Ua(Gl,"TRIM_NUMBERS",/(\s?[A-Z]?,?-?[0-9]*\.[0-9]{0,2})(([0-9]|e|-)*)/g);var fr={},xp=Object.assign,Jo=Object.getOwnPropertyDescriptor,Om=Object.defineProperty,ap=Object.prototype,nq=[];Object.freeze(nq);var mq={};Object.freeze(mq);var rs="undefined"!==typeof Proxy,lg=Object.toString(),oo=function(){},
dr="undefined"!==typeof Object.getOwnPropertySymbols,gn="undefined"!==typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:dr?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,Oo=Object.getOwnPropertyDescriptors||function(b){var g={};gn(b).forEach(function(n){g[n]=Jo(b,n)});return g},Dm=Symbol("mobx-stored-annotations"),Yg=Symbol("mobx administration"),bp=function(){function b(n){void 0===n&&(n="Atom");this.name_=void 0;this.isBeingObserved_=
this.isPendingUnobservation_=!1;this.observers_=new Set;this.lastAccessedBy_=this.diffValue_=0;this.lowestObserverState_=ne.NOT_TRACKING_;this.onBUOL=this.onBOL=void 0;this.name_=n}var g=b.prototype;g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};g.reportObserved=function(){return Mb(this)};g.reportChanged=function(){od();gc(this);Ud()};g.toString=function(){return this.name_};return b}(),rq=D("Atom",
bp),Rm={identity:function(b,g){return b===g},structural:function(b,g){return ta(b,g)},"default":function(b,g){return Object.is?Object.is(b,g):b===g?0!==b||1/b===1/g:b!==b&&g!==g},shallow:function(b,g){return ta(b,g,1)}},oq="override",ss=nb(),Lo={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(Lo);var Xn=Wb("observable"),er=Wb("observable.ref",{enhancer:fb}),qq=Wb("observable.shallow",{enhancer:function(b,g,n){if(void 0===b||null===b||Yd(b)||jb(b)||Kp(b)||Gq(b))return b;if(Array.isArray(b))return xg.array(b,
{name:n,deep:!1});if(H(b))return xg.object(b,void 0,{name:n,deep:!1});if(N(b))return xg.map(b,{name:n,deep:!1});if(P(b))return xg.set(b,{name:n,deep:!1})}}),gr=Wb("observable.struct",{enhancer:function(b,g){return ta(b,g)?g:b}}),At=Ta(Xn);Object.assign(ad,At);var ev={box:function(b,g){g=g||Lo;return new Gb(b,Jc(g),g.name,!0,g.equals)},array:function(b,g){g=g||Lo;return(!1===De.useProxies||!1===g.proxy?ef:bb)(b,Jc(g),g.name)},map:function(b,g){g=g||Lo;return new cy(b,Jc(g),g.name)},set:function(b,
g){g=g||Lo;return new dy(b,Jc(g),g.name)},object:function(b,g,n){if(!1===De.useProxies||!1===(null==n?void 0:n.proxy))n=Ed({},n);else{var I={},W,ia;ka();I=Ed(I,n);n=null!=(ia=(W=I[Yg]).proxy_)?ia:W.proxy_=new Proxy(I,pC)}return sc(n,b,g)},ref:Ta(er),shallow:Ta(qq),deep:At,struct:Ta(gr)},xg=xp(ad,ev),zt=Ab("computed"),dv=Ab("computed.struct",{equals:Rm.structural}),Eg=function(b,g){if(Y(g))return Ea(b,g,zt);if(H(b))return Ta(Ab("computed",b));g=H(g)?g:{};g.get=b;g.name||(g.name=b.name||"");return new dd(g)};
Object.assign(Eg,zt);Eg.struct=Ta(dv);var yp,Bt,cp=0,T=1,la=null!=(yp=null==(Bt=Jo(function(){},"name"))?void 0:Bt.configurable)?yp:!1,Da={value:"action",configurable:!0,writable:!1,enumerable:!1};var gb=Symbol.toPrimitive;var Gb=function(b){function g(I,W,ia,sa,La){void 0===ia&&(ia="ObservableValue");void 0===La&&(La=Rm["default"]);sa=b.call(this,ia)||this;sa.enhancer=void 0;sa.hasUnreportedChange_=!1;sa.interceptors_=void 0;sa.changeListeners_=void 0;sa.value_=void 0;sa.dehancer=void 0;sa.enhancer=
W;sa.name_=ia;sa.equals=La;sa.value_=W(I,void 0,ia);return sa}ea(g,b);var n=g.prototype;n.dehanceValue=function(I){return void 0!==this.dehancer?this.dehancer(I):I};n.set=function(I){I=this.prepareNewValue_(I);I!==De.UNCHANGED&&this.setNewValue_(I)};n.prepareNewValue_=function(I){if(de(this)){I=oc(this,{object:this,type:Qo,newValue:I});if(!I)return De.UNCHANGED;I=I.newValue}I=this.enhancer(I,this.value_,this.name_);return this.equals(this.value_,I)?De.UNCHANGED:I};n.setNewValue_=function(I){var W=
this.value_;this.value_=I;this.reportChanged();Ne(this)&&bf(this,{type:Qo,object:this,newValue:I,oldValue:W})};n.get=function(){this.reportObserved();return this.dehanceValue(this.value_)};n.intercept_=function(I){return rd(this,I)};n.observe_=function(I,W){W&&I({observableKind:"value",debugObjectName:this.name_,object:this,type:Qo,newValue:this.value_,oldValue:void 0});return Vf(this,I)};n.raw=function(){return this.value_};n.toJSON=function(){return this.get()};n.toString=function(){return this.name_+
"["+this.value_+"]"};n.valueOf=function(){return X(this.get())};n[gb]=function(){return this.valueOf()};return g}(bp),tc=D("ObservableValue",Gb);var Kc=Symbol.toPrimitive;var dd=function(){function b(n){this.dependenciesState_=ne.NOT_TRACKING_;this.observing_=[];this.newObserving_=null;this.isPendingUnobservation_=this.isBeingObserved_=!1;this.observers_=new Set;this.lastAccessedBy_=this.runId_=this.diffValue_=0;this.lowestObserverState_=ne.UP_TO_DATE_;this.unboundDepsCount_=0;this.value_=new hh(null);
this.triggeredBy_=this.name_=void 0;this.isRunningSetter_=this.isComputing_=!1;this.setter_=this.derivation=void 0;this.isTracing_=Zf.NONE;this.onBUOL=this.onBOL=this.keepAlive_=this.requiresReaction_=this.equals_=this.scope_=void 0;n.get||m(31);this.derivation=n.get;this.name_=n.name||"ComputedValue";n.set&&(this.setter_=Oc("ComputedValue-setter",n.set));this.equals_=n.equals||(n.compareStructural||n.struct?Rm.structural:Rm["default"]);this.scope_=n.context;this.requiresReaction_=n.requiresReaction;
this.keepAlive_=!!n.keepAlive}var g=b.prototype;g.onBecomeStale_=function(){rb(this)};g.onBO=function(){this.onBOL&&this.onBOL.forEach(function(n){return n()})};g.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(n){return n()})};g.get=function(){this.isComputing_&&m(32,this.name_,this.derivation);if(0!==De.inBatch||0!==this.observers_.size||this.keepAlive_){if(Mb(this),Wc(this)){var n=De.trackingContext;this.keepAlive_&&!n&&(De.trackingContext=this);this.trackAndCompute()&&Xb(this);De.trackingContext=
n}}else Wc(this)&&(this.warnAboutUntrackedRead_(),od(),this.value_=this.computeValue_(!1),Ud());n=this.value_;if(n instanceof hh)throw n.cause;return n};g.set=function(n){if(this.setter_){this.isRunningSetter_&&m(33,this.name_);this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,n)}finally{this.isRunningSetter_=!1}}else m(34,this.name_)};g.trackAndCompute=function(){var n=this.value_,I=this.dependenciesState_===ne.NOT_TRACKING_,W=this.computeValue_(!0);if(n=I||n instanceof hh||W instanceof
hh||!this.equals_(n,W))this.value_=W;return n};g.computeValue_=function(n){this.isComputing_=!0;var I=yc(!1);if(n)var W=id(this,this.derivation,this.scope_);else if(!0===De.disableErrorBoundaries)W=this.derivation.call(this.scope_);else try{W=this.derivation.call(this.scope_)}catch(ia){W=new hh(ia)}De.allowStateChanges=I;this.isComputing_=!1;return W};g.suspend_=function(){this.keepAlive_||(Md(this),this.value_=void 0)};g.observe_=function(n,I){var W=this,ia=!0,sa=void 0;return Od(function(){var La=
W.get();if(!ia||I){var Xa=rc();n({observableKind:"computed",debugObjectName:W.name_,type:Qo,object:W,newValue:La,oldValue:sa});De.trackingDerivation=Xa}ia=!1;sa=La})};g.warnAboutUntrackedRead_=function(){};g.toString=function(){return this.name_+"["+this.derivation.toString()+"]"};g.valueOf=function(){return X(this.get())};g[Kc]=function(){return this.valueOf()};return b}(),Sd=D("ComputedValue",dd),ne;(function(b){b[b.NOT_TRACKING_=-1]="NOT_TRACKING_";b[b.UP_TO_DATE_=0]="UP_TO_DATE_";b[b.POSSIBLY_STALE_=
1]="POSSIBLY_STALE_";b[b.STALE_=2]="STALE_"})(ne||={});var Zf;(function(b){b[b.NONE=0]="NONE";b[b.LOG=1]="LOG";b[b.BREAK=2]="BREAK"})(Zf||={});var hh=function(b){this.cause=void 0;this.cause=b},hf=function(){this.version=6;this.UNCHANGED={};this.trackingContext=this.trackingDerivation=null;this.inBatch=this.mobxGuid=this.runId=0;this.pendingUnobservations=[];this.pendingReactions=[];this.allowStateChanges=this.isRunningReactions=!1;this.enforceActions=this.allowStateReads=!0;this.spyListeners=[];
this.globalReactionErrorHandlers=[];this.suppressReactionErrors=this.disableErrorBoundaries=this.observableRequiresReaction=this.reactionRequiresObservable=this.computedRequiresReaction=!1;this.useProxies=!0;this.verifyProxies=!1;this.safeDescriptors=!0},yg=!0,sh=!1,De=function(){var b=R();0<b.__mobxInstanceCount&&!b.__mobxGlobals&&(yg=!1);b.__mobxGlobals&&b.__mobxGlobals.version!==(new hf).version&&(yg=!1);if(yg){if(b.__mobxGlobals)return b.__mobxInstanceCount+=1,b.__mobxGlobals.UNCHANGED||(b.__mobxGlobals.UNCHANGED=
{}),b.__mobxGlobals;b.__mobxInstanceCount=1;return b.__mobxGlobals=new hf}setTimeout(function(){sh||m(35)},1);return new hf}(),me=function(){function b(n,I,W,ia){void 0===n&&(n="Reaction");this.requiresObservable_=this.errorHandler_=this.onInvalidate_=this.name_=void 0;this.observing_=[];this.newObserving_=[];this.dependenciesState_=ne.NOT_TRACKING_;this.unboundDepsCount_=this.runId_=this.diffValue_=0;this.isRunning_=this.isTrackPending_=this.isScheduled_=this.isDisposed_=!1;this.isTracing_=Zf.NONE;
this.name_=n;this.onInvalidate_=I;this.errorHandler_=W;this.requiresObservable_=ia}var g=b.prototype;g.onBecomeStale_=function(){this.schedule_()};g.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,De.pendingReactions.push(this),0<De.inBatch||De.isRunningReactions||je(mb))};g.isScheduled=function(){return this.isScheduled_};g.runReaction_=function(){if(!this.isDisposed_){od();this.isScheduled_=!1;var n=De.trackingContext;De.trackingContext=this;if(Wc(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(I){this.reportExceptionInDerivation_(I)}}De.trackingContext=
n;Ud()}};g.track=function(n){if(!this.isDisposed_){od();this.isRunning_=!0;var I=De.trackingContext;De.trackingContext=this;n=id(this,n,void 0);De.trackingContext=I;this.isTrackPending_=this.isRunning_=!1;this.isDisposed_&&Md(this);n instanceof hh&&this.reportExceptionInDerivation_(n.cause);Ud()}};g.reportExceptionInDerivation_=function(n){var I=this;if(this.errorHandler_)this.errorHandler_(n,this);else{if(De.disableErrorBoundaries)throw n;De.suppressReactionErrors||console.error("[mobx] uncaught error in '"+
this+"'",n);De.globalReactionErrorHandlers.forEach(function(W){return W(n,I)})}};g.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(od(),Md(this),Ud()))};g.getDisposer_=function(){var n=this.dispose.bind(this);n[Yg]=this;return n};g.toString=function(){return"Reaction["+this.name_+"]"};g.trace=function(n){void 0===n&&(n=!1);Bb(this,n)};return b}(),Xd=100,je=function(b){return b()},$e=D("Reaction",me),jf="action",Bh=eb(jf),wg=eb("action.bound",{bound:!0}),zh=eb("autoAction",
{autoAction:!0}),ji=eb("autoAction.bound",{autoAction:!0,bound:!0}),af=Uc(!1);Object.assign(af,Bh);var rn=Uc(!0);Object.assign(rn,zh);af.bound=Ta(wg);rn.bound=Ta(ji);var fv=function(b){return b()},sC="onBO",tC="onBUO",qC=0;Rb.prototype=Object.create(Error.prototype);var ay=ra("flow"),rC=ra("flow.bound",{bound:!0}),xs=Object.assign(function(b,g){if(Y(g))return Ea(b,g,ay);var n=b.name||"\x3cunnamed flow\x3e";g=function(){var I=arguments,W=++qC,ia=af(n+" - runid: "+W+" - init",b).apply(this,I),sa,La=
void 0;I=new Promise(function(Xa,$a){function kb(Ub){La=void 0;try{var pc=af(n+" - runid: "+W+" - yield "+ec++,ia.next).call(ia,Ub)}catch(mc){return $a(mc)}Ob(pc)}function tb(Ub){La=void 0;try{var pc=af(n+" - runid: "+W+" - yield "+ec++,ia["throw"]).call(ia,Ub)}catch(mc){return $a(mc)}Ob(pc)}function Ob(Ub){if(ma(null==Ub?void 0:Ub.then))Ub.then(Ob,$a);else{if(Ub.done)return Xa(Ub.value);La=Promise.resolve(Ub.value);return La.then(kb,tb)}}var ec=0;sa=$a;kb(void 0)});I.cancel=af(n+" - runid: "+W+" - cancel",
function(){try{if(La){var Xa=La;ma(Xa.cancel)&&Xa.cancel()}var $a=ia["return"](void 0),kb=Promise.resolve($a.value);kb.then(oo,oo);ma(kb.cancel)&&kb.cancel();sa(new Rb)}catch(tb){sa(tb)}});return I};g.isMobXFlow=!0;return g},ay);xs.bound=Ta(rC);var pC={has:function(b,g){return b[Yg].has_(g)},get:function(b,g){return b[Yg].get_(g)},set:function(b,g,n){var I;return Y(g)?null!=(I=b[Yg].set_(g,n,!0))?I:!0:!1},deleteProperty:function(b,g){var n;return Y(g)?null!=(n=b[Yg].delete_(g,!0))?n:!0:!1},defineProperty:function(b,
g,n){var I;return null!=(I=b[Yg].defineProperty_(g,n))?I:!0},ownKeys:function(b){return b[Yg].ownKeys_()},preventExtensions:function(b){m(13)}},Qo="update",vC={get:function(b,g){var n=b[Yg];return g===Yg?n:"length"===g?n.getArrayLength_():"string"!==typeof g||isNaN(g)?F(Jt,g)?Jt[g]:b[g]:n.get_(parseInt(g))},set:function(b,g,n){var I=b[Yg];"length"===g&&I.setArrayLength_(n);"symbol"===typeof g||isNaN(g)?b[g]=n:I.set_(parseInt(g),n);return!0},preventExtensions:function(){m(15)}},qv=function(){function b(n,
I,W,ia){void 0===n&&(n="ObservableArray");this.atom_=this.legacyMode_=this.owned_=void 0;this.values_=[];this.proxy_=this.dehancer=this.enhancer_=this.changeListeners_=this.interceptors_=void 0;this.lastKnownLength_=0;this.owned_=W;this.legacyMode_=ia;this.atom_=new bp(n);this.enhancer_=function(sa,La){return I(sa,La,"ObservableArray[..]")}}var g=b.prototype;g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};g.dehanceValues_=function(n){return void 0!==this.dehancer&&0<
n.length?n.map(this.dehancer):n};g.intercept_=function(n){return rd(this,n)};g.observe_=function(n,I){void 0===I&&(I=!1);I&&n({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0});return Vf(this,n)};g.getArrayLength_=function(){this.atom_.reportObserved();return this.values_.length};g.setArrayLength_=function(n){("number"!==typeof n||isNaN(n)||0>n)&&m("Out of range: "+
n);var I=this.values_.length;if(n!==I)if(n>I){for(var W=Array(n-I),ia=0;ia<n-I;ia++)W[ia]=void 0;this.spliceWithArray_(I,0,W)}else this.spliceWithArray_(n,I-n)};g.updateArrayLength_=function(n,I){n!==this.lastKnownLength_&&m(16);this.lastKnownLength_+=I;this.legacyMode_&&0<I&&re(n+I+1)};g.spliceWithArray_=function(n,I,W){var ia=this,sa=this.values_.length;void 0===n?n=0:n>sa?n=sa:0>n&&(n=Math.max(0,sa+n));I=1===arguments.length?sa-n:void 0===I||null===I?0:Math.max(0,Math.min(I,sa-n));void 0===W&&
(W=nq);if(de(this)){var La=oc(this,{object:this.proxy_,type:"splice",index:n,removedCount:I,added:W});if(!La)return nq;I=La.removedCount;W=La.added}W=0===W.length?W:W.map(function(Xa){return ia.enhancer_(Xa,void 0)});this.legacyMode_&&this.updateArrayLength_(sa,W.length-I);sa=this.spliceItemsIntoValues_(n,I,W);0===I&&0===W.length||this.notifyArraySplice_(n,W,sa);return this.dehanceValues_(sa)};g.spliceItemsIntoValues_=function(n,I,W){if(1E4>W.length){var ia;return(ia=this.values_).splice.apply(ia,
[n,I].concat(W))}ia=this.values_.slice(n,n+I);var sa=this.values_.slice(n+I);this.values_.length+=W.length-I;for(I=0;I<W.length;I++)this.values_[n+I]=W[I];for(I=0;I<sa.length;I++)this.values_[n+W.length+I]=sa[I];return ia};g.notifyArrayChildUpdate_=function(n,I,W){var ia=!this.owned_&&!1,sa=Ne(this);n=sa||ia?{observableKind:"array",object:this.proxy_,type:Qo,debugObjectName:this.atom_.name_,index:n,newValue:I,oldValue:W}:null;this.atom_.reportChanged();sa&&bf(this,n)};g.notifyArraySplice_=function(n,
I,W){var ia=!this.owned_&&!1,sa=Ne(this);n=sa||ia?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:n,removed:W,added:I,removedCount:W.length,addedCount:I.length}:null;this.atom_.reportChanged();sa&&bf(this,n)};g.get_=function(n){if(this.legacyMode_&&n>=this.values_.length)console.warn("[mobx] Out of bounds read: "+n);else return this.atom_.reportObserved(),this.dehanceValue_(this.values_[n])};g.set_=function(n,I){var W=this.values_;this.legacyMode_&&
n>W.length&&m(17,n,W.length);if(n<W.length){var ia=W[n];if(de(this)){I=oc(this,{type:Qo,object:this.proxy_,index:n,newValue:I});if(!I)return;I=I.newValue}I=this.enhancer_(I,ia);I!==ia&&(W[n]=I,this.notifyArrayChildUpdate_(n,I,ia))}else{n=Array(n+1-W.length);for(ia=0;ia<n.length-1;ia++)n[ia]=void 0;n[n.length-1]=I;this.spliceWithArray_(W.length,0,n)}};return b}(),Jt={clear:function(){return this.splice(0)},replace:function(b){var g=this[Yg];return g.spliceWithArray_(0,g.values_.length,b)},toJSON:function(){return this.slice()},
splice:function(b,g){for(var n=arguments.length,I=Array(2<n?n-2:0),W=2;W<n;W++)I[W-2]=arguments[W];n=this[Yg];switch(arguments.length){case 0:return[];case 1:return n.spliceWithArray_(b);case 2:return n.spliceWithArray_(b,g)}return n.spliceWithArray_(b,g,I)},spliceWithArray:function(b,g,n){return this[Yg].spliceWithArray_(b,g,n)},push:function(){for(var b=this[Yg],g=arguments.length,n=Array(g),I=0;I<g;I++)n[I]=arguments[I];b.spliceWithArray_(b.values_.length,0,n);return b.values_.length},pop:function(){return this.splice(Math.max(this[Yg].values_.length-
1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var b=this[Yg],g=arguments.length,n=Array(g),I=0;I<g;I++)n[I]=arguments[I];b.spliceWithArray_(0,0,n);return b.values_.length},reverse:function(){De.trackingDerivation&&m(37,"reverse");this.replace(this.slice().reverse());return this},sort:function(){De.trackingDerivation&&m(37,"sort");var b=this.slice();b.sort.apply(b,arguments);this.replace(b);return this},remove:function(b){var g=this[Yg];b=g.dehanceValues_(g.values_).indexOf(b);
return-1<b?(this.splice(b,1),!0):!1}};Cb("concat",db);Cb("flat",db);Cb("includes",db);Cb("indexOf",db);Cb("join",db);Cb("lastIndexOf",db);Cb("slice",db);Cb("toString",db);Cb("toLocaleString",db);Cb("every",Db);Cb("filter",Db);Cb("find",Db);Cb("findIndex",Db);Cb("flatMap",Db);Cb("forEach",Db);Cb("map",Db);Cb("some",Db);Cb("reduce",hc);Cb("reduceRight",hc);var wC=D("ObservableArrayAdministration",qv),xC={};var yC=Symbol.iterator;var zC=Symbol.toStringTag;var cy=function(){function b(n,I,W){var ia=this;
void 0===I&&(I=Ma);void 0===W&&(W="ObservableMap");this.name_=this.enhancer_=void 0;this[Yg]=xC;this.dehancer=this.changeListeners_=this.interceptors_=this.keysAtom_=this.hasMap_=this.data_=void 0;this.enhancer_=I;this.name_=W;ma(Map)||m(18);this.keysAtom_=Za("ObservableMap.keys()");this.data_=new Map;this.hasMap_=new Map;Fb(!0,function(){ia.merge(n)})}var g=b.prototype;g.has_=function(n){return this.data_.has(n)};g.has=function(n){var I=this;if(!De.trackingDerivation)return this.has_(n);var W=this.hasMap_.get(n);
if(!W){var ia=W=new Gb(this.has_(n),fb,"ObservableMap.key?",!1);this.hasMap_.set(n,ia);wc(ia,function(){return I.hasMap_["delete"](n)})}return W.get()};g.set=function(n,I){var W=this.has_(n);if(de(this)){I=oc(this,{type:W?Qo:"add",object:this,newValue:I,name:n});if(!I)return this;I=I.newValue}W?this.updateValue_(n,I):this.addValue_(n,I);return this};g["delete"]=function(n){var I=this;if(de(this)&&!oc(this,{type:"delete",object:this,name:n}))return!1;if(this.has_(n)){var W=Ne(this),ia=W?{observableKind:"map",
debugObjectName:this.name_,type:"delete",object:this,oldValue:this.data_.get(n).value_,name:n}:null;Kd(function(){var sa;I.keysAtom_.reportChanged();null==(sa=I.hasMap_.get(n))?void 0:sa.setNewValue_(!1);I.data_.get(n).setNewValue_(void 0);I.data_["delete"](n)});W&&bf(this,ia);return!0}return!1};g.updateValue_=function(n,I){var W=this.data_.get(n);I=W.prepareNewValue_(I);if(I!==De.UNCHANGED){var ia=Ne(this);n=ia?{observableKind:"map",debugObjectName:this.name_,type:Qo,object:this,oldValue:W.value_,
name:n,newValue:I}:null;W.setNewValue_(I);ia&&bf(this,n)}};g.addValue_=function(n,I){var W=this;Kd(function(){var La,Xa=new Gb(I,W.enhancer_,"ObservableMap.key",!1);W.data_.set(n,Xa);I=Xa.value_;null==(La=W.hasMap_.get(n))?void 0:La.setNewValue_(!0);W.keysAtom_.reportChanged()});var ia=Ne(this),sa=ia?{observableKind:"map",debugObjectName:this.name_,type:"add",object:this,name:n,newValue:I}:null;ia&&bf(this,sa)};g.get=function(n){return this.has(n)?this.dehanceValue_(this.data_.get(n).get()):this.dehanceValue_(void 0)};
g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};g.keys=function(){this.keysAtom_.reportObserved();return this.data_.keys()};g.values=function(){var n=this,I=this.keys();return cb({next:function(){var W=I.next(),ia=W.done;W=W.value;return{done:ia,value:ia?void 0:n.get(W)}}})};g.entries=function(){var n=this,I=this.keys();return cb({next:function(){var W=I.next(),ia=W.done;W=W.value;return{done:ia,value:ia?void 0:[W,n.get(W)]}}})};g[yC]=function(){return this.entries()};
g.forEach=function(n,I){for(var W=Ia(this),ia;!(ia=W()).done;)ia=ia.value,n.call(I,ia[1],ia[0],this)};g.merge=function(n){var I=this;Kp(n)&&(n=new Map(n));Kd(function(){H(n)?ba(n).forEach(function(W){return I.set(W,n[W])}):Array.isArray(n)?n.forEach(function(W){return I.set(W[0],W[1])}):N(n)?(n.constructor!==Map&&m(19,n),n.forEach(function(W,ia){return I.set(ia,W)})):null!==n&&void 0!==n&&m(20,n)});return this};g.clear=function(){var n=this;Kd(function(){Ld(function(){for(var I=Ia(n.keys()),W;!(W=
I()).done;)n["delete"](W.value)})})};g.replace=function(n){var I=this;Kd(function(){for(var W=hd(n),ia=new Map,sa=!1,La=Ia(I.data_.keys()),Xa;!(Xa=La()).done;)if(Xa=Xa.value,!W.has(Xa))if(I["delete"](Xa))sa=!0;else{var $a=I.data_.get(Xa);ia.set(Xa,$a)}for(W=Ia(W.entries());!(La=W()).done;)Xa=La.value,La=Xa[0],$a=Xa[1],Xa=I.data_.has(La),I.set(La,$a),I.data_.has(La)&&($a=I.data_.get(La),ia.set(La,$a),Xa||(sa=!0));if(!sa)if(I.data_.size!==ia.size)I.keysAtom_.reportChanged();else for(sa=I.data_.keys(),
W=ia.keys(),La=sa.next(),Xa=W.next();!La.done;){if(La.value!==Xa.value){I.keysAtom_.reportChanged();break}La=sa.next();Xa=W.next()}I.data_=ia});return this};g.toString=function(){return"[object ObservableMap]"};g.toJSON=function(){return Array.from(this)};g.observe_=function(n,I){return Vf(this,n)};g.intercept_=function(n){return rd(this,n)};K(b,[{key:"size",get:function(){this.keysAtom_.reportObserved();return this.data_.size}},{key:zC,get:function(){return"Map"}}]);return b}(),Kp=D("ObservableMap",
cy),AC={};var BC=Symbol.iterator;var CC=Symbol.toStringTag;var dy=function(){function b(n,I,W){void 0===I&&(I=Ma);void 0===W&&(W="ObservableSet");this.name_=void 0;this[Yg]=AC;this.data_=new Set;this.enhancer_=this.dehancer=this.interceptors_=this.changeListeners_=this.atom_=void 0;this.name_=W;ma(Set)||m(22);this.atom_=Za(this.name_);this.enhancer_=function(ia,sa){return I(ia,sa,W)};n&&this.replace(n)}var g=b.prototype;g.dehanceValue_=function(n){return void 0!==this.dehancer?this.dehancer(n):n};
g.clear=function(){var n=this;Kd(function(){Ld(function(){for(var I=Ia(n.data_.values()),W;!(W=I()).done;)n["delete"](W.value)})})};g.forEach=function(n,I){for(var W=Ia(this),ia;!(ia=W()).done;)ia=ia.value,n.call(I,ia,ia,this)};g.add=function(n){var I=this;if(de(this)&&!oc(this,{type:"add",object:this,newValue:n}))return this;if(!this.has(n)){Kd(function(){I.data_.add(I.enhancer_(n,void 0));I.atom_.reportChanged()});var W=Ne(this),ia=W?{observableKind:"set",debugObjectName:this.name_,type:"add",object:this,
newValue:n}:null;W&&bf(this,ia)}return this};g["delete"]=function(n){var I=this;if(de(this)&&!oc(this,{type:"delete",object:this,oldValue:n}))return!1;if(this.has(n)){var W=Ne(this),ia=W?{observableKind:"set",debugObjectName:this.name_,type:"delete",object:this,oldValue:n}:null;Kd(function(){I.atom_.reportChanged();I.data_["delete"](n)});W&&bf(this,ia);return!0}return!1};g.has=function(n){this.atom_.reportObserved();return this.data_.has(this.dehanceValue_(n))};g.entries=function(){var n=0,I=Array.from(this.keys()),
W=Array.from(this.values());return cb({next:function(){var ia=n;n+=1;return ia<W.length?{value:[I[ia],W[ia]],done:!1}:{done:!0}}})};g.keys=function(){return this.values()};g.values=function(){this.atom_.reportObserved();var n=this,I=0,W=Array.from(this.data_.values());return cb({next:function(){return I<W.length?{value:n.dehanceValue_(W[I++]),done:!1}:{done:!0}}})};g.replace=function(n){var I=this;Gq(n)&&(n=new Set(n));Kd(function(){Array.isArray(n)?(I.clear(),n.forEach(function(W){return I.add(W)})):
P(n)?(I.clear(),n.forEach(function(W){return I.add(W)})):null!==n&&void 0!==n&&m("Cannot initialize set from "+n)});return this};g.observe_=function(n,I){return Vf(this,n)};g.intercept_=function(n){return rd(this,n)};g.toJSON=function(){return Array.from(this)};g.toString=function(){return"[object ObservableSet]"};g[BC]=function(){return this.values()};K(b,[{key:"size",get:function(){this.atom_.reportObserved();return this.data_.size}},{key:CC,get:function(){return"Set"}}]);return b}(),Gq=D("ObservableSet",
dy),ey=Object.create(null),fy=function(){function b(n,I,W,ia){void 0===I&&(I=new Map);void 0===ia&&(ia=ss);this.pendingKeys_=this.appliedAnnotations_=this.isPlainObject_=this.proxy_=this.interceptors_=this.changeListeners_=this.keysAtom_=this.defaultAnnotation_=this.values_=this.target_=void 0;this.target_=n;this.values_=I;this.name_=W;this.defaultAnnotation_=ia;this.keysAtom_=new bp("ObservableObject.keys");this.isPlainObject_=H(this.target_)}var g=b.prototype;g.getObservablePropValue_=function(n){return this.values_.get(n).get()};
g.setObservablePropValue_=function(n,I){var W=this.values_.get(n);if(W instanceof dd)return W.set(I),!0;if(de(this)){I=oc(this,{type:Qo,object:this.proxy_||this.target_,name:n,newValue:I});if(!I)return null;I=I.newValue}I=W.prepareNewValue_(I);if(I!==De.UNCHANGED){var ia=Ne(this);n=ia?{type:Qo,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:W.value_,name:n,newValue:I}:null;W.setNewValue_(I);ia&&bf(this,n)}return!0};g.get_=function(n){De.trackingDerivation&&
!F(this.target_,n)&&this.has_(n);return this.target_[n]};g.set_=function(n,I,W){void 0===W&&(W=!1);if(F(this.target_,n)){if(this.values_.has(n))return this.setObservablePropValue_(n,I);if(W)return Reflect.set(this.target_,n,I);this.target_[n]=I;return!0}return this.extend_(n,{value:I,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,W)};g.has_=function(n){if(!De.trackingDerivation)return n in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var I=this.pendingKeys_.get(n);
I||(I=new Gb(n in this.target_,fb,"ObservableObject.key?",!1),this.pendingKeys_.set(n,I));return I.get()};g.make_=function(n,I){!0===I&&(I=this.defaultAnnotation_);if(!1!==I){if(!(n in this.target_)){var W;if(null!=(W=this.target_[Dm])&&W[n])return;m(1,I.annotationType_,this.name_+"."+n.toString())}for(W=this.target_;W&&W!==ap;){var ia=Jo(W,n);if(ia){ia=I.make_(this,n,ia,W);if(0===ia)return;if(1===ia)break}W=Object.getPrototypeOf(W)}var sa;null==(sa=this.target_[Dm])?!0:delete sa[n]}};g.extend_=function(n,
I,W,ia){void 0===ia&&(ia=!1);!0===W&&(W=this.defaultAnnotation_);if(!1===W)return this.defineProperty_(n,I,ia);if(I=W.extend_(this,n,I,ia)){var sa;null==(sa=this.target_[Dm])?!0:delete sa[n]}return I};g.defineProperty_=function(n,I,W){void 0===W&&(W=!1);try{od();var ia=this.delete_(n);if(!ia)return ia;if(de(this)){var sa=oc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:I.value});if(!sa)return null;var La=sa.newValue;I.value!==La&&(I=Z({},I,{value:La}))}if(W){if(!Reflect.defineProperty(this.target_,
n,I))return!1}else Om(this.target_,n,I);this.notifyPropertyAddition_(n,I.value)}finally{Ud()}return!0};g.defineObservableProperty_=function(n,I,W,ia){void 0===ia&&(ia=!1);try{od();var sa=this.delete_(n);if(!sa)return sa;if(de(this)){var La=oc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:I});if(!La)return null;I=La.newValue}var Xa=ke(n),$a={configurable:De.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:Xa.get,set:Xa.set};if(ia){if(!Reflect.defineProperty(this.target_,
n,$a))return!1}else Om(this.target_,n,$a);var kb=new Gb(I,W,"ObservableObject.key",!1);this.values_.set(n,kb);this.notifyPropertyAddition_(n,kb.value_)}finally{Ud()}return!0};g.defineComputedProperty_=function(n,I,W){void 0===W&&(W=!1);try{od();var ia=this.delete_(n);if(!ia)return ia;if(de(this)&&!oc(this,{object:this.proxy_||this.target_,name:n,type:"add",newValue:void 0}))return null;I.name||(I.name="ObservableObject.key");I.context=this.proxy_||this.target_;var sa=ke(n),La={configurable:De.safeDescriptors?
this.isPlainObject_:!0,enumerable:!1,get:sa.get,set:sa.set};if(W){if(!Reflect.defineProperty(this.target_,n,La))return!1}else Om(this.target_,n,La);this.values_.set(n,new dd(I));this.notifyPropertyAddition_(n,void 0)}finally{Ud()}return!0};g.delete_=function(n,I){void 0===I&&(I=!1);if(!F(this.target_,n))return!0;if(de(this)&&!oc(this,{object:this.proxy_||this.target_,name:n,type:"remove"}))return null;try{var W,ia;od();var sa=Ne(this),La=this.values_.get(n),Xa=void 0;if(!La&&sa){var $a;Xa=null==($a=
Jo(this.target_,n))?void 0:$a.value}if(I){if(!Reflect.deleteProperty(this.target_,n))return!1}else delete this.target_[n];La&&(this.values_["delete"](n),La instanceof Gb&&(Xa=La.value_),gc(La));this.keysAtom_.reportChanged();null==(W=this.pendingKeys_)?void 0:null==(ia=W.get(n))?void 0:ia.set(n in this.target_);if(sa){var kb={type:"remove",observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:Xa,name:n};sa&&bf(this,kb)}}finally{Ud()}return!0};g.observe_=function(n,
I){return Vf(this,n)};g.intercept_=function(n){return rd(this,n)};g.notifyPropertyAddition_=function(n,I){var W,ia,sa=Ne(this);sa&&(I=sa?{type:"add",observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:n,newValue:I}:null,sa&&bf(this,I));null==(W=this.pendingKeys_)?void 0:null==(ia=W.get(n))?void 0:ia.set(!0);this.keysAtom_.reportChanged()};g.ownKeys_=function(){this.keysAtom_.reportObserved();return gn(this.target_)};g.keys_=function(){this.keysAtom_.reportObserved();
return Object.keys(this.target_)};return b}(),uC=D("ObservableObjectAdministration",fy),oC=We(0),mv=0,Yx=function(){};(function(b,g){Object.setPrototypeOf?Object.setPrototypeOf(b.prototype,g):void 0!==b.prototype.__proto__?b.prototype.__proto__=g:b.prototype=g})(Yx,Array.prototype);var pv=function(b,g,n){function I(ia,sa,La,Xa){void 0===La&&(La="ObservableArray");void 0===Xa&&(Xa=!1);var $a=b.call(this)||this;sa=new qv(La,sa,Xa,!0);sa.proxy_=pa($a);Q(pa($a),Yg,sa);ia&&ia.length&&(sa=yc(!0),$a.spliceWithArray(0,
0,ia),De.allowStateChanges=sa);Object.defineProperty(pa($a),"0",oC);return $a}ea(I,b);var W=I.prototype;W.concat=function(){this[Yg].atom_.reportObserved();for(var ia=arguments.length,sa=Array(ia),La=0;La<ia;La++)sa[La]=arguments[La];return Array.prototype.concat.apply(this.slice(),sa.map(function(Xa){return jb(Xa)?Xa.slice():Xa}))};W[n]=function(){var ia=this,sa=0;return cb({next:function(){return sa<ia.length?{value:ia[sa++],done:!1}:{done:!0,value:void 0}}})};K(I,[{key:"length",get:function(){return this[Yg].getArrayLength_()},
set:function(ia){this[Yg].setArrayLength_(ia)}},{key:g,get:function(){return"Array"}}]);return I}(Yx,Symbol.toStringTag,Symbol.iterator);Object.entries(Jt).forEach(function(b){var g=b[0];b=b[1];"concat"!==g&&M(pv.prototype,g,b)});re(1E3);var $x=ap.toString;["Symbol","Map","Set"].forEach(function(b){"undefined"===typeof R()[b]&&m("MobX requires global '"+b+"' to be available or polyfilled")});"object"===typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:vc,extras:{getDebugName:zb},
$mobx:Yg});var ob=V(587),km=class{constructor(b){Ua(this,"props");Ua(this,"aspectRatio");Ua(this,"type");Ua(this,"hideCloneHandles",!1);Ua(this,"hideResizeHandles",!1);Ua(this,"hideRotateHandle",!1);Ua(this,"hideContextBar",!1);Ua(this,"hideSelectionDetail",!1);Ua(this,"hideSelection",!1);Ua(this,"canChangeAspectRatio",!0);Ua(this,"canUnmount",!0);Ua(this,"canResize",[!0,!0]);Ua(this,"canScale",!0);Ua(this,"canFlip",!0);Ua(this,"canEdit",!1);Ua(this,"canBind",!1);Ua(this,"nonce");Ua(this,"bindingDistance",
4);Ua(this,"isDirty",!1);Ua(this,"lastSerialized");Ua(this,"getCenter",()=>Ge.getBoundsCenter(this.bounds));Ua(this,"getRotatedBounds",()=>{const {bounds:ia,props:{rotation:sa}}=this;return sa?Ge.getBoundsFromPoints(Ge.getRotatedCorners(ia,sa)):ia});Ua(this,"hitTestPoint",ia=>{var sa=this.rotatedBounds;if(!this.props.rotation)return Xh.pointInBounds(ia,sa);sa=Ge.getRotatedCorners(sa,this.props.rotation);return Xh.pointInPolygon(ia,sa)});Ua(this,"hitTestLineSegment",(ia,sa)=>{const La=Ge.getBoundsFromPoints([ia,
sa]),{rotatedBounds:Xa,props:{rotation:$a=0}}=this;return Ge.boundsContain(Xa,La)||$a?h(ia,sa,Ge.getRotatedCorners(this.bounds)).didIntersect:0<t(Xa,ia,sa).length});Ua(this,"hitTestBounds",ia=>{const {rotatedBounds:sa,props:{rotation:La=0}}=this,Xa=Ge.getRotatedCorners(this.bounds,La);return Ge.boundsContain(ia,sa)||0<z([ia.minX,ia.minY],[ia.width,ia.height],Xa).length});Ua(this,"getExpandedBounds",()=>Ge.expandBounds(this.getBounds(),this.bindingDistance));Ua(this,"getBindingPoint",(ia,sa,La,Xa)=>
{var $a=this.getBounds(),kb=this.getExpandedBounds();if(Xh.pointInBounds(ia,kb)){var tb=C(sa,La,kb).filter(Ob=>Ob.didIntersect).map(Ob=>Ob.points[0]);if(tb.length)return La=this.getCenter(),tb=tb.sort((Ob,ec)=>Zd.dist(ec,sa)-Zd.dist(Ob,sa))[0],tb=Zd.med(ia,tb),Xa?(Xa=2>Zd.dist(ia,La)?La:ia,$a=0):(Xa=2>Zd.distanceToLineSegment(ia,tb,La)?La:tb,$a=Xh.pointInBounds(ia,$a)?this.bindingDistance:Math.max(this.bindingDistance,Ge.getBoundsSides($a).map(Ob=>Zd.distanceToLineSegment(Ob[1][0],Ob[1][1],ia)).sort((Ob,
ec)=>Ob-ec)[0])),kb=Zd.divV(Zd.sub(Xa,[kb.minX,kb.minY]),[kb.width,kb.height]),{point:Zd.clampV(kb,0,1),distance:$a}}});Ua(this,"getSerialized",()=>Ec(Wa(Fa({},this.props),{type:this.type,nonce:this.nonce})));Ua(this,"getCachedSerialized",()=>{!this.isDirty&&this.lastSerialized||Kd(()=>{this.setIsDirty(!1);this.setLastSerialized(this.getSerialized())});if(this.lastSerialized)return this.lastSerialized;throw Error("Should not get here for getCachedSerialized");});Ua(this,"validateProps",ia=>ia);Ua(this,
"update",(ia,sa=!1,La=!1)=>{sa||this.isDirty||this.setIsDirty(!0);sa||La||this.incNonce();Object.assign(this.props,this.validateProps(ia));return this});Ua(this,"clone",()=>new this.constructor(this.serialized));Ua(this,"onResetBounds",ia=>this);Ua(this,"scale",[1,1]);Ua(this,"onResizeStart",ia=>{var sa;this.scale=[...(null!=(sa=this.props.scale)?sa:[1,1])];return this});Ua(this,"onResize",(ia,sa)=>{const {bounds:La,rotation:Xa,scale:[$a,kb]}=sa;ia=[...this.scale];0>$a&&(ia[0]*=-1);0>kb&&(ia[1]*=
-1);this.update({point:[La.minX,La.minY],scale:ia,rotation:Xa});return this});Ua(this,"onHandleChange",(ia,{id:sa,delta:La})=>{if(void 0!==ia.handles){var Xa=Hq(ia.handles);Xa[sa]=Wa(Fa({},Xa[sa]),{point:Zd.add(La,ia.handles[sa].point)});var $a=Ge.getCommonTopLeft(Object.values(Xa).map(kb=>kb.point));Object.values(Xa).forEach(kb=>{kb.point=Zd.sub(kb.point,$a)});this.update({point:Zd.add(ia.point,$a),handles:Xa})}});var g,n;const I=this.constructor.id,W=null!=(g=this.constructor.defaultProps)?g:{};
this.type=I;this.props=Fa(Fa({scale:[1,1]},W),b);this.nonce=null!=(n=b.nonce)?n:Date.now();og(this)}get id(){return this.props.id}setNonce(b){this.nonce=b}incNonce(){this.nonce++}setIsDirty(b){this.isDirty=b}setLastSerialized(b){this.lastSerialized=b}get center(){return this.getCenter()}get bounds(){return this.getBounds()}get rotatedBounds(){return this.getRotatedBounds()}get serialized(){return this.getCachedSerialized()}getShapeSVGJsx(b){b=this.getBounds();const {stroke:g,strokeWidth:n,strokeType:I,
opacity:W,fill:ia,noFill:sa,borderRadius:La}=this.props;return(0,ob.jsx)("rect",{fill:sa?"none":xf(ia,"background"),stroke:xf(g,"stroke"),strokeWidth:null!=n?n:2,strokeDasharray:"dashed"===I?"8 2":void 0,fillOpacity:null!=W?W:.2,width:b.width,height:b.height,rx:La,ry:La})}};Ua(km,"type");nc([xg],km.prototype,"props",2);nc([xg],km.prototype,"canResize",2);nc([xg],km.prototype,"nonce",2);nc([xg],km.prototype,"isDirty",2);nc([xg],km.prototype,"lastSerialized",2);nc([Eg],km.prototype,"id",1);nc([af],
km.prototype,"setNonce",1);nc([af],km.prototype,"incNonce",1);nc([af],km.prototype,"setIsDirty",1);nc([af],km.prototype,"setLastSerialized",1);nc([Eg],km.prototype,"center",1);nc([Eg],km.prototype,"bounds",1);nc([Eg],km.prototype,"rotatedBounds",1);nc([Eg],km.prototype,"serialized",1);nc([af],km.prototype,"update",2);var kn=class extends km{constructor(b={}){super(b);Ua(this,"canBind",!0);Ua(this,"getBounds",()=>{const [g,n]=this.props.point,[I,W]=this.props.size;return{minX:g,minY:n,maxX:g+I,maxY:n+
W,width:I,height:W}});Ua(this,"getRotatedBounds",()=>Ge.getBoundsFromPoints(Ge.getRotatedCorners(this.bounds,this.props.rotation)));Ua(this,"onResize",(g,n)=>{const {bounds:I,rotation:W,scale:[ia,sa]}=n;g=[...this.scale];0>ia&&(g[0]*=-1);0>sa&&(g[1]*=-1);this.update({point:[I.minX,I.minY],scale:g,rotation:W});return this.update({rotation:W,point:[I.minX,I.minY],size:[Math.max(1,I.width),Math.max(1,I.height)],scale:g})});Ua(this,"validateProps",g=>{void 0!==g.size&&(g.size[0]=Math.max(g.size[0],1),
g.size[1]=Math.max(g.size[1],1));return g});og(this)}};Ua(kn,"id","box");Ua(kn,"defaultProps",{id:"box",type:"box",parentId:"page",point:[0,0],size:[100,100]});var mr=class extends km{constructor(b={}){super(b);Ua(this,"getBounds",()=>{const {pointBounds:g,props:{point:n}}=this;return Ge.translateBounds(g,n)});Ua(this,"getRotatedBounds",()=>{const {props:{rotation:g,point:n},bounds:I,rotatedPoints:W}=this;return g?Ge.translateBounds(Ge.getBoundsFromPoints(W),n):I});Ua(this,"normalizedPoints",[]);
Ua(this,"isResizeFlippedX",!1);Ua(this,"isResizeFlippedY",!1);Ua(this,"onResizeStart",()=>{var g;const {bounds:n,props:{points:I}}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const W=[n.width,n.height];this.normalizedPoints=I.map(ia=>xd.divV(ia,W));return this});Ua(this,"onResize",(g,n)=>{const {bounds:I,scale:[W,ia]}=n,sa=[I.width,I.height];g=[...this.scale];0>W&&(g[0]*=-1);0>ia&&(g[1]*=-1);return this.update(W||ia?{point:[I.minX,I.minY],points:this.normalizedPoints.map(La=>xd.mulV(La,
sa).concat(La[2])),scale:g}:{point:[I.minX,I.minY],points:this.normalizedPoints.map(La=>xd.mulV(La,sa).concat(La[2]))})});Ua(this,"hitTestPoint",g=>{const {props:{points:n,point:I}}=this;return Xh.pointNearToPolyline(xd.sub(g,I),n)});Ua(this,"hitTestLineSegment",(g,n)=>{const {bounds:I,props:{points:W,point:ia}}=this;if(Xh.pointInBounds(g,I)||Xh.pointInBounds(n,I)||0<t(I,g,n).length){const sa=xd.sub(g,ia),La=xd.sub(n,ia);return h(sa,La,W).didIntersect||!!W.find(Xa=>5>xd.dist(sa,Xa)||5>xd.dist(La,
Xa))}return!1});Ua(this,"hitTestBounds",g=>{const {rotatedBounds:n,props:{points:I,point:W}}=this,ia=Ge.translateBounds(g,xd.neg(W));return Ge.boundsContain(g,n)||I.every(sa=>Xh.pointInBounds(sa,ia))||Ge.boundsCollide(g,n)&&0<J([ia.minX,ia.minY],[ia.width,ia.height],I).length});og(this)}get pointBounds(){const {props:{points:b}}=this;return Ge.getBoundsFromPoints(b)}get rotatedPoints(){const {props:{point:b,points:g,rotation:n},center:I}=this;if(!n)return g;const W=xd.sub(I,b);return g.map(ia=>xd.rotWith(ia,
W,n))}};Ua(mr,"id","draw");Ua(mr,"defaultProps",{id:"draw",type:"draw",parentId:"page",point:[0,0],points:[],isComplete:!1});nc([Eg],mr.prototype,"pointBounds",1);nc([Eg],mr.prototype,"rotatedPoints",1);var nv=class extends kn{constructor(b={}){super(b);Ua(this,"getBounds",()=>{const {props:{point:[g,n],size:[I,W]}}=this;return Ge.getRotatedEllipseBounds(g,n,I/2,W/2,0)});Ua(this,"getRotatedBounds",()=>{const {props:{point:[g,n],size:[I,W],rotation:ia}}=this;return Ge.getRotatedEllipseBounds(g,n,I/
2,W/2,ia)});Ua(this,"hitTestPoint",g=>{const {props:{size:n,rotation:I},center:W}=this;return Xh.pointInEllipse(g,W,n[0],n[1],I||0)});Ua(this,"hitTestLineSegment",(g,n)=>{const {props:{size:[I,W],rotation:ia=0},center:sa}=this;return p(g,n,sa,I,W,ia).didIntersect});Ua(this,"hitTestBounds",g=>{const {props:{size:[n,I],rotation:W=0},rotatedBounds:ia}=this;var sa;if(!(sa=Ge.boundsContain(g,ia))){const {minX:La,minY:Xa,width:$a,height:kb}=g;sa=0<u(this.center,n/2,I/2,W,[La,Xa],[$a,kb]).length}return sa});
og(this)}};Ua(nv,"id","ellipse");Ua(nv,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100]});var ov=class extends kn{constructor(b={}){super(b);Ua(this,"onResetBounds",g=>{const {clipping:n,size:I,point:W}=this.props;if(n){const [ia,sa,La,Xa]=Array.isArray(n)?n:[n,n,n,n];return this.update({clipping:0,point:[W[0]-Xa,W[1]-ia],size:[I[0]+(Xa-sa),I[1]+(ia-La)]})}if(g.asset){const {size:[ia,sa]}=g.asset;this.update({clipping:0,point:[W[0]+I[0]/2-ia/2,W[1]+I[1]/2-sa/
2],size:[ia,sa]})}return this});Ua(this,"onResize",(g,n)=>{const {bounds:I,clip:W,scale:ia}=n;({clipping:n}=this.props);const {clipping:sa}=g;if(W){const {point:[La,Xa],size:[$a,kb]}=g,[tb,Ob,ec,Ub]=sa?Array.isArray(sa)?sa:[sa,sa,sa,sa]:[0,0,0,0];n=[tb+(I.minY-Xa),Ob+(I.maxX-(La+$a)),ec+(I.maxY-(Xa+kb)),Ub+(I.minX-La)]}else void 0!==sa&&(n=Array.isArray(sa)?sa:[sa,sa,sa,sa],n=[n[0]*ia[1],n[1]*ia[0],n[2]*ia[1],n[3]*ia[0]]);if(n&&Array.isArray(n)){const La=n;La.every((Xa,$a)=>0===$a||Xa===La[$a-1])&&
(n=La[0])}return this.update({point:[I.minX,I.minY],size:[Math.max(1,I.width),Math.max(1,I.height)],clipping:n})});og(this)}};Ua(ov,"id","ellipse");Ua(ov,"defaultProps",{id:"ellipse",type:"ellipse",parentId:"page",point:[0,0],size:[100,100],clipping:0,objectFit:"none",assetId:""});var Zx=class extends km{constructor(b={}){super(b);Ua(this,"getBounds",()=>{const {points:g,props:{point:n}}=this;return Ge.translateBounds(Ge.getBoundsFromPoints(g),n)});Ua(this,"getRotatedBounds",()=>{const {rotatedPoints:g,
props:{point:n}}=this;return Ge.translateBounds(Ge.getBoundsFromPoints(g),n)});Ua(this,"normalizedHandles",[]);Ua(this,"onResizeStart",()=>{var g;const {props:{handles:n},bounds:I}=this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];const W=[I.width,I.height];this.normalizedHandles=Object.values(n).map(ia=>xd.divV(ia.point,W));return this});Ua(this,"onResize",(g,n)=>{const {bounds:I,scale:[W,ia]}=n,{props:{handles:sa},normalizedHandles:La}=this,Xa=[I.width,I.height];g=[...this.scale];0>W&&(g[0]*=
-1);0>ia&&(g[1]*=-1);return this.update({point:[I.minX,I.minY],handles:Object.values(sa).map(($a,kb)=>Wa(Fa({},$a),{point:xd.mulV(La[kb],Xa)})),scale:g})});Ua(this,"hitTestPoint",g=>{const {points:n}=this;return Xh.pointNearToPolyline(xd.sub(g,this.props.point),n)});Ua(this,"hitTestLineSegment",(g,n)=>{const {bounds:I,points:W,props:{point:ia}}=this;if(Xh.pointInBounds(g,I)||Xh.pointInBounds(n,I)||0<t(I,g,n).length){const sa=xd.sub(g,ia),La=xd.sub(n,ia);return h(sa,La,W).didIntersect||!!W.find(Xa=>
5>xd.dist(sa,Xa)||5>xd.dist(La,Xa))}return!1});Ua(this,"hitTestBounds",g=>{const {rotatedBounds:n,points:I,props:{point:W}}=this,ia=Ge.translateBounds(g,xd.neg(W));return Ge.boundsContain(g,n)||I.every(sa=>Xh.pointInBounds(sa,ia))||Ge.boundsCollide(g,n)&&0<J([ia.minX,ia.minY],[ia.width,ia.height],I).length});Ua(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=Zx.defaultProps.handles);return g});og(this)}get points(){return Object.values(this.props.handles).map(b=>
b.point)}get centroid(){const {points:b}=this;return Rk.getPolygonCentroid(b)}get rotatedPoints(){const {centroid:b,props:{handles:g,rotation:n}}=this;return n?Object.values(g).map(I=>xd.rotWith(I.point,b,n)):this.points}},qr=Zx;Ua(qr,"id","polyline");Ua(qr,"defaultProps",{id:"polyline",type:"polyline",parentId:"page",point:[0,0],handles:{}});nc([Eg],qr.prototype,"points",1);nc([Eg],qr.prototype,"centroid",1);nc([Eg],qr.prototype,"rotatedPoints",1);var by=class extends qr{constructor(b={}){super(b);
Ua(this,"hideResizeHandles",!0);Ua(this,"hideRotateHandle",!0);Ua(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.handles&&1>Object.values(g.handles).length&&(g.handles=by.defaultProps.handles);return g});Ua(this,"getHandlesChange",(g,n)=>{var I=xi(g.handles,n);I=xi(I,{start:{point:Zd.toFixed(I.start.point)},end:{point:Zd.toFixed(I.end.point)}});if(!Zd.isEqual(I.start.point,I.end.point)){n={point:g.point,handles:Hq(I)};g=g.point;I=Ge.translateBounds(Ge.getBoundsFromPoints(Object.values(I).map(ia=>
ia.point)),n.point);var W=Zd.sub([I.minX,I.minY],g);Zd.isEqual(W,[0,0])||(Object.values(n.handles).forEach(ia=>{ia.point=Zd.toFixed(Zd.sub(ia.point,W))}),n.point=Zd.toFixed(Zd.add(n.point,W)));return n}});og(this)}},ws=by;Ua(ws,"id","line");Ua(ws,"defaultProps",{id:"line",type:"line",parentId:"page",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}}});var Ap=class extends kn{constructor(b={}){super(b);Ua(this,"getRotatedBounds",()=>{const {rotatedVertices:g,
props:{point:n},offset:I}=this;return Ge.translateBounds(Ge.getBoundsFromPoints(g),xd.add(n,I))});Ua(this,"hitTestPoint",g=>{const {vertices:n}=this;return Xh.pointInPolygon(xd.add(g,this.props.point),n)});Ua(this,"hitTestLineSegment",(g,n)=>{const {vertices:I,props:{point:W}}=this;return h(xd.sub(g,W),xd.sub(n,W),I).didIntersect});Ua(this,"hitTestBounds",g=>{const {rotatedBounds:n,offset:I,rotatedVertices:W,props:{point:ia}}=this,sa=Ge.translateBounds(g,xd.neg(xd.add(ia,I)));return Ge.boundsContain(g,
n)||W.every(La=>Xh.pointInBounds(La,sa))||0<z([sa.minX,sa.minY],[sa.width,sa.height],W).length});Ua(this,"validateProps",g=>{g.point&&(g.point=[0,0]);void 0!==g.sides&&3>g.sides&&(g.sides=3);return g});og(this)}get vertices(){return this.getVertices()}get pageVertices(){const {props:{point:b},vertices:g}=this;return g.map(n=>xd.add(n,b))}get centroid(){const {vertices:b}=this;return Rk.getPolygonCentroid(b)}get rotatedVertices(){const {vertices:b,centroid:g,props:{rotation:n}}=this;return n?b.map(I=>
xd.rotWith(I,g,n)):b}get offset(){const {props:{size:[b,g]}}=this,n=Ge.getBoundsCenter(Ge.getBoundsFromPoints(this.vertices));return xd.sub(xd.div([b,g],2),n)}getVertices(b=0){const {ratio:g,sides:n,size:I}=this.props;return 3===n?Rk.getTriangleVertices(I,b,g):Rk.getPolygonVertices(I,n,b,g)}};Ua(Ap,"id","polygon");Ua(Ap,"defaultProps",{id:"polygon",type:"polygon",parentId:"page",point:[0,0],size:[100,100],sides:5,ratio:1,isFlippedY:!1});nc([Eg],Ap.prototype,"vertices",1);nc([Eg],Ap.prototype,"pageVertices",
1);nc([Eg],Ap.prototype,"centroid",1);nc([Eg],Ap.prototype,"rotatedVertices",1);nc([Eg],Ap.prototype,"offset",1);var lv=class extends kn{constructor(b={}){super(b);Ua(this,"canEdit",!0);Ua(this,"canFlip",!1);og(this)}};Ua(lv,"id","text");Ua(lv,"defaultProps",{id:"text",type:"text",parentId:"page",isSizeLocked:!0,point:[0,0],size:[16,32],text:""});var Gt=class extends kn{constructor(b={}){super(b);Ua(this,"canEdit",!1);Ua(this,"canFlip",!1);Ua(this,"getBounds",()=>Ge.getCommonBounds(this.shapes.map(g=>
g.getBounds())));og(this);this.canResize=[!1,!1]}getShapes(){throw Error("will be implemented other places");}get shapes(){return this.getShapes()}};Ua(Gt,"id","group");Ua(Gt,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});nc([Eg],Gt.prototype,"shapes",1);var lr=class{constructor(){Ua(this,"_id");Ua(this,"_initial");Ua(this,"_states");Ua(this,"_isActive",!1);Ua(this,"cursor");Ua(this,"_disposables",[]);Ua(this,"children",new Map([]));Ua(this,"registerStates",
n=>{n.forEach(I=>this.children.set(I.id,new I(this,this)));return this});Ua(this,"deregisterStates",n=>{n.forEach(I=>{var W;null==(W=this.children.get(I.id))?void 0:W.dispose();this.children.delete(I.id)});return this});Ua(this,"currentState",{});Ua(this,"transition",(n,I={})=>{if(0===this.children.size)throw Error(`Tool ${this.id} has no states, cannot transition to ${n}.`);const W=this.children.get(n),ia=this.currentState;if(!W)throw Error(`Could not find a state named ${n}.`);Kd(()=>{this.currentState?
(ia._events.onExit(Wa(Fa({},I),{toId:n})),ia.dispose(),W.registerKeyboardShortcuts(),this.setCurrentState(W),this._events.onTransition(Wa(Fa({},I),{fromId:ia.id,toId:n})),W._events.onEnter(Wa(Fa({},I),{fromId:ia.id}))):(this.currentState=W,W._events.onEnter(Wa(Fa({},I),{fromId:""})))});return this});Ua(this,"isIn",n=>{n=n.split(".").reverse();let I=this;for(;0<n.length;){const W=n.pop();if(!W)return!0;if(I.currentState.id===W){if(0===n.length)return!0;I=I.currentState}else break}return!1});Ua(this,
"isInAny",(...n)=>n.some(this.isIn));Ua(this,"forwardEvent",(n,...I)=>{var W,ia;(null==(ia=null==(W=this.currentState)?void 0:W._events)?0:ia[n])&&Kd(()=>{var sa;return null==(sa=this.currentState._events)?void 0:sa[n](...I)})});Ua(this,"_events",{onTransition:n=>{var I;null==(I=this.onTransition)?void 0:I.call(this,n)},onEnter:n=>{var I;this._isActive=!0;this.initial&&this.transition(this.initial,n);null==(I=this.onEnter)?void 0:I.call(this,n)},onExit:n=>{var I,W,ia;this._isActive=!1;null==(W=null==
(I=this.currentState)?void 0:I.onExit)?void 0:W.call(I,{toId:"parent"});null==(ia=this.onExit)?void 0:ia.call(this,n)},onPointerDown:(n,I)=>{var W;null==(W=this.onPointerDown)?void 0:W.call(this,n,I);this.forwardEvent("onPointerDown",n,I)},onPointerUp:(n,I)=>{var W;null==(W=this.onPointerUp)?void 0:W.call(this,n,I);this.forwardEvent("onPointerUp",n,I)},onPointerMove:(n,I)=>{var W;null==(W=this.onPointerMove)?void 0:W.call(this,n,I);this.forwardEvent("onPointerMove",n,I)},onPointerEnter:(n,I)=>{var W;
null==(W=this.onPointerEnter)?void 0:W.call(this,n,I);this.forwardEvent("onPointerEnter",n,I)},onPointerLeave:(n,I)=>{var W;null==(W=this.onPointerLeave)?void 0:W.call(this,n,I);this.forwardEvent("onPointerLeave",n,I)},onDoubleClick:(n,I)=>{var W;null==(W=this.onDoubleClick)?void 0:W.call(this,n,I);this.forwardEvent("onDoubleClick",n,I)},onKeyDown:(n,I)=>{var W;this._events.onModifierKey(n,I);null==(W=this.onKeyDown)?void 0:W.call(this,n,I);this.forwardEvent("onKeyDown",n,I)},onKeyUp:(n,I)=>{var W;
this._events.onModifierKey(n,I);null==(W=this.onKeyUp)?void 0:W.call(this,n,I);this.forwardEvent("onKeyUp",n,I)},onPinchStart:(n,I)=>{var W;null==(W=this.onPinchStart)?void 0:W.call(this,n,I);this.forwardEvent("onPinchStart",n,I)},onPinch:(n,I)=>{var W;null==(W=this.onPinch)?void 0:W.call(this,n,I);this.forwardEvent("onPinch",n,I)},onPinchEnd:(n,I)=>{var W;null==(W=this.onPinchEnd)?void 0:W.call(this,n,I);this.forwardEvent("onPinchEnd",n,I)},onModifierKey:(n,I)=>{switch(I.key){case "Shift":case "Alt":case "Ctrl":case "Meta":this._events.onPointerMove(n,
I)}}});Ua(this,"onEnter");Ua(this,"onExit");Ua(this,"onTransition");Ua(this,"onPointerDown");Ua(this,"onPointerUp");Ua(this,"onPointerMove");Ua(this,"onPointerEnter");Ua(this,"onPointerLeave");Ua(this,"onDoubleClick");Ua(this,"onKeyDown");Ua(this,"onKeyUp");Ua(this,"onPinchStart");Ua(this,"onPinch");Ua(this,"onPinchEnd");const b=this.constructor.initial,g=this.constructor.states;this._id=this.constructor.id;this._initial=b;this._states=g}dispose(){this._disposables.forEach(b=>b());this._disposables=
[];return this}get initial(){return this._initial}get states(){return this._states}get id(){return this._id}get isActive(){return this._isActive}get ascendants(){return[this]}get descendants(){return Array.from(this.children.values()).flatMap(b=>[b,...b.descendants])}setCurrentState(b){this.currentState=b}};Ua(lr,"id");Ua(lr,"shortcuts");nc([xg],lr.prototype,"currentState",2);nc([af],lr.prototype,"setCurrentState",1);var kv=class extends lr{constructor(b,g){var n,I;super();Ua(this,"registerKeyboardShortcuts",
()=>{var W;null!=(W=this._shortcuts)&&W.length&&this._disposables.push(...this._shortcuts.map(({keys:ia,fn:sa})=>$o.registerShortcut(ia,La=>{this.isActive&&sa(this.root,this,La)})))});Ua(this,"_root");Ua(this,"_parent");Ua(this,"_shortcuts",[]);Ua(this,"children",new Map([]));Ua(this,"registerStates",W=>{W.forEach(ia=>this.children.set(ia.id,new ia(this,this._root)));return this});Ua(this,"deregisterStates",W=>{W.forEach(ia=>{var sa;null==(sa=this.children.get(ia.id))?void 0:sa.dispose();this.children.delete(ia.id)});
return this});this._parent=b;this._root=g;this.states&&0<this.states.length&&(this.registerStates(this.states),b=null!=(n=this.initial)?n:this.states[0].id,n=this.children.get(b))&&(this.setCurrentState(n),null==(I=this.currentState)?void 0:I._events.onEnter({fromId:"initial"}));this._shortcuts=this.constructor.shortcuts;og(this)}get root(){return this._root}get parent(){return this._parent}get ascendants(){return this.parent?"ascendants"in this.parent?[...this.parent.ascendants,this]:[this.parent,
this]:[this]}};Ua(kv,"cursor");var zp=class extends kv{constructor(){super(...arguments);Ua(this,"isLocked",!1);Ua(this,"previous");Ua(this,"onEnter",({fromId:b})=>{this.previous=b;this.cursor&&this.app.cursors.setCursor(this.cursor)});Ua(this,"onTransition",b=>{({toId:b}=b);b=this.children.get(b);this.app.cursors.reset();b.cursor?this.app.cursors.setCursor(b.cursor):this.cursor&&this.app.cursors.setCursor(this.cursor)})}get app(){return this.root}},vi=class extends kv{get app(){return this.root}get tool(){return this.parent}},
Wx=class extends vi{constructor(){super(...arguments);Ua(this,"cursor","crosshair");Ua(this,"creatingShape");Ua(this,"aspectRatio");Ua(this,"initialBounds",{});Ua(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g,currentPoint:n}}=this.app;var {Shape:I}=this.tool;I=new I({id:Sf(),type:I.id,parentId:b.id,point:[...g],fill:this.app.settings.color,stroke:this.app.settings.color,size:Zd.abs(Zd.sub(n,g))});this.initialBounds={minX:g[0],minY:g[1],maxX:g[0]+1,maxY:g[1]+1,width:1,height:1};I.canChangeAspectRatio||
(I.aspectRatio?(this.aspectRatio=I.aspectRatio,this.initialBounds.height=this.aspectRatio):(this.aspectRatio=1,this.initialBounds.height=1),this.initialBounds.width=1,this.initialBounds.maxY=this.initialBounds.minY+this.initialBounds.height);this.creatingShape=I;this.app.currentPage.addShapes(I);this.app.setSelectedShapes([I])});Ua(this,"onPointerMove",b=>{if(!b.order){if(!this.creatingShape)throw Error("Expected a creating shape.");({initialBounds:b}=this);var {currentPoint:g,originPoint:n,shiftKey:I}=
this.app.inputs;b=Ge.getTransformedBoundingBox(b,"bottom_right_corner",Zd.sub(g,n),0,I||this.creatingShape.props.isAspectRatioLocked||!this.creatingShape.canChangeAspectRatio);this.creatingShape.update({point:[b.minX,b.minY],size:[b.width,b.height]})}});Ua(this,"onPointerUp",()=>{this.tool.transition("idle");this.creatingShape&&this.app.setSelectedShapes([this.creatingShape]);this.app.transition("select");this.app.persist()});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.creatingShape)throw Error("Expected a creating shape.");
this.app.deleteShapes([this.creatingShape]);this.tool.transition("idle")}})}};Ua(Wx,"id","creating");var Xx=class extends vi{constructor(){super(...arguments);Ua(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ua(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ua(Xx,
"id","idle");var Cx=class extends vi{constructor(){super(...arguments);Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))});Ua(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Ua(Cx,"id","pointing");var dp=class extends zp{constructor(){super(...arguments);Ua(this,"cursor","crosshair")}};Ua(dp,"id","box");Ua(dp,"states",[Xx,Cx,Wx]);Ua(dp,"initial","idle");
var Dx=class extends vi{constructor(){super(...arguments);Ua(this,"shape",{});Ua(this,"points",[[0,0,.5]]);Ua(this,"persistDebounced",Zk(this.app.persist,200));Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ua(this,"onEnter",()=>{var b;const {Shape:g,previousShape:n}=this.tool;var {originPoint:I}=this.app.inputs;this.app.history.pause();if(this.app.inputs.shiftKey&&n){this.shape=n;var {shape:W}=this;var ia=W.props.points[W.props.points.length-1];const La=xd.sub(I,
W.props.point).concat(null!=(b=I[2])?b:.5);this.points=[...W.props.points,ia,ia];const Xa=Math.ceil(xd.dist(ia,I)/16);for(let $a=0,kb=$a/(Xa-1);$a<Xa;$a++){b=this.points;I=b.push;W=xd.lrp(ia,La,kb);var sa=ia[2];I.call(b,W.concat.call(W,sa+(La[2]-sa)*kb))}this.addNextPoint(La)}else this.tool.previousShape=void 0,this.points=[[0,0,null!=(ia=I[2])?ia:.5]],this.shape=new g({id:Sf(),type:g.id,parentId:this.app.currentPage.id,point:I.slice(0,2),points:this.points,isComplete:!1,fill:this.app.settings.color,
stroke:this.app.settings.color}),this.app.currentPage.addShapes(this.shape)});Ua(this,"onPointerMove",()=>{const {shape:b}=this,{currentPoint:g,previousPoint:n}=this.app.inputs;xd.isEqual(n,g)||this.addNextPoint(xd.sub(g,b.props.point).concat(g[2]))});Ua(this,"onPointerUp",()=>{if(!this.shape)throw Error("Expected a creating shape.");this.app.history.resume();this.shape.update({isComplete:!0,points:this.tool.simplify?Xh.simplify2(this.points,this.tool.simplifyTolerance):this.shape.props.points});
this.tool.previousShape=this.shape;this.tool.transition("idle");let b=this.app.selectedTool.id;"pencil"===b||"highlighter"===b?this.persistDebounced():this.app.persist()});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":if(!this.shape)throw Error("Expected a creating shape.");this.app.deleteShapes([this.shape]);this.tool.transition("idle")}})}addNextPoint(b){const {shape:g}=this,n=xd.min(b,[0,0]);this.points.push(b);0>n[0]||0>n[1]?(this.points=this.points.map(I=>xd.sub(I,n).concat(I[2])),
g.update({point:xd.add(g.props.point,n),points:this.points})):g.update({points:this.points})}};Ua(Dx,"id","creating");var Ex=class extends vi{constructor(){super(...arguments);Ua(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ua(Ex,"id","idle");var Fx=class extends vi{constructor(){super(...arguments);
Ua(this,"origin",[0,0]);Ua(this,"prevDelta",[0,0]);Ua(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});Ua(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});Ua(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};Ua(Fx,"id","pinching");var vs=class extends zp{constructor(){super(...arguments);Ua(this,"cursor","crosshair");Ua(this,"simplify",!0);Ua(this,"simplifyTolerance",1);Ua(this,"previousShape");Ua(this,"onPinchStart",(b,g)=>{this.transition("pinching",
{info:b,event:g})})}};Ua(vs,"id","draw");Ua(vs,"states",[Ex,Dx,Fx]);Ua(vs,"initial","idle");var Gx=class extends vi{constructor(){super(...arguments);Ua(this,"points",[[0,0,.5]]);Ua(this,"hitShapes",new Set);Ua(this,"onEnter",()=>{const {originPoint:b}=this.app.inputs;this.points=[b];this.hitShapes.clear()});Ua(this,"onPointerMove",()=>{const {currentPoint:b,previousPoint:g}=this.app.inputs;xd.isEqual(g,b)||(this.points.push(b),this.app.shapesInViewport.filter(n=>n.hitTestLineSegment(g,b)).forEach(n=>
this.hitShapes.add(n)),this.app.setErasingShapes(Array.from(this.hitShapes.values())))});Ua(this,"onPointerUp",()=>{this.app.deleteShapes(Array.from(this.hitShapes.values()));this.tool.transition("idle")});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.setErasingShapes([]),this.tool.transition("idle")}})}};Ua(Gx,"id","erasing");var Hx=class extends vi{constructor(){super(...arguments);Ua(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ua(this,"onPinchStart",
(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};Ua(Hx,"id","idle");var Ix=class extends vi{constructor(){super(...arguments);Ua(this,"onEnter",()=>{const {currentPoint:b}=this.app.inputs;this.app.setErasingShapes(this.app.shapesInViewport.filter(g=>g.hitTestPoint(b)))});Ua(this,"onPointerMove",()=>{const {currentPoint:b,
originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&(this.tool.transition("erasing"),this.app.setSelectedShapes([]))});Ua(this,"onPointerUp",()=>{const b=[...this.app.erasingShapes];this.app.setErasingShapes([]);this.app.deleteShapes(b);this.tool.transition("idle")})}};Ua(Ix,"id","pointing");var Ft=class extends zp{constructor(){super(...arguments);Ua(this,"cursor","crosshair")}};Ua(Ft,"id","erase");Ua(Ft,"states",[Hx,Ix,Gx]);Ua(Ft,"initial","idle");var hv=class extends vi{constructor(){super(...arguments);
Ua(this,"handle",{});Ua(this,"handleId","end");Ua(this,"currentShape",{});Ua(this,"initialShape",{});Ua(this,"bindableShapeIds",[]);Ua(this,"startBindingShapeId");Ua(this,"newStartBindingId","");Ua(this,"draggedBindingId","");Ua(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,previousPoint:g,originPoint:n,currentPoint:I,modKey:W,altKey:ia}}=this.app;var sa=this.app.getShapeById(this.initialShape.id),{handles:La}=this.initialShape,Xa=this.handleId,$a="start"===this.handleId?"end":"start";if(!Zd.isEqual(g,
I)){var kb=Zd.sub(I,n);if(b){var tb=La[$a].point,Ob=Zd.add(La[Xa].point,kb),ec=Zd.angle(tb,Ob);tb=Zd.rotWith(Ob,tb,Ek.snapAngleToSegments(ec,24)-ec);kb=Zd.add(kb,Zd.sub(tb,Ob))}kb=Zd.add(La[Xa].point,kb);La={[Xa]:Wa(Fa({},La[Xa]),{point:Zd.toFixed(kb),bindingId:void 0})};var Ub=this.currentShape.getHandlesChange(this.initialShape,La);if(Ub){La=xi(sa.props,Ub);var pc={},mc;Xa=La.handles[Xa];$a=La.handles[$a];if(this.startBindingShapeId){var Vb;if(kb=this.app.getShapeById(this.startBindingShapeId)){Ob=
kb.getCenter();tb=La.handles.end;var uc=Zd.add(La.handles.start.point,La.point);Zd.isEqual(uc,Ob)&&uc[1]++;ec=kb.hitTestPoint(I);uc=Zd.uni(Zd.sub(uc,Ob));const Ic=void 0!==this.app.currentPage.bindings[this.newStartBindingId];W||kb.hitTestPoint(Zd.add(La.point,tb.point))||(Vb=Sc(sa.props,kb,"start",this.newStartBindingId,Ob,Ob,uc,ec));Vb&&!Ic?(pc[this.newStartBindingId]=Vb,La.handles.start.bindingId=Vb.id):!Vb&&Ic&&(console.log("removing start binding"),delete pc[this.newStartBindingId],La.handles.start.bindingId=
void 0)}}if(!W){Vb=Zd.add($a.point,La.point);$a=Zd.add(Xa.point,La.point);Xa=Zd.uni(Zd.sub($a,Vb));const Ic=Zd.add(La.point,La.handles.start.point),Rc=Zd.add(La.point,La.handles.end.point);kb=this.bindableShapeIds.map(Vc=>this.app.getShapeById(Vc)).sort((Vc,Wd)=>Wd.nonce-Vc.nonce).filter(Vc=>![Ic,Rc].every(Wd=>Vc.hitTestPoint(Wd)));for(const Vc of kb)if(mc=Sc(sa.props,Vc,this.handleId,this.draggedBindingId,$a,Vb,Xa,ia))break}mc?(pc[this.draggedBindingId]=mc,La=xi(La,{handles:{[this.handleId]:{bindingId:this.draggedBindingId}}})):
(sa=sa.props.handles[this.handleId].bindingId,void 0!==sa&&(delete pc[sa],La=xi(La,{handles:{[this.handleId]:{bindingId:void 0}}})));Ub=this.currentShape.getHandlesChange(La,La.handles);Kd(()=>{var Ic;if(Ub){this.currentShape.update(Ub);this.app.currentPage.updateBindings(pc);const Rc=Object.values(null!=(Ic=Ub.handles)?Ic:{}).map(Vc=>Vc.bindingId).map(Vc=>this.app.currentPage.bindings[Vc]).filter(Boolean).flatMap(Vc=>[Vc.toId,Vc.fromId].filter(Boolean));this.app.setBindingShapes(Rc)}})}}});Ua(this,
"onPointerUp",()=>{this.tool.transition("idle");this.currentShape&&this.app.setSelectedShapes([this.currentShape]);this.app.transition("select");this.app.persist()});Ua(this,"onExit",()=>{this.app.clearBindingShape();this.app.history.resume();this.app.persist()});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.deleteShapes([this.currentShape]),this.tool.transition("idle")}})}};Ua(hv,"id","creating");var Jx=class extends hv{constructor(){super(...arguments);Ua(this,"onEnter",()=>{var b;
this.app.history.pause();this.newStartBindingId=Sf();this.draggedBindingId=Sf();this.bindableShapeIds=this.app.currentPage.getBindableShapes();var {Shape:g}=this.tool;const {originPoint:n}=this.app.inputs;g=new g(Wa(Fa({},g.defaultProps),{id:Sf(),type:g.id,parentId:this.app.currentPage.id,point:n,fill:this.app.settings.color,stroke:this.app.settings.color}));this.initialShape=Ec(g.props);this.currentShape=g;this.app.currentPage.addShapes(g);this.app.setSelectedShapes([g]);if(this.startBindingShapeId=
null==(b=this.bindableShapeIds.map(I=>this.app.getShapeById(I)).filter(I=>Xh.pointInBounds(n,I.bounds))[0])?void 0:b.id)this.bindableShapeIds.splice(this.bindableShapeIds.indexOf(this.startBindingShapeId),1),this.app.setBindingShapes([this.startBindingShapeId])})}};Ua(Jx,"id","creating");var Kx=class extends vi{constructor(){super(...arguments);Ua(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("pointing")});Ua(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});
null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});Ua(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",b)}});Ua(this,"onPointerLeave",b=>{b.order||"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)})}};Ua(Kx,
"id","idle");var tx=class extends vi{constructor(){super(...arguments);Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&(this.tool.transition("creating"),this.app.setSelectedShapes(this.app.currentPage.shapes))})}};Ua(tx,"id","pointing");var Dt=class extends zp{constructor(){super(...arguments);Ua(this,"cursor","crosshair")}};Ua(Dt,"id","line");Ua(Dt,"states",[Kx,tx,Jx]);Ua(Dt,"initial","idle");var ux=class extends vi{constructor(){super(...arguments);
Ua(this,"cursor","crosshair");Ua(this,"creatingShape");Ua(this,"aspectRatio");Ua(this,"initialBounds",{});Ua(this,"onEnter",()=>{const {currentPage:b,inputs:{originPoint:g}}=this.app,{Shape:n}=this.tool,I=new n({id:Sf(),type:n.id,parentId:b.id,point:[...g],text:"",size:[16,32],isSizeLocked:!0,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=I;Kd(()=>{this.app.currentPage.addShapes(I);const {bounds:W}=I;I.update({point:Zd.sub(g,[W.width/2,W.height/2])});this.app.transition("select");
this.app.setSelectedShapes([I]);this.app.currentState.transition("editingShape",{type:"shape",shape:this.creatingShape,order:0})})})}};Ua(ux,"id","creating");var vx=class extends vi{constructor(){super(...arguments);Ua(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("creating")});Ua(this,"onPinchStart",(...b)=>{var g,n;this.app.transition("select",{returnTo:this.app.currentState.id});null==(n=(g=this.app._events).onPinchStart)?void 0:n.call(g,...b)});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}})}};
Ua(vx,"id","idle");var Et=class extends zp{constructor(){super(...arguments);Ua(this,"cursor","crosshair")}};Ua(Et,"id","box");Ua(Et,"states",[vx,ux]);Ua(Et,"initial","idle");var mC=ac(da()),nC=class extends mC.default{constructor(){super(...arguments);Ua(this,"toBBox",b=>b.rotatedBounds)}},wx=class extends vi{constructor(){super(...arguments);Ua(this,"initialSelectedIds",[]);Ua(this,"initialSelectedShapes",[]);Ua(this,"tree",new nC);Ua(this,"onEnter",()=>{const {selectedShapes:b,currentPage:g,selectedIds:n}=
this.app;this.initialSelectedIds=Array.from(n.values());this.initialSelectedShapes=Array.from(b.values());this.tree.load(g.shapes)});Ua(this,"onExit",()=>{this.initialSelectedIds=[];this.tree.clear();this.app.setBrush(void 0)});Ua(this,"onPointerMove",()=>{const {inputs:{shiftKey:b,ctrlKey:g,originPoint:n,currentPoint:I}}=this.app,W=Ge.getBoundsFromPoints([I,n],0);this.app.setBrush(W);const ia=[...(new Set(this.tree.search(W).filter(sa=>g?Ge.boundsContain(W,sa.rotatedBounds):sa.hitTestBounds(W)).filter(sa=>
"group"!==sa.type).map(sa=>{var La;return null!=(La=this.app.getParentGroup(sa))?La:sa})))];b?ia.every(sa=>this.initialSelectedShapes.includes(sa))?this.app.setSelectedShapes(this.initialSelectedShapes.filter(sa=>!ia.includes(sa))):this.app.setSelectedShapes([...(new Set([...this.initialSelectedShapes,...ia]))]):this.app.setSelectedShapes(ia);this.app.viewport.panToPointWhenOutOfBounds(I)});Ua(this,"onPointerUp",()=>{this.app.setBrush(void 0);this.tool.transition("idle")});Ua(this,"handleModifierKey",
(b,g)=>{switch(g.key){case "Escape":this.app.setBrush(void 0),this.app.setSelectedShapes(this.initialSelectedIds),this.tool.transition("idle")}})}};Ua(wx,"id","brushing");var xx=class extends vi{constructor(){super(...arguments);Ua(this,"onEnter",b=>{var g;const {selectedIds:n,selectedShapes:I,inputs:{shiftKey:W}}=this.app;if("shape"===b.type&&!I.has(b.shape)){const ia=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;W?this.app.setSelectedShapes([...Array.from(n.values()),ia.id]):this.app.setSelectedShapes([ia])}});
Ua(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Ua(xx,"id","contextMenu");var yx=class extends vi{constructor(){super(...arguments);Ua(this,"onEnter",b=>{"pinching"===b.fromId&&this.parent.returnTo&&this.app.transition(this.parent.returnTo)});Ua(this,"onExit",()=>{});Ua(this,"onPointerEnter",b=>{if(!b.order)switch(b.type){case "shape":this.app.setHoveredShape(b.shape.id);break;case "selection":"background"!==b.handle&&"center"!==b.handle&&this.tool.transition("hoveringSelectionHandle",
b);break;case "canvas":this.app.setHoveredShape(void 0)}});Ua(this,"onPointerDown",(b,g)=>{const {selectedShapes:n,inputs:{ctrlKey:I}}=this.app;if(2===g.button)this.tool.transition("contextMenu",b);else if(I)this.tool.transition("pointingCanvas");else switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":this.tool.transition("pointingBoundsBackground");break;case "rotate":this.tool.transition("pointingRotateHandle");break;default:this.tool.transition("pointingResizeHandle",
b)}break;case "shape":if(n.has(b.shape))this.tool.transition("pointingSelectedShape",b);else{const {selectionBounds:W,inputs:ia}=this.app;W&&Xh.pointInBounds(ia.currentPoint,W)?this.tool.transition("pointingShapeBehindBounds",b):this.tool.transition("pointingShape",b)}break;case "handle":this.tool.transition("pointingHandle",b);break;case "canvas":this.tool.transition("pointingCanvas");break;case "minimap":this.tool.transition("pointingMinimap",Fa(Fa({},g),b))}});Ua(this,"onPointerLeave",b=>{b.order||
"shape"===b.type&&this.app.hoveredId&&this.app.setHoveredShape(void 0)});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ua(this,"onDoubleClick",b=>{if(!b.order&&1===this.app.selectedShapesArray.length){var g=this.app.selectedShapesArray[0];if(g.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:g})}}});Ua(this,"onKeyDown",
(b,g)=>{({selectedShapesArray:b}=this.app);switch(g.key){case "Enter":1===b.length&&b[0].canEdit&&this.tool.transition("editingShape",{type:"shape",shape:b[0],order:0});break;case "Escape":b.length&&this.app.setSelectedShapes([])}})}};Ua(yx,"id","idle");var zx=class extends vi{constructor(){super(...arguments);Ua(this,"onEnter",b=>{var g;const {selectedIds:n,inputs:{shiftKey:I}}=this.app,W=null!=(g=this.app.getParentGroup(b.shape))?g:b.shape;I?this.app.setSelectedShapes([...Array.from(n.values()),
W.id]):this.app.setSelectedShapes([W])});Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&this.tool.transition("translating")});Ua(this,"onPointerUp",()=>{this.tool.transition("idle")});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ua(zx,"id","pointingShape");var Ax=class extends vi{constructor(){super(...arguments);Ua(this,"cursor","move");Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;
5<xd.dist(b,g)&&this.tool.transition("translating")});Ua(this,"onPointerUp",()=>{this.app.setSelectedShapes([]);this.tool.transition("idle")});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ua(Ax,"id","pointingBoundsBackground");var Bx=class extends vi{constructor(){super(...arguments);Ua(this,"onEnter",()=>{var b;const {shiftKey:g}=this.app.inputs;g||(this.app.setSelectedShapes([]),this.app.setEditingShape(),null==(b=window.getSelection())?void 0:b.removeAllRanges())});
Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&this.tool.transition("brushing")});Ua(this,"onPointerUp",()=>{this.app.inputs.shiftKey||this.app.setSelectedShapes([]);this.tool.transition("idle")});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ua(this,"onDoubleClick",()=>{this.app.notify("canvas-dbclick",{point:this.app.inputs.originPoint})})}};Ua(Bx,"id","pointingCanvas");var Lx=class extends vi{constructor(){super(...arguments);
Ua(this,"cursor","move");Ua(this,"isCloning",!1);Ua(this,"didClone",!1);Ua(this,"initialPoints",{});Ua(this,"initialShapePoints",{});Ua(this,"initialClonePoints",{});Ua(this,"clones",[]);Ua(this,"onEnter",()=>{var b;this.app.history.pause();const {allSelectedShapesArray:g,inputs:n}=this.app;this.initialPoints=this.initialShapePoints=Object.fromEntries(g.map(({id:I,props:{point:W}})=>[I,W.slice()]));document.querySelectorAll("input,textarea").forEach(I=>I.blur());null==(b=document.getSelection())?
void 0:b.empty();n.altKey?this.startCloning():this.moveSelectedShapesToPointer()});Ua(this,"onExit",()=>{this.app.history.resume();this.app.persist();this.isCloning=this.didClone=!1;this.clones=[];this.initialPoints={};this.initialShapePoints={};this.initialClonePoints={}});Ua(this,"onPointerMove",()=>{const {inputs:{currentPoint:b}}=this.app;this.moveSelectedShapesToPointer();this.app.viewport.panToPointWhenOutOfBounds(b)});Ua(this,"onPointerDown",()=>{this.app.history.resume();this.app.persist();
this.tool.transition("idle")});Ua(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Alt":this.startCloning();break;case "Escape":this.app.allSelectedShapes.forEach(n=>{n.update({point:this.initialPoints[n.id]})}),this.tool.transition("idle")}});Ua(this,"onKeyUp",(b,g)=>{switch(g.key){case "Alt":if(!this.isCloning)throw Error("Expected to be cloning.");const {currentPage:n,allSelectedShapes:I}=this.app;
n.removeShapes(...I);this.initialPoints=this.initialShapePoints;this.app.setSelectedShapes(Object.keys(this.initialPoints));this.moveSelectedShapesToPointer();this.isCloning=!1}})}moveSelectedShapesToPointer(){const {inputs:{shiftKey:b,originPoint:g,currentPoint:n}}=this.app,{initialPoints:I}=this,W=xd.sub(n,g);b&&(Math.abs(W[0])<Math.abs(W[1])?W[0]=0:W[1]=0);Kd(()=>{this.app.allSelectedShapes.forEach(ia=>{ia.update({point:xd.add(I[ia.id],W)})})})}startCloning(){this.didClone||(this.clones=this.app.allSelectedShapesArray.map(b=>
{const g=this.app.getShapeClass(b.type);if(!g)throw Error("Could not find that shape class.");return new g(Wa(Fa({},b.serialized),{id:Sf(),type:b.type,point:this.initialPoints[b.id],rotation:b.props.rotation}))}),this.initialClonePoints=Object.fromEntries(this.clones.map(({id:b,props:{point:g}})=>[b,g.slice()])),this.didClone=!0);this.app.allSelectedShapes.forEach(b=>{b.update({point:this.initialPoints[b.id]})});this.initialPoints=this.initialClonePoints;this.app.currentPage.addShapes(...this.clones);
this.app.setSelectedShapes(Object.keys(this.initialClonePoints));this.moveSelectedShapesToPointer();this.isCloning=!0}};Ua(Lx,"id","translating");var Mx=class extends vi{constructor(){super(...arguments);Ua(this,"pointedSelectedShape");Ua(this,"onEnter",b=>{this.pointedSelectedShape=b.shape});Ua(this,"onExit",()=>{this.pointedSelectedShape=void 0});Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&this.tool.transition("translating")});Ua(this,"onPointerUp",
()=>{const {shiftKey:b,currentPoint:g}=this.app.inputs;var {selectedShapesArray:n}=this.app;if(!this.pointedSelectedShape)throw Error("Expected a pointed selected shape");if(b)({selectedIds:n}=this.app),n=Array.from(n.values()),n.splice(n.indexOf(this.pointedSelectedShape.id),1),this.app.setSelectedShapes(n);else{if(1===n.length&&this.pointedSelectedShape.canEdit&&this.pointedSelectedShape instanceof kn&&Xh.pointInBounds(g,this.pointedSelectedShape.bounds)){this.tool.transition("editingShape",{shape:this.pointedSelectedShape,
order:0,type:"shape"});return}this.app.setSelectedShapes([this.pointedSelectedShape.id])}this.tool.transition("idle")});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ua(Mx,"id","pointingSelectedShape");var Nx=class extends vi{constructor(){super(...arguments);Ua(this,"info",{});Ua(this,"onEnter",b=>{this.info=b;this.updateCursor()});Ua(this,"onExit",()=>{this.app.cursors.reset()});Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;
5<xd.dist(b,g)&&this.tool.transition("resizing",this.info)});Ua(this,"onPointerUp",()=>{this.tool.transition("hoveringSelectionHandle",this.info)});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Hl[this.info.handle],this.app.selectionBounds.rotation)}};Ua(Nx,"id","pointingResizeHandle");var Ox=class extends vi{constructor(){super(...arguments);Ua(this,"isSingle",!1);Ua(this,"handle","bottom_right_corner");Ua(this,"snapshots",
{});Ua(this,"initialCommonBounds",{});Ua(this,"selectionRotation",0);Ua(this,"resizeType","corner");Ua(this,"onEnter",b=>{var g,n;const {history:I,selectedShapesArray:W,selectionBounds:ia}=this.app;if(!ia)throw Error("Expected a selected bounds.");this.handle=b.handle;this.resizeType="left_edge"===b.handle||"right_edge"===b.handle?"horizontal-edge":"top_edge"===b.handle||"bottom_edge"===b.handle?"vertical-edge":"corner";this.app.cursors.setCursor(Ox.CURSORS[b.handle],null==(g=this.app.selectionBounds)?
void 0:g.rotation);I.pause();const sa=Ge.getBoundsFromPoints(W.map(La=>Ge.getBoundsCenter(La.bounds)));this.selectionRotation=(this.isSingle=1===W.length)?null!=(n=W[0].props.rotation)?n:0:0;this.initialCommonBounds=Fa({},ia);this.snapshots=Object.fromEntries(W.map(La=>{const Xa=Fa({},La.bounds),[$a,kb]=Ge.getBoundsCenter(Xa);return[La.id,{props:La.serialized,bounds:Xa,transformOrigin:[($a-this.initialCommonBounds.minX)/this.initialCommonBounds.width,(kb-this.initialCommonBounds.minY)/this.initialCommonBounds.height],
innerTransformOrigin:[($a-sa.minX)/sa.width,(kb-sa.minY)/sa.height],isAspectRatioLocked:La.props.isAspectRatioLocked||!(La.canChangeAspectRatio&&!La.props.rotation)}]}));W.forEach(La=>{var Xa;null==(Xa=La.onResizeStart)?void 0:Xa.call(La,{isSingle:this.isSingle})})});Ua(this,"onExit",()=>{this.app.cursors.reset();this.snapshots={};this.initialCommonBounds={};this.selectionRotation=0;this.app.history.resume()});Ua(this,"onPointerMove",()=>{const {inputs:{altKey:b,shiftKey:g,ctrlKey:n,originPoint:I,
currentPoint:W}}=this.app,{handle:ia,snapshots:sa,initialCommonBounds:La}=this;let Xa=xd.sub(W,I);b&&(Xa=xd.mul(Xa,2));const $a=this.app.selectedShapes.values().next().value;let kb=Ge.getTransformedBoundingBox(La,ia,Xa,this.selectionRotation,g||this.isSingle&&(n?!("clipping"in $a.props):!$a.canChangeAspectRatio||$a.props.isAspectRatioLocked));b&&(kb=Fa(Fa({},kb),Ge.centerBounds(kb,Ge.getBoundsCenter(La))));const {scaleX:tb,scaleY:Ob}=kb;this.app.selectedShapes.forEach(ec=>{var Ub,pc;const {props:mc,
bounds:Vb,transformOrigin:uc}=sa[ec.id];let Ic=Ge.getRelativeTransformedBoundingBox(kb,La,Vb,0>tb,0>Ob);if(ec.canResize.some(Wd=>Wd)||ec.props.isSizeLocked||!this.isSingle){var Rc=[tb,Ob],Vc=null!=(Ub=mc.rotation)?Ub:0;Ub=Ge.getBoundsCenter(Ic);ec.canFlip||(Rc=xd.abs(Rc));ec.canScale||(Rc=null!=(pc=mc.scale)?pc:[1,1]);if(Vc&&0>tb&&0<=Ob||0>Ob&&0<=tb)Vc*=-1;ec.onResize(mc,{center:Ub,rotation:Vc,scale:Rc,bounds:Ic,type:ia,clip:n,transformOrigin:uc})}});this.updateCursor(tb,Ob);this.app.viewport.panToPointWhenOutOfBounds(W)});
Ua(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(Fa({},this.snapshots[n.id].props))}),this.tool.transition("idle")}})}updateCursor(b,g){var n,I,W,ia;const sa=0>b&&0<=g;b=0>g&&0<=b;switch(this.handle){case "top_left_corner":case "bottom_right_corner":sa||b?"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(n=
this.app.selectionBounds)?void 0:n.rotation):"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(I=this.app.selectionBounds)?void 0:I.rotation);break;case "top_right_corner":case "bottom_left_corner":sa||b?"nesw-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nwse-resize",null==(W=this.app.selectionBounds)?void 0:W.rotation):"nwse-resize"===this.app.cursors.cursor&&this.app.cursors.setCursor("nesw-resize",null==(ia=this.app.selectionBounds)?void 0:
ia.rotation)}}},iv=Ox;Ua(iv,"id","resizing");Ua(iv,"CURSORS",{bottom_edge:"ns-resize",top_edge:"ns-resize",left_edge:"ew-resize",right_edge:"ew-resize",bottom_left_corner:"nesw-resize",bottom_right_corner:"nwse-resize",top_left_corner:"nwse-resize",top_right_corner:"nesw-resize"});var Px=class extends vi{constructor(){super(...arguments);Ua(this,"cursor","rotate");Ua(this,"handle","");Ua(this,"onEnter",b=>{this.app.history.pause();this.handle=b.handle;this.updateCursor()});Ua(this,"onPointerMove",
()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&this.tool.transition("rotating",{handle:this.handle})});Ua(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}updateCursor(){this.app.cursors.setCursor(Hl[this.handle],this.app.selectionRotation)}};Ua(Px,"id","pointingRotateHandle");var Qx=class extends vi{constructor(){super(...arguments);Ua(this,
"info",{});Ua(this,"onEnter",b=>{this.info=b});Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&this.tool.transition("translating")});Ua(this,"onPointerUp",()=>{const {selectedIds:b,inputs:{shiftKey:g}}=this.app;g?this.app.setSelectedShapes([...Array.from(b.values()),this.info.shape.id]):this.app.setSelectedShapes([this.info.shape.id]);this.tool.transition("idle")});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};
Ua(Qx,"id","pointingShapeBehindBounds");var jv=class extends vi{constructor(){super(...arguments);Ua(this,"cursor","rotate");Ua(this,"snapshot",{});Ua(this,"initialCommonCenter",[0,0]);Ua(this,"initialCommonBounds",{});Ua(this,"initialAngle",0);Ua(this,"initialSelectionRotation",0);Ua(this,"handle","");Ua(this,"onEnter",b=>{const {history:g,selectedShapesArray:n,selectionBounds:I}=this.app;if(!I)throw Error("Expected selected bounds.");g.pause();this.handle=b.handle;this.initialSelectionRotation=
this.app.selectionRotation;this.initialCommonBounds=Fa({},I);this.initialCommonCenter=Ge.getBoundsCenter(I);this.initialAngle=xd.angle(this.initialCommonCenter,this.app.inputs.currentPoint);this.snapshot=Object.fromEntries(n.map(W=>[W.id,{point:[...W.props.point],center:[...W.center],rotation:W.props.rotation,handles:"handles"in W?Hq(W.handles):void 0}]));this.updateCursor()});Ua(this,"onExit",()=>{this.app.history.resume();this.snapshot={}});Ua(this,"onPointerMove",()=>{const {selectedShapes:b,inputs:{shiftKey:g,
currentPoint:n}}=this.app,{snapshot:I,initialCommonCenter:W,initialAngle:ia,initialSelectionRotation:sa}=this;let La=xd.angle(W,n)-ia;g&&(La=Ek.snapAngleToSegments(La,24));b.forEach($a=>{var kb=I[$a.id];let tb=0;if(g){var {rotation:Ob=0}=kb;tb=Ek.snapAngleToSegments(Ob,24)-Ob}const ec=xd.sub(kb.center,kb.point);Ob=xd.rotWith(kb.center,W,La);if("handles"in $a){kb=kb.handles;const Ub=kb.map(mc=>xd.rotWith(mc.point,ec,La)),pc=Ge.getCommonTopLeft(Ub);$a.update({point:xd.add(pc,xd.sub(Ob,ec)),handles:kb.map((mc,
Vb)=>Wa(Fa({},mc),{point:xd.sub(Ub[Vb],pc)}))})}else $a.update({point:xd.sub(Ob,ec),rotation:Ek.clampRadians((kb.rotation||0)+La+tb)})});const Xa=Ek.clampRadians(sa+La);this.app.setSelectionRotation(g?Ek.snapAngleToSegments(Xa,24):Xa);this.updateCursor()});Ua(this,"onPointerUp",()=>{this.app.history.resume();this.app.persist();this.tool.transition("idle")});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.selectedShapes.forEach(n=>{n.update(this.snapshot[n.id])}),this.tool.transition("idle")}})}updateCursor(){this.app.cursors.setCursor(Hl[this.handle],
this.app.selectionRotation)}};Ua(jv,"id","rotating");var Rx=class extends vi{constructor(){super(...arguments);Ua(this,"onPinch",(b,g)=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});Ua(this,"onPinchEnd",()=>{this.tool.transition("idle")});Ua(this,"onPointerDown",()=>{this.tool.transition("idle")})}};Ua(Rx,"id","pinching");var Sx=class extends hv{constructor(){super(...arguments);Ua(this,"cursor","grabbing");Ua(this,"onEnter",b=>{this.app.history.pause();this.newStartBindingId=Sf();this.draggedBindingId=
Sf();this.bindableShapeIds=this.app.currentPage.getBindableShapes();this.handleId=b.id;this.currentShape=b.shape;this.initialShape=Ec(this.currentShape.props);this.app.setSelectedShapes([this.currentShape])})}};Ua(Sx,"id","translatingHandle");var Tx=class extends vi{constructor(){super(...arguments);Ua(this,"cursor","grabbing");Ua(this,"info",{});Ua(this,"onEnter",b=>{this.info=b});Ua(this,"onPointerMove",()=>{const {currentPoint:b,originPoint:g}=this.app.inputs;5<xd.dist(b,g)&&this.tool.transition("translatingHandle",
this.info)});Ua(this,"onPointerUp",()=>{this.tool.transition("idle")});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ua(Tx,"id","pointingHandle");var Ux=class extends vi{constructor(){super(...arguments);Ua(this,"handle");Ua(this,"onEnter",b=>{var g;this.app.cursors.setCursor(Hl[b.handle],null!=(g=this.app.selectionBounds.rotation)?g:0);this.handle=b.handle});Ua(this,"onExit",()=>{this.app.cursors.reset()});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",
{info:b,event:g})});Ua(this,"onPointerDown",b=>{switch(b.type){case "selection":switch(b.handle){case "center":break;case "background":break;case "top_left_resize_corner":case "top_right_resize_corner":case "bottom_right_resize_corner":case "bottom_left_resize_corner":this.tool.transition("pointingRotateHandle",b);break;default:this.tool.transition("pointingResizeHandle",b)}}});Ua(this,"onPointerLeave",()=>{this.tool.transition("idle")});Ua(this,"onDoubleClick",b=>{var g;if(!b.order&&1===this.app.selectedShapes.size){var n=
this.app.selectedShapes.values().next().value;if(n.canEdit)switch(b.type){case "shape":this.tool.transition("editingShape",b);break;case "selection":null==(g=n.onResetBounds)?void 0:g.call(n,{zoom:this.app.viewport.camera.zoom}),1===this.app.selectedShapesArray.length&&this.tool.transition("editingShape",{type:"shape",target:n})}else n.onResetBounds({asset:n.props.assetId?this.app.assets[n.props.assetId]:void 0,zoom:this.app.viewport.camera.zoom}),this.tool.transition("idle")}})}};Ua(Ux,"id","hoveringSelectionHandle");
var Vx=class extends vi{constructor(){super(...arguments);Ua(this,"editingShape",{});Ua(this,"onEnter",b=>{this.editingShape=b.shape;this.app.setEditingShape(b.shape)});Ua(this,"onExit",()=>{var b;if(this.editingShape&&"text"in this.editingShape.props){const g=this.editingShape.props.text.trim();""===g&&"text"===this.editingShape.props.type?this.app.deleteShapes([this.editingShape]):(this.editingShape.onResetBounds(),this.editingShape.update({text:g}))}this.app.persist();this.app.setEditingShape();
null==(b=document.querySelector(".tl-canvas"))?void 0:b.focus()});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})});Ua(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.editingShape)break;this.tool.transition("idle",b);break;case "canvas":b.order||this.tool.transition("idle",b)}});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":Kd(()=>{g.stopPropagation();this.app.setSelectedShapes([this.editingShape]);this.tool.transition("idle")})}})}};
Ua(Vx,"id","editingShape");var ox=class extends vi{constructor(){super(...arguments);Ua(this,"minimapZoom",1);Ua(this,"minimapRect",{minX:0,minY:0,maxX:0,maxY:0,width:0,height:0});Ua(this,"getCameraPoint",b=>{const g=document.querySelector(".tl-preview-minimap svg");var n=document.querySelector(".tl-preview-minimap #minimap-camera-rect");if(g&&n){const I=g.getBoundingClientRect();this.minimapRect.height=I.height;this.minimapRect.width=I.width;this.minimapRect.minX=I.left;this.minimapRect.minY=I.top;
this.minimapRect.maxX=I.right;this.minimapRect.maxY=I.bottom;this.minimapZoom=+g.dataset.commonBoundWidth/this.minimapRect.width;b=xd.sub(b,[this.minimapRect.minX,this.minimapRect.minY]);n=n.getBoundingClientRect();n=xd.mul(xd.sub(b,[n.left+n.width/2,n.top+n.height/2]),this.minimapZoom);return xd.sub(this.app.viewport.camera.point,n)}});Ua(this,"onEnter",b=>{(b=this.getCameraPoint([b.clientX,b.clientY]))?this.app.viewport.update({point:b}):this.tool.transition("idle")});Ua(this,"onPointerMove",(b,
g)=>{(b=this.getCameraPoint([g.clientX,g.clientY]))&&this.app.viewport.update({point:b})});Ua(this,"onPointerUp",()=>{this.tool.transition("idle")})}};Ua(ox,"id","pointingMinimap");var jr=class extends zp{constructor(){super(...arguments);Ua(this,"returnTo","");Ua(this,"onEnter",b=>{this.returnTo=null==b?void 0:b.returnTo})}};Ua(jr,"id","select");Ua(jr,"initial","idle");Ua(jr,"shortcut",["1","s"]);Ua(jr,"states",[yx,wx,xx,Bx,zx,Qx,Mx,Ax,Ux,Nx,Px,ox,Tx,Sx,Lx,iv,jv,jv,Rx,Vx]);var px=class extends vi{constructor(){super(...arguments);
Ua(this,"cursor","grabbing");Ua(this,"originalScreenPoint",[]);Ua(this,"originalCameraPoint",[]);Ua(this,"prevState","idle");Ua(this,"onEnter",b=>{this.prevState=null==b?void 0:b.prevState;this.originalScreenPoint=this.app.inputs.currentScreenPoint;this.originalCameraPoint=this.app.viewport.camera.point});Ua(this,"onPointerMove",(b,g)=>{b=Zd.sub(this.originalScreenPoint,this.app.inputs.currentScreenPoint);this.app.viewport.update({point:Zd.sub(this.originalCameraPoint,Zd.div(b,this.app.viewport.camera.zoom))})});
Ua(this,"onPointerUp",()=>{var b;this.tool.transition(null!=(b=this.prevState)?b:"idle")})}};Ua(px,"id","panning");var qx=class extends vi{constructor(){super(...arguments);Ua(this,"onEnter",b=>{this.parent.prevTool&&b.exit&&(this.app.setCurrentState(this.parent.prevTool),setTimeout(()=>{this.app.cursors.reset();this.app.cursors.setCursor(this.parent.prevTool.cursor)}))});Ua(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning")})}};Ua(qx,"id","idle");var rx=class extends vi{constructor(){super(...arguments);
Ua(this,"onPointerDown",(b,g)=>{b.order||this.tool.transition("panning",{prevState:"idleHold"})});Ua(this,"onPinchStart",(b,g)=>{this.tool.transition("pinching",{info:b,event:g})})}};Ua(rx,"id","idleHold");var sx=class extends vi{constructor(){super(...arguments);Ua(this,"origin",[0,0]);Ua(this,"prevDelta",[0,0]);Ua(this,"onEnter",b=>{this.prevDelta=b.info.delta;this.origin=b.info.point});Ua(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])});Ua(this,"onPinchEnd",()=>{this.tool.transition("idle")})}};
Ua(sx,"id","pinching");var kr=class extends zp{constructor(){super(...arguments);Ua(this,"cursor","grab");Ua(this,"prevTool",null);Ua(this,"onEnter",b=>{this.prevTool=null==b?void 0:b.prevTool});Ua(this,"onKeyDown",(b,g)=>{switch(g.key){case "Escape":this.app.transition("select")}});Ua(this,"onPinchStart",(b,g)=>{this.transition("pinching",{info:b,event:g})})}};Ua(kr,"id","move");Ua(kr,"shortcut",["2","m"]);Ua(kr,"states",[qx,rx,px,sx]);Ua(kr,"initial","idle");var hm=class{constructor(b,g={}){Ua(this,
"lastShapesNounces",null);Ua(this,"app");Ua(this,"id");Ua(this,"name");Ua(this,"shapes",[]);Ua(this,"bindings",{});Ua(this,"nonce",0);Ua(this,"bump",()=>{});Ua(this,"bringForward",La=>{const Xa=this.parseShapesArg(La);Xa.sort(($a,kb)=>this.shapes.indexOf(kb)-this.shapes.indexOf($a)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if($a!==this.shapes.length-1&&!Xa.includes(this.shapes[$a+1])){var kb=this.shapes[$a];this.shapes[$a]=this.shapes[$a+1];this.shapes[$a+1]=kb}});this.app.persist();return this});
Ua(this,"sendBackward",La=>{const Xa=this.parseShapesArg(La);Xa.sort(($a,kb)=>this.shapes.indexOf($a)-this.shapes.indexOf(kb)).map($a=>this.shapes.indexOf($a)).forEach($a=>{if(0!==$a&&!Xa.includes(this.shapes[$a-1])){var kb=this.shapes[$a];this.shapes[$a]=this.shapes[$a-1];this.shapes[$a-1]=kb}});this.app.persist();return this});Ua(this,"bringToFront",La=>{const Xa=this.parseShapesArg(La);this.shapes=this.shapes.filter($a=>!Xa.includes($a)).concat(Xa);this.app.persist();return this});Ua(this,"sendToBack",
La=>{const Xa=this.parseShapesArg(La);this.shapes=Xa.concat(this.shapes.filter($a=>!Xa.includes($a)));this.app.persist();return this});Ua(this,"flip",(La,Xa)=>{La=this.parseShapesArg(La);const $a=Ge.getCommonBounds(La.map(kb=>kb.bounds));La.forEach(kb=>{var tb;const Ob=Ge.getRelativeTransformedBoundingBox($a,$a,kb.bounds,"horizontal"===Xa,"vertical"===Xa);if(kb.serialized)kb.onResize(kb.serialized,{bounds:Ob,center:Ge.getBoundsCenter(Ob),rotation:null!=(tb=kb.props.rotation)?tb:-0,type:"top_left_corner",
scale:kb.canFlip&&kb.props.scale?"horizontal"===Xa?[-kb.props.scale[0],1]:[1,-kb.props.scale[1]]:[1,1],clip:!1,transformOrigin:[.5,.5]})});this.app.persist();return this});Ua(this,"getShapeById",La=>this.shapes.find(Xa=>Xa.id===La));Ua(this,"cleanup",La=>{La=lc(this.bindings,La);const Xa=new Set;let $a=!1,kb=!1;const tb=Hq(this.bindings);La.forEach(Ob=>{var ec;if(this.bindings[Ob.id]){var Ub=this.getShapeById(Ob.toId),pc=this.getShapeById(Ob.fromId);Ub&&pc?Xa.has(pc.id)||(Ob=this.updateArrowBindings(pc),
Xa.add(pc.id),Ob&&(pc=Fa(Fa({},pc.props),Ob),$a=!0,null==(ec=this.getShapeById(pc.id))?void 0:ec.update(pc,!1,!0))):(delete tb[Ob.id],kb=!0)}});Object.keys(tb).forEach(Ob=>{const ec=this.bindings[Ob];0===this.shapes.filter(Ub=>Ub.id===ec.fromId||Ub.id===ec.toId).length&&(delete tb[Ob],kb=!0)});kb&&this.update({bindings:tb});($a||kb)&&this.app.persist(!0)});Ua(this,"updateArrowBindings",La=>{var Xa,$a,kb,tb={start:Hq(La.props.handles.start),end:Hq(La.props.handles.end)},Ob={isBound:!1,handle:La.props.handles.start,
point:Zd.add(La.props.handles.start.point,La.props.point)},ec={isBound:!1,handle:La.props.handles.end,point:Zd.add(La.props.handles.end.point,La.props.point)};if(La.props.handles.start.bindingId){var Ub=void 0!==(null==(Xa=La.props.decorations)?void 0:Xa.start);Xa=La.props.handles.start;var pc=this.bindings[La.props.handles.start.bindingId],mc=this.getShapeById(null==pc?void 0:pc.toId);if(mc){Ob=mc.getBounds();var Vb=mc.getExpandedBounds(),uc=Ge.expandBounds(Ob,Ub?pc.distance:1);const {minX:Ic,minY:Rc,
width:Vc,height:Wd}=Vb,be=Zd.add([Ic,Rc],Zd.mulV([Vc,Wd],Zd.rotWith(pc.point,[.5,.5],mc.props.rotation||0)));Ob={isBound:!0,hasDecoration:Ub,binding:pc,handle:Xa,point:be,target:mc,bounds:Ob,expandedBounds:Vb,intersectBounds:uc,center:mc.getCenter()}}}if(La.props.handles.end.bindingId&&(Ub=void 0!==(null==($a=La.props.decorations)?void 0:$a.end),$a=La.props.handles.end,Xa=this.bindings[La.props.handles.end.bindingId],pc=this.getShapeById(null==Xa?void 0:Xa.toId))){ec=pc.getBounds();mc=pc.getExpandedBounds();
Vb=Ub?Ge.expandBounds(ec,Xa.distance):ec;const {minX:Ic,minY:Rc,width:Vc,height:Wd}=mc;uc=Zd.add([Ic,Rc],Zd.mulV([Vc,Wd],Zd.rotWith(Xa.point,[.5,.5],pc.props.rotation||0)));ec={isBound:!0,hasDecoration:Ub,binding:Xa,handle:$a,point:uc,target:pc,bounds:ec,expandedBounds:mc,intersectBounds:Vb,center:pc.getCenter()}}for(const Ic of["end","start"]){$a="start"===Ic?Ob:ec;const Rc="start"===Ic?ec:Ob;if($a.isBound)if($a.binding.distance){if(Ub=Zd.uni(Zd.sub($a.point,Rc.point)),Xa=C(Rc.point,Ub,$a.intersectBounds,
$a.target.props.rotation).filter(Vc=>Vc.didIntersect).map(Vc=>Vc.points[0]).sort((Vc,Wd)=>Zd.dist(Vc,Rc.point)-Zd.dist(Wd,Rc.point)),Xa[0])if(pc=void 0,Rc.isBound&&(pc=C(Rc.point,Ub,Rc.intersectBounds,Rc.target.props.rotation).filter(Vc=>Vc.didIntersect).map(Vc=>Vc.points[0]).sort((Vc,Wd)=>Zd.dist(Vc,Rc.point)-Zd.dist(Wd,Rc.point))[0]),Rc.isBound&&(2>Xa.length||pc&&Xa[0]&&10>Math.ceil(Zd.dist(Xa[0],pc))||Ge.boundsContain($a.expandedBounds,Rc.expandedBounds)||Ge.boundsCollide($a.expandedBounds,Rc.expandedBounds)))Ub=
Zd.uni(Zd.sub(Rc.point,$a.point)),Xa=C($a.point,Ub,$a.bounds,$a.target.props.rotation).filter(Vc=>Vc.didIntersect).map(Vc=>Vc.points[0]),Xa[0]&&(tb[Ic].point=Zd.toFixed(Zd.sub(Xa[0],La.props.point)),tb["start"===Ic?"end":"start"].point=Zd.toFixed(Zd.add(Zd.sub(Xa[0],La.props.point),Zd.mul(Ub,Math.min(Zd.dist(Xa[0],Rc.point),10*(Ge.boundsContain(Rc.bounds,$a.intersectBounds)?-1:1))))));else{if(!Rc.isBound&&(Xa[0]&&10>Zd.dist(Xa[0],Rc.point)||Xh.pointInBounds(Rc.point,$a.intersectBounds)))return tb=
Zd.uni(Zd.sub($a.center,Rc.point)),null==(kb=La.getHandlesChange)?void 0:kb.call(La,La.props,{[Ic]:Wa(Fa({},La.props.handles[Ic]),{point:Zd.toFixed(Zd.add(Zd.sub(Rc.point,La.props.point),Zd.mul(tb,10)))})});Xa[0]&&(tb[Ic].point=Zd.toFixed(Zd.sub(Xa[0],La.props.point)))}}else tb[Ic].point=Zd.sub($a.point,La.props.point)}return La.getHandlesChange(La.props,tb)});const {id:n,name:I,shapes:W=[],bindings:ia={},nonce:sa}=g;this.id=n;this.name=I;this.bindings=Object.assign({},ia);this.app=b;this.nonce=sa||
0;this.addShapes(...W);og(this);Od(()=>{const La=0<this.shapes.length?Object.fromEntries(this.shapes.map(Xa=>[Xa.id,Xa.nonce])):null;if(this.lastShapesNounces&&La){const Xa=this.lastShapesNounces,$a=[...(new Set([...Object.keys(La),...Object.keys(Xa)]))].filter(kb=>Xa[kb]!==La[kb]);requestAnimationFrame(()=>{this.cleanup($a)})}La&&(this.lastShapesNounces=La)})}get serialized(){return{id:this.id,name:this.name,shapes:this.shapes.map(b=>b.serialized).filter(b=>!!b).map(b=>Ec(b)),bindings:Hq(this.bindings),
nonce:this.nonce}}get shapesById(){return Object.fromEntries(this.shapes.map(b=>[b.id,b]))}update(b){Object.assign(this,b);return this}updateBindings(b){Object.assign(this.bindings,b);return this}addShapes(...b){if(0!==b.length)return b="getBounds"in b[0]?b:b.map(g=>new (this.app.getShapeClass(g.type))(g)),this.shapes.push(...b),this.bump(),b}parseShapesArg(b){return"string"===typeof b[0]?this.shapes.filter(g=>b.includes(g.id)):b}removeShapes(...b){const g=this.parseShapesArg(b);this.shapes=this.shapes.filter(n=>
!g.includes(n));return g}getBindableShapes(){return this.shapes.filter(b=>b.canBind).sort((b,g)=>g.nonce-b.nonce).map(b=>b.id)}};nc([xg],hm.prototype,"id",2);nc([xg],hm.prototype,"name",2);nc([xg],hm.prototype,"shapes",2);nc([xg],hm.prototype,"bindings",2);nc([Eg],hm.prototype,"serialized",1);nc([Eg],hm.prototype,"shapesById",1);nc([xg],hm.prototype,"nonce",2);nc([af],hm.prototype,"bump",2);nc([af],hm.prototype,"update",1);nc([af],hm.prototype,"updateBindings",1);nc([af],hm.prototype,"addShapes",
1);nc([af],hm.prototype,"removeShapes",1);nc([af],hm.prototype,"bringForward",2);nc([af],hm.prototype,"sendBackward",2);nc([af],hm.prototype,"bringToFront",2);nc([af],hm.prototype,"sendToBack",2);nc([af],hm.prototype,"cleanup",2);var Gk=class{constructor(){Ua(this,"shiftKey",!1);Ua(this,"ctrlKey",!1);Ua(this,"modKey",!1);Ua(this,"altKey",!1);Ua(this,"spaceKey",!1);Ua(this,"isPinching",!1);Ua(this,"currentScreenPoint",[0,0]);Ua(this,"currentPoint",[0,0]);Ua(this,"previousScreenPoint",[0,0]);Ua(this,
"previousPoint",[0,0]);Ua(this,"originScreenPoint",[0,0]);Ua(this,"originPoint",[0,0]);Ua(this,"pointerIds",new Set);Ua(this,"state","idle");Ua(this,"containerOffset",[0,0]);Ua(this,"onPointerDown",(b,g)=>{this.pointerIds.add(g.pointerId);this.updateModifiers(g);this.originScreenPoint=this.currentScreenPoint;this.originPoint=b;this.state="pointing"});Ua(this,"onPointerMove",(b,g)=>{"pinching"!==this.state&&("panning"===this.state&&(this.state="idle"),this.updateModifiers(g),this.previousPoint=this.currentPoint,
this.currentPoint=b)});Ua(this,"onPointerUp",(b,g)=>{this.pointerIds.clear();this.updateModifiers(g);this.state="idle"});Ua(this,"onKeyDown",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!0}});Ua(this,"onKeyUp",b=>{this.updateModifiers(b);switch(b.key){case " ":this.spaceKey=!1}});Ua(this,"onPinchStart",(b,g)=>{this.updateModifiers(g);this.state="pinching"});Ua(this,"onPinch",(b,g)=>{"pinching"===this.state&&this.updateModifiers(g)});Ua(this,"onPinchEnd",(b,g)=>{"pinching"===this.state&&
(this.updateModifiers(g),this.state="idle")});og(this)}updateContainerOffset(b){Object.assign(this.containerOffset,b)}updateModifiers(b){b.isPrimary&&("clientX"in b&&(this.previousScreenPoint=this.currentScreenPoint,this.currentScreenPoint=Zd.sub([b.clientX,b.clientY],this.containerOffset)),"shiftKey"in b&&(this.shiftKey=b.shiftKey,this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.modKey=lk()?b.metaKey:b.ctrlKey))}};nc([xg],Gk.prototype,"shiftKey",2);nc([xg],Gk.prototype,"ctrlKey",2);nc([xg],Gk.prototype,
"modKey",2);nc([xg],Gk.prototype,"altKey",2);nc([xg],Gk.prototype,"spaceKey",2);nc([xg],Gk.prototype,"isPinching",2);nc([xg],Gk.prototype,"currentScreenPoint",2);nc([xg],Gk.prototype,"currentPoint",2);nc([xg],Gk.prototype,"previousScreenPoint",2);nc([xg],Gk.prototype,"previousPoint",2);nc([xg],Gk.prototype,"originScreenPoint",2);nc([xg],Gk.prototype,"originPoint",2);nc([xg],Gk.prototype,"state",2);nc([xg],Gk.prototype,"containerOffset",2);nc([af],Gk.prototype,"updateContainerOffset",1);nc([af],Gk.prototype,
"updateModifiers",1);nc([af],Gk.prototype,"onPointerDown",2);nc([af],Gk.prototype,"onPointerMove",2);nc([af],Gk.prototype,"onPointerUp",2);nc([af],Gk.prototype,"onKeyDown",2);nc([af],Gk.prototype,"onKeyUp",2);nc([af],Gk.prototype,"onPinchStart",2);nc([af],Gk.prototype,"onPinch",2);nc([af],Gk.prototype,"onPinchEnd",2);var kC=(b,g=100)=>-(Math.cos(Math.PI*xd.clamp(b/g,0,1))-1)/2,us=class{constructor(){Ua(this,"bounds",{minX:0,minY:0,maxX:1080,maxY:720,width:1080,height:720});Ua(this,"camera",{point:[0,
0],zoom:1});Ua(this,"updateBounds",b=>{this.bounds=b;return this});Ua(this,"panCamera",b=>this.update({point:xd.sub(this.camera.point,xd.div(b,this.camera.zoom))}));Ua(this,"panToPointWhenOutOfBounds",b=>{const g=xd.sub([this.currentView.maxX,this.currentView.maxY],b);b=xd.sub([this.currentView.minX,this.currentView.minY],b);this.panCamera(xd.mul([0>g[0]?g[0]:0<b[0]?b[0]:0,0>g[1]?g[1]:0<b[1]?b[1]:0],-us.panMultiplier))});Ua(this,"update",({point:b,zoom:g})=>{void 0===b||isNaN(b[0])||isNaN(b[1])||
(this.camera.point=b);void 0===g||isNaN(g)||(this.camera.zoom=Math.min(4,Math.max(.1,g)));return this});Ua(this,"getPagePoint",b=>{const {camera:g,bounds:n}=this;return xd.sub(xd.div(xd.sub(b,[n.minX,n.minY]),g.zoom),g.point)});Ua(this,"getScreenPoint",b=>{const {camera:g}=this;return xd.mul(xd.add(b,g.point),g.zoom)});Ua(this,"onZoom",(b,g,n=!1)=>this.pinchZoom(b,[0,0],g,n));Ua(this,"pinchZoom",(b,g,n,I=!1)=>{var {camera:W}=this;g=xd.sub(W.point,xd.div(g,W.zoom));n=xd.clamp(n,us.minZoom,us.maxZoom);
W=xd.div(b,W.zoom);b=xd.div(b,n);b=xd.toFixed(xd.add(g,xd.sub(b,W)));I?this.animateCamera({point:b,zoom:n}):this.update({point:b,zoom:n});return this});Ua(this,"setZoom",(b,g=!1)=>{const {bounds:n}=this;this.onZoom([n.width/2,n.height/2],b,g)});Ua(this,"zoomIn",()=>{const {camera:b}=this;this.setZoom(b.zoom/.8,!0)});Ua(this,"zoomOut",()=>{const {camera:b}=this;this.setZoom(.8*b.zoom,!0)});Ua(this,"resetZoom",()=>{this.setZoom(1,!0);return this});Ua(this,"animateCamera",({point:b,zoom:g})=>this.animateToViewport({minX:-b[0],
minY:-b[1],maxX:this.bounds.width/g-b[0],maxY:this.bounds.height/g-b[1],width:this.bounds.width/g,height:this.bounds.height/g}));Ua(this,"animateToViewport",b=>{const g=performance.now(),n=Fa({},this.currentView),I=()=>{var W=performance.now()-g;W=kC(W);var ia=n.minX+(b.minX-n.minX)*W;this.update({point:[-ia,-(n.minY+(b.minY-n.minY)*W)],zoom:this.bounds.width/(n.maxX+(b.maxX-n.maxX)*W-ia)});1>W&&requestAnimationFrame(I)};I()});Ua(this,"zoomToBounds",({width:b,height:g,minX:n,minY:I})=>{const {bounds:W,
camera:ia}=this;let sa=Math.min((W.width-100)/b,(W.height-100)/g);sa=Math.min(1,Math.max(us.minZoom,ia.zoom===sa||1>ia.zoom?Math.min(1,sa):sa));b=xd.add([-n,-I],[(W.width-b*sa)/2/sa,(W.height-g*sa)/2/sa]);this.animateCamera({point:b,zoom:sa})});og(this)}get currentView(){const {bounds:b,camera:{point:g,zoom:n}}=this,I=b.width/n,W=b.height/n;return{minX:-g[0],minY:-g[1],maxX:I-g[0],maxY:W-g[1],width:I,height:W}}},ro=us;Ua(ro,"minZoom",.1);Ua(ro,"maxZoom",4);Ua(ro,"panMultiplier",.05);nc([xg],ro.prototype,
"bounds",2);nc([xg],ro.prototype,"camera",2);nc([af],ro.prototype,"updateBounds",2);nc([af],ro.prototype,"update",2);nc([Eg],ro.prototype,"currentView",1);var lC=class{constructor(b){Ua(this,"app");Ua(this,"editShape",g=>{this.app.transition("select").selectedTool.transition("editingShape",{shape:g});return this});Ua(this,"hoverShape",g=>{this.app.setHoveredShape(g);return this});Ua(this,"createShapes",(...g)=>{this.app.createShapes(g);return this});Ua(this,"updateShapes",(...g)=>{this.app.updateShapes(g);
return this});Ua(this,"deleteShapes",(...g)=>{this.app.deleteShapes(g.length?g:this.app.selectedShapesArray);return this});Ua(this,"selectShapes",(...g)=>{this.app.setSelectedShapes(g);return this});Ua(this,"deselectShapes",(...g)=>{const n="string"===typeof g[0]?g:g.map(I=>I.id);this.app.setSelectedShapes(this.app.selectedShapesArray.filter(I=>!n.includes(I.id)));return this});Ua(this,"flipHorizontal",(...g)=>{this.app.flipHorizontal(g);return this});Ua(this,"flipVertical",(...g)=>{this.app.flipVertical(g);
return this});Ua(this,"selectAll",()=>{this.app.setSelectedShapes(this.app.currentPage.shapes.filter(g=>!this.app.shapesInGroups().includes(g)));return this});Ua(this,"deselectAll",()=>{this.app.setSelectedShapes([]);return this});Ua(this,"zoomIn",()=>{this.app.viewport.zoomIn();return this});Ua(this,"zoomOut",()=>{this.app.viewport.zoomOut();return this});Ua(this,"resetZoom",()=>{this.app.viewport.resetZoom();return this});Ua(this,"zoomToFit",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;
g=Ge.getCommonBounds(g.map(n=>n.bounds));this.app.viewport.zoomToBounds(g);return this});Ua(this,"cameraToCenter",()=>{var {shapes:g}=this.app.currentPage;if(0===g.length)return this;g=Ge.getCommonBounds(g.map(n=>n.bounds));this.app.viewport.update({point:Zd.add(Zd.neg(Ge.getBoundsCenter(g)),[this.app.viewport.currentView.width/2,this.app.viewport.currentView.height/2])});return this});Ua(this,"zoomToSelection",()=>{const {selectionBounds:g}=this.app;if(!g)return this;this.app.viewport.zoomToBounds(g);
return this});Ua(this,"resetZoomToCursor",()=>{this.app.viewport.animateCamera({zoom:1,point:Zd.sub(this.app.inputs.originScreenPoint,this.app.inputs.originPoint)});return this});Ua(this,"toggleGrid",()=>{const {settings:g}=this.app;g.update({showGrid:!g.showGrid});return this});Ua(this,"setColor",g=>{const {settings:n}=this.app;n.update({color:g});this.app.selectedShapesArray.forEach(I=>{I.update({fill:g,stroke:g})});this.app.persist();return this});Ua(this,"save",()=>{this.app.save();return this});
Ua(this,"saveAs",()=>{this.app.save();return this});Ua(this,"undo",()=>{this.app.undo();return this});Ua(this,"redo",()=>{this.app.redo();return this});Ua(this,"persist",()=>{this.app.persist();return this});Ua(this,"createNewLineBinding",(g,n)=>this.app.createNewLineBinding(g,n));Ua(this,"cloneShapes",({shapes:g,assets:n,bindings:I,point:W=[0,0]})=>{const ia=Ge.getCommonBounds(g.filter(Xa=>"group"!==Xa.type).map(Xa=>{var $a,kb,tb,Ob,ec,Ub,pc,mc,Vb,uc,Ic,Rc,Vc,Wd,be,Ee;return{minX:null!=(kb=null==
($a=Xa.point)?void 0:$a[0])?kb:W[0],minY:null!=(Ob=null==(tb=Xa.point)?void 0:tb[1])?Ob:W[1],width:null!=(Ub=null==(ec=Xa.size)?void 0:ec[0])?Ub:4,height:null!=(mc=null==(pc=Xa.size)?void 0:pc[1])?mc:4,maxX:(null!=(uc=null==(Vb=Xa.point)?void 0:Vb[0])?uc:W[0])+(null!=(Rc=null==(Ic=Xa.size)?void 0:Ic[0])?Rc:4),maxY:(null!=(Wd=null==(Vc=Xa.point)?void 0:Vc[1])?Wd:W[1])+(null!=(Ee=null==(be=Xa.size)?void 0:be[1])?Ee:4)}})),sa=g.map(Xa=>Wa(Fa({},Xa),{id:Sf(),point:[W[0]+Xa.point[0]-ia.minX,W[1]+Xa.point[1]-
ia.minY]}));sa.forEach(Xa=>{var $a;Xa.children&&0<(null==($a=Xa.children)?void 0:$a.length)&&(Xa.children=Xa.children.map(kb=>{var tb;return null==(tb=sa[g.findIndex(Ob=>Ob.id===kb)])?void 0:tb.id}).filter(Ig))});const La=[];sa.flatMap(Xa=>{var $a;return Object.values(null!=($a=Xa.handles)?$a:{})}).forEach(Xa=>{if(Xa.bindingId){var $a=I[Xa.bindingId];if($a){var kb=g.findIndex(Ob=>Ob.id===$a.fromId);const tb=g.findIndex(Ob=>Ob.id===$a.toId);$a&&-1!==kb&&-1!==tb?(kb=Wa(Fa({},$a),{id:Sf(),fromId:sa[kb].id,
toId:sa[tb].id}),La.push(kb),Xa.bindingId=kb.id):Xa.bindingId=void 0}else console.warn("binding not found",Xa.bindingId)}});n=n.filter(Xa=>sa.some($a=>$a.assetId===Xa.id));return{shapes:sa,assets:n,bindings:La}});Ua(this,"getClonedShapesFromTldrString",(g,n)=>{try{{var I;const $a=null==(I=g.match(/<whiteboard-tldr>(.*)<\/whiteboard-tldr>/))?void 0:I[1];if($a){try{var W=JSON.parse($a)}catch(kb){W=null}var ia=W}else ia=void 0}g=ia;if(!g)return null;const {shapes:sa,bindings:La,assets:Xa}=g;return this.cloneShapes({shapes:sa,
bindings:La,assets:Xa,point:n})}catch(sa){console.log(sa)}return null});Ua(this,"cloneShapesIntoCurrentPage",g=>{(g=this.cloneShapes(g))&&this.addClonedShapes(g);return this});Ua(this,"addClonedShapes",g=>{const {shapes:n,assets:I,bindings:W}=g;0<I.length&&this.app.createAssets(I);0<n.length&&this.app.createShapes(n);this.app.currentPage.updateBindings(Object.fromEntries(W.map(ia=>[ia.id,ia])));this.app.selectedTool.transition("idle");return this});Ua(this,"addClonedShapesFromTldrString",(g,n)=>{(g=
this.getClonedShapesFromTldrString(g,n))&&this.addClonedShapes(g);return this});Ua(this,"doGroup",(g=this.app.allSelectedShapesArray)=>{var n=[...g.filter(I=>"group"===I.type),...g.map(I=>this.app.getParentGroup(I))].filter(Ig);this.app.currentPage.removeShapes(...n);g=g.filter(I=>"group"!==I.type);1<g.length&&(n=this.app.getShapeClass("group"),n=new n({id:Sf(),type:n.id,parentId:this.app.currentPage.id,children:g.map(I=>I.id)}),this.app.currentPage.addShapes(n),this.app.setSelectedShapes([n]),this.app.bringForward(g));
this.app.persist()});Ua(this,"unGroup",(g=this.app.allSelectedShapesArray)=>{g=[...g.filter(I=>"group"===I.type),...g.map(I=>this.app.getParentGroup(I))].filter(Ig);const n=this.app.shapesInGroups(g);0<g.length&&(this.app.currentPage.removeShapes(...g),this.app.persist(),this.app.setSelectedShapes(n))});this.app=b}},hr=class{constructor(){Ua(this,"cursor","default");Ua(this,"rotation",0);Ua(this,"reset",()=>{this.cursor="default"});Ua(this,"setCursor",(b,g=0)=>{if(b!==this.cursor||g!==this.rotation)this.cursor=
b,this.rotation=g});Ua(this,"setRotation",b=>{b!==this.rotation&&(this.rotation=b)});og(this)}};nc([xg],hr.prototype,"cursor",2);nc([xg],hr.prototype,"rotation",2);nc([af],hr.prototype,"reset",2);nc([af],hr.prototype,"setCursor",2);nc([af],hr.prototype,"setRotation",2);var ir=class{constructor(b){Ua(this,"app");Ua(this,"stack",[]);Ua(this,"isPaused",!0);Ua(this,"pause",()=>{this.isPaused||(this.isPaused=!0)});Ua(this,"resume",()=>{this.isPaused&&(this.isPaused=!1)});Ua(this,"persist",(g=!1)=>{this.isPaused||
this.creating||(this.app.pages.forEach(n=>n.bump()),this.app.notify("persist",{replace:g}))});Ua(this,"undo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appUndo&&this.app.appUndo()});Ua(this,"redo",()=>{this.isPaused||"idle"===this.app.selectedTool.currentState.id&&this.app.appRedo&&this.app.appRedo()});Ua(this,"instantiateShape",g=>new (this.app.getShapeClass(g.type))(g));Ua(this,"deserialize",g=>{Kd(()=>{var n,{pages:I}=g;const W=this.isPaused;this.pause();const ia=
[...this.app.selectedIds];try{const sa=new Map(this.app.pages),La=[];for(const Xa of I){const $a=sa.get(Xa.id);if(void 0!==$a){const kb=new Map($a.shapes.map(tb=>[tb.props.id,tb]));I=[];for(const tb of Xa.shapes){const Ob=kb.get(tb.id);void 0!==Ob?(Ob.nonce!==tb.nonce&&(Ob.update(tb,!0),Ob.nonce=tb.nonce,Ob.setLastSerialized(tb)),kb.delete(tb.id)):I.push(this.instantiateShape(tb))}0<kb.size&&!this.app.selectedTool.isInAny("creating","editingShape")&&$a.removeShapes(...kb.values());0<I.length&&$a.addShapes(...I);
sa.delete(Xa.id);$a.updateBindings(Xa.bindings);$a.nonce=null!=(n=Xa.nonce)?n:0}else{const {id:kb,name:tb,shapes:Ob,bindings:ec,nonce:Ub}=Xa;La.push(new hm(this.app,{id:kb,name:tb,nonce:Ub,bindings:ec,shapes:Ob.map(pc=>this.instantiateShape(pc))}))}}0<La.length&&this.app.addPages(La);0<sa.size&&this.app.removePages(Array.from(sa.values()));this.app.setSelectedShapes(ia).setErasingShapes([])}catch(sa){console.warn(sa)}W||this.resume()})});this.app=b;og(this)}get creating(){return"creating"===this.app.selectedTool.currentState.id}};
nc([xg],ir.prototype,"stack",2);nc([af],ir.prototype,"persist",2);nc([af],ir.prototype,"undo",2);nc([af],ir.prototype,"redo",2);nc([af],ir.prototype,"deserialize",2);var ts=class{constructor(){Ua(this,"mode","light");Ua(this,"showGrid",!0);Ua(this,"color","");og(this)}update(b){Object.assign(this,b)}};nc([xg],ts.prototype,"mode",2);nc([xg],ts.prototype,"showGrid",2);nc([xg],ts.prototype,"color",2);nc([af],ts.prototype,"update",1);var dh=class extends lr{constructor(b,g,n){var I,W;super();Ua(this,
"keybindingRegistered",!1);Ua(this,"uuid",Sf());Ua(this,"api");Ua(this,"inputs",new Gk);Ua(this,"cursors",new hr);Ua(this,"viewport",new ro);Ua(this,"settings",new ts);Ua(this,"Tools",[]);Ua(this,"history",new ir(this));Ua(this,"persist",this.history.persist);Ua(this,"undo",this.history.undo);Ua(this,"redo",this.history.redo);Ua(this,"saving",!1);Ua(this,"saveState",()=>{this.history.isPaused||(this.saving=!0,requestAnimationFrame(()=>{this.saving&&(this.persist(),this.saving=!1)}))});Ua(this,"load",
()=>{this.notify("load",null);return this});Ua(this,"save",()=>{this.notify("save",null);return this});Ua(this,"saveAs",()=>{this.notify("saveAs",null);return this});Ua(this,"pages",new Map([["page",new hm(this,{id:"page",name:"page",shapes:[],bindings:{}})]]));Ua(this,"getPageById",ia=>{const sa=this.pages.get(ia);if(!sa)throw Error(`Could not find a page named ${ia}.`);return sa});Ua(this,"getShapeById",(ia,sa=this.currentPage.id)=>{var La;return null==(La=this.getPageById(sa))?void 0:La.shapesById[ia]});
Ua(this,"createShapes",ia=>{(ia=this.currentPage.addShapes(...ia))&&this.notify("create-shapes",ia);this.persist();return this});Ua(this,"updateShapes",ia=>{ia.forEach(sa=>{var La;return null==(La=this.getShapeById(sa.id))?void 0:La.update(sa)});this.persist();return this});Ua(this,"deleteShapes",ia=>{if(0===ia.length)return this;ia=ia.map($a=>"string"===typeof $a?this.getShapeById($a):$a).filter(Ig);const sa=this.shapesInGroups(ia);ia.forEach($a=>{this.getParentGroup($a)&&sa.push($a)});let La=new Set([...ia,
...sa].map($a=>$a.id));sa.forEach($a=>{var kb;const tb=this.getParentGroup($a);if(tb){const Ob=null==(kb=tb.props.children)?void 0:kb.filter(ec=>ec!==$a.id);!Ob||1>=(null==Ob?void 0:Ob.length)?La.add(tb.id):tb.update({children:Ob})}});const Xa=($a,kb)=>{var tb;[...La].includes($a)&&"line"===(null==(tb=this.getShapeById(kb))?void 0:tb.type)&&La.add(kb)};this.currentPage.shapes.flatMap($a=>{var kb;return Object.values(null!=(kb=$a.props.handles)?kb:{})}).flatMap($a=>$a.bindingId).filter(Ig).map($a=>
{var kb,tb;const Ob=null==(kb=this.currentPage.bindings[$a])?void 0:kb.toId;$a=null==(tb=this.currentPage.bindings[$a])?void 0:tb.fromId;Ob&&$a&&(Xa(Ob,$a),Xa($a,Ob))});ia=[...La].map($a=>this.getShapeById($a));this.setSelectedShapes(this.selectedShapesArray.filter($a=>!La.has($a.id)));(ia=this.currentPage.removeShapes(...ia))&&this.notify("delete-shapes",ia);this.persist();return this});Ua(this,"bringForward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringForward(ia);return this});
Ua(this,"sendBackward",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.sendBackward(ia);return this});Ua(this,"sendToBack",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.sendToBack(ia);return this});Ua(this,"bringToFront",(ia=this.selectedShapesArray)=>{0<ia.length&&this.currentPage.bringToFront(ia);return this});Ua(this,"flipHorizontal",(ia=this.selectedShapesArray)=>{this.currentPage.flip(ia,"horizontal");return this});Ua(this,"flipVertical",(ia=this.selectedShapesArray)=>
{this.currentPage.flip(ia,"vertical");return this});Ua(this,"align",(ia,sa=this.selectedShapesArray)=>{if(2>sa.length)return this;const La=sa.map(Ob=>{const ec=Ob.getBounds();return{id:Ob.id,point:[ec.minX,ec.minY],bounds:ec}}),Xa=Ge.getCommonBounds(La.map(({bounds:Ob})=>Ob)),$a=Xa.minX+Xa.width/2,kb=Xa.minY+Xa.height/2,tb=Object.fromEntries(La.map(({id:Ob,point:ec,bounds:Ub})=>[Ob,{prev:ec,next:{top:[ec[0],Xa.minY],centerVertical:[ec[0],kb-Ub.height/2],bottom:[ec[0],Xa.maxY-Ub.height],left:[Xa.minX,
ec[1]],centerHorizontal:[$a-Ub.width/2,ec[1]],right:[Xa.maxX-Ub.width,ec[1]]}[ia]}]));sa.forEach(Ob=>{tb[Ob.id]&&Ob.update({point:tb[Ob.id].next})});this.persist();return this});Ua(this,"distribute",(ia,sa=this.selectedShapesArray)=>{if(2>sa.length)return this;const La=Object.fromEntries(Ge.getDistributions(sa,ia).map(Xa=>[Xa.id,Xa]));sa.forEach(Xa=>{La[Xa.id]&&Xa.update({point:La[Xa.id].next})});this.persist();return this});Ua(this,"packIntoRectangle",(ia=this.selectedShapesArray)=>{if(2>ia.length)return this;
const sa=Object.fromEntries(Ge.getPackedDistributions(ia).map(La=>[La.id,La]));ia.forEach(La=>{sa[La.id]&&La.update({point:sa[La.id].next})});this.persist();return this});Ua(this,"assets",{});Ua(this,"removeUnusedAssets",()=>{const ia=this.getCleanUpAssets();Object.keys(this.assets).forEach(sa=>{ia.some(La=>La.id===sa)||delete this.assets[sa]});this.persist();return this});Ua(this,"copy",()=>{if(0<this.selectedShapesArray.length&&!this.editingShape){const sa=this.allSelectedShapesArray;var ia=JSON.stringify({shapes:sa.map(Xa=>
Xa.serialized),assets:this.getCleanUpAssets().filter(Xa=>sa.some($a=>$a.props.assetId===Xa.id)),bindings:Ec(this.currentPage.bindings)});ia=encodeURIComponent(`<whiteboard-tldr>${ia}</whiteboard-tldr>`);const La=this.selectedShapesArray.map(Xa=>`((${Xa.props.id}))`).join(" ");this.notify("copy",{text:La,html:ia})}});Ua(this,"paste",(ia,sa)=>{var La;this.editingShape||this.notify("paste",{point:this.inputs.currentPoint,shiftKey:!!sa,dataTransfer:null!=(La=null==ia?void 0:ia.clipboardData)?La:void 0})});
Ua(this,"cut",()=>{this.copy();this.api.deleteShapes()});Ua(this,"drop",(ia,sa)=>{this.notify("drop",{dataTransfer:ia,point:sa?this.viewport.getPagePoint(sa):Ge.getBoundsCenter(this.viewport.currentView)})});Ua(this,"selectTool",this.transition);Ua(this,"editingId");Ua(this,"setEditingShape",ia=>{this.editingId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});Ua(this,"clearEditingState",()=>{this.selectedTool.transition("idle");return this.setEditingShape()});Ua(this,"hoveredId");Ua(this,
"setHoveredShape",ia=>{this.hoveredId="string"===typeof ia?ia:null==ia?void 0:ia.id;return this});Ua(this,"selectedIds",new Set);Ua(this,"selectedShapes",new Set);Ua(this,"selectionRotation",0);Ua(this,"setSelectedShapes",ia=>{var sa;const {selectedIds:La,selectedShapes:Xa}=this;La.clear();Xa.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(kb=>La.add(kb)):ia.forEach(kb=>La.add(kb.id));const $a=this.currentPage.shapes.filter(kb=>La.has(kb.id));$a.forEach(kb=>Xa.add(kb));this.selectionRotation=1===
$a.length?null!=(sa=$a[0].props.rotation)?sa:0:0;0===ia.length&&this.setEditingShape();return this});Ua(this,"erasingIds",new Set);Ua(this,"erasingShapes",new Set);Ua(this,"setErasingShapes",ia=>{const {erasingIds:sa,erasingShapes:La}=this;sa.clear();La.clear();ia[0]&&"string"===typeof ia[0]?ia.forEach(Xa=>sa.add(Xa)):ia.forEach(Xa=>sa.add(Xa.id));this.currentPage.shapes.filter(Xa=>sa.has(Xa.id)).forEach(Xa=>La.add(Xa));return this});Ua(this,"bindingIds");Ua(this,"setBindingShapes",ia=>{this.bindingIds=
ia;return this});Ua(this,"clearBindingShape",()=>this.setBindingShapes());Ua(this,"createNewLineBinding",(ia,sa)=>{ia="string"===typeof ia?this.getShapeById(ia):ia;sa="string"===typeof sa?this.getShapeById(sa):sa;if((null==ia?0:ia.canBind)&&(null==sa?0:sa.canBind)&&(sa=nd(ia,sa))){const [La,Xa]=sa;this.createShapes([La]);this.currentPage.updateBindings(Object.fromEntries(Xa.map($a=>[$a.id,$a])));this.persist();return!0}return!1});Ua(this,"brush");Ua(this,"setBrush",ia=>{this.brush=ia;return this});
Ua(this,"setCamera",(ia,sa)=>{this.viewport.update({point:ia,zoom:sa});return this});Ua(this,"getPagePoint",ia=>{const {camera:sa}=this.viewport;return xd.sub(xd.div(ia,sa.zoom),sa.point)});Ua(this,"getScreenPoint",ia=>{const {camera:sa}=this.viewport;return xd.mul(xd.add(ia,sa.point),sa.zoom)});Ua(this,"Shapes",new Map);Ua(this,"registerShapes",ia=>{ia.forEach(sa=>{if("group"===sa.id){const La=this;sa.prototype.getShapes=function(){var Xa,$a;return null!=($a=null==(Xa=this.props.children)?void 0:
Xa.map(kb=>La.getShapeById(kb)).filter(Boolean))?$a:[]}}return this.Shapes.set(sa.id,sa)})});Ua(this,"deregisterShapes",ia=>{ia.forEach(sa=>this.Shapes.delete(sa.id))});Ua(this,"getShapeClass",ia=>{if(!ia)throw Error("No shape type provided.");const sa=this.Shapes.get(ia);if(!sa)throw Error(`Could not find shape class for ${ia}`);return sa});Ua(this,"wrapUpdate",ia=>{Kd(()=>{const sa=!this.history.isPaused;sa&&this.history.pause();ia();sa&&(this.history.resume(),this.persist())})});Ua(this,"subscriptions",
new Set([]));Ua(this,"subscribe",(ia,sa)=>{if(void 0===sa)throw Error("Callback is required.");const La={event:ia,callback:sa};this.subscriptions.add(La);return()=>this.unsubscribe(La)});Ua(this,"unsubscribe",ia=>{this.subscriptions.delete(ia);return this});Ua(this,"notify",(ia,sa)=>{this.subscriptions.forEach(La=>{La.event===ia&&La.callback(this,sa)});return this});Ua(this,"onTransition",()=>{});Ua(this,"onPointerDown",(ia,sa)=>{if(!this.editingShape&&1===sa.button&&!this.isIn("move"))this.temporaryTransitionToMove(sa);
else if(2===sa.button&&!this.editingShape)sa.preventDefault(),this.transition("select");else if("clientX"in sa)this.inputs.onPointerDown([...this.viewport.getPagePoint([sa.clientX,sa.clientY]),.5],sa)});Ua(this,"onPointerUp",(ia,sa)=>{if(!this.editingShape&&1===sa.button&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),sa.stopPropagation(),sa.preventDefault();else if("clientX"in sa)this.inputs.onPointerUp([...this.viewport.getPagePoint([sa.clientX,sa.clientY]),.5],sa)});Ua(this,"onPointerMove",
(ia,sa)=>{if("clientX"in sa)this.inputs.onPointerMove([...this.viewport.getPagePoint([sa.clientX,sa.clientY]),.5],sa)});Ua(this,"onKeyDown",(ia,sa)=>{if(this.editingShape||" "!==sa.key||this.isIn("move"))this.inputs.onKeyDown(sa);else this.temporaryTransitionToMove(sa)});Ua(this,"onKeyUp",(ia,sa)=>{if(!this.editingShape&&" "===sa.key&&this.isIn("move"))this.selectedTool.transition("idle",{exit:!0}),sa.stopPropagation(),sa.preventDefault();else this.inputs.onKeyUp(sa)});Ua(this,"onPinchStart",(ia,
sa)=>{this.inputs.onPinchStart([...this.viewport.getPagePoint(ia.point),.5],sa)});Ua(this,"onPinch",(ia,sa)=>{this.inputs.onPinch([...this.viewport.getPagePoint(ia.point),.5],sa)});Ua(this,"onPinchEnd",(ia,sa)=>{this.inputs.onPinchEnd([...this.viewport.getPagePoint(ia.point),.5],sa)});this._states=[jr,kr];this.history.pause();if(this.states&&0<this.states.length){this.registerStates(this.states);const ia=null!=(I=this.initial)?I:this.states[0].id;if(I=this.children.get(ia))this.currentState=I,null==
(W=this.currentState)?void 0:W._events.onEnter({fromId:"initial"})}g&&this.registerShapes(g);n&&this.registerTools(n);this.history.resume();b&&this.history.deserialize(b);this.api=new lC(this);og(this);this.notify("mount",null)}dispose(){super.dispose();this.keybindingRegistered=!1;return this}initKeyboardShortcuts(){if(!this.keybindingRegistered){var b=this.constructor.shortcuts||[],g=Array.from(this.children.values()).filter(n=>n.constructor.shortcut).map(n=>({keys:n.constructor.shortcut,fn:(I,
W,ia)=>{this.transition(n.id)}}));this._disposables.push(...[{keys:"shift+0",fn:()=>this.api.resetZoom()},{keys:"shift+1",fn:()=>this.api.zoomToFit()},{keys:"mod+shift+1",fn:()=>this.api.zoomToSelection()},{keys:"mod+-",fn:()=>this.api.zoomOut()},{keys:"mod+\x3d",fn:()=>this.api.zoomIn()},{keys:"mod+x",fn:()=>this.cut()},{keys:"[",fn:()=>this.sendBackward()},{keys:"shift+[",fn:()=>this.sendToBack()},{keys:"]",fn:()=>this.bringForward()},{keys:"shift+]",fn:()=>this.bringToFront()},{keys:"mod+a",fn:()=>
{const {selectedTool:n}=this;"select"!==n.id&&this.selectTool("select");this.api.selectAll()}},{keys:"mod+shift+s",fn:()=>{this.saveAs();this.notify("saveAs",null)}},{keys:"mod+shift+v",fn:(n,I,W)=>{this.editingShape||(W.preventDefault(),this.paste(void 0,!0))}},{keys:["del","backspace"],fn:()=>{this.editingShape||(this.api.deleteShapes(),this.selectedTool.transition("idle"))}},{keys:"mod+g",fn:()=>{this.api.doGroup()}},{keys:"mod+shift+g",fn:()=>{this.api.unGroup()}},{keys:"shift+g",fn:()=>{this.api.toggleGrid()}},
...b,...g].map(({keys:n,fn:I})=>$o.registerShortcut(n,W=>{I(this,this,W)})));this.keybindingRegistered=!0}}loadDocumentModel(b){this.history.deserialize(b);b.assets&&0<b.assets.length&&this.addAssets(b.assets);return this}get serialized(){return{}}get currentPageId(){return this.pages.keys().next().value}get currentPage(){return this.getPageById(this.currentPageId)}addPages(b){b.forEach(g=>this.pages.set(g.id,g));this.persist();return this}removePages(b){b.forEach(g=>this.pages.delete(g.id));this.persist();
return this}shapesInGroups(b=this.shapes){return b.flatMap(g=>g.props.children).filter(Ig).map(g=>this.getShapeById(g)).filter(Ig)}getParentGroup(b){return this.shapes.find(g=>{var n;return null==(n=g.props.children)?void 0:n.includes(b.id)})}addAssets(b){b.forEach(g=>this.assets[g.id]=g);this.persist();return this}removeAssets(b){"string"===typeof b[0]?b.forEach(g=>delete this.assets[g]):b.forEach(g=>delete this.assets[g.id]);this.persist();return this}getCleanUpAssets(){const b=new Set;this.pages.forEach(g=>
g.shapes.forEach(n=>{n.props.assetId&&this.assets[n.props.assetId]&&b.add(this.assets[n.props.assetId])}));return Array.from(b)}createAssets(b){this.addAssets(b);this.notify("create-assets",{assets:b});this.persist();return this}get selectedTool(){return this.currentState}registerTools(b){this.Tools=b;return this.registerStates(b)}get editingShape(){const {editingId:b,currentPage:g}=this;return b?g.shapes.find(n=>n.id===b):void 0}get hoveredShape(){const {hoveredId:b,currentPage:g}=this;return b?
g.shapes.find(n=>n.id===b):void 0}get hoveredGroup(){const {hoveredShape:b}=this;return b?this.shapes.find(g=>{var n;return"group"===g.type&&(null==(n=g.props.children)?void 0:n.includes(b.id))}):void 0}get selectedShapesArray(){const {selectedShapes:b,selectedTool:g}=this;return"select"!==g.id?[]:Array.from(b.values())}get allSelectedShapes(){return new Set(this.allSelectedShapesArray)}get allSelectedShapesArray(){const {selectedShapesArray:b}=this;return[...(new Set([...b,...this.shapesInGroups(b)]))]}setSelectionRotation(b){this.selectionRotation=
b}get erasingShapesArray(){return Array.from(this.erasingShapes.values())}get bindingShapes(){var b;const g=1===this.selectedShapesArray.length?this.selectedShapesArray.flatMap(I=>{var W;return Object.values(null!=(W=I.props.handles)?W:{})}).flatMap(I=>I.bindingId).filter(Ig).flatMap(I=>{var W,ia;return[null==(W=this.currentPage.bindings[I])?void 0:W.fromId,null==(ia=this.currentPage.bindings[I])?void 0:ia.toId]}).filter(Ig):[],n=[...(null!=(b=this.bindingIds)?b:[]),...g];return n?this.currentPage.shapes.filter(I=>
null==n?void 0:n.includes(I.id)):void 0}get currentGrid(){const {zoom:b}=this.viewport.camera;return.15>b?128:1>b?32:8}get shapes(){const {currentPage:{shapes:b}}=this;return Array.from(b.values())}get shapesInViewport(){const {selectedShapes:b,currentPage:g,viewport:{currentView:n}}=this;return g.shapes.filter(I=>!I.canUnmount||b.has(I)||Ge.boundsContain(n,I.rotatedBounds)||Ge.boundsCollide(n,I.rotatedBounds))}get selectionDirectionHint(){const {selectionBounds:b,viewport:{currentView:g}}=this;if(b&&
!Ge.boundsContain(g,b)&&!Ge.boundsCollide(g,b)){var n=Ge.getBoundsCenter(b);return xd.clampV([(n[0]-g.minX-g.width/2)/g.width,(n[1]-g.minY-g.height/2)/g.height],-1,1)}}get selectionBounds(){const {selectedShapesArray:b}=this;if(0!==b.length)return 1===b.length?Wa(Fa({},b[0].bounds),{rotation:b[0].props.rotation}):Ge.getCommonBounds(this.selectedShapesArray.map(g=>g.rotatedBounds))}get showSelection(){var b;const {selectedShapesArray:g}=this;return this.isIn("select")&&!this.isInAny("select.translating",
"select.pinching","select.rotating")&&(1===g.length&&!(null==(b=g[0])?0:b.hideSelection)||1<g.length)}get showSelectionDetail(){return this.isIn("select")&&!this.isInAny("select.translating","select.pinching")&&0<this.selectedShapes.size&&!this.selectedShapesArray.every(b=>b.hideSelectionDetail)&&!1}get showSelectionRotation(){return this.showSelectionDetail&&this.isInAny("select.rotating","select.pointingRotateHandle")}get showContextBar(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle",
"select.hoveringSelectionHandle")&&!this.isIn("select.contextMenu")&&0<b.length&&!b.every(g=>g.hideContextBar)}get showRotateHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingRotateHandle","select.pointingResizeHandle")&&0<b.length&&!b.some(g=>g.hideRotateHandle)}get showResizeHandles(){const {selectedShapesArray:b}=this;return this.isInAny("select.idle","select.hoveringSelectionHandle","select.pointingShape","select.pointingSelectedShape",
"select.pointingRotateHandle","select.pointingResizeHandle")&&1===b.length&&!b.every(g=>g.hideResizeHandles)}temporaryTransitionToMove(b){b.stopPropagation();b.preventDefault();this.transition("move",{prevTool:this.selectedTool});this.selectedTool.transition("idleHold")}};Ua(dh,"id","app");Ua(dh,"initial","select");nc([Eg],dh.prototype,"serialized",1);nc([xg],dh.prototype,"pages",2);nc([Eg],dh.prototype,"currentPageId",1);nc([Eg],dh.prototype,"currentPage",1);nc([af],dh.prototype,"addPages",1);nc([af],
dh.prototype,"removePages",1);nc([af],dh.prototype,"createShapes",2);nc([af],dh.prototype,"updateShapes",2);nc([af],dh.prototype,"deleteShapes",2);nc([xg],dh.prototype,"assets",2);nc([af],dh.prototype,"addAssets",1);nc([af],dh.prototype,"removeAssets",1);nc([af],dh.prototype,"removeUnusedAssets",2);nc([Eg],dh.prototype,"selectedTool",1);nc([xg],dh.prototype,"editingId",2);nc([Eg],dh.prototype,"editingShape",1);nc([af],dh.prototype,"setEditingShape",2);nc([xg],dh.prototype,"hoveredId",2);nc([Eg],dh.prototype,
"hoveredShape",1);nc([Eg],dh.prototype,"hoveredGroup",1);nc([af],dh.prototype,"setHoveredShape",2);nc([xg],dh.prototype,"selectedIds",2);nc([xg],dh.prototype,"selectedShapes",2);nc([xg],dh.prototype,"selectionRotation",2);nc([Eg],dh.prototype,"selectedShapesArray",1);nc([Eg],dh.prototype,"allSelectedShapes",1);nc([Eg],dh.prototype,"allSelectedShapesArray",1);nc([af],dh.prototype,"setSelectedShapes",2);nc([af],dh.prototype,"setSelectionRotation",1);nc([xg],dh.prototype,"erasingIds",2);nc([xg],dh.prototype,
"erasingShapes",2);nc([Eg],dh.prototype,"erasingShapesArray",1);nc([af],dh.prototype,"setErasingShapes",2);nc([xg],dh.prototype,"bindingIds",2);nc([Eg],dh.prototype,"bindingShapes",1);nc([af],dh.prototype,"setBindingShapes",2);nc([af],dh.prototype,"createNewLineBinding",2);nc([xg],dh.prototype,"brush",2);nc([af],dh.prototype,"setBrush",2);nc([af],dh.prototype,"setCamera",2);nc([Eg],dh.prototype,"currentGrid",1);nc([Eg],dh.prototype,"shapes",1);nc([Eg],dh.prototype,"shapesInViewport",1);nc([Eg],dh.prototype,
"selectionDirectionHint",1);nc([Eg],dh.prototype,"selectionBounds",1);nc([Eg],dh.prototype,"showSelection",1);nc([Eg],dh.prototype,"showSelectionDetail",1);nc([Eg],dh.prototype,"showSelectionRotation",1);nc([Eg],dh.prototype,"showContextBar",1);nc([Eg],dh.prototype,"showRotateHandles",1);nc([Eg],dh.prototype,"showResizeHandles",1);var hC=Function.prototype.toString,gv=Object.create,iC=Object.prototype.toString,jC=function(){function b(){this._keys=[];this._values=[]}b.prototype.has=function(g){return!!~this._keys.indexOf(g)};
b.prototype.get=function(g){return this._values[this._keys.indexOf(g)]};b.prototype.set=function(g,n){this._keys.push(g);this._values.push(n)};return b}(),gC="undefined"!==typeof WeakMap?Ue:ve,FD="g"===/test/g.flags?Ff:cg,EC="undefined"!==typeof Symbol?Of:vf,FC=Object.defineProperty,HC=Object.getOwnPropertyDescriptor,hy=Object.getOwnPropertyNames,sv=Object.getOwnPropertySymbols,iy=Object.prototype,jy=iy.hasOwnProperty,IC=iy.propertyIsEnumerable,ky="function"===typeof sv,JC=ky?Pg:hy,KC=Array.isArray,
rv=Object.assign,DC=Object.getPrototypeOf,gy={array:function(b,g){var n=new g.Constructor;g.cache.set(b,n);for(var I=0,W=b.length;I<W;++I)n[I]=g.copier(b[I],g);return n},arrayBuffer:function(b,g){return b.slice(0)},blob:function(b,g){return b.slice(0,b.size,b.type)},dataView:function(b,g){return new g.Constructor(b.buffer.slice(0))},date:function(b,g){return new g.Constructor(b.getTime())},error:Oh,map:th,object:ky?Wh:ki,regExp:function(b,g){g=new g.Constructor(b.source,FD(b));g.lastIndex=b.lastIndex;
return g},set:df},GD=rv({},gy,{array:function(b,g){var n=new g.Constructor;g.cache.set(b,n);return ci(b,n,g)},map:function(b,g){return ci(b,th(b,g),g)},object:function(b,g){var n=If(g.prototype);g.cache.set(b,n);return ci(b,n,g)},set:function(b,g){return ci(b,df(b,g),g)}});Ph(rv({},GD,{}));var MC=Ph({});ac(wa());var LC=ac(Ya()),Hq=MC,Mn=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",
isComposing:!1}))}static insert(b,g){const n=b.ownerDocument,I=n.activeElement;I!==b&&b.focus();n.execCommand("insertText",!1,g)||Mn.insertTextFirefox(b,g);I===n.body?b.blur():I instanceof HTMLElement&&I!==b&&I.focus()}static set(b,g){b.select();Mn.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:n}=b;return b.value.slice(g?g:void 0,n?n:void 0)}static wrapSelection(b,g,n){const {selectionStart:I,selectionEnd:W}=b,ia=Mn.getSelection(b);Mn.insert(b,g+ia+(null!=n?n:g));b.selectionStart=
(I||0)+g.length;b.selectionEnd=(W||0)+g.length}static replace(b,g,n){let I=0;b.value.replace(g,(...W)=>{const ia=I+W[W.length-2],sa=W[0].length;b.selectionStart=ia;b.selectionEnd=ia+sa;W="string"===typeof n?n:n(...W);Mn.insert(b,W);b.selectionStart=ia;I+=W.length-sa;return W})}static findLineEnd(b,g){const n=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(n)?g:n+1}static indent(b){var g;const {selectionStart:n,selectionEnd:I,value:W}=b;var ia=W.slice(n,I);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&
0<ia){g=W.lastIndexOf("\n",n-1)+1;var sa=b.value.slice(g,I-1);ia=sa.replace(/^|\n/g,`$&${Mn.INDENT}`);sa=ia.length-sa.length;b.setSelectionRange(g,I-1);Mn.insert(b,ia);b.setSelectionRange(n+1,I+sa)}else Mn.insert(b,Mn.INDENT)}static unindent(b){const {selectionStart:g,selectionEnd:n,value:I}=b;var W=I.lastIndexOf("\n",g-1)+1;const ia=Mn.findLineEnd(I,n);var sa=b.value.slice(W,ia);const La=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-La.length;b.setSelectionRange(W,ia);Mn.insert(b,La);W=(W=/\t| {1,2}/.exec(I.slice(W,
g)))?W[0].length:0;b.setSelectionRange(g-W,Math.max(g-W,n-sa))}static normalizeText(b){return b.replace(Mn.fixNewLines,"\n")}},Cr=Mn;Ua(Cr,"fixNewLines",/\r?\n|\r/g);Ua(Cr,"INDENT","  ");var Mp;"undefined"!==typeof window&&(Mp=Bj());var yv=new Map,wo=lk()?"":"Ctrl",PC=class extends dh{},oy=ac(V(22)),QC=()=>{};/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var ny=ac(V(22)),xv={},Is=ac(V(22)),RC=b=>{for(b=b.parentElement;b&&b!==document.body;){const {overflowY:g}=window.getComputedStyle(b);
if(b.scrollHeight>b.clientHeight&&("auto"===g||"scroll"===g||"overlay"===g))return b;b=b.parentElement}return document},wv=ac(V(22)),vv=new Map,NC={accent:"rgb(255, 0, 0)",brushFill:"var(--ls-scrollbar-background-color, rgba(0, 0, 0, .05))",brushStroke:"var(--ls-scrollbar-thumb-hover-color, rgba(0, 0, 0, .05))",selectStroke:"var(--color-selectedFill)",selectFill:"rgba(65, 132, 244, 0.05)",binding:"rgba(65, 132, 244, 0.5)",background:"var(--ls-primary-background-color)",foreground:"var(--ls-primary-text-color)",
grid:"var(--ls-quaternary-background-color)"},OC=((b,...g)=>b.reduce((n,I,W)=>n+I+(W<g.length?g[W]:""),""))`
  .tl-container {
    --tl-zoom: 1;
    --tl-scale: calc(1 / var(--tl-zoom));
    --tl-padding: 64px;
    --tl-shadow-color: 0deg 0% 0%;
    --tl-binding-distance: ${4}px;
    --tl-shadow-elevation-low: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0px 0.6px 0.8px -0.7px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 1.2px 1.5px -1.4px hsl(var(--tl-shadow-color) / 0.08);
    --tl-shadow-elevation-medium: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 1.3px 1.7px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.1px 2.8px 3.6px -1px hsl(var(--tl-shadow-color) / 0.07),
      0.3px 6.1px 7.8px -1.4px hsl(var(--tl-shadow-color) / 0.09);
    --tl-shadow-elevation-high: 0px 0.4px 0.5px hsl(var(--tl-shadow-color) / 0.04),
      0.1px 2.3px 3px -0.2px hsl(var(--tl-shadow-color) / 0.05),
      0.2px 4.1px 5.3px -0.5px hsl(var(--tl-shadow-color) / 0.06),
      0.4px 6.6px 8.5px -0.7px hsl(var(--tl-shadow-color) / 0.07),
      0.6px 10.3px 13.2px -1px hsl(var(--tl-shadow-color) / 0.08),
      0.9px 16px 20.6px -1.2px hsl(var(--tl-shadow-color) / 0.09),
      1.3px 24.3px 31.2px -1.4px hsl(var(--tl-shadow-color) / 0.1);
    box-sizing: border-box;
    position: relative;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    max-width: 100%;
    max-height: 100%;
    box-sizing: border-box;
    padding: 0px;
    margin: 0px;
    outline: none;
    z-index: 100;
    user-select: none;
    touch-action: none;
    overscroll-behavior: none;
    background-color: var(--tl-background);
    cursor: inherit;
    box-sizing: border-box;
    color: var(--tl-foreground);
    -webkit-user-select: none;
    -webkit-user-drag: none;
  }

  .tl-overlay {
    background: none;
    fill: transparent;
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
  }

  .tl-snap-line {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-snap-point {
    stroke: var(--tl-accent);
    stroke-width: calc(1px * var(--tl-scale));
  }

  .tl-canvas {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: all;
    overflow: clip;
    outline: none;
  }

  .tl-layer {
    position: absolute;
    top: 0px;
    left: 0px;
    height: 0px;
    width: 0px;
    contain: layout style size;
  }

  .tl-absolute {
    position: absolute;
    top: 0px;
    left: 0px;
    transform-origin: center center;
    contain: layout style size;
  }

  .tl-positioned {
    position: absolute;
    transform-origin: center center;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    contain: layout style size;
  }

  .tl-positioned-svg {
    width: 100%;
    height: 100%;
    overflow: hidden;
    contain: layout style size;
    pointer-events: none;
  }

  .tl-positioned-div {
    position: relative;
    width: 100%;
    height: 100%;
    padding: var(--tl-padding);
    contain: layout style size;
  }

  .tl-positioned-inner {
    position: relative;
    width: 100%;
    height: 100%;
  }

  .tl-counter-scaled {
    transform: scale(var(--tl-scale));
  }

  .tl-dashed {
    stroke-dasharray: calc(2px * var(--tl-scale)), calc(2px * var(--tl-scale));
  }

  .tl-transparent {
    fill: transparent;
    stroke: transparent;
  }

  .tl-corner-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-rotate-handle {
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-user {
    left: -4px;
    top: -4px;
    height: 8px;
    width: 8px;
    border-radius: 100%;
    pointer-events: none;
  }

  .tl-indicator {
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-indicator-container {
    transform-origin: 0 0;
    fill: transparent;
    stroke-width: calc(1.5px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-user-indicator-bounds {
    border-style: solid;
    border-width: calc(1px * var(--tl-scale));
  }

  .tl-selected {
    stroke: var(--tl-selectStroke);
  }

  .tl-hovered {
    stroke: var(--tl-selectStroke);
  }

  .tl-clone-target {
    pointer-events: all;
  }

  .tl-clone-target:hover .tl-clone-button {
    opacity: 1;
  }

  .tl-clone-button-target {
    cursor: pointer;
    pointer-events: all;
  }

  .tl-clone-button-target:hover .tl-clone-button {
    fill: var(--tl-selectStroke);
  }

  .tl-clone-button {
    opacity: 0;
    r: calc(8px * var(--tl-scale));
    stroke-width: calc(1.5px * var(--tl-scale));
    stroke: var(--tl-selectStroke);
    fill: var(--tl-background);
  }

  .tl-bounds {
    pointer-events: none;
    contain: layout style size;
  }

  .tl-bounds-bg {
    stroke: none;
    fill: var(--tl-selectFill);
    pointer-events: all;
    contain: layout style size;
  }

  .tl-bounds-fg {
    fill: transparent;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(1.5px * var(--tl-scale));
  }

  .tl-brush {
    fill: var(--tl-brushFill);
    stroke: var(--tl-brushStroke);
    stroke-width: calc(1px * var(--tl-scale));
    pointer-events: none;
  }

  .tl-dot {
    fill: var(--tl-background);
    stroke: var(--tl-foreground);
    stroke-width: 2px;
  }

  .tl-handle {
    fill: var(--tl-background);
    stroke: var(--tl-selectStroke);
    stroke-width: 1.5px;
    pointer-events: none;
  }

  .tl-handle-bg {
    fill: transparent;
    stroke: none;
    r: calc(16px / max(1, var(--tl-zoom)));
    pointer-events: all;
    cursor: grab;
  }

  .tl-handle-bg:active {
    pointer-events: all;
    fill: none;
  }

  .tl-handle-bg:hover {
    cursor: grab;
    fill: var(--tl-selectFill);
  }

  .tl-binding-indicator {
    fill: transparent;
    stroke: var(--tl-binding);
  }

  .tl-centered {
    display: grid;
    place-content: center;
    place-items: center;
  }

  .tl-centered > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-centered-g {
    transform: translate(var(--tl-padding), var(--tl-padding));
  }

  .tl-current-parent > *[data-shy='true'] {
    opacity: 1;
  }

  .tl-binding {
    fill: none;
    stroke: var(--tl-selectStroke);
    stroke-width: calc(2px * var(--tl-scale));
  }

  .tl-counter-scaled-positioned {
    position: absolute;
    top: 0;
    left: 0;
    pointer-events: none;
    padding: 0;
    contain: layout style size;
  }

  .tl-fade-in {
    opacity: 1;
    transition-timing-function: ease-in-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-fade-out {
    opacity: 0;
    transition-timing-function: ease-out;
    transition-property: opacity;
    transition-duration: 0.12s;
    transition-delay: 0;
  }

  .tl-counter-scaled-positioned > .tl-positioned-div {
    user-select: none;
    padding: 64px;
  }

  .tl-context-bar > * {
    grid-column: 1;
    grid-row: 1;
  }

  .tl-bounds-detail {
    padding: 2px 3px;
    border-radius: 1px;
    white-space: nowrap;
    width: fit-content;
    text-align: center;
    font-size: 12px;
    font-weight: 500;
    background-color: var(--tl-selectStroke);
    color: var(--tl-background);
  }

  .tl-grid-canvas {
    position: absolute;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid {
    position: absolute;
    width: 100%;
    height: 100%;
    touch-action: none;
    pointer-events: none;
    user-select: none;
  }

  .tl-grid-dot {
    fill: var(--tl-grid);
  }

  .tl-html-canvas {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100%;
    height: 100%;
    zindex: 20000;
    pointer-events: none;
    border: 2px solid red;
  }

  .tl-direction-indicator {
    z-index: 100000;
    position: absolute;
    top: 0px;
    left: 0px;
    fill: var(--tl-selectStroke);
  }
`,my=ac(V(22)),uv=ac(V(22)),tv={},Jk={toVector(b,g){void 0===b&&(b=g);return Array.isArray(b)?b:[b,b]},add(b,g){return[b[0]+g[0],b[1]+g[1]]},sub(b,g){return[b[0]-g[0],b[1]-g[1]]},addTo(b,g){b[0]+=g[0];b[1]+=g[1]},subTo(b,g){b[0]-=g[0];b[1]-=g[1]}},sy={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}},kD=["enter","leave"],mD=["gotpointercapture","lostpointercapture"],
ty=class{constructor(b,g,n){this.ctrl=b;this.args=g;this.key=n;this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(b){this.ctrl.state[this.key]=b}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const {state:b,
shared:g,ingKey:n,args:I}=this;g[n]=b._active=b.active=b._blocked=b._force=!1;b._step=[!1,!1];b.intentional=!1;b._movement=[0,0];b._distance=[0,0];b._direction=[0,0];b._delta=[0,0];b._bounds=[[-Infinity,Infinity],[-Infinity,Infinity]];b.args=I;b.axis=void 0;b.memo=void 0;b.elapsedTime=0;b.direction=[0,0];b.distance=[0,0];b.overflow=[0,0];b._movementBound=[!1,!1];b.velocity=[0,0];b.movement=[0,0];b.delta=[0,0];b.timeStamp=0}start(b){const g=this.state,n=this.config;g._active||(this.reset(),this.computeInitial(),
g._active=!0,g.target=b.target,g.currentTarget=b.currentTarget,g.lastOffset=n.from?Kh(n.from,g):g.offset,g.offset=g.lastOffset);g.startTime=g.timeStamp=b.timeStamp}computeValues(b){const g=this.state;g._values=b;g.values=this.config.transform(b)}computeInitial(){const b=this.state;b._initial=b._values;b.initial=b.values}compute(b){const {state:g,config:n,shared:I}=this;g.args=this.args;var W=0;if(b){g.event=b;n.preventDefault&&b.cancelable&&g.event.preventDefault();g.type=b.type;I.touches=this.ctrl.pointerIds.size||
this.ctrl.touchIds.size;I.locked=!!document.pointerLockElement;W=Object;var ia=W.assign,sa={};"buttons"in b&&(sa.buttons=b.buttons);if("shiftKey"in b){const {shiftKey:Rc,altKey:Vc,metaKey:Wd,ctrlKey:be}=b;Object.assign(sa,{shiftKey:Rc,altKey:Vc,metaKey:Wd,ctrlKey:be})}ia.call(W,I,sa);I.down=I.pressed=1===I.buttons%2||0<I.touches;W=b.timeStamp-g.timeStamp;g.timeStamp=b.timeStamp;g.elapsedTime=g.timeStamp-g.startTime}g._active&&(ia=g._delta.map(Math.abs),Jk.addTo(g._distance,ia));this.axisIntent&&this.axisIntent(b);
const [La,Xa]=g._movement,[$a,kb]=n.threshold,{_step:tb,values:Ob}=g;n.hasCustomTransform?(!1===tb[0]&&(tb[0]=Math.abs(La)>=$a&&Ob[0]),!1===tb[1]&&(tb[1]=Math.abs(Xa)>=kb&&Ob[1])):(!1===tb[0]&&(tb[0]=Math.abs(La)>=$a&&Math.sign(La)*$a),!1===tb[1]&&(tb[1]=Math.abs(Xa)>=kb&&Math.sign(Xa)*kb));g.intentional=!1!==tb[0]||!1!==tb[1];if(g.intentional){ia=[0,0];if(n.hasCustomTransform){const [Rc,Vc]=Ob;ia[0]=!1!==tb[0]?Rc-tb[0]:0;ia[1]=!1!==tb[1]?Vc-tb[1]:0}else ia[0]=!1!==tb[0]?La-tb[0]:0,ia[1]=!1!==tb[1]?
Xa-tb[1]:0;this.restrictToAxis&&!g._blocked&&this.restrictToAxis(ia);sa=g.offset;var ec=g._active&&!g._blocked||g.active;ec&&(g.first=g._active&&!g.active,g.last=!g._active&&g.active,g.active=I[this.ingKey]=g._active,b&&(g.first&&("bounds"in n&&(g._bounds=Kh(n.bounds,g)),this.setup&&this.setup()),g.movement=ia,this.computeOffset()));var [Ub,pc]=g.offset,[[mc,Vb],[uc,Ic]]=g._bounds;g.overflow=[Ub<mc?-1:Ub>Vb?1:0,pc<uc?-1:pc>Ic?1:0];g._movementBound[0]=g.overflow[0]?!1===g._movementBound[0]?g._movement[0]:
g._movementBound[0]:!1;g._movementBound[1]=g.overflow[1]?!1===g._movementBound[1]?g._movement[1]:g._movementBound[1]:!1;g.offset=Dh(g._bounds,g.offset,g._active?n.rubberband||[0,0]:[0,0]);g.delta=Jk.sub(g.offset,sa);this.computeMovement();ec&&(!g.last||32<W)&&(g.delta=Jk.sub(g.offset,sa),b=g.delta.map(Math.abs),Jk.addTo(g.distance,b),g.direction=g.delta.map(Math.sign),g._direction=g._delta.map(Math.sign),!g.first&&0<W&&(g.velocity=[b[0]/W,b[1]/W]))}}emit(){const b=this.state;var g=this.shared;const n=
this.config;b._active||this.clean();if(!b._blocked&&b.intentional||b._force||n.triggerAllEvents)g=this.handler(Ag(Ag(Ag({},g),b),{},{[this.aliasKey]:b.values})),void 0!==g&&(b.memo=g)}clean(){this.eventStore.clean();this.timeoutStore.clean()}},Js=class extends ty{constructor(...b){super(...b);Wg(this,"aliasKey","xy")}reset(){super.reset();this.state.axis=void 0}init(){this.state.offset=[0,0];this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Jk.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=
Jk.sub(this.state.offset,this.state.lastOffset)}axisIntent(b){const g=this.state,n=this.config;!g.axis&&b&&(b="object"===typeof n.axisThreshold?n.axisThreshold[Jh(b)]:n.axisThreshold,g.axis=Yi(g._movement,b));g._blocked=(n.lockDirection||!!n.axis)&&!g.axis||!!n.axis&&n.axis!==g.axis}restrictToAxis(b){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case "x":b[1]=0;break;case "y":b[0]=0}}},nD=b=>b,uy={enabled(b=!0){return b},eventOptions(b,g,n){return Ag(Ag({},n.shared.eventOptions),
b)},preventDefault(b=!1){return b},triggerAllEvents(b=!1){return b},rubberband(b=0){switch(b){case !0:return[.15,.15];case !1:return[0,0];default:return Jk.toVector(b)}},from(b){if("function"===typeof b)return b;if(null!=b)return Jk.toVector(b)},transform(b,g,n){b=b||n.shared.transform;this.hasCustomTransform=!!b;return b||nD},threshold(b){return Jk.toVector(b,0)}},Iq=Ag(Ag({},uy),{},{axis(b,g,{axis:n}){this.lockDirection="lock"===n;if(!this.lockDirection)return n},axisThreshold(b=0){return b},bounds(b=
{}){if("function"===typeof b)return ia=>Iq.bounds(b(ia));if("current"in b)return()=>b.current;if("function"===typeof HTMLElement&&b instanceof HTMLElement)return b;const {left:g=-Infinity,right:n=Infinity,top:I=-Infinity,bottom:W=Infinity}=b;return[[g,n],[I,W]]}}),vy={ArrowRight:(b=1)=>[10*b,0],ArrowLeft:(b=1)=>[-10*b,0],ArrowUp:(b=1)=>[0,-10*b],ArrowDown:(b=1)=>[0,10*b]},oD=class extends Js{constructor(...b){super(...b);Wg(this,"ingKey","dragging")}reset(){super.reset();const b=this.state;b._pointerId=
void 0;b._pointerActive=!1;b._keyboardActive=!1;b._preventScroll=!1;b._delayed=!1;b.swipe=[0,0];b.tap=!1;b.canceled=!1;b.cancel=this.cancel.bind(this)}setup(){const b=this.state;if(b._bounds instanceof HTMLElement){const g=b._bounds.getBoundingClientRect(),n=b.currentTarget.getBoundingClientRect();b._bounds=Iq.bounds({left:g.left-n.left+b.offset[0],right:g.right-n.right+b.offset[0],top:g.top-n.top+b.offset[1],bottom:g.bottom-n.bottom+b.offset[1]})}}cancel(){const b=this.state;b.canceled||(b.canceled=
!0,b._active=!1,setTimeout(()=>{this.compute();this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean();this.state._pointerActive=!1;this.state._keyboardActive=!1;super.clean()}pointerDown(b){const g=this.config,n=this.state;if(null==b.buttons||(Array.isArray(g.pointerButtons)?g.pointerButtons.includes(b.buttons):-1===g.pointerButtons||g.pointerButtons===b.buttons)){var I=this.ctrl.setEventIds(b);g.pointerCapture&&b.target.setPointerCapture(b.pointerId);
I&&1<I.size&&n._pointerActive||(this.start(b),this.setupPointer(b),n._pointerId=Qj(b),n._pointerActive=!0,this.computeValues(di(b)),this.computeInitial(),g.preventScrollAxis&&"mouse"!==Jh(b)?(n._active=!1,this.setupScrollPrevention(b)):0<g.delay?(this.setupDelayTrigger(b),g.triggerAllEvents&&(this.compute(b),this.emit())):this.startPointerDrag(b))}}startPointerDrag(b){const g=this.state;g._active=!0;g._preventScroll=!0;g._delayed=!1;this.compute(b);this.emit()}pointerMove(b){const g=this.state,n=
this.config;if(g._pointerActive&&(g.type!==b.type||b.timeStamp!==g.timeStamp)){var I=Qj(b);if(void 0===g._pointerId||I===g._pointerId)I=di(b),document.pointerLockElement===b.target?g._delta=[b.movementX,b.movementY]:(g._delta=Jk.sub(I,g._values),this.computeValues(I)),Jk.addTo(g._movement,g._delta),this.compute(b),g._delayed&&g.intentional?(this.timeoutStore.remove("dragDelay"),g.active=!1,this.startPointerDrag(b)):n.preventScrollAxis&&!g._preventScroll?g.axis&&(g.axis===n.preventScrollAxis||"xy"===
n.preventScrollAxis?(g._active=!1,this.clean()):(this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(b))):this.emit()}}pointerUp(b){this.ctrl.setEventIds(b);try{this.config.pointerCapture&&b.target.hasPointerCapture(b.pointerId)&&b.target.releasePointerCapture(b.pointerId)}catch(sa){}const g=this.state,n=this.config;if(g._active&&g._pointerActive){var I=Qj(b);if(void 0===g._pointerId||I===g._pointerId){this.state._pointerActive=!1;this.setActive();this.compute(b);var [W,ia]=g._distance;
g.tap=W<=n.tapsThreshold&&ia<=n.tapsThreshold;if(g.tap&&n.filterTaps)g._force=!0;else{const [sa,La]=g.direction,[Xa,$a]=g.velocity,[kb,tb]=g.movement,[Ob,ec]=n.swipe.velocity,[Ub,pc]=n.swipe.distance;g.elapsedTime<n.swipe.duration&&(Math.abs(Xa)>Ob&&Math.abs(kb)>Ub&&(g.swipe[0]=sa),Math.abs($a)>ec&&Math.abs(tb)>pc&&(g.swipe[1]=La))}this.emit()}}}pointerClick(b){!this.state.tap&&0<b.detail&&(b.preventDefault(),b.stopPropagation())}setupPointer(b){const g=this.config,n=g.device;g.pointerLock&&b.currentTarget.requestPointerLock();
g.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(b){this.state._preventScroll&&b.cancelable&&b.preventDefault()}setupScrollPrevention(b){this.state._preventScroll=
!1;"persist"in b&&"function"===typeof b.persist&&b.persist();const g=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",g);this.eventStore.add(this.sharedConfig.window,"touch","cancel",g);this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,b)}setupDelayTrigger(b){this.state._delayed=!0;this.timeoutStore.add("dragDelay",()=>{this.state._step=
[0,0];this.startPointerDrag(b)},this.config.delay)}keyDown(b){const g=vy[b.key];if(g){const n=this.state,I=b.shiftKey?10:b.altKey?.1:1;this.start(b);n._delta=g(I);n._keyboardActive=!0;Jk.addTo(n._movement,n._delta);this.compute(b);this.emit()}}keyUp(b){b.key in vy&&(this.state._keyboardActive=!1,this.setActive(),this.compute(b),this.emit())}bind(b){const g=this.config.device;b(g,"start",this.pointerDown.bind(this));this.config.pointerCapture&&(b(g,"change",this.pointerMove.bind(this)),b(g,"end",this.pointerUp.bind(this)),
b(g,"cancel",this.pointerUp.bind(this)),b("lostPointerCapture","",this.pointerUp.bind(this)));this.config.keys&&(b("key","down",this.keyDown.bind(this)),b("key","up",this.keyUp.bind(this)));this.config.filterTaps&&b("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},Jq="undefined"!==typeof window&&window.document&&window.document.createElement;try{var wy="constructor"in GestureEvent}catch(b){wy=!1}var pD=wy,Ks=Jq&&"ontouchstart"in window||Jq&&1<window.navigator.maxTouchPoints,ry=Jq&&
"ontouchstart"in window||Jq&&1<window.navigator.maxTouchPoints,xy=Jq&&"onpointerdown"in window,lD=Jq&&"exitPointerLock"in window.document,qy={mouse:0,touch:0,pen:8},jD=Ag(Ag({},Iq),{},{device(b,g,{pointer:{touch:n=!1,lock:I=!1,mouse:W=!1}={}}){this.pointerLock=I&&lD;return Ks&&n?"touch":this.pointerLock?"mouse":xy&&!W?"pointer":Ks?"touch":"mouse"},preventScrollAxis(b,g,{preventScroll:n}){this.preventScrollDelay="number"===typeof n?n:n||void 0===n&&b?250:void 0;if(ry&&!1!==n)return b?b:void 0!==n?
"y":void 0},pointerCapture(b,g,{pointer:{capture:n=!0,buttons:I=1,keys:W=!0}={}}){this.pointerButtons=I;this.keys=W;return!this.pointerLock&&"pointer"===this.device&&n},threshold(b,g,{filterTaps:n=!1,tapsThreshold:I=3,axis:W}){b=Jk.toVector(b,n?I:W?1:0);this.filterTaps=n;this.tapsThreshold=I;return b},swipe({velocity:b=.5,distance:g=50,duration:n=250}={}){return{velocity:this.transform(Jk.toVector(b)),distance:this.transform(Jk.toVector(g)),duration:n}},delay(b=0){switch(b){case !0:return 180;case !1:return 0;
default:return b}},axisThreshold(b){return b?Ag(Ag({},qy),b):qy}}),gD=class extends ty{constructor(...b){super(...b);Wg(this,"ingKey","pinching");Wg(this,"aliasKey","da")}init(){this.state.offset=[1,0];this.state.lastOffset=[1,0];this.state._pointerEvents=new Map}reset(){super.reset();const b=this.state;b._touchIds=[];b.canceled=!1;b.cancel=this.cancel.bind(this);b.turns=0}computeOffset(){const {type:b,movement:g,lastOffset:n}=this.state;this.state.offset="wheel"===b?Jk.add(g,n):[(1+g[0])*n[0],g[1]+
n[1]]}computeMovement(){const {offset:b,lastOffset:g}=this.state;this.state.movement=[b[0]/g[0],b[1]-g[1]]}axisIntent(){const b=this.state,[g,n]=b._movement;if(!b.axis){const I=30*Math.abs(g)-Math.abs(n);0>I?b.axis="angle":0<I&&(b.axis="scale")}}restrictToAxis(b){this.config.lockDirection&&("scale"===this.state.axis?b[1]=0:"angle"===this.state.axis&&(b[0]=0))}cancel(){const b=this.state;b.canceled||setTimeout(()=>{b.canceled=!0;b._active=!1;this.compute();this.emit()},0)}touchStart(b){this.ctrl.setEventIds(b);
var g=this.state;const n=this.ctrl.touchIds;g._active&&g._touchIds.every(I=>n.has(I))||2>n.size||(this.start(b),g._touchIds=Array.from(n).slice(0,2),g=Bm(b,g._touchIds),this.pinchStart(b,g))}pointerStart(b){if(null==b.buttons||1===b.buttons%2){this.ctrl.setEventIds(b);b.target.setPointerCapture(b.pointerId);var g=this.state,n=g._pointerEvents,I=this.ctrl.pointerIds;g._active&&Array.from(n.keys()).every(W=>I.has(W))||(2>n.size&&n.set(b.pointerId,b),2>g._pointerEvents.size||(this.start(b),g=wj(...Array.from(n.values())),
this.pinchStart(b,g)))}}pinchStart(b,g){this.state.origin=g.origin;this.computeValues([g.distance,g.angle]);this.computeInitial();this.compute(b);this.emit()}touchMove(b){if(this.state._active){var g=Bm(b,this.state._touchIds);this.pinchMove(b,g)}}pointerMove(b){var g=this.state._pointerEvents;g.has(b.pointerId)&&g.set(b.pointerId,b);this.state._active&&(g=wj(...Array.from(g.values())),this.pinchMove(b,g))}pinchMove(b,g){const n=this.state,I=g.angle-n._values[1];let W=0;270<Math.abs(I)&&(W+=Math.sign(I));
this.computeValues([g.distance,g.angle-360*W]);n.origin=g.origin;n.turns=W;n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]];this.compute(b);this.emit()}touchEnd(b){this.ctrl.setEventIds(b);this.state._active&&this.state._touchIds.some(g=>!this.ctrl.touchIds.has(g))&&(this.state._active=!1,this.compute(b),this.emit())}pointerEnd(b){const g=this.state;this.ctrl.setEventIds(b);try{b.target.releasePointerCapture(b.pointerId)}catch(n){}g._pointerEvents.has(b.pointerId)&&g._pointerEvents.delete(b.pointerId);
g._active&&2>g._pointerEvents.size&&(g._active=!1,this.compute(b),this.emit())}gestureStart(b){b.cancelable&&b.preventDefault();const g=this.state;g._active||(this.start(b),this.computeValues([b.scale,b.rotation]),g.origin=[b.clientX,b.clientY],this.compute(b),this.emit())}gestureMove(b){b.cancelable&&b.preventDefault();if(this.state._active){var g=this.state;this.computeValues([b.scale,b.rotation]);g.origin=[b.clientX,b.clientY];var n=g._movement;g._movement=[b.scale-1,b.rotation];g._delta=Jk.sub(g._movement,
n);this.compute(b);this.emit()}}gestureEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}wheel(b){const g=this.config.modifierKey;if(!g||b[g])this.state._active?this.wheelChange(b):this.wheelStart(b),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelStart(b){this.start(b);this.wheelChange(b)}wheelChange(b){"uv"in b||b.cancelable&&b.preventDefault();const g=this.state;g._delta=[-Rj(b)[1]/100*g.offset[0],0];Jk.addTo(g._movement,g._delta);li(g);this.state.origin=
[b.clientX,b.clientY];this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){const g=this.config.device;g&&(b(g,"start",this[g+"Start"].bind(this)),b(g,"change",this[g+"Move"].bind(this)),b(g,"end",this[g+"End"].bind(this)),b(g,"cancel",this[g+"End"].bind(this)));this.config.pinchOnWheel&&b("wheel","",this.wheel.bind(this),{passive:!1})}},hD=Ag(Ag({},uy),{},{device(b,g,{shared:n,pointer:{touch:I=!1}={}}){if(n.target&&!Ks&&pD)return"gesture";
if(Ks&&I)return"touch";if(ry){if(xy)return"pointer";if(Ks)return"touch"}},bounds(b,g,{scaleBounds:n={},angleBounds:I={}}){const W=sa=>{sa=Kh(n,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]},ia=sa=>{sa=Kh(I,sa);sa=Object.assign({},{min:-Infinity,max:Infinity},sa||{});return[sa.min,sa.max]};return"function"!==typeof n&&"function"!==typeof I?[W(),ia()]:sa=>[W(sa),ia(sa)]},threshold(b,g,n){this.lockDirection="lock"===n.axis;return Jk.toVector(b,this.lockDirection?
[.1,3]:0)},modifierKey(b){return void 0===b?"ctrlKey":b},pinchOnWheel(b=!0){return b}}),iD=class extends Js{constructor(...b){super(...b);Wg(this,"ingKey","moving")}move(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.state._active?this.moveChange(b):this.moveStart(b),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(b){this.start(b);this.computeValues(di(b));this.compute(b);this.computeInitial();this.emit()}moveChange(b){if(this.state._active){var g=di(b),n=this.state;
n._delta=Jk.sub(g,n._values);Jk.addTo(n._movement,n._delta);this.computeValues(g);this.compute(b);this.emit()}}moveEnd(b){this.state._active&&(this.state._active=!1,this.compute(b),this.emit())}bind(b){b("pointer","change",this.move.bind(this));b("pointer","leave",this.moveEnd.bind(this))}},dD=Ag(Ag({},Iq),{},{mouseOnly:(b=!0)=>b}),eD=class extends Js{constructor(...b){super(...b);Wg(this,"ingKey","scrolling")}scroll(b){this.state._active||this.start(b);this.scrollChange(b);this.timeoutStore.add("scrollEnd",
this.scrollEnd.bind(this))}scrollChange(b){b.cancelable&&b.preventDefault();const g=this.state;var n,I;const {scrollX:W,scrollY:ia,scrollLeft:sa,scrollTop:La}=b.currentTarget;var Xa=[null!==(n=null!==W&&void 0!==W?W:sa)&&void 0!==n?n:0,null!==(I=null!==ia&&void 0!==ia?ia:La)&&void 0!==I?I:0];g._delta=Jk.sub(Xa,g._values);Jk.addTo(g._movement,g._delta);this.computeValues(Xa);this.compute(b);this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("scroll",
"",this.scroll.bind(this))}},bD=Iq,cD=class extends Js{constructor(...b){super(...b);Wg(this,"ingKey","wheeling")}wheel(b){this.state._active||this.start(b);this.wheelChange(b);this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(b){const g=this.state;g._delta=Rj(b);Jk.addTo(g._movement,g._delta);li(g);this.compute(b);this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(b){b("wheel","",this.wheel.bind(this))}},ZC=Iq,$C=class extends Js{constructor(...b){super(...b);
Wg(this,"ingKey","hovering")}enter(b){this.config.mouseOnly&&"mouse"!==b.pointerType||(this.start(b),this.computeValues(di(b)),this.compute(b),this.emit())}leave(b){if(!this.config.mouseOnly||"mouse"===b.pointerType){var g=this.state;if(g._active){g._active=!1;var n=di(b);g._movement=g._delta=Jk.sub(n,g._values);this.computeValues(n);this.compute(b);g.delta=g.movement;this.emit()}}}bind(b){b("pointer","enter",this.enter.bind(this));b("pointer","leave",this.leave.bind(this))}},aD=Ag(Ag({},Iq),{},{mouseOnly:(b=
!0)=>b}),Av=new Map,zv=new Map,WC={key:"drag",engine:oD,resolver:jD},XC={key:"hover",engine:$C,resolver:aD},YC={key:"move",engine:iD,resolver:dD},VC={key:"pinch",engine:gD,resolver:hD},kp={key:"scroll",engine:eD,resolver:bD},xo={key:"wheel",engine:cD,resolver:ZC},Cv=ac(V(22)),UC={target(b){if(b)return()=>"current"in b?b.current:b},enabled(b=!0){return b},window(b=Jq?window:void 0){return b},eventOptions({passive:b=!0,capture:g=!1}={}){return{passive:b,capture:g}},transform(b){return b}},TC=["target",
"eventOptions","window","enabled","transform"],My=class{constructor(b,g){Wg(this,"_listeners",new Set);this._ctrl=b;this._gestureKey=g}add(b,g,n,I,W){const ia=this._listeners,sa=Ci(g,n),La=Ag(Ag({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),W);b.addEventListener(sa,I,La);const Xa=()=>{b.removeEventListener(sa,I,La);ia.delete(Xa)};ia.add(Xa);return Xa}clean(){this._listeners.forEach(b=>b());this._listeners.clear()}},HD=class{constructor(){Wg(this,"_timeouts",new Map)}add(b,
g,n=140,...I){this.remove(b);this._timeouts.set(b,window.setTimeout(g,n,...I))}remove(b){(b=this._timeouts.get(b))&&window.clearTimeout(b)}clean(){this._timeouts.forEach(b=>void window.clearTimeout(b));this._timeouts.clear()}},py=class{constructor(b){Wg(this,"gestures",new Set);Wg(this,"_targetEventStore",new My(this));Wg(this,"gestureEventStores",{});Wg(this,"gestureTimeoutStores",{});Wg(this,"handlers",{});Wg(this,"config",{});Wg(this,"pointerIds",new Set);Wg(this,"touchIds",new Set);Wg(this,"state",
{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}});b.drag&&zg(this,"drag");b.wheel&&zg(this,"wheel");b.scroll&&zg(this,"scroll");b.move&&zg(this,"move");b.pinch&&zg(this,"pinch");b.hover&&zg(this,"hover")}setEventIds(b){if("touches"in b)return this.touchIds=new Set(Fl(b));if("pointerId"in b)return"pointerup"===b.type||"pointercancel"===b.type?this.pointerIds.delete(b.pointerId):"pointerdown"===b.type&&this.pointerIds.add(b.pointerId),this.pointerIds}applyHandlers(b,g){this.handlers=b;this.nativeHandlers=
g}applyConfig(b,g){this.config=fj(b,g,this.config)}clean(){this._targetEventStore.clean();for(const b of this.gestures)this.gestureEventStores[b].clean(),this.gestureTimeoutStores[b].clean()}effect(){this.config.shared.target&&this.bind();return()=>this._targetEventStore.clean()}bind(...b){var g=this.config.shared;const n={};let I;if(g.target&&(I=g.target(),!I))return;if(g.enabled){for(const W of this.gestures){const ia=this.config[W],sa=Bv(n,ia.eventOptions,!!I);ia.enabled&&(new (Av.get(W))(this,
b,W)).bind(sa)}g=Bv(n,g.eventOptions,!!I);for(const W in this.nativeHandlers)g(W,"",ia=>this.nativeHandlers[W](Ag(Ag({},this.state.shared),{},{event:ia,args:b})),void 0,!0)}for(const W in n)n[W]=Lh(...n[W]);if(!I)return n;for(const W in n){const {device:ia,capture:sa,passive:La}=Ih(W);this._targetEventStore.add(I,ia,"",n[W],{capture:sa,passive:La})}}},Bv=(b,g,n)=>(I,W,ia,sa={},La=!1)=>{var Xa,$a;const kb=null!==(Xa=sa.capture)&&void 0!==Xa?Xa:g.capture;sa=null!==($a=sa.passive)&&void 0!==$a?$a:g.passive;
I=La?I:zk(I,W,kb);n&&sa&&(I+="Passive");b[I]=b[I]||[];b[I].push(ia)},fD=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/,zr=ac(V(22)),Ar=ac(V(22)),Ay=ac(V(22)),Ny=ac(V(22)),zD=ac(V(22)),ID=ac(V(22)),JD=ac(V(22)),KD=ac(V(22)),LD={none:(b,g)=>"none",["default"]:(b,g)=>"default",pointer:(b,g)=>"pointer",crosshair:(b,g)=>"crosshair",move:(b,g)=>"move",wait:(b,g)=>"wait",progress:(b,g)=>"progress",grab:(b,g)=>qj('\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" fill\x3d"%23fff"/\x3e\x3cg stroke\x3d"%23000" stroke-linecap\x3d"round" stroke-width\x3d".75"\x3e\x3cpath d\x3d"m13.5557 17.5742c-.098-.375-.196-.847-.406-1.552-.167-.557-.342-.859-.47-1.233-.155-.455-.303-.721-.496-1.181-.139-.329-.364-1.048-.457-1.44-.119-.509.033-.924.244-1.206.253-.339.962-.49 1.357-.351.371.13.744.512.916.788.288.46.357.632.717 1.542.393.992.564 1.918.611 2.231l.085.452c-.001-.04-.043-1.122-.044-1.162-.035-1.029-.06-1.823-.038-2.939.002-.126.064-.587.084-.715.078-.5.305-.8.673-.979.412-.201.926-.215 1.401-.017.423.173.626.55.687 1.022.014.109.094.987.093 1.107-.013 1.025.006 1.641.015 2.174.004.231.003 1.625.017 1.469.061-.656.094-3.189.344-3.942.144-.433.405-.746.794-.929.431-.203 1.113-.07 1.404.243.285.305.446.692.482 1.153.032.405-.019.897-.02 1.245 0 .867-.021 1.324-.037 2.121-.001.038-.015.298.023.182.094-.28.188-.542.266-.745.049-.125.241-.614.359-.859.114-.234.211-.369.415-.688.2-.313.415-.448.668-.561.54-.235 1.109.112 1.301.591.086.215.009.713-.028 1.105-.061.647-.254 1.306-.352 1.648-.128.447-.274 1.235-.34 1.601-.072.394-.234 1.382-.359 1.82-.086.301-.371.978-.652 1.384 0 0-1.074 1.25-1.192 1.812-.117.563-.078.567-.101.965-.024.399.121.923.121.923s-.802.104-1.234.034c-.391-.062-.875-.841-1-1.078-.172-.328-.539-.265-.682-.023-.225.383-.709 1.07-1.051 1.113-.668.084-2.054.03-3.139.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.284-.36-.629-1.093-1.243-1.985-.348-.504-1.027-1.085-1.284-1.579-.223-.425-.331-.954-.19-1.325.225-.594.675-.897 1.362-.832.519.05.848.206 1.238.537.225.19.573.534.75.748.163.195.203.276.377.509.23.307.302.459.214.121" stroke-linejoin\x3d"round"/\x3e\x3cpath d\x3d"m20.5664 21.7344v-3.459"/\x3e\x3cpath d\x3d"m18.5508 21.7461-.016-3.473"/\x3e\x3cpath d\x3d"m16.5547 18.3047.021 3.426"/\x3e\x3c/g\x3e',
b,g),grabbing:(b,g)=>qj("\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042' fill\x3d'%23fff'/\x3e\x3cg stroke\x3d'%23000' stroke-width\x3d'.75'\x3e\x3cpath d\x3d'm13.5732 12.0361c.48-.178 1.427-.069 1.677.473.213.462.396 1.241.406 1.075.024-.369-.024-1.167.137-1.584.117-.304.347-.59.686-.691.285-.086.62-.116.916-.055.313.064.642.287.765.499.362.623.368 1.899.385 1.831.064-.272.07-1.229.283-1.584.141-.235.497-.445.687-.479.294-.052.656-.068.964-.008.249.049.586.344.677.487.219.344.342 1.316.379 1.658.016.141.074-.393.293-.736.406-.639 1.844-.763 1.898.639.026.654.02.624.02 1.064 0 .516-.012.828-.04 1.202-.03.399-.116 1.304-.241 1.742-.086.301-.371.978-.653 1.384 0 0-1.074 1.25-1.191 1.812-.117.563-.078.567-.102.965-.023.399.121.923.121.923s-.801.104-1.234.034c-.391-.062-.875-.84-1-1.078-.172-.328-.539-.265-.682-.023-.224.383-.709 1.07-1.05 1.113-.669.084-2.055.03-3.14.02 0 0 .185-1.011-.227-1.358-.305-.26-.83-.784-1.144-1.06l-.832-.921c-.283-.36-1.002-.929-1.243-1.985-.213-.936-.192-1.395.037-1.77.232-.381.67-.589.854-.625.208-.042.692-.039.875.062.223.123.313.159.488.391.23.307.312.456.213.121-.076-.262-.322-.595-.434-.97-.109-.361-.401-.943-.38-1.526.008-.221.103-.771.832-1.042z' stroke-linejoin\x3d'round'/\x3e\x3cpath d\x3d'm20.5664 19.7344v-3.459' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm18.5508 19.7461-.016-3.473' stroke-linecap\x3d'round'/\x3e\x3cpath d\x3d'm16.5547 16.3047.021 3.426' stroke-linecap\x3d'round'/\x3e\x3c/g\x3e",
b,g),text:(b,g)=>qj("\x3cpath d\x3d'm6.94 2v-1c-1.35866267-.08246172-2.66601117.53165299-3.47 1.63-.80398883-1.09834701-2.11133733-1.71246172-3.47-1.63v1c1.30781678-.16635468 2.55544738.59885876 3 1.84v5.1h-1v1h1v4.16c-.4476345 1.2386337-1.69302129 2.002471-3 1.84v1c1.35687108.0731933 2.6600216-.5389494 3.47-1.63.8099784 1.0910506 2.11312892 1.7031933 3.47 1.63v-1c-1.28590589.133063-2.49760499-.6252793-2.94-1.84v-4.18h1v-1h-1v-5.08c.43943906-1.21710975 1.65323743-1.97676587 2.94-1.84z' transform\x3d'translate(14 9)'/\x3e",
b,g),["resize-edge"]:(b,g)=>qj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["resize-corner"]:(b,g)=>qj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b,g),["ew-resize"]:(b,g)=>qj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",b,g),["ns-resize"]:(b,g)=>qj("\x3cpath d\x3d'm9 17.9907v.005l5.997 5.996.001-3.999h1.999 2.02v4l5.98-6.001-5.98-5.999.001 4.019-2.021.002h-2l.001-4.022zm1.411.003 3.587-3.588-.001 2.587h3.5 2.521v-2.585l3.565 3.586-3.564 3.585-.001-2.585h-2.521l-3.499-.001-.001 2.586z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm17.4971 18.9932h2.521v2.586l3.565-3.586-3.565-3.585v2.605h-2.521-3.5v-2.607l-3.586 3.587 3.586 3.586v-2.587z' fill\x3d'%23000'/\x3e",
b+90,g),["nesw-resize"]:(b,g)=>qj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",b,g),["nwse-resize"]:(b,g)=>qj("\x3cpath d\x3d'm19.7432 17.0869-4.072 4.068 2.829 2.828-8.473-.013-.013-8.47 2.841 2.842 4.075-4.068 1.414-1.415-2.844-2.842h8.486v8.484l-2.83-2.827z' fill\x3d'%23fff'/\x3e\x3cpath d\x3d'm18.6826 16.7334-4.427 4.424 1.828 1.828-5.056-.016-.014-5.054 1.842 1.841 4.428-4.422 2.474-2.475-1.844-1.843h5.073v5.071l-1.83-1.828z' fill\x3d'%23000'/\x3e",
b+90,g),rotate:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+45,g),["nwse-rotate"]:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b,g),["nesw-rotate"]:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+90,g),["senw-rotate"]:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+180,g),["swne-rotate"]:(b,g)=>qj('\x3cg\x3e\x3cpath d\x3d"M22.4789 9.45728L25.9935 12.9942L22.4789 16.5283V14.1032C18.126 14.1502 14.6071 17.6737 14.5675 22.0283H17.05L13.513 25.543L9.97889 22.0283H12.5674C12.6071 16.5691 17.0214 12.1503 22.4789 12.1031L22.4789 9.45728Z" fill\x3d"black"/\x3e\x3cpath fill-rule\x3d"evenodd" clip-rule\x3d"evenodd" d\x3d"M21.4789 7.03223L27.4035 12.9945L21.4789 18.9521V15.1868C18.4798 15.6549 16.1113 18.0273 15.649 21.0284H19.475L13.5128 26.953L7.55519 21.0284H11.6189C12.1243 15.8155 16.2679 11.6677 21.4789 11.1559L21.4789 7.03223ZM22.4789 12.1031C17.0214 12.1503 12.6071 16.5691 12.5674 22.0284H9.97889L13.513 25.543L17.05 22.0284H14.5675C14.5705 21.6896 14.5947 21.3558 14.6386 21.0284C15.1157 17.4741 17.9266 14.6592 21.4789 14.1761C21.8063 14.1316 22.1401 14.1069 22.4789 14.1032V16.5284L25.9935 12.9942L22.4789 9.45729L22.4789 12.1031Z" fill\x3d"white"/\x3e\x3c/g\x3e',
b+270,g)},MD=ac(V(22));ac(V(22));var Oy=V(22),Py=ac(V(22));if(!V(22).useState)throw Error("mobx-react-lite requires React with Hooks support");if(!og)throw Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var ND=V(31),Ms=ac(V(22)),Qy="undefined"===typeof FinalizationRegistry?void 0:FinalizationRegistry,OD=1E4,PD=function(b){var g="function"===typeof Symbol&&Symbol.iterator,n=g&&b[g],I=0;if(n)return n.call(b);if(b&&"number"===typeof b.length)return{next:function(){b&&I>=
b.length&&(b=void 0);return{value:b&&b[I++],done:!b}}};throw new TypeError(g?"Object is not iterable.":"Symbol.iterator is not defined.");},Fy=Qy?qg(Qy):bm(),yD=Fy.addReactionToTrack,xD=Fy.recordReactionAsCommitted,Dy=function(b,g){var n="function"===typeof Symbol&&b[Symbol.iterator];if(!n)return b;b=n.call(b);var I,W=[];try{for(;(void 0===g||0<g--)&&!(I=b.next()).done;)W.push(I.value)}catch(sa){var ia={error:sa}}finally{try{I&&!I.done&&(n=b["return"])&&n.call(b)}finally{if(ia)throw ia.error;}}return W},
wD=function(){return function(){}}(),Br=V(22),Ey="function"===typeof Symbol&&Symbol.for,By=Ey?Symbol.for("react.forward_ref"):"function"===typeof Br.forwardRef&&(0,Br.forwardRef)(function(b){return null}).$$typeof,Cy=Ey?Symbol.for("react.memo"):"function"===typeof Br.memo&&(0,Br.memo)(function(b){return null}).$$typeof,tD={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};Mi.displayName="Observer";V(22);V(22);V(22);(function(b){b||=Sj;Me({reactionScheduler:b})})(ND.unstable_batchedUpdates);
var uD=ac(V(22));ob=V(587);var bo=uD.forwardRef(function(b,g){var {children:n,opacity:I,centered:W,className:ia=""}=b,sa=Ha(b,["children","opacity","centered","className"]);return(0,ob.jsx)(Mi,{children:()=>(0,ob.jsx)("div",{ref:g,className:`tl-positioned-div ${ia}`,style:I?{opacity:I}:void 0,draggable:!1,children:(0,ob.jsx)("div",Wa(Fa({className:`tl-positioned-inner ${W?"tl-centered":""}`},sa),{children:n}))})})}),vD=ac(V(22));ob=V(587);var co=vD.forwardRef(function(b,g){var {id:n,className:I="",
style:W,children:ia}=b,sa=Ha(b,["id","className","style","children"]);return(0,ob.jsx)(Mi,{children:()=>(0,ob.jsx)("svg",{ref:g,style:W,className:`tl-positioned-svg ${I}`,children:(0,ob.jsx)("g",Wa(Fa({id:n,className:"tl-centered-g"},sa),{children:ia}))})})}),Ls=ac(V(22)),Ry=ac(V(22)),Ot=ac(V(22));ob=V(587);var Lp=lf(function(b){var {id:g,bounds:n,zIndex:I,rotation:W=0,className:ia="",children:sa}=b;b=Ha(b,"id bounds zIndex rotation className children".split(" "));const La=Ot.useRef(null);Ot.useLayoutEffect(()=>
{La.current.style.transform=`translate(
        calc(${n.minX}px - var(--tl-padding)),
        calc(${n.minY}px - var(--tl-padding)))
        rotate(${W+(n.rotation||0)}rad)`},[n.minX,n.minY,W,n.rotation]);Ot.useLayoutEffect(()=>{const Xa=La.current;Xa.style.width=`calc(${Math.floor(n.width)}px + (var(--tl-padding) * 2))`;Xa.style.height=`calc(${Math.floor(n.height)}px + (var(--tl-padding) * 2))`},[n.width,n.height]);Ot.useLayoutEffect(()=>{const Xa=La.current;void 0!==I&&(Xa.style.zIndex=I.toString())},[I]);return(0,ob.jsx)("div",Wa(Fa({id:g,ref:La,className:`tl-positioned ${ia}`,"aria-label":"container"},b),{children:sa}))}),
rD=ac(V(22));ob=V(587);var QD=lf(function({shapes:b,hidden:g,bounds:n,rotation:I=0}){const {components:{ContextBar:W},viewport:{bounds:ia,camera:{point:[sa,La],zoom:Xa}}}=Ji(),$a=rD.useRef(null);var kb=Ge.getRotatedBounds(n,I);kb=Ge.multiplyBounds(kb,Xa);pk($a,n,I,10005);if(!W)throw Error("Expected a ContextBar component.");const tb=Ge.translateBounds(kb,[sa*Xa,La*Xa]);return(0,ob.jsx)("div",{ref:$a,className:"tl-counter-scaled-positioned","aria-label":"context-bar-container",children:(0,ob.jsx)(W,
{hidden:g,shapes:b,bounds:n,offsets:{left:tb.minX,right:ia.width-tb.maxX,top:tb.minY,bottom:ia.height-tb.maxY,width:tb.width,height:tb.height},scaledBounds:kb,rotation:I})})}),Sy=ac(V(22));ob=V(587);var Ty=lf(function({children:b}){const g=Sy.useRef(null),{viewport:n}=Ji(),I=g.current,{zoom:W,point:ia}=n.camera;Sy.useEffect(()=>{I&&(I.style.transform=`scale(${W}) translate3d(${ia[0]}px, ${ia[1]}px, 0)`)},[W,ia,I]);return(0,ob.jsx)("div",{ref:g,className:"tl-absolute tl-layer",children:b})});ob=V(587);
var Uy=lf(function({shape:b,isHovered:g=!1,isSelected:n=!1,isBinding:I=!1,isEditing:W=!1,meta:ia}){const {bounds:sa,props:{scale:La,rotation:Xa=0},ReactIndicator:$a}=b;return(0,ob.jsx)(Lp,{"data-type":"Indicator",bounds:sa,rotation:Xa,scale:La,zIndex:W?1E3:1E4,children:(0,ob.jsx)(co,{children:(0,ob.jsx)("g",{className:`tl-indicator-container ${n?"tl-selected":"tl-hovered"}`,children:(0,ob.jsx)($a,{isEditing:W,isBinding:I,isHovered:g,isSelected:n,isErasing:!1,meta:ia})})})})}),Vy=ac(V(22));ob=V(587);
var sD=lf(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:n}},components:{QuickLinks:I}}=Ji();var W=rg();const ia=ek(g);if(!I)throw Error("Expected a QuickLinks component.");W=50>b.height*n||!W.selectedShapesArray.includes(g);return(0,ob.jsx)(Lp,{bounds:b,className:"tl-quick-links-container",children:(0,ob.jsx)(bo,{children:(0,ob.jsx)("span",Wa(Fa({style:{position:"absolute",top:"100%",pointerEvents:"all",transformOrigin:"left top",paddingTop:"8px",transform:"scale(var(--tl-scale))",minWidth:"320px"}},
ia),{onPointerDown:sa=>sa.stopPropagation(),children:(0,ob.jsx)(I,{className:"tl-backlinks-count "+(W?"tl-backlinks-count-rounded":""),id:g.id,shape:g})}))})})});ob=V(587);var RD=lf(function({bounds:b,shape:g}){const {viewport:{camera:{zoom:n}},components:{BacklinksCount:I}}=Ji();var W=rg();if(!I)throw Error("Expected a BacklinksCount component.");const ia=sa=>sa.stopPropagation();W=50>b.height*n||!W.selectedShapesArray.includes(g)||g.hideSelection;return(0,ob.jsx)(Lp,{bounds:b,className:"tl-backlinks-count-container",
children:(0,ob.jsx)(bo,{children:(0,ob.jsx)("span",{style:{position:"absolute",left:"100%",pointerEvents:"all",transformOrigin:"left top",transform:"translateY(6px) scale(var(--tl-scale))"},onPointerDown:ia,onWheelCapture:ia,title:"Shape Backlinks",children:(0,ob.jsx)(I,{className:"tl-backlinks-count "+(W?"tl-backlinks-count-rounded":""),id:g.id,shape:g})})})})}),SD=ac(V(22));ob=V(587);var TD=lf(function({bounds:b,hidden:g,shapes:n,rotation:I=0,detail:W="size"}){const {components:{SelectionDetail:ia},
viewport:{camera:{zoom:sa}}}=Ji(),La=SD.useRef(null),Xa=Ge.multiplyBounds(b,sa);pk(La,b,I,10003);if(!ia)throw Error("Expected a SelectionDetail component.");return(0,ob.jsx)("div",{ref:La,className:`tl-counter-scaled-positioned ${g?"tl-fade-out":""}`,"aria-label":"bounds-detail-container",children:(0,ob.jsx)(ia,{shapes:n,bounds:b,scaledBounds:Xa,zoom:sa,rotation:I,detail:W})})});ob=V(587);var UD=lf(function({shape:b,isHovered:g=!1,isSelected:n=!1,isBinding:I=!1,isErasing:W=!1,isEditing:ia=!1,onEditingEnd:sa,
asset:La,meta:Xa,zIndex:$a}){const {bounds:kb,props:{rotation:tb,scale:Ob},ReactComponent:ec}=b,Ub=ek(b);return(0,ob.jsx)(Lp,{"data-shape-id":b.id,zIndex:$a,"data-type":"Shape",bounds:kb,rotation:tb,scale:Ob,children:(0,ob.jsx)(ec,{meta:Xa,isEditing:ia,isBinding:I,isHovered:g,isSelected:n,isErasing:W,events:Ub,asset:La,onEditingEnd:sa})})});ob=V(587);var Wy=[[-1,.15,64],[.05,.375,16],[.15,1,4],[.7,2.5,1]],VD=lf(function({size:b}){const {viewport:{camera:{point:g,zoom:n}}}=Ji();return(0,ob.jsxs)("svg",
{className:"tl-grid",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:[(0,ob.jsx)("defs",{children:Wy.map(([I,W,ia],sa)=>{ia=ia*b*n;var La=g[0]*n,Xa=g[1]*n;La=0<La?La%ia:ia+La%ia;Xa=0<Xa?Xa%ia:ia+Xa%ia;I=Dl(n,[I,W],[0,1]);return(0,ob.jsx)("pattern",{id:`grid-${sa}`,width:ia,height:ia,patternUnits:"userSpaceOnUse",children:!(2<I||.1>I)&&(0,ob.jsx)("circle",{className:"tl-grid-dot",cx:La,cy:Xa,r:1.5,opacity:Math.max(0,Math.min(I,1))})},`grid-pattern-${sa}`)})}),Wy.map((I,W)=>(0,ob.jsx)("rect",
{width:"100%",height:"100%",fill:`url(#grid-${W})`},`grid-rect-${W}`))]})}),Xy=lf(function({size:b}){return(0,ob.jsx)(VD,{size:b})});ob=V(587);var Yy=lf(function({bounds:b}){const g=mk("background");return(0,ob.jsx)(co,Wa(Fa({},g),{children:(0,ob.jsx)("rect",{className:"tl-bounds-bg",width:Math.max(1,b.width),height:Math.max(1,b.height),pointerEvents:"all",rx:8,ry:8})}))});V(22);ob=V(587);var Zy=lf(function({scaledBounds:b,shapes:g,detail:n="size",rotation:I=0}){var W;const ia=1===g.length?I:null!=
(W=b.rotation)?W:0;return(0,ob.jsx)(bo,{centered:!0,children:(0,ob.jsx)("div",{className:"tl-bounds-detail",style:{transform:ia<Rg||ia>3*Rg?`rotate(${ia}rad) translateY(${b.height/2+24}px)`:`rotate(${Math.PI+ia}rad) translateY(${b.height/2+32}px)`,padding:"2px 3px",borderRadius:"1px"},children:1===g.length&&"line"===g[0].type?`${Zd.dist(g[0].props.handles.start.point,g[0].props.handles.end.point).toFixed()}`:"size"===n?`${b.width.toFixed()} \xD7 ${b.height.toFixed()}`:`\u2220${Ek.radiansToDegrees(Ek.clampRadians(I)).toFixed()}\xB0`})})});
ob=V(587);var WD={top_left_corner:"tl-cursor-nwse",top_right_corner:"tl-cursor-nesw",bottom_right_corner:"tl-cursor-nwse",bottom_left_corner:"tl-cursor-nesw"},Lt=lf(function({cx:b,cy:g,size:n,targetSize:I,corner:W,isHidden:ia}){const sa=mk(W);return(0,ob.jsxs)("g",Wa(Fa({opacity:ia?0:1},sa),{children:[(0,ob.jsx)("rect",{className:"tl-transparent "+(ia?"":WD[W]),"aria-label":`${W} target`,x:b-1.25*I,y:g-1.25*I,width:2.5*I,height:2.5*I,pointerEvents:ia?"none":"all"}),(0,ob.jsx)("rect",{className:"tl-corner-handle",
"aria-label":`${W} handle`,x:b-n/2,y:g-n/2,width:n,height:n,pointerEvents:"none"})]}))});ob=V(587);var AD={top_edge:"tl-cursor-ns",right_edge:"tl-cursor-ew",bottom_edge:"tl-cursor-ns",left_edge:"tl-cursor-ew"},Mt=lf(function({x:b,y:g,width:n,height:I,targetSize:W,edge:ia,disabled:sa,isHidden:La}){const Xa=mk(ia);return(0,ob.jsx)("rect",Fa({pointerEvents:La||sa?"none":"all",className:"tl-transparent tl-edge-handle "+(La?"":AD[ia]),"aria-label":`${ia} target`,opacity:La?0:1,x:b-W,y:g-W,width:Math.max(1,
n+2*W),height:Math.max(1,I+2*W)},Xa))});V(22);ob=V(587);lf(function({cx:b,cy:g,size:n,targetSize:I,isHidden:W}){const ia=mk("rotate");return(0,ob.jsxs)("g",Wa(Fa({opacity:W?0:1},ia),{children:[(0,ob.jsx)("circle",{className:"tl-transparent ","aria-label":"rotate target",cx:b,cy:g,r:I,pointerEvents:W?"none":"all"}),(0,ob.jsx)("circle",{className:"tl-rotate-handle","aria-label":"rotate handle",cx:b,cy:g,r:n/2,pointerEvents:"none"})]}))});V(22);ob=V(587);var Nt=lf(function({cx:b,cy:g,targetSize:n,corner:I,
isHidden:W}){const ia=mk(I);return(0,ob.jsx)("g",Wa(Fa({opacity:W?0:1},ia),{children:(0,ob.jsx)("rect",{className:"tl-transparent","aria-label":`${I} target`,x:b-2.5*n,y:g-2.5*n,width:3*n,height:3*n,pointerEvents:W?"none":"all"})}))});ob=V(587);var Ly=lf(function({bounds:b,showResizeHandles:g,showRotateHandles:n,shapes:I}){var W,ia;const sa=rg();let {width:La,height:Xa}=b;var $a=sa.viewport.camera.zoom;b=8/$a;$a=6/$a;I=1===I.length?I[0].canResize:[!0,!0];const kb=null!=(ia=null==(W=sa.editingShape)?
void 0:W.props.borderRadius)?ia:0;return(0,ob.jsxs)(co,{children:[!sa.editingShape&&(0,ob.jsx)("rect",{className:"tl-bounds-fg",width:Math.max(La,1),height:Math.max(Xa,1),rx:kb,ry:kb,pointerEvents:"none"}),(0,ob.jsx)(Mt,{x:2*$a,y:0,width:La-4*$a,height:0,targetSize:$a,edge:"top_edge",disabled:!I[1],isHidden:!g}),(0,ob.jsx)(Mt,{x:La,y:2*$a,width:0,height:Xa-4*$a,targetSize:$a,edge:"right_edge",disabled:!I[0],isHidden:!g}),(0,ob.jsx)(Mt,{x:2*$a,y:Xa,width:La-4*$a,height:0,targetSize:$a,edge:"bottom_edge",
disabled:!I[1],isHidden:!g}),(0,ob.jsx)(Mt,{x:0,y:2*$a,width:0,height:Xa-4*$a,targetSize:$a,edge:"left_edge",disabled:!I[0],isHidden:!g}),(0,ob.jsx)(Nt,{cx:0,cy:0,targetSize:$a,corner:"top_left_resize_corner",isHidden:!n}),(0,ob.jsx)(Nt,{cx:La+2*$a,cy:0,targetSize:$a,corner:"top_right_resize_corner",isHidden:!n}),(0,ob.jsx)(Nt,{cx:La+2*$a,cy:Xa+2*$a,targetSize:$a,corner:"bottom_right_resize_corner",isHidden:!n}),(0,ob.jsx)(Nt,{cx:0,cy:Xa+2*$a,targetSize:$a,corner:"bottom_left_resize_corner",isHidden:!n}),
(null==I?void 0:I.every(tb=>tb))&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)(Lt,{cx:0,cy:0,size:b,targetSize:$a,corner:"top_left_corner",isHidden:!g}),(0,ob.jsx)(Lt,{cx:La,cy:0,size:b,targetSize:$a,corner:"top_right_corner",isHidden:!g}),(0,ob.jsx)(Lt,{cx:La,cy:Xa,size:b,targetSize:$a,corner:"bottom_right_corner",isHidden:!g}),(0,ob.jsx)(Lt,{cx:0,cy:Xa,size:b,targetSize:$a,corner:"bottom_left_corner",isHidden:!g})]})]})});ob=V(587);var Gy=lf(function({bounds:b}){return(0,ob.jsx)(Lp,{bounds:b,zIndex:10001,
children:(0,ob.jsx)(co,{children:(0,ob.jsx)("rect",{className:"tl-brush",x:0,y:0,width:b.width,height:b.height})})})});ob=V(587);lf(function(){return(0,ob.jsx)(ob.Fragment,{})});ob=V(587);var Iy=lf(function({shape:b,handle:g,id:n}){b=pl(b,n);const [I,W]=g.point;return(0,ob.jsxs)("g",Wa(Fa({className:"tl-handle","aria-label":"handle"},b),{transform:`translate(${I}, ${W})`,children:[(0,ob.jsx)("circle",{className:"tl-handle-bg",pointerEvents:"all"}),(0,ob.jsx)("circle",{className:"tl-counter-scaled tl-handle",
pointerEvents:"none",r:4})]}))}),Hy=ac(V(22));ob=V(587);var Dv=lf(function({direction:b}){const {viewport:{bounds:g}}=Ji(),n=Hy.useRef(null);Hy.useLayoutEffect(()=>{const I=n.current;if(I){var W=[g.width/2,g.height/2],ia=Ge.getRectangleSides([12,12],[g.width-24,g.height-24]);for(const [,[sa,La]]of ia)ia=w(W,b,sa,La),ia.didIntersect&&(ia=ia.points[0],I.style.transform=`translate(${ia[0]-6}px,${ia[1]-6}px) rotate(${Zd.toAngle(b)}rad)`)}},[b,g]);return(0,ob.jsx)("div",{ref:n,className:"tl-direction-indicator",
children:(0,ob.jsx)("svg",{height:12,width:12,children:(0,ob.jsx)("polygon",{points:"0,0 12,6 0,12"})})})});ob=V(587);var ED=lf(function({id:b,className:g,brush:n,shapes:I,assets:W,bindingShapes:ia,editingShape:sa,hoveredShape:La,hoveredGroup:Xa,selectionBounds:$a,selectedShapes:kb,erasingShapes:tb,selectionDirectionHint:Ob,cursor:ec="default",cursorRotation:Ub=0,selectionRotation:pc=0,showSelection:mc=!0,showHandles:Vb=!0,showSelectionRotation:uc=!1,showResizeHandles:Ic=!0,showRotateHandles:Rc=!0,
showSelectionDetail:Vc=!0,showContextBar:Wd=!0,showGrid:be=!0,gridSize:Ee=8,onEditingEnd:Oe=QC,theme:rf=Ok,children:nf}){var cf;const Ie=Ls.useRef(null),{viewport:Bd,components:gd,meta:kd}=Ji(),md=rg(),Cd=Ls.useCallback(gf=>{md.inputs.updateContainerOffset([gf.minX,gf.minY])},[]);Yj(rf,b);Bk(Ie);Oj(Ie,Bd,Cd);yi(Ie);qk();Pl(Ie,ec,Ub);qm(Ie);Ck(Ie);b=hg();const we=(ec=1===(null==kb?void 0:kb.length)&&kb[0])&&"handles"in ec.props?null==kb?void 0:kb[0]:void 0,Fe=Ls.useMemo(()=>new Set(kb||[]),[kb]),of=
Ls.useMemo(()=>new Set(tb||[]),[tb]);ec=1===(null==kb?void 0:kb.length)?kb[0]:void 0;Xa=[...(new Set([Xa,La]))].filter(Ig);return(0,ob.jsxs)("div",{ref:Ie,className:`tl-container ${null!=g?g:""}`,children:[(0,ob.jsxs)("div",Wa(Fa({tabIndex:-1,className:"tl-absolute tl-canvas"},b),{children:[be&&gd.Grid&&(0,ob.jsx)(gd.Grid,{size:Ee}),(0,ob.jsxs)(Ty,{children:[gd.SelectionBackground&&kb&&$a&&mc&&(0,ob.jsx)(Lp,{"data-type":"SelectionBackground",bounds:$a,zIndex:2,children:(0,ob.jsx)(gd.SelectionBackground,
{shapes:kb,bounds:$a,showResizeHandles:Ic,showRotateHandles:Rc})}),I&&I.map((gf,ff)=>(0,ob.jsx)(UD,{shape:gf,asset:W&&gf.props.assetId?W[gf.props.assetId]:void 0,isEditing:gf===sa,isHovered:gf===La,isBinding:null==ia?void 0:ia.includes(gf),isSelected:Fe.has(gf),isErasing:of.has(gf),meta:kd,zIndex:1E3+ff,onEditingEnd:Oe},"shape_"+gf.id)),!md.isIn("select.pinching")&&(null==kb?void 0:kb.map(gf=>(0,ob.jsx)(Uy,{shape:gf,isEditing:gf===sa,isHovered:!1,isBinding:!1,isSelected:!0},"selected_indicator_"+
gf.id))),Xa.map(gf=>gf!==sa&&(0,ob.jsx)(Uy,{shape:gf},"hovered_indicator_"+gf.id)),ec&&gd.BacklinksCount&&(0,ob.jsx)(RD,{hidden:!1,bounds:ec.bounds,shape:ec}),La&&La!==ec&&gd.QuickLinks&&(0,ob.jsx)(sD,{hidden:!1,bounds:La.bounds,shape:La}),n&&gd.Brush&&(0,ob.jsx)(gd.Brush,{bounds:n}),kb&&$a&&(0,ob.jsxs)(ob.Fragment,{children:[mc&&gd.SelectionForeground&&(0,ob.jsx)(Lp,{"data-type":"SelectionForeground",bounds:$a,zIndex:sa&&kb.includes(sa)?1002:10002,children:(0,ob.jsx)(gd.SelectionForeground,{shapes:kb,
bounds:$a,showResizeHandles:Ic,showRotateHandles:Rc})}),Vb&&we&&gd.Handle&&(0,ob.jsx)(Lp,{"data-type":"onlySelectedShapeWithHandles",bounds:$a,zIndex:10003,children:(0,ob.jsx)(co,{children:Object.entries(null!=(cf=we.props.handles)?cf:{}).map(([gf,ff])=>Ls.createElement(gd.Handle,{key:`${ff.id}_handle_${ff.id}`,shape:we,handle:ff,id:gf}))})}),kb&&gd.SelectionDetail&&(0,ob.jsx)(TD,{shapes:kb,bounds:$a,detail:uc?"rotation":"size",hidden:!Vc,rotation:pc},"detail"+kb.map(gf=>gf.id).join(""))]})]}),Ob&&
$a&&kb&&(0,ob.jsx)(Dv,{direction:Ob,bounds:$a,shapes:kb}),(0,ob.jsx)("div",{id:"tl-dev-tools-canvas-anchor"})]})),(0,ob.jsx)(Ty,{children:kb&&$a&&(0,ob.jsx)(ob.Fragment,{children:kb&&gd.ContextBar&&(0,ob.jsx)(QD,{shapes:kb,hidden:!Wd,bounds:ec?ec.bounds:$a,rotation:ec?ec.props.rotation:0},"context"+kb.map(gf=>gf.id).join(""))})}),nf]})}),Ky=ac(V(22)),Jy=ac(V(22));ob=V(587);lf(function({children:b}){const g=Jy.useRef(null),{viewport:n}=Ji();Jy.useEffect(()=>Od(()=>{const I=g.current;if(I){var {zoom:W,
point:ia}=n.camera;I.style.transform=`scale(${W}) translateX(${ia[0]}px) translateY(${ia[1]}px)`}}),[]);return(0,ob.jsx)("svg",{className:"tl-absolute tl-overlay",pointerEvents:"none",children:(0,ob.jsx)("g",{ref:g,pointerEvents:"none",children:b})})});ob=V(587);var DD=lf(function(b){const g=pj(b),n=Pj(b.id);fn(g,b);hj(g,b);return(0,ob.jsx)(n.Provider,{value:g,children:b.children})});ob=V(587);var CD=lf(function({id:b="noid",viewport:g,inputs:n,callbacks:I=Ok,meta:W=Ok,components:ia=Ok,children:sa}){const [La,
Xa]=Ky.useState(()=>{const {Brush:kb,ContextBar:tb,DirectionIndicator:Ob,Grid:ec,Handle:Ub,SelectionBackground:pc,SelectionDetail:mc,SelectionForeground:Vb}=ia,uc=Ha(ia,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return{id:b,viewport:g,inputs:n,callbacks:I,meta:W,components:Wa(Fa({},uc),{Brush:null===kb?void 0:Gy,ContextBar:tb,DirectionIndicator:null===Ob?void 0:Dv,Grid:null===ec?void 0:Xy,Handle:null===Ub?void 0:Iy,SelectionBackground:null===
pc?void 0:Yy,SelectionDetail:null===mc?void 0:Zy,SelectionForeground:null===Vb?void 0:Ly})}});Ky.useLayoutEffect(()=>{const {Brush:kb,ContextBar:tb,DirectionIndicator:Ob,Grid:ec,Handle:Ub,SelectionBackground:pc,SelectionDetail:mc,SelectionForeground:Vb}=ia,uc=Ha(ia,"Brush ContextBar DirectionIndicator Grid Handle SelectionBackground SelectionDetail SelectionForeground".split(" "));return Od(()=>{Xa({id:b,viewport:g,inputs:n,callbacks:I,meta:W,components:Wa(Fa({},uc),{Brush:null===kb?void 0:Gy,ContextBar:tb,
DirectionIndicator:null===Ob?void 0:Dv,Grid:null===ec?void 0:Xy,Handle:null===Ub?void 0:Iy,SelectionBackground:null===pc?void 0:Yy,SelectionDetail:null===mc?void 0:Zy,SelectionForeground:null===Vb?void 0:Ly})})})},[]);const $a=Cj(b);return(0,ob.jsx)($a.Provider,{value:La,children:sa})});ob=V(587);ob=V(587);var BD=lf(function(b){const g=rg();return(0,ob.jsx)(cm,Fa({viewport:g.viewport,inputs:g.inputs,callbacks:g._events,brush:g.brush,editingShape:g.editingShape,hoveredShape:g.hoveredShape,hoveredGroup:g.hoveredGroup,
bindingShapes:g.bindingShapes,selectionDirectionHint:g.selectionDirectionHint,selectionBounds:g.selectionBounds,selectedShapes:g.selectedShapesArray,erasingShapes:g.erasingShapesArray,shapes:g.shapes,assets:g.assets,showGrid:g.settings.showGrid,showSelection:g.showSelection,showSelectionRotation:g.showSelectionRotation,showResizeHandles:g.showResizeHandles,showRotateHandles:g.showRotateHandles,showSelectionDetail:g.showSelectionDetail,showContextBar:g.showContextBar,cursor:g.cursors.cursor,cursorRotation:g.cursors.rotation,
selectionRotation:g.selectionRotation,onEditingEnd:g.clearEditingState},b))});ob=V(587);var Dr=ac(V(22)),Pt=ac(V(22));ob=V(587);var XD="add-link block-search block connector group internal-link link-to-block link-to-page link-to-whiteboard move-to-sidebar-right object-compact object-expanded open-as-page page-search page references-hide references-show select-cursor text ungroup whiteboard-element whiteboard".split(" "),Gh=b=>{var {name:g,className:n}=b;b=Ha(b,["name","className"]);const I=XD.includes(g)?
"tie tie-":"ti ti-";return(0,ob.jsx)("i",Fa({className:[I+g,n].join(" ")},b))},fh=V(22),YD=V(22),Kq=V(22),yn=V(22),Ev=V(22),ZD=V(31),Gm=V(22),Lq=(0,Gm.forwardRef)((b,g)=>{var {children:n}=b;b=Ha(b,["children"]);const I=Gm.Children.toArray(n),W=I.find(Mk);if(W){const ia=W.props.children;n=I.map(sa=>sa===W?1<Gm.Children.count(ia)?Gm.Children.only(null):(0,Gm.isValidElement)(ia)?ia.props.children:null:sa);return(0,Gm.createElement)(Fv,se({},b,{ref:g}),(0,Gm.isValidElement)(ia)?(0,Gm.cloneElement)(ia,
void 0,n):null)}return(0,Gm.createElement)(Fv,se({},b,{ref:g}),n)});Lq.displayName="Slot";var Fv=(0,Gm.forwardRef)((b,g)=>{const {children:n}=b;b=Ha(b,["children"]);return(0,Gm.isValidElement)(n)?(0,Gm.cloneElement)(n,Wa(Fa({},kg(b,n.props)),{ref:Zi(g,n.ref)})):1<Gm.Children.count(n)?Gm.Children.only(null):null});Fv.displayName="SlotClone";var $y=({children:b})=>(0,Gm.createElement)(Gm.Fragment,null,b),tj="a button div h2 h3 img label li nav ol p span svg ul".split(" ").reduce((b,g)=>{const n=(0,Ev.forwardRef)((I,
W)=>{var {asChild:ia}=I;I=Ha(I,["asChild"]);ia=ia?Lq:g;(0,Ev.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]);return(0,Ev.createElement)(ia,se({},I,{ref:W}))});n.displayName=`Primitive.${g}`;return Wa(Fa({},b),{[g]:n})},{}),Gv=V(22),$D=V(22),az,aE=(0,yn.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Qt=(0,yn.forwardRef)((b,g)=>{var n;const {disableOutsidePointerEvents:I=!1,onEscapeKeyDown:W,onPointerDownOutside:ia,onFocusOutside:sa,onInteractOutside:La,
onDismiss:Xa}=b,$a=Ha(b,"disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss".split(" ")),kb=(0,yn.useContext)(aE),[tb,Ob]=(0,yn.useState)(null),ec=null!==(n=null===tb||void 0===tb?void 0:tb.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,Ub]=(0,yn.useState)({});g=ah(g,Ic=>Ob(Ic));n=Array.from(kb.layers);var [pc]=[...kb.layersWithOutsidePointerEventsDisabled].slice(-1);pc=n.indexOf(pc);const mc=
tb?n.indexOf(tb):-1;n=0<kb.layersWithOutsidePointerEventsDisabled.size;const Vb=mc>=pc;pc=sk(Ic=>{const Rc=Ic.target,Vc=[...kb.branches].some(Wd=>Wd.contains(Rc));Vb&&!Vc&&(null===ia||void 0===ia||ia(Ic),null===La||void 0===La||La(Ic),Ic.defaultPrevented||null===Xa||void 0===Xa||Xa())},ec);const uc=Dj(Ic=>{const Rc=Ic.target;[...kb.branches].some(Vc=>Vc.contains(Rc))||(null===sa||void 0===sa||sa(Ic),null===La||void 0===La||La(Ic),Ic.defaultPrevented||null===Xa||void 0===Xa||Xa())},ec);Gf(Ic=>{mc===
kb.layers.size-1&&(null===W||void 0===W||W(Ic),!Ic.defaultPrevented&&Xa&&(Ic.preventDefault(),Xa()))},ec);(0,yn.useEffect)(()=>{if(tb)return I&&(0===kb.layersWithOutsidePointerEventsDisabled.size&&(az=ec.body.style.pointerEvents,ec.body.style.pointerEvents="none"),kb.layersWithOutsidePointerEventsDisabled.add(tb)),kb.layers.add(tb),nl(),()=>{I&&1===kb.layersWithOutsidePointerEventsDisabled.size&&(ec.body.style.pointerEvents=az)}},[tb,ec,I,kb]);(0,yn.useEffect)(()=>()=>{tb&&(kb.layers.delete(tb),kb.layersWithOutsidePointerEventsDisabled.delete(tb),
nl())},[tb,kb]);(0,yn.useEffect)(()=>{const Ic=()=>Ub({});document.addEventListener("dismissableLayer.update",Ic);return()=>document.removeEventListener("dismissableLayer.update",Ic)},[]);return(0,yn.createElement)(tj.div,se({},$a,{ref:g,style:Fa({pointerEvents:n?Vb?"auto":"none":void 0},b.style),onFocusCapture:Xf(b.onFocusCapture,uc.onFocusCapture),onBlurCapture:Xf(b.onBlurCapture,uc.onBlurCapture),onPointerDownCapture:Xf(b.onPointerDownCapture,pc.onPointerDownCapture)}))}),bz=ac(V(22)),bE=V(22),
zn=(null===globalThis||void 0===globalThis?0:globalThis.document)?bE.useLayoutEffect:()=>{},cE=bz["useId".toString()]||(()=>{}),dE=0,Wl=V(22),eE=(b,g,n)=>Rd(void 0,null,function*(){const {placement:I="bottom",strategy:W="absolute",middleware:ia=[],platform:sa}=n,La=yield null==sa.isRTL?void 0:sa.isRTL(g);let Xa=yield sa.getElementRects({reference:b,floating:g,strategy:W}),{x:$a,y:kb}=tk(Xa,I,La),tb=I,Ob={},ec=0;for(let Ub=0;Ub<ia.length;Ub++){const {name:pc,fn:mc}=ia[Ub],{x:Vb,y:uc,data:Ic,reset:Rc}=
yield mc({x:$a,y:kb,initialPlacement:I,placement:tb,strategy:W,middlewareData:Ob,rects:Xa,platform:sa,elements:{reference:b,floating:g}});$a=null!=Vb?Vb:$a;kb=null!=uc?uc:kb;Ob=Wa(Fa({},Ob),{[pc]:Fa(Fa({},Ob[pc]),Ic)});Rc&&50>=ec&&(ec++,"object"==typeof Rc&&(Rc.placement&&(tb=Rc.placement),Rc.rects&&(Xa=!0===Rc.rects?yield sa.getElementRects({reference:b,floating:g,strategy:W}):Rc.rects),{x:$a,y:kb}=tk(Xa,tb,La)),Ub=-1)}return{x:$a,y:kb,placement:tb,strategy:W,middlewareData:Ob}}),Hv=Math.min,Iv=
Math.max,cz=b=>({name:"arrow",options:b,fn(g){return Rd(this,null,function*(){const {element:n,padding:I=0}=null!=b?b:{},{x:W,y:ia,placement:sa,rects:La,platform:Xa}=g;if(null==n)return{};const $a=dl(I),kb={x:W,y:ia},tb=Ui(sa),Ob=sa.split("-")[1],ec=cl(tb);var Ub=yield Xa.getDimensions(n);const pc="y"===tb?"top":"left",mc="y"===tb?"bottom":"right";var Vb=La.reference[ec]+La.reference[tb]-kb[tb]-La.floating[ec];const uc=kb[tb]-La.reference[tb];var Ic=yield null==Xa.getOffsetParent?void 0:Xa.getOffsetParent(n);
let Rc=Ic?"y"===tb?Ic.clientHeight||0:Ic.clientWidth||0:0;0===Rc&&(Rc=La.floating[ec]);Ic=$a[pc];const Vc=Rc-Ub[ec]-$a[mc];Ub=Rc/2-Ub[ec]/2+(Vb/2-uc/2);Vb=Iv(Ic,Hv(Ub,Vc));return{[tb]:kb[tb]-(0<("start"===Ob?$a[pc]:$a[mc])&&Ub!==Vb&&La.reference[ec]<=La.floating[ec]?Ub<Ic?Ic-Ub:Vc-Ub:0),data:{[tb]:Vb,centerOffset:Ub-Vb}}})}}),fE={left:"right",right:"left",bottom:"top",top:"bottom"},gE={start:"end",end:"start"},dz=["top","right","bottom","left"];dz.reduce((b,g)=>b.concat(g,g+"-start",g+"-end"),[]);
var hE=function(b){return void 0===b&&(b={}),{name:"flip",options:b,fn(g){return Rd(this,null,function*(){var n;const {placement:I,middlewareData:W,rects:ia,initialPlacement:sa,platform:La,elements:Xa}=g;var $a=b;const {mainAxis:kb=!0,crossAxis:tb=!0,fallbackPlacements:Ob,fallbackStrategy:ec="bestFit",flipAlignment:Ub=!0}=$a;$a=Ha($a,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","flipAlignment"]);const pc=ui(I);var mc=Ob||(pc!==sa&&Ub?function(Wd){const be=ol(Wd);return[Nk(Wd),be,
Nk(be)]}(sa):[ol(sa)]);mc=[sa,...mc];const Vb=yield Cm(g,$a),uc=[];$a=(null==(n=W.flip)?void 0:n.overflows)||[];if(kb&&uc.push(Vb[pc]),tb){const {main:Wd,cross:be}=Pm(I,ia,yield null==La.isRTL?void 0:La.isRTL(Xa.floating));uc.push(Vb[Wd],Vb[be])}if($a=[...$a,{placement:I,overflows:uc}],!uc.every(Wd=>0>=Wd)){var Ic,Rc;n=(null!=(Ic=null==(Rc=W.flip)?void 0:Rc.index)?Ic:0)+1;if(Ic=mc[n])return{data:{index:n,overflows:$a},reset:{placement:Ic}};Ic="bottom";switch(ec){case "bestFit":var Vc;(Rc=null==(Vc=
$a.map(Wd=>[Wd,Wd.overflows.filter(be=>0<be).reduce((be,Ee)=>be+Ee,0)]).sort((Wd,be)=>Wd[1]-be[1])[0])?void 0:Vc[0].placement)&&(Ic=Rc);break;case "initialPlacement":Ic=sa}if(I!==Ic)return{reset:{placement:Ic}}}return{}})}}},iE=function(b){b=void 0===b?{}:b;let {strategy:g="referenceHidden"}=b,n=Ha(b,["strategy"]);return{name:"hide",fn(I){return Rd(this,null,function*(){var {rects:W}=I;switch(g){case "referenceHidden":return W=Fj(yield Cm(I,Wa(Fa({},n),{elementContext:"reference"})),W.reference),
{data:{referenceHiddenOffsets:W,referenceHidden:Dk(W)}};case "escaped":return W=Fj(yield Cm(I,Wa(Fa({},n),{altBoundary:!0})),W.floating),{data:{escapedOffsets:W,escaped:Dk(W)}};default:return{}}})}}},jE=function(b){return void 0===b&&(b=0),{name:"offset",options:b,fn(g){return Rd(this,null,function*(){const {x:n,y:I}=g,W=yield function(ia,sa){return Rd(this,null,function*(){const {placement:La,platform:Xa,elements:$a}=ia;var kb=yield null==Xa.isRTL?void 0:Xa.isRTL($a.floating),tb=ui(La);const Ob=
La.split("-")[1],ec="x"===Ui(La);tb=["left","top"].includes(tb)?-1:1;kb=kb&&ec?-1:1;const Ub="function"==typeof sa?sa(ia):sa;let {mainAxis:pc,crossAxis:mc,alignmentAxis:Vb}="number"==typeof Ub?{mainAxis:Ub,crossAxis:0,alignmentAxis:null}:Fa({mainAxis:0,crossAxis:0,alignmentAxis:null},Ub);return Ob&&"number"==typeof Vb&&(mc="end"===Ob?-1*Vb:Vb),ec?{x:mc*kb,y:pc*tb}:{x:pc*tb,y:mc*kb}})}(g,b);return{x:n+W.x,y:I+W.y,data:W}})}}},kE=function(b){return void 0===b&&(b={}),{name:"shift",options:b,fn(g){return Rd(this,
null,function*(){const {x:n,y:I,placement:W}=g;var ia=b;const {mainAxis:sa=!0,crossAxis:La=!1,limiter:Xa={fn:ec=>{let {x:Ub,y:pc}=ec;return{x:Ub,y:pc}}}}=ia;var $a=Ha(ia,["mainAxis","crossAxis","limiter"]);ia={x:n,y:I};$a=yield Cm(g,$a);const kb=Ui(ui(W)),tb="x"===kb?"y":"x";let Ob=ia[kb];ia=ia[tb];sa&&(Ob=Iv(Ob+$a["y"===kb?"top":"left"],Hv(Ob,Ob-$a["y"===kb?"bottom":"right"])));La&&(ia=Iv(ia+$a["y"===tb?"top":"left"],Hv(ia,ia-$a["y"===tb?"bottom":"right"])));ia=Xa.fn(Wa(Fa({},g),{[kb]:Ob,[tb]:ia}));
return Wa(Fa({},ia),{data:{x:ia.x-n,y:ia.y-I}})})}}},lE=function(b){return void 0===b&&(b={}),{options:b,fn(g){const {x:n,y:I,placement:W,rects:ia,middlewareData:sa}=g,{offset:La=0,mainAxis:Xa=!0,crossAxis:$a=!0}=b;var kb={x:n,y:I};g=Ui(W);const tb="x"===g?"y":"x";let Ob=kb[g];kb=kb[tb];var ec="function"==typeof La?La(Wa(Fa({},ia),{placement:W})):La;ec="number"==typeof ec?{mainAxis:ec,crossAxis:0}:Fa({mainAxis:0,crossAxis:0},ec);if(Xa){var Ub="y"===g?"height":"width",pc=ia.reference[g]-ia.floating[Ub]+
ec.mainAxis;Ub=ia.reference[g]+ia.reference[Ub]-ec.mainAxis;Ob<pc?Ob=pc:Ob>Ub&&(Ob=Ub)}if($a){var mc,Vb,uc,Ic;const Rc="y"===g?"width":"height";pc=["top","left"].includes(ui(W));Ub=ia.reference[tb]-ia.floating[Rc]+(pc&&null!=(mc=null==(Vb=sa.offset)?void 0:Vb[tb])?mc:0)+(pc?0:ec.crossAxis);mc=ia.reference[tb]+ia.reference[Rc]+(pc?0:null!=(uc=null==(Ic=sa.offset)?void 0:Ic[tb])?uc:0)-(pc?ec.crossAxis:0);kb<Ub?kb=Ub:kb>mc&&(kb=mc)}return{[g]:Ob,[tb]:kb}}}},ez=Math.min,Ns=Math.max,Rt=Math.round,mE={getClippingRect:function(b){let {element:g,
boundary:n,rootBoundary:I,strategy:W}=b;b=[...("clippingAncestors"===n?Cg(g):[].concat(n)),I];b=b.reduce((ia,sa)=>{sa=ih(g,sa,W);return ia.top=Ns(sa.top,ia.top),ia.right=ez(sa.right,ia.right),ia.bottom=ez(sa.bottom,ia.bottom),ia.left=Ns(sa.left,ia.left),ia},ih(g,b[0],W));return{width:b.right-b.left,height:b.bottom-b.top,x:b.left,y:b.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(b){let {rect:g,offsetParent:n,strategy:I}=b;var W=Hj(n);const ia=rj(n);if(n===ia)return g;b={scrollLeft:0,
scrollTop:0};var sa=0,La=0;(W||!W&&"fixed"!==I)&&(("body"!==Gj(n)||yj(ia))&&(b=fm(n)),Hj(n))&&(W=sj(n,!0),sa=W.x+n.clientLeft,La=W.y+n.clientTop);return Wa(Fa({},g),{x:g.x-b.scrollLeft+sa,y:g.y-b.scrollTop+La})},isElement:Tj,getDimensions:vk,getOffsetParent:gj,getDocumentElement:rj,getElementRects:b=>{let {reference:g,floating:n,strategy:I}=b;b=gj(n);var W=Hj(b);const ia=rj(b);var sa;if(sa=W)sa=sj(b),sa=Rt(sa.width)!==b.offsetWidth||Rt(sa.height)!==b.offsetHeight;sa=sj(g,sa,"fixed"===I);let La={scrollLeft:0,
scrollTop:0};var Xa=0,$a=0;if(W||!W&&"fixed"!==I)(("body"!==Gj(b)||yj(ia))&&(La=fm(b)),Hj(b))?(W=sj(b,!0),Xa=W.x+b.clientLeft,$a=W.y+b.clientTop):ia&&(Xa=rk(ia));return{reference:{x:sa.left+La.scrollLeft-Xa,y:sa.top+La.scrollTop-$a,width:sa.width,height:sa.height},floating:Wa(Fa({},vk(n)),{x:0,y:0})}},getClientRects:b=>Array.from(b.getClientRects()),isRTL:b=>"rtl"===Pk(b).direction},nE=(b,g,n)=>eE(b,g,Fa({platform:mE},n)),Nn=ac(V(22),1),fz=V(22),oE=ac(V(31),1),Jv="undefined"!==typeof document?fz.useLayoutEffect:
fz.useEffect,pE=b=>{const {element:g,padding:n}=b;return{name:"arrow",options:b,fn(I){if(Object.prototype.hasOwnProperty.call(g,"current")){if(null!=g.current)return cz({element:g.current,padding:n}).fn(I)}else if(g)return cz({element:g,padding:n}).fn(I);return{}}}},Kv=V(22),qE=(0,Kv.forwardRef)((b,g)=>{const {children:n,width:I=10,height:W=5}=b,ia=Ha(b,["children","width","height"]);return(0,Kv.createElement)(tj.svg,se({},ia,{ref:g,width:I,height:W,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),
b.asChild?n:(0,Kv.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),rE=V(22),[Lv,Er]=ng("Popper"),[sE,gz]=Lv("Popper"),Mv=(0,Wl.forwardRef)((b,g)=>{const {__scopePopper:n,virtualRef:I}=b;b=Ha(b,["__scopePopper","virtualRef"]);const W=gz("PopperAnchor",n),ia=(0,Wl.useRef)(null);g=ah(g,ia);(0,Wl.useEffect)(()=>{W.onAnchorChange((null===I||void 0===I?void 0:I.current)||ia.current)});return I?null:(0,Wl.createElement)(tj.div,se({},b,{ref:g}))}),[tE,hz]=Lv("PopperContent"),[iz,jz]=Lv("PopperContent",
{hasParent:!1,positionUpdateFns:new Set}),Nv=(0,Wl.forwardRef)((b,g)=>{var n,I,W,ia,sa,La,Xa,$a;const {__scopePopper:kb,side:tb="bottom",sideOffset:Ob=0,align:ec="center",alignOffset:Ub=0,arrowPadding:pc=0,collisionBoundary:mc=[],collisionPadding:Vb=0,sticky:uc="partial",hideWhenDetached:Ic=!1,avoidCollisions:Rc=!0}=b;b=Ha(b,"__scopePopper side sideOffset align alignOffset arrowPadding collisionBoundary collisionPadding sticky hideWhenDetached avoidCollisions".split(" "));const Vc=gz("PopperContent",
kb),[Wd,be]=(0,Wl.useState)(null);g=ah(g,Vr=>be(Vr));const [Ee,Oe]=(0,Wl.useState)(null);var rf=Oi(Ee),nf=null!==(n=null===rf||void 0===rf?void 0:rf.width)&&void 0!==n?n:0;n=null!==(I=null===rf||void 0===rf?void 0:rf.height)&&void 0!==I?I:0;I=tb+("center"!==ec?"-"+ec:"");rf="number"===typeof Vb?Vb:Fa({top:0,right:0,bottom:0,left:0},Vb);const cf=Array.isArray(mc)?mc:[mc],Ie=0<cf.length;rf={padding:rf,boundary:cf.filter(Jg),altBoundary:Ie};const {reference:Bd,floating:gd,strategy:kd,x:md,y:Cd,placement:we,
middlewareData:Fe,update:of}=ug({strategy:"fixed",placement:I,whileElementsMounted:Wj,middleware:[jE({mainAxis:Ob+n,alignmentAxis:Ub}),Rc?kE(Fa({mainAxis:!0,crossAxis:!1,limiter:"partial"===uc?lE():void 0},rf)):void 0,Ee?pE({element:Ee,padding:pc}):void 0,Rc?hE(Fa({},rf)):void 0,vE({arrowWidth:nf,arrowHeight:n}),Ic?iE({strategy:"referenceHidden"}):void 0].filter(Qf)});zn(()=>{Bd(Vc.anchor)},[Bd,Vc.anchor]);const gf=null!==md&&null!==Cd,[ff,Ug]=jj(we);nf=null===(W=Fe.arrow)||void 0===W?void 0:W.x;
W=null===(ia=Fe.arrow)||void 0===ia?void 0:ia.y;ia=0!==(null===(sa=Fe.arrow)||void 0===sa?void 0:sa.centerOffset);const [Fg,pi]=(0,Wl.useState)();zn(()=>{Wd&&pi(window.getComputedStyle(Wd).zIndex)},[Wd]);const {hasParent:Kk,positionUpdateFns:Vk}=jz("PopperContent",kb),Bo=!Kk;(0,Wl.useLayoutEffect)(()=>{if(!Bo)return Vk.add(of),()=>{Vk.delete(of)}},[Bo,Vk,of]);(0,Wl.useLayoutEffect)(()=>{Bo&&gf&&Array.from(Vk).reverse().forEach(Vr=>requestAnimationFrame(Vr))},[Bo,gf,Vk]);sa=Wa(Fa({"data-side":ff,"data-align":Ug},
b),{ref:g,style:Wa(Fa({},b.style),{animation:gf?void 0:"none",opacity:null!==(La=Fe.hide)&&void 0!==La&&La.referenceHidden?0:void 0})});return(0,Wl.createElement)("div",{ref:gd,"data-radix-popper-content-wrapper":"",style:{position:kd,left:0,top:0,transform:gf?`translate3d(${Math.round(md)}px, ${Math.round(Cd)}px, 0)`:"translate3d(0, -200%, 0)",minWidth:"max-content",zIndex:Fg,["--radix-popper-transform-origin"]:[null===(Xa=Fe.transformOrigin)||void 0===Xa?void 0:Xa.x,null===($a=Fe.transformOrigin)||
void 0===$a?void 0:$a.y].join(" ")}},(0,Wl.createElement)(tE,{scope:kb,placedSide:ff,onArrowChange:Oe,arrowX:nf,arrowY:W,shouldHideArrow:ia},Bo?(0,Wl.createElement)(iz,{scope:kb,hasParent:!0,positionUpdateFns:Vk},(0,Wl.createElement)(tj.div,sa)):(0,Wl.createElement)(tj.div,sa)))}),uE={top:"bottom",right:"left",bottom:"top",left:"right"},kz=(0,Wl.forwardRef)(function(b,g){var {__scopePopper:n}=b;b=Ha(b,["__scopePopper"]);n=hz("PopperArrow",n);return(0,Wl.createElement)("span",{ref:n.onArrowChange,
style:{position:"absolute",left:n.arrowX,top:n.arrowY,[uE[n.placedSide]]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[n.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[n.placedSide],visibility:n.shouldHideArrow?"hidden":void 0}},(0,Wl.createElement)(qE,se({},b,{ref:g,style:Wa(Fa({},b.style),{display:"block"})})))}),vE=b=>({name:"transformOrigin",
options:b,fn(g){var n,I,W,ia,sa;const {placement:La,rects:Xa,middlewareData:$a}=g,kb=(g=0!==(null===(n=$a.arrow)||void 0===n?void 0:n.centerOffset))?0:b.arrowWidth;n=g?0:b.arrowHeight;const [tb,Ob]=jj(La),ec={start:"0%",center:"50%",end:"100%"}[Ob],Ub=(null!==(I=null===(W=$a.arrow)||void 0===W?void 0:W.x)&&void 0!==I?I:0)+kb/2;I=(null!==(ia=null===(sa=$a.arrow)||void 0===sa?void 0:sa.y)&&void 0!==ia?ia:0)+n/2;sa=ia="";"bottom"===tb?(ia=g?ec:`${Ub}px`,sa=`${-n}px`):"top"===tb?(ia=g?ec:`${Ub}px`,sa=
`${Xa.floating.height+n}px`):"right"===tb?(ia=`${-n}px`,sa=g?ec:`${I}px`):"left"===tb&&(ia=`${Xa.floating.width+n}px`,sa=g?ec:`${I}px`);return{data:{x:ia,y:sa}}}}),Ov=b=>{const {__scopePopper:g,children:n}=b,[I,W]=(0,Wl.useState)(null);return(0,Wl.createElement)(sE,{scope:g,anchor:I,onAnchorChange:W},n)},lz=V(22),wE=ac(V(31)),mz=(0,lz.forwardRef)((b,g)=>{var n;const {container:I=null===globalThis||void 0===globalThis?void 0:null===(n=globalThis.document)||void 0===n?void 0:n.body}=b;b=Ha(b,["container"]);
return I?wE.default.createPortal((0,lz.createElement)(tj.div,se({},b,{ref:g})),I):null}),lp=V(22),xE=V(31),Os=b=>{const {present:g,children:n}=b;b=nh(g);const I="function"===typeof n?n({present:b.isPresent}):lp.Children.only(n),W=ah(b.ref,I.ref);return"function"===typeof n||b.isPresent?(0,lp.cloneElement)(I,{ref:W}):null};Os.displayName="Presence";var St=V(22),nz=V(22),oz=(0,nz.forwardRef)((b,g)=>(0,nz.createElement)(tj.span,se({},b,{ref:g,style:Fa({position:"absolute",border:0,width:1,height:1,padding:0,
margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},b.style)}))),[Tt]=ng("Tooltip",[Er]),Ut=Er(),[yE,Pv]=Tt("TooltipProvider"),[zE,Ps]=Tt("Tooltip"),AE=(0,fh.forwardRef)((b,g)=>{var {__scopeTooltip:n}=b;const I=Ha(b,["__scopeTooltip"]),W=Ps("TooltipTrigger",n),ia=Pv("TooltipTrigger",n);n=Ut(n);const sa=(0,fh.useRef)(null);g=ah(g,sa,W.onTriggerChange);const La=(0,fh.useRef)(!1),Xa=(0,fh.useRef)(!1),$a=(0,fh.useCallback)(()=>La.current=!1,[]);(0,fh.useEffect)(()=>
()=>document.removeEventListener("pointerup",$a),[$a]);return(0,fh.createElement)(Mv,se({asChild:!0},n),(0,fh.createElement)(tj.button,se({"aria-describedby":W.open?W.contentId:void 0,"data-state":W.stateAttribute},I,{ref:g,onPointerMove:Xf(b.onPointerMove,kb=>{"touch"===kb.pointerType||Xa.current||ia.isPointerInTransitRef.current||(W.onTriggerEnter(),Xa.current=!0)}),onPointerLeave:Xf(b.onPointerLeave,()=>{W.onTriggerLeave();Xa.current=!1}),onPointerDown:Xf(b.onPointerDown,()=>{La.current=!0;document.addEventListener("pointerup",
$a,{once:!0})}),onFocus:Xf(b.onFocus,()=>{if(!La.current)W.onOpen()}),onBlur:Xf(b.onBlur,W.onClose),onClick:Xf(b.onClick,W.onClose)})))}),[BE,CE]=Tt("TooltipPortal",{forceMount:void 0}),DE=(0,fh.forwardRef)((b,g)=>{var n=CE("TooltipContent",b.__scopeTooltip);const {forceMount:I=n.forceMount,side:W="top"}=b;n=Ha(b,["forceMount","side"]);b=Ps("TooltipContent",b.__scopeTooltip);return(0,fh.createElement)(Os,{present:I||b.open},b.disableHoverableContent?(0,fh.createElement)(pz,se({side:W},n,{ref:g})):
(0,fh.createElement)(EE,se({side:W},n,{ref:g})))}),EE=(0,fh.forwardRef)((b,g)=>{const n=Ps("TooltipContent",b.__scopeTooltip),I=Pv("TooltipContent",b.__scopeTooltip),W=(0,fh.useRef)(null);g=ah(g,W);const [ia,sa]=(0,fh.useState)(null),{trigger:La,onClose:Xa}=n,$a=W.current,{onPointerInTransitChange:kb}=I,tb=(0,fh.useCallback)(()=>{sa(null);kb(!1)},[kb]),Ob=(0,fh.useCallback)((ec,Ub)=>{const pc=zi({x:ec.clientX,y:ec.clientY},ec.currentTarget.getBoundingClientRect()),mc="right"===pc||"bottom"===pc?-5:
5;ec="right"===pc||"left"===pc?{x:ec.clientX+mc,y:ec.clientY}:{x:ec.clientX,y:ec.clientY+mc};Ub=Ub.getBoundingClientRect();const {top:Vb,right:uc,bottom:Ic,left:Rc}=Ub;Ub=Qi([ec,{x:Rc,y:Vb},{x:uc,y:Vb},{x:uc,y:Ic},{x:Rc,y:Ic}]);sa(Ub);kb(!0)},[kb]);(0,fh.useEffect)(()=>()=>tb(),[tb]);(0,fh.useEffect)(()=>{if(La&&$a){const ec=pc=>Ob(pc,$a),Ub=pc=>Ob(pc,La);La.addEventListener("pointerleave",ec);$a.addEventListener("pointerleave",Ub);return()=>{La.removeEventListener("pointerleave",ec);$a.removeEventListener("pointerleave",
Ub)}}},[La,$a,Ob,tb]);(0,fh.useEffect)(()=>{if(ia){const ec=Ub=>{var pc=Ub.target;Ub={x:Ub.clientX,y:Ub.clientY};pc=(null===La||void 0===La?void 0:La.contains(pc))||(null===$a||void 0===$a?void 0:$a.contains(pc));const {x:mc,y:Vb}=Ub;Ub=!1;for(let uc=0,Ic=ia.length-1;uc<ia.length;Ic=uc++){const Rc=ia[uc].x,Vc=ia[uc].y,Wd=ia[Ic].x,be=ia[Ic].y;Vc>Vb!==be>Vb&&mc<(Wd-Rc)*(Vb-Vc)/(be-Vc)+Rc&&(Ub=!Ub)}Ub=!Ub;pc?tb():Ub&&(tb(),Xa())};document.addEventListener("pointermove",ec);return()=>document.removeEventListener("pointermove",
ec)}},[La,$a,ia,Xa,tb]);return(0,fh.createElement)(pz,se({},b,{ref:g}))}),[FE,GE]=Tt("Tooltip",{isInside:!1}),pz=(0,fh.forwardRef)((b,g)=>{const {__scopeTooltip:n,children:I,"aria-label":W,onEscapeKeyDown:ia,onPointerDownOutside:sa}=b;b=Ha(b,["__scopeTooltip","children","aria-label","onEscapeKeyDown","onPointerDownOutside"]);const La=Ps("TooltipContent",n),Xa=Ut(n),{onClose:$a}=La;(0,fh.useEffect)(()=>{document.addEventListener("tooltip.open",$a);return()=>document.removeEventListener("tooltip.open",
$a)},[$a]);(0,fh.useEffect)(()=>{if(La.trigger){const kb=tb=>{tb=tb.target;null!==tb&&void 0!==tb&&tb.contains(La.trigger)&&$a()};window.addEventListener("scroll",kb,{capture:!0});return()=>window.removeEventListener("scroll",kb,{capture:!0})}},[La.trigger,$a]);return(0,fh.createElement)(Qt,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:ia,onPointerDownOutside:sa,onFocusOutside:kb=>kb.preventDefault(),onDismiss:$a},(0,fh.createElement)(Nv,se({"data-state":La.stateAttribute},Xa,b,{ref:g,
style:Wa(Fa({},b.style),{["--radix-tooltip-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}),(0,fh.createElement)($y,null,I),(0,fh.createElement)(FE,{scope:n,isInside:!0},(0,fh.createElement)(oz,{id:La.contentId,role:"tooltip"},W||I))))}),HE=(0,fh.forwardRef)((b,g)=>{const {__scopeTooltip:n}=b;b=Ha(b,["__scopeTooltip"]);const I=Ut(n);return GE("TooltipArrow",n).isInside?null:(0,fh.createElement)(kz,se({},I,b,{ref:g}))}),IE=b=>{const {__scopeTooltip:g,delayDuration:n=700,skipDelayDuration:I=
300,disableHoverableContent:W=!1,children:ia}=b,[sa,La]=(0,fh.useState)(!0),Xa=(0,fh.useRef)(!1),$a=(0,fh.useRef)(0);(0,fh.useEffect)(()=>{const kb=$a.current;return()=>window.clearTimeout(kb)},[]);return(0,fh.createElement)(yE,{scope:g,isOpenDelayed:sa,delayDuration:n,onOpen:(0,fh.useCallback)(()=>{window.clearTimeout($a.current);La(!1)},[]),onClose:(0,fh.useCallback)(()=>{window.clearTimeout($a.current);$a.current=window.setTimeout(()=>La(!0),I)},[I]),isPointerInTransitRef:Xa,onPointerInTransitChange:(0,fh.useCallback)(kb=>
{Xa.current=kb},[]),disableHoverableContent:W},ia)},JE=b=>{const {__scopeTooltip:g,children:n,open:I,defaultOpen:W=!1,onOpenChange:ia,disableHoverableContent:sa,delayDuration:La}=b,Xa=Pv("Tooltip",b.__scopeTooltip);b=Ut(g);const [$a,kb]=(0,fh.useState)(null),tb=ql(),Ob=(0,fh.useRef)(0),ec=null!==sa&&void 0!==sa?sa:Xa.disableHoverableContent,Ub=null!==La&&void 0!==La?La:Xa.delayDuration,pc=(0,fh.useRef)(!1),[mc=!1,Vb]=Qg({prop:I,defaultProp:W,onChange:Wd=>{if(Wd)Xa.onOpen(),document.dispatchEvent(new CustomEvent("tooltip.open"));
else Xa.onClose();null===ia||void 0===ia||ia(Wd)}}),uc=(0,fh.useMemo)(()=>mc?pc.current?"delayed-open":"instant-open":"closed",[mc]),Ic=(0,fh.useCallback)(()=>{window.clearTimeout(Ob.current);pc.current=!1;Vb(!0)},[Vb]),Rc=(0,fh.useCallback)(()=>{window.clearTimeout(Ob.current);Vb(!1)},[Vb]),Vc=(0,fh.useCallback)(()=>{window.clearTimeout(Ob.current);Ob.current=window.setTimeout(()=>{pc.current=!0;Vb(!0)},Ub)},[Ub,Vb]);(0,fh.useEffect)(()=>()=>window.clearTimeout(Ob.current),[]);return(0,fh.createElement)(Ov,
b,(0,fh.createElement)(zE,{scope:g,contentId:tb,open:mc,stateAttribute:uc,trigger:$a,onTriggerChange:kb,onTriggerEnter:(0,fh.useCallback)(()=>{Xa.isOpenDelayed?Vc():Ic()},[Xa.isOpenDelayed,Vc,Ic]),onTriggerLeave:(0,fh.useCallback)(()=>{ec?Rc():window.clearTimeout(Ob.current)},[Rc,ec]),onOpen:Ic,onClose:Rc,disableHoverableContent:ec},n))},KE=AE,LE=b=>{const {__scopeTooltip:g,forceMount:n,children:I,container:W}=b;b=Ps("TooltipPortal",g);return(0,fh.createElement)(BE,{scope:g,forceMount:n},(0,fh.createElement)(Os,
{present:n||b.open},(0,fh.createElement)(mz,{asChild:!0,container:W},I)))},ME=DE,NE=HE;ob=V(587);ob=V(587);var qz=ac(V(22));ob=V(587);var rz=({active:b,style:g,icon:n,otherIcon:I,onClick:W})=>{const [ia,sa]=qz.default.useState(!1);qz.default.useEffect(()=>{sa(!0);const La=setTimeout(()=>{sa(!1)},500);return()=>clearTimeout(La)},[b]);return(0,ob.jsx)("button",{"data-active":b,"data-recently-changed":ia,style:g,className:"tl-circle-button",onPointerDown:W,children:(0,ob.jsxs)("div",{className:"tl-circle-button-icons-wrapper",
"data-icons-count":I?2:1,children:[I&&(0,ob.jsx)(Gh,{name:I}),(0,ob.jsx)(Gh,{name:n})]})})},fo=V(22),Tg=V(22),Uo=ac(V(22)),sz=V(22),OE=(0,sz.createContext)(void 0),PE=V(22),Qv=0,Np=V(22),tz={bubbles:!1,cancelable:!0},Rv=(0,Np.forwardRef)((b,g)=>{const {loop:n=!1,trapped:I=!1,onMountAutoFocus:W,onUnmountAutoFocus:ia}=b;b=Ha(b,["loop","trapped","onMountAutoFocus","onUnmountAutoFocus"]);const [sa,La]=(0,Np.useState)(null),Xa=ij(W),$a=ij(ia),kb=(0,Np.useRef)(null);g=ah(g,ec=>La(ec));const tb=(0,Np.useRef)({paused:!1,
pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,Np.useEffect)(()=>{if(I){let ec=function(pc){!tb.paused&&sa&&(pc=pc.target,sa.contains(pc)?kb.current=pc:Zb(kb.current,{select:!0}))},Ub=function(pc){!tb.paused&&sa&&(sa.contains(pc.relatedTarget)||Zb(kb.current,{select:!0}))};document.addEventListener("focusin",ec);document.addEventListener("focusout",Ub);return()=>{document.removeEventListener("focusin",ec);document.removeEventListener("focusout",Ub)}}},[I,sa,tb.paused]);(0,Np.useEffect)(()=>
{if(sa){uz.add(tb);const ec=document.activeElement;if(!sa.contains(ec)){const Ub=new CustomEvent("focusScope.autoFocusOnMount",tz);sa.addEventListener("focusScope.autoFocusOnMount",Xa);sa.dispatchEvent(Ub);Ub.defaultPrevented||(yb(Pc(Pb(sa)),{select:!0}),document.activeElement===ec&&Zb(sa))}return()=>{sa.removeEventListener("focusScope.autoFocusOnMount",Xa);setTimeout(()=>{const Ub=new CustomEvent("focusScope.autoFocusOnUnmount",tz);sa.addEventListener("focusScope.autoFocusOnUnmount",$a);sa.dispatchEvent(Ub);
Ub.defaultPrevented||Zb(null!==ec&&void 0!==ec?ec:document.body,{select:!0});sa.removeEventListener("focusScope.autoFocusOnUnmount",$a);uz.remove(tb)},0)}}},[sa,Xa,$a,tb]);const Ob=(0,Np.useCallback)(ec=>{if((n||I)&&!tb.paused){var Ub=document.activeElement;if("Tab"===ec.key&&!ec.altKey&&!ec.ctrlKey&&!ec.metaKey&&Ub){const mc=ec.currentTarget;var pc=mc;const Vb=Pb(pc),uc=sb(Vb,pc);pc=sb(Vb.reverse(),pc);const [Ic,Rc]=[uc,pc];Ic&&Rc?ec.shiftKey||Ub!==Rc?ec.shiftKey&&Ub===Ic&&(ec.preventDefault(),n&&
Zb(Rc,{select:!0})):(ec.preventDefault(),n&&Zb(Ic,{select:!0})):Ub===mc&&ec.preventDefault()}}},[n,I,tb.paused]);return(0,Np.createElement)(tj.div,se({tabIndex:-1},b,{ref:g,onKeyDown:Ob}))}),uz=function(){let b=[];return{add(g){const n=b[0];g===n||null!==n&&void 0!==n&&n.pause();b=Cc(b,g);b.unshift(g)},remove(g){var n;b=Cc(b,g);null===(n=b[0])||void 0===n||n.resume()}}}(),Xl=V(22),QE={bubbles:!1,cancelable:!0},[Sv,vz,RE]=ja("RovingFocusGroup"),[SE,Vt]=ng("RovingFocusGroup",[RE]),[TE,UE]=SE("RovingFocusGroup"),
wz=(0,Xl.forwardRef)((b,g)=>(0,Xl.createElement)(Sv.Provider,{scope:b.__scopeRovingFocusGroup},(0,Xl.createElement)(Sv.Slot,{scope:b.__scopeRovingFocusGroup},(0,Xl.createElement)(VE,se({},b,{ref:g}))))),VE=(0,Xl.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:n,orientation:I,loop:W=!1,dir:ia,currentTabStopId:sa,defaultCurrentTabStopId:La,onCurrentTabStopIdChange:Xa,onEntryFocus:$a}=b,kb=Ha(b,"__scopeRovingFocusGroup orientation loop dir currentTabStopId defaultCurrentTabStopId onCurrentTabStopIdChange onEntryFocus".split(" ")),
tb=(0,Xl.useRef)(null);g=ah(g,tb);const Ob=Eb(ia),[ec=null,Ub]=Qg({prop:sa,defaultProp:La,onChange:Xa}),[pc,mc]=(0,Xl.useState)(!1),Vb=ij($a),uc=vz(n),Ic=(0,Xl.useRef)(!1),[Rc,Vc]=(0,Xl.useState)(0);(0,Xl.useEffect)(()=>{const Wd=tb.current;if(Wd)return Wd.addEventListener("rovingFocusGroup.onEntryFocus",Vb),()=>Wd.removeEventListener("rovingFocusGroup.onEntryFocus",Vb)},[Vb]);return(0,Xl.createElement)(TE,{scope:n,orientation:I,dir:Ob,loop:W,currentTabStopId:ec,onItemFocus:(0,Xl.useCallback)(Wd=>
Ub(Wd),[Ub]),onItemShiftTab:(0,Xl.useCallback)(()=>mc(!0),[]),onFocusableItemAdd:(0,Xl.useCallback)(()=>Vc(Wd=>Wd+1),[]),onFocusableItemRemove:(0,Xl.useCallback)(()=>Vc(Wd=>Wd-1),[])},(0,Xl.createElement)(tj.div,se({tabIndex:pc||0===Rc?-1:0,"data-orientation":I},kb,{ref:g,style:Fa({outline:"none"},b.style),onMouseDown:Xf(b.onMouseDown,()=>{Ic.current=!0}),onFocus:Xf(b.onFocus,Wd=>{var be=!Ic.current;if(Wd.target===Wd.currentTarget&&be&&!pc&&(be=new CustomEvent("rovingFocusGroup.onEntryFocus",QE),
Wd.currentTarget.dispatchEvent(be),!be.defaultPrevented)){Wd=uc().filter(Oe=>Oe.focusable);be=Wd.find(Oe=>Oe.active);const Ee=Wd.find(Oe=>Oe.id===ec);Wd=[be,Ee,...Wd].filter(Boolean).map(Oe=>Oe.ref.current);vd(Wd)}Ic.current=!1}),onBlur:Xf(b.onBlur,()=>mc(!1))})))}),xz=(0,Xl.forwardRef)((b,g)=>{const {__scopeRovingFocusGroup:n,focusable:I=!0,active:W=!1}=b,ia=Ha(b,["__scopeRovingFocusGroup","focusable","active"]),sa=ql(),La=UE("RovingFocusGroupItem",n),Xa=La.currentTabStopId===sa,$a=vz(n),{onFocusableItemAdd:kb,
onFocusableItemRemove:tb}=La;(0,Xl.useEffect)(()=>{if(I)return kb(),()=>tb()},[I,kb,tb]);return(0,Xl.createElement)(Sv.ItemSlot,{scope:n,id:sa,focusable:I,active:W},(0,Xl.createElement)(tj.span,se({tabIndex:Xa?0:-1,"data-orientation":La.orientation},ia,{ref:g,onMouseDown:Xf(b.onMouseDown,Ob=>{if(I)La.onItemFocus(sa);else Ob.preventDefault()}),onFocus:Xf(b.onFocus,()=>La.onItemFocus(sa)),onKeyDown:Xf(b.onKeyDown,Ob=>{if("Tab"===Ob.key&&Ob.shiftKey)La.onItemShiftTab();else if(Ob.target===Ob.currentTarget){var ec=
Tc(Ob,La.orientation,La.dir);if(void 0!==ec){Ob.preventDefault();let Ub=$a().filter(pc=>pc.focusable).map(pc=>pc.ref.current);if("last"===ec)Ub.reverse();else if("prev"===ec||"next"===ec)"prev"===ec&&Ub.reverse(),Ob=Ub.indexOf(Ob.currentTarget),Ub=La.loop?Td(Ub,Ob+1):Ub.slice(Ob+1);setTimeout(()=>vd(Ub))}}})})))}),WE={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},XE=function(b){return"undefined"===typeof document?null:(Array.isArray(b)?
b[0]:b).ownerDocument.body},Fr=new WeakMap,Wt=new WeakMap,Xt={},Tv=0,Uv=function(b,g,n){void 0===g&&(g=XE(b));void 0===n&&(n="data-aria-hidden");var I=Array.isArray(b)?b:[b];Xt[n]||(Xt[n]=new WeakMap);var W=Xt[n],ia=[],sa=new Set,La=function($a){$a&&!sa.has($a)&&(sa.add($a),La($a.parentNode))};I.forEach(La);var Xa=function($a){!$a||0<=I.indexOf($a)||Array.prototype.forEach.call($a.children,function(kb){if(sa.has(kb))Xa(kb);else{var tb=kb.getAttribute("aria-hidden");tb=null!==tb&&"false"!==tb;var Ob=
(Fr.get(kb)||0)+1,ec=(W.get(kb)||0)+1;Fr.set(kb,Ob);W.set(kb,ec);ia.push(kb);1===Ob&&tb&&Wt.set(kb,!0);1===ec&&kb.setAttribute(n,"true");tb||kb.setAttribute("aria-hidden","true")}})};Xa(g);sa.clear();Tv++;return function(){ia.forEach(function($a){var kb=Fr.get($a)-1,tb=W.get($a)-1;Fr.set($a,kb);W.set($a,tb);kb||(Wt.has($a)||$a.removeAttribute("aria-hidden"),Wt.delete($a));tb||$a.removeAttribute(n)});Tv--;Tv||(Fr=new WeakMap,Fr=new WeakMap,Wt=new WeakMap,Xt={})}},YE=ac(xb(),1),{__assign:Op,__rest:yz,
__spreadArray:ZE}=YE.default,zz=ac(V(22)),mp=ac(V(22)),$E=V(22),aF=ac(V(22)),Az=function(b){var g=b.sideCar;b=yz(b,["sideCar"]);if(!g)throw Error("Sidecar: please provide `sideCar` property to import the right car");g=g.read();if(!g)throw Error("Sidecar medium not found");return aF.createElement(g,Op({},b))};Az.isSideCarExport=!0;var Bz=function(b){void 0===b&&(b={});var g=ye(null);g.options=Op({async:!0,ssr:!1},b);return g}(),Vv=function(){},Yt=mp.forwardRef(function(b,g){var n=mp.useRef(null),I=
mp.useState({onScrollCapture:Vv,onWheelCapture:Vv,onTouchMoveCapture:Vv}),W=I[0];I=I[1];var ia=b.forwardProps,sa=b.children,La=b.className,Xa=b.removeScrollBar,$a=b.enabled,kb=b.shards,tb=b.sideCar,Ob=b.noIsolation,ec=b.inert,Ub=b.allowPinchZoom,pc=b.as;pc=void 0===pc?"div":pc;b=yz(b,"forwardProps children className removeScrollBar enabled shards sideCar noIsolation inert allowPinchZoom as".split(" "));g=Dd([n,g]);W=Op(Op({},b),W);return mp.createElement(mp.Fragment,null,$a&&mp.createElement(tb,{sideCar:Bz,
removeScrollBar:Xa,shards:kb,noIsolation:Ob,inert:ec,setCallbacks:I,allowPinchZoom:!!Ub,lockRef:n}),ia?mp.cloneElement(mp.Children.only(sa),Op(Op({},W),{ref:g})):mp.createElement(pc,Op({},W,{className:La,ref:g}),sa))});Yt.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Yt.classNames={fullWidth:"width-before-scroll-bar",zeroRight:"right-scroll-bar-position"};var lm=ac(V(22)),Cz=ac(V(22)),bF=ac(V(22)),cF=function(){var b=0,g=null;return{add:function(n){if(0==b){if(document){var I=document.createElement("style");
I.type="text/css";var W="undefined"!==typeof __webpack_nonce__?__webpack_nonce__:void 0;W&&I.setAttribute("nonce",W)}else I=null;if(g=I)I=g,I.styleSheet?I.styleSheet.cssText=n:I.appendChild(document.createTextNode(n)),n=g,(document.head||document.getElementsByTagName("head")[0]).appendChild(n)}b++},remove:function(){b--;!b&&g&&(g.parentNode&&g.parentNode.removeChild(g),g=null)}}},dF=function(){var b=cF();return function(g,n){bF.useEffect(function(){b.add(g);return function(){b.remove()}},[g&&n])}},
Dz=function(){var b=dF();return function(g){b(g.styles,g.dynamic);return null}},eF={left:0,top:0,right:0,gap:0},fF=Dz(),gF=function(b,g,n,I){var W=b.left,ia=b.top,sa=b.right;b=b.gap;void 0===n&&(n="margin");return"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(I,";\n   padding-right: ").concat(b,"px ").concat(I,";\n  }\n  body {\n    overflow: hidden ").concat(I,";\n    overscroll-behavior: contain;\n    ").concat([g&&"position: relative ".concat(I,";"),"margin"===n&&"\n    padding-left: ".concat(W,
"px;\n    padding-top: ").concat(ia,"px;\n    padding-right: ").concat(sa,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(b,"px ").concat(I,";\n    "),"padding"===n&&"padding-right: ".concat(b,"px ").concat(I,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat("right-scroll-bar-position"," {\n    right: ").concat(b,"px ").concat(I,";\n  }\n  \n  .").concat("width-before-scroll-bar"," {\n    margin-right: ").concat(b,"px ").concat(I,";\n  }\n  \n  .").concat("right-scroll-bar-position",
" .").concat("right-scroll-bar-position"," {\n    right: 0 ").concat(I,";\n  }\n  \n  .").concat("width-before-scroll-bar"," .").concat("width-before-scroll-bar"," {\n    margin-right: 0 ").concat(I,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(b,"px;\n  }\n")},hF=function(b){var g=b.noRelative,n=b.noImportant;b=b.gapMode;var I=void 0===b?"margin":b;b=Cz.useMemo(function(){var W=I;void 0===W&&(W="margin");if("undefined"===typeof window)W=eF;else{var ia=window.getComputedStyle(document.body),
sa=ia["padding"===W?"paddingTop":"marginTop"],La=ia["padding"===W?"paddingRight":"marginRight"];W=[parseInt(ia["padding"===W?"paddingLeft":"marginLeft"]||"",10)||0,parseInt(sa||"",10)||0,parseInt(La||"",10)||0];W={left:W[0],top:W[1],right:W[2],gap:Math.max(0,window.innerWidth-document.documentElement.clientWidth+W[2]-W[0])}}return W},[I]);return Cz.createElement(fF,{styles:gF(b,!g,I,n?"":"!important")})},Wv=!1;if("undefined"!==typeof window)try{var Zt=Object.defineProperty({},"passive",{get:function(){return Wv=
!0}});window.addEventListener("test",Zt,Zt);window.removeEventListener("test",Zt,Zt)}catch(b){Wv=!1}var Gr=Wv?{passive:!1}:!1,Ez=function(b,g){var n=window.getComputedStyle(b);return"hidden"!==n[g]&&!(n.overflowY===n.overflowX&&"TEXTAREA"!==b.tagName&&"visible"===n[g])},Fz=function(b,g){do{"undefined"!==typeof ShadowRoot&&g instanceof ShadowRoot&&(g=g.host);if(Gz(b,g)){var n=Hz(b,g);if(n[1]>n[2])return!0}g=g.parentNode}while(g&&g!==document.body);return!1},Gz=function(b,g){return"v"===b?Ez(g,"overflowY"):
Ez(g,"overflowX")},Hz=function(b,g){return"v"===b?[g.scrollTop,g.scrollHeight,g.clientHeight]:[g.scrollLeft,g.scrollWidth,g.clientWidth]},$t=function(b){return"changedTouches"in b?[b.changedTouches[0].clientX,b.changedTouches[0].clientY]:[0,0]},Iz=function(b){return b&&"current"in b?b.current:b},iF=function(b){return"\n  .block-interactivity-".concat(b," {pointer-events: none;}\n  .allow-interactivity-").concat(b," {pointer-events: all;}\n")},jF=0,Hr=[];Bz.useMedium(function(b){var g=lm.useRef([]),
n=lm.useRef([0,0]),I=lm.useRef(),W=lm.useState(jF++)[0],ia=lm.useState(function(){return Dz()})[0],sa=lm.useRef(b);lm.useEffect(function(){sa.current=b},[b]);lm.useEffect(function(){if(b.inert){document.body.classList.add("block-interactivity-".concat(W));var Ub=ZE([b.lockRef.current],(b.shards||[]).map(Iz),!0).filter(Boolean);Ub.forEach(function(pc){return pc.classList.add("allow-interactivity-".concat(W))});return function(){document.body.classList.remove("block-interactivity-".concat(W));Ub.forEach(function(pc){return pc.classList.remove("allow-interactivity-".concat(W))})}}},
[b.inert,b.lockRef.current,b.shards]);var La=lm.useCallback(function(Ub,pc){if("touches"in Ub&&2===Ub.touches.length)return!sa.current.allowPinchZoom;var mc=$t(Ub),Vb=n.current,uc="deltaX"in Ub?Ub.deltaX:Vb[0]-mc[0];Vb="deltaY"in Ub?Ub.deltaY:Vb[1]-mc[1];var Ic=Ub.target,Rc=Math.abs(uc)>Math.abs(Vb)?"h":"v";if("touches"in Ub&&"h"===Rc&&"range"===Ic.type)return!1;var Vc=Fz(Rc,Ic);if(!Vc)return!0;Vc?mc=Rc:(mc="v"===Rc?"h":"v",Vc=Fz(Rc,Ic));if(!Vc)return!1;!I.current&&"changedTouches"in Ub&&(uc||Vb)&&
(I.current=mc);if(!mc)return!0;mc=I.current||mc;Vb="h"===mc?uc:Vb;uc=window.getComputedStyle(pc).direction;uc="h"===mc&&"rtl"===uc?-1:1;Rc=uc*Vb;Ub=Ub.target;Vb=pc.contains(Ub);Ic=!1;Rc=0<Rc;var Wd=Vc=0;do{var be=Hz(mc,Ub),Ee=be[0];be=be[1]-be[2]-uc*Ee;(Ee||be)&&Gz(mc,Ub)&&(Vc+=be,Wd+=Ee);Ub=Ub.parentNode}while(!Vb&&Ub!==document.body||Vb&&(pc.contains(Ub)||pc===Ub));Rc&&0===Vc?Ic=!0:Rc||0!==Wd||(Ic=!0);return Ic},[]),Xa=lm.useCallback(function(Ub){if(Hr.length&&Hr[Hr.length-1]===ia){var pc="deltaY"in
Ub?[Ub.deltaX,Ub.deltaY]:$t(Ub),mc=g.current.filter(function(Vb){var uc;if(uc=Vb.name===Ub.type&&Vb.target===Ub.target)Vb=Vb.delta,uc=Vb[0]===pc[0]&&Vb[1]===pc[1];return uc})[0];mc&&mc.should?Ub.cancelable&&Ub.preventDefault():mc||(mc=(sa.current.shards||[]).map(Iz).filter(Boolean).filter(function(Vb){return Vb.contains(Ub.target)}),(0<mc.length?La(Ub,mc[0]):!sa.current.noIsolation)&&Ub.cancelable&&Ub.preventDefault())}},[]),$a=lm.useCallback(function(Ub,pc,mc,Vb){var uc={name:Ub,delta:pc,target:mc,
should:Vb};g.current.push(uc);setTimeout(function(){g.current=g.current.filter(function(Ic){return Ic!==uc})},1)},[]),kb=lm.useCallback(function(Ub){n.current=$t(Ub);I.current=void 0},[]),tb=lm.useCallback(function(Ub){$a(Ub.type,[Ub.deltaX,Ub.deltaY],Ub.target,La(Ub,b.lockRef.current))},[]),Ob=lm.useCallback(function(Ub){$a(Ub.type,$t(Ub),Ub.target,La(Ub,b.lockRef.current))},[]);lm.useEffect(function(){Hr.push(ia);b.setCallbacks({onScrollCapture:tb,onWheelCapture:tb,onTouchMoveCapture:Ob});document.addEventListener("wheel",
Xa,Gr);document.addEventListener("touchmove",Xa,Gr);document.addEventListener("touchstart",kb,Gr);return function(){Hr=Hr.filter(function(Ub){return Ub!==ia});document.removeEventListener("wheel",Xa,Gr);document.removeEventListener("touchmove",Xa,Gr);document.removeEventListener("touchstart",kb,Gr)}},[]);var ec=b.removeScrollBar;return lm.createElement(lm.Fragment,null,b.inert?lm.createElement(ia,{styles:iF(W)}):null,ec?lm.createElement(hF,{gapMode:"margin"}):null)});var au=zz.forwardRef(function(b,
g){return zz.createElement(Yt,Op({},b,{ref:g,sideCar:Az}))});au.classNames=Yt.classNames;var Xv=["Enter"," "],Jz=["ArrowUp","PageDown","End"],kF=["ArrowDown","PageUp","Home",...Jz];[...Xv];[...Xv];var [Yv,lF,mF]=ja("Menu"),[Mq,bu]=ng("Menu",[mF,Er,Vt]),Zv=Er(),Kz=Vt(),[nF,cu]=Mq("Menu"),[oF,$v]=Mq("Menu"),Lz=(0,Tg.forwardRef)((b,g)=>{var {__scopeMenu:n}=b;b=Ha(b,["__scopeMenu"]);n=Zv(n);return(0,Tg.createElement)(Mv,se({},n,b,{ref:g}))}),[,pF]=Mq("MenuPortal",{forceMount:void 0}),[qF,Mz]=Mq("MenuContent"),
Nz=(0,Tg.forwardRef)((b,g)=>{var n=pF("MenuContent",b.__scopeMenu);({forceMount:n=n.forceMount}=b);const I=Ha(b,["forceMount"]),W=cu("MenuContent",b.__scopeMenu),ia=$v("MenuContent",b.__scopeMenu);return(0,Tg.createElement)(Yv.Provider,{scope:b.__scopeMenu},(0,Tg.createElement)(Os,{present:n||W.open},(0,Tg.createElement)(Yv.Slot,{scope:b.__scopeMenu},ia.modal?(0,Tg.createElement)(Nq,se({},I,{ref:g})):(0,Tg.createElement)(rF,se({},I,{ref:g})))))}),Nq=(0,Tg.forwardRef)((b,g)=>{const n=cu("MenuContent",
b.__scopeMenu),I=(0,Tg.useRef)(null);g=ah(g,I);(0,Tg.useEffect)(()=>{const W=I.current;if(W)return Uv(W)},[]);return(0,Tg.createElement)(Oz,se({},b,{ref:g,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Xf(b.onFocusOutside,W=>W.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)}))}),rF=(0,Tg.forwardRef)((b,g)=>{const n=cu("MenuContent",b.__scopeMenu);return(0,Tg.createElement)(Oz,se({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,
disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)}))}),Oz=(0,Tg.forwardRef)((b,g)=>{const {__scopeMenu:n,loop:I=!1,trapFocus:W,onOpenAutoFocus:ia,onCloseAutoFocus:sa,disableOutsidePointerEvents:La,onEscapeKeyDown:Xa,onPointerDownOutside:$a,onFocusOutside:kb,onInteractOutside:tb,onDismiss:Ob,disableOutsideScroll:ec}=b,Ub=Ha(b,"__scopeMenu loop trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside onDismiss disableOutsideScroll".split(" ")),
pc=cu("MenuContent",n),mc=$v("MenuContent",n),Vb=Zv(n),uc=Kz(n),Ic=lF(n),[Rc,Vc]=(0,Tg.useState)(null),Wd=(0,Tg.useRef)(null);g=ah(g,Wd,pc.onContentChange);const be=(0,Tg.useRef)(0),Ee=(0,Tg.useRef)(""),Oe=(0,Tg.useRef)(0),rf=(0,Tg.useRef)(null),nf=(0,Tg.useRef)("right"),cf=(0,Tg.useRef)(0),Ie=ec?au:Tg.Fragment,Bd=ec?{as:Lq,allowPinchZoom:!0}:void 0,gd=md=>{var Cd,we;md=Ee.current+md;const Fe=Ic().filter(Fg=>!Fg.disabled),of=document.activeElement,gf=null===(Cd=Fe.find(Fg=>Fg.ref.current===of))||
void 0===Cd?void 0:Cd.textValue;Cd=Fe.map(Fg=>Fg.textValue);const ff=Ze(Cd,md,gf),Ug=null===(we=Fe.find(Fg=>Fg.textValue===ff))||void 0===we?void 0:we.ref.current;(function Kk(pi){Ee.current=pi;window.clearTimeout(be.current);""!==pi&&(be.current=window.setTimeout(()=>Kk(""),1E3))})(md);Ug&&setTimeout(()=>Ug.focus())};(0,Tg.useEffect)(()=>()=>window.clearTimeout(be.current),[]);Sb();const kd=(0,Tg.useCallback)(md=>{var Cd,we,Fe;if(Fe=nf.current===(null===(Cd=rf.current)||void 0===Cd?void 0:Cd.side)){if(Cd=
null===(we=rf.current)||void 0===we?void 0:we.area){const {x:of,y:gf}={x:md.clientX,y:md.clientY};md=!1;for(let ff=0,Ug=Cd.length-1;ff<Cd.length;Ug=ff++){we=Cd[ff].x;Fe=Cd[ff].y;const Fg=Cd[Ug].x,pi=Cd[Ug].y;Fe>gf!==pi>gf&&of<(Fg-we)*(gf-Fe)/(pi-Fe)+we&&(md=!md)}Cd=md}else Cd=!1;Fe=Cd}return Fe},[]);return(0,Tg.createElement)(qF,{scope:n,searchRef:Ee,onItemEnter:(0,Tg.useCallback)(md=>{kd(md)&&md.preventDefault()},[kd]),onItemLeave:(0,Tg.useCallback)(md=>{var Cd;kd(md)||(null===(Cd=Wd.current)||void 0===
Cd||Cd.focus(),Vc(null))},[kd]),onTriggerLeave:(0,Tg.useCallback)(md=>{kd(md)&&md.preventDefault()},[kd]),pointerGraceTimerRef:Oe,onPointerGraceIntentChange:(0,Tg.useCallback)(md=>{rf.current=md},[])},(0,Tg.createElement)(Ie,Bd,(0,Tg.createElement)(Rv,{asChild:!0,trapped:W,onMountAutoFocus:Xf(ia,md=>{var Cd;md.preventDefault();null===(Cd=Wd.current)||void 0===Cd||Cd.focus()}),onUnmountAutoFocus:sa},(0,Tg.createElement)(Qt,{asChild:!0,disableOutsidePointerEvents:La,onEscapeKeyDown:Xa,onPointerDownOutside:$a,
onFocusOutside:kb,onInteractOutside:tb,onDismiss:Ob},(0,Tg.createElement)(wz,se({asChild:!0},uc,{dir:mc.dir,orientation:"vertical",loop:I,currentTabStopId:Rc,onCurrentTabStopIdChange:Vc,onEntryFocus:md=>{mc.isUsingKeyboardRef.current||md.preventDefault()}}),(0,Tg.createElement)(Nv,se({role:"menu","aria-orientation":"vertical","data-state":pc.open?"open":"closed","data-radix-menu-content":"",dir:mc.dir},Vb,Ub,{ref:g,style:Fa({outline:"none"},Ub.style),onKeyDown:Xf(Ub.onKeyDown,md=>{var Cd=md.target.closest("[data-radix-menu-content]")===
md.currentTarget;const we=md.ctrlKey||md.altKey||md.metaKey,Fe=1===md.key.length;Cd&&("Tab"===md.key&&md.preventDefault(),!we&&Fe&&gd(md.key));md.target===Wd.current&&kF.includes(md.key)&&(md.preventDefault(),Cd=Ic().filter(of=>!of.disabled).map(of=>of.ref.current),Jz.includes(md.key)&&Cd.reverse(),Rf(Cd))}),onBlur:Xf(b.onBlur,md=>{md.currentTarget.contains(md.target)||(window.clearTimeout(be.current),Ee.current="")}),onPointerMove:Xf(b.onPointerMove,Pe(md=>{const Cd=cf.current!==md.clientX;md.currentTarget.contains(md.target)&&
Cd&&(nf.current=md.clientX>cf.current?"right":"left",cf.current=md.clientX)}))})))))))}),Pz=(0,Tg.forwardRef)((b,g)=>{const {disabled:n=!1,onSelect:I}=b,W=Ha(b,["disabled","onSelect"]),ia=(0,Tg.useRef)(null),sa=$v("MenuItem",b.__scopeMenu),La=Mz("MenuItem",b.__scopeMenu);g=ah(g,ia);const Xa=(0,Tg.useRef)(!1);return(0,Tg.createElement)(sF,se({},W,{ref:g,disabled:n,onClick:Xf(b.onClick,()=>{const $a=ia.current;if(!n&&$a){const kb=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});$a.addEventListener("menu.itemSelect",
tb=>null===I||void 0===I?void 0:I(tb),{once:!0});Ti($a,kb);if(kb.defaultPrevented)Xa.current=!1;else sa.onClose()}}),onPointerDown:$a=>{var kb;null===(kb=b.onPointerDown)||void 0===kb||kb.call(b,$a);Xa.current=!0},onPointerUp:Xf(b.onPointerUp,$a=>{var kb;Xa.current||null===(kb=$a.currentTarget)||void 0===kb||kb.click()}),onKeyDown:Xf(b.onKeyDown,$a=>{const kb=""!==La.searchRef.current;n||kb&&" "===$a.key||!Xv.includes($a.key)||($a.currentTarget.click(),$a.preventDefault())})}))}),sF=(0,Tg.forwardRef)((b,
g)=>{const {__scopeMenu:n,disabled:I=!1,textValue:W}=b,ia=Ha(b,["__scopeMenu","disabled","textValue"]),sa=Mz("MenuItem",n),La=Kz(n),Xa=(0,Tg.useRef)(null);g=ah(g,Xa);const [$a,kb]=(0,Tg.useState)(!1),[tb,Ob]=(0,Tg.useState)("");(0,Tg.useEffect)(()=>{const ec=Xa.current;if(ec){var Ub;Ob((null!==(Ub=ec.textContent)&&void 0!==Ub?Ub:"").trim())}},[ia.children]);return(0,Tg.createElement)(Yv.ItemSlot,{scope:n,disabled:I,textValue:null!==W&&void 0!==W?W:tb},(0,Tg.createElement)(xz,se({asChild:!0},La,{focusable:!I}),
(0,Tg.createElement)(tj.div,se({role:"menuitem","data-highlighted":$a?"":void 0,"aria-disabled":I||void 0,"data-disabled":I?"":void 0},ia,{ref:g,onPointerMove:Xf(b.onPointerMove,Pe(ec=>{if(I)sa.onItemLeave(ec);else sa.onItemEnter(ec),ec.defaultPrevented||ec.currentTarget.focus()})),onPointerLeave:Xf(b.onPointerLeave,Pe(ec=>sa.onItemLeave(ec))),onFocus:Xf(b.onFocus,()=>kb(!0)),onBlur:Xf(b.onBlur,()=>kb(!1))}))))});Mq("MenuRadioGroup",{value:void 0,onValueChange:()=>{}});Mq("MenuItemIndicator",{checked:!1});
var tF=(0,Tg.forwardRef)((b,g)=>{b=Ha(b,["__scopeMenu"]);return(0,Tg.createElement)(tj.div,se({role:"separator","aria-orientation":"horizontal"},b,{ref:g}))});Mq("MenuSub");var Qz=b=>{const {__scopeMenu:g,open:n=!1,children:I,dir:W,onOpenChange:ia,modal:sa=!0}=b;b=Zv(g);const [La,Xa]=(0,Tg.useState)(null),$a=(0,Tg.useRef)(!1),kb=ij(ia),tb=Eb(W);(0,Tg.useEffect)(()=>{const Ob=()=>{$a.current=!0;document.addEventListener("pointerdown",ec,{capture:!0,once:!0});document.addEventListener("pointermove",
ec,{capture:!0,once:!0})},ec=()=>$a.current=!1;document.addEventListener("keydown",Ob,{capture:!0});return()=>{document.removeEventListener("keydown",Ob,{capture:!0});document.removeEventListener("pointerdown",ec,{capture:!0});document.removeEventListener("pointermove",ec,{capture:!0})}},[]);return(0,Tg.createElement)(Ov,b,(0,Tg.createElement)(nF,{scope:g,open:n,onOpenChange:kb,content:La,onContentChange:Xa},(0,Tg.createElement)(oF,{scope:g,onClose:(0,Tg.useCallback)(()=>kb(!1),[kb]),isUsingKeyboardRef:$a,
dir:tb,modal:sa},I)))},[uF]=ng("DropdownMenu",[bu]),du=bu(),[vF,Rz]=uF("DropdownMenu"),wF=(0,fo.forwardRef)((b,g)=>{const {__scopeDropdownMenu:n,disabled:I=!1}=b,W=Ha(b,["__scopeDropdownMenu","disabled"]),ia=Rz("DropdownMenuTrigger",n),sa=du(n);return(0,fo.createElement)(Lz,se({asChild:!0},sa),(0,fo.createElement)(tj.button,se({type:"button",id:ia.triggerId,"aria-haspopup":"menu","aria-expanded":ia.open,"aria-controls":ia.open?ia.contentId:void 0,"data-state":ia.open?"open":"closed","data-disabled":I?
"":void 0,disabled:I},W,{ref:Zi(g,ia.triggerRef),onPointerDown:Xf(b.onPointerDown,La=>{I||0!==La.button||!1!==La.ctrlKey||(ia.onOpenToggle(),ia.open||La.preventDefault())}),onKeyDown:Xf(b.onKeyDown,La=>{if(!I){if(["Enter"," "].includes(La.key))ia.onOpenToggle();if("ArrowDown"===La.key)ia.onOpenChange(!0);["Enter"," ","ArrowDown"].includes(La.key)&&La.preventDefault()}})})))}),xF=(0,fo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:n}=b;const I=Ha(b,["__scopeDropdownMenu"]),W=Rz("DropdownMenuContent",
n);n=du(n);const ia=(0,fo.useRef)(!1);return(0,fo.createElement)(Nz,se({id:W.contentId,"aria-labelledby":W.triggerId},n,I,{ref:g,onCloseAutoFocus:Xf(b.onCloseAutoFocus,sa=>{var La;ia.current||null===(La=W.triggerRef.current)||void 0===La||La.focus();ia.current=!1;sa.preventDefault()}),onInteractOutside:Xf(b.onInteractOutside,sa=>{sa=sa.detail.originalEvent;const La=0===sa.button&&!0===sa.ctrlKey;sa=2===sa.button||La;if(!W.modal||sa)ia.current=!0}),style:Wa(Fa({},b.style),{["--radix-dropdown-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),
Qs=(0,fo.forwardRef)((b,g)=>{var {__scopeDropdownMenu:n}=b;b=Ha(b,["__scopeDropdownMenu"]);n=du(n);return(0,fo.createElement)(Pz,se({},n,b,{ref:g}))}),yF=b=>{const {__scopeDropdownMenu:g,children:n,dir:I,open:W,defaultOpen:ia,onOpenChange:sa,modal:La=!0}=b;b=du(g);const Xa=(0,fo.useRef)(null),[$a=!1,kb]=Qg({prop:W,defaultProp:ia,onChange:sa});return(0,fo.createElement)(vF,{scope:g,triggerId:ql(),triggerRef:Xa,contentId:ql(),open:$a,onOpenChange:kb,onOpenToggle:(0,fo.useCallback)(()=>kb(tb=>!tb),[kb]),
modal:La},(0,fo.createElement)(Qz,se({},b,{open:$a,onOpenChange:kb,dir:I,modal:La}),n))};ob=V(587);var zF=lf(function(){const b=rg(),g=n=>{n.preventDefault()};return(0,ob.jsxs)(yF,{children:[(0,ob.jsx)(wF,{className:"tl-button text-sm px-2 important",id:"tl-zoom",children:(100*b.viewport.camera.zoom).toFixed(0)+"%"}),(0,ob.jsxs)(xF,{onCloseAutoFocus:n=>n.preventDefault(),className:"tl-menu",id:"zoomPopup",sideOffset:12,children:[(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToFit,
children:["Zoom to drawing",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:""})," ",(0,ob.jsx)("code",{children:"1"})]})})]}),(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomToSelection,disabled:0===b.selectedShapesArray.length,children:["Zoom to fit selection",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",
{children:wo})," ",(0,ob.jsx)("code",{children:""})," ",(0,ob.jsx)("code",{children:"1"})]})})]}),(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomIn,children:["Zoom in",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:"+"})]})})]}),(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.zoomOut,children:["Zoom out",(0,ob.jsx)("div",
{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:"-"})]})})]}),(0,ob.jsxs)(Qs,{className:"tl-menu-item",onSelect:g,onClick:b.api.resetZoom,children:["Reset zoom",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:""})," ",(0,ob.jsx)("code",{children:"0"})]})})]})]})]})}),Sz=V(22),Tz=["horizontal",
"vertical"],Oq=(0,Sz.forwardRef)((b,g)=>{const {decorative:n,orientation:I="horizontal"}=b;b=Ha(b,["decorative","orientation"]);const W=Tz.includes(I)?I:"horizontal";return(0,Sz.createElement)(tj.div,se({"data-orientation":W},n?{role:"none"}:{"aria-orientation":"vertical"===W?W:void 0,role:"separator"},b,{ref:g}))});Oq.propTypes={orientation(b,g,n){b=b[g];g=String(b);return b&&!Tz.includes(b)?Error(`Invalid prop \`orientation\` of value \`${g}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${"horizontal"}\`.`):null}};ob=V(587);var AF=lf(function(){const b=rg(),g=Pt.useCallback(()=>{b.api.undo()},[b]),n=Pt.useCallback(()=>{b.api.redo()},[b]),I=Pt.useCallback(()=>{b.api.zoomIn()},[b]),W=Pt.useCallback(()=>{b.api.zoomOut()},[b]);return(0,ob.jsxs)("div",{className:"tl-action-bar",children:[(0,ob.jsxs)("div",{className:"tl-toolbar tl-history-bar",children:[(0,ob.jsx)(dc,{tooltip:"Undo",onClick:g,children:(0,ob.jsx)(Gh,{name:"arrow-back-up"})}),(0,ob.jsx)(dc,{tooltip:"Redo",
onClick:n,children:(0,ob.jsx)(Gh,{name:"arrow-forward-up"})})]}),(0,ob.jsxs)("div",{className:"tl-toolbar tl-zoom-bar",children:[(0,ob.jsx)(dc,{tooltip:"Zoom in",onClick:I,id:"tl-zoom-in",children:(0,ob.jsx)(Gh,{name:"plus"})}),(0,ob.jsx)(dc,{tooltip:"Zoom out",onClick:W,id:"tl-zoom-out",children:(0,ob.jsx)(Gh,{name:"minus"})}),(0,ob.jsx)(Oq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,ob.jsx)(zF,{})]})]})}),Pq=ac(V(22)),aw=ac(V(31));ob=V(587);var eu=b=>`[${b.map(g=>{var n;return null!=
(n=null==g?void 0:g.toFixed(2))?n:"-"}).join(", ")}]`;lf(function(){const b=rg(),g=Pq.default.useRef(),[,n]=Pq.default.useState(0);Pq.default.useEffect(()=>{g.current=document.createElement("div");g.current.style.display="contents";document.body.append(g.current);n(I=>I+1);return()=>{var I;null==(I=g.current)?void 0:I.remove()}},[]);Pq.default.useEffect(()=>{requestAnimationFrame(()=>{var I,W;null==(W=null==(I=g.current)?void 0:I.querySelector(`[data-item-index="${b.history.pointer}"]`))?void 0:W.scrollIntoView()})},
[b.history.pointer]);return g.current?aw.default.createPortal((0,ob.jsx)("div",{className:"fixed z-[1000] left-4 max-w-[400px] top-4 overflow-scroll bg-gray-200 flex gap-2 p-2",children:b.history.stack.map((I,W)=>(0,ob.jsx)("div",{"data-item-index":W,style:{background:b.history.pointer===W?"pink":"grey"},onClick:()=>b.history.setPointer(W),className:"flex items-center rounded-lg px-2 h-[32px] whitespace-nowrap",children:I.pages[0].nonce},W))}),g.current):null});var BF=lf(()=>{var b;const {viewport:{bounds:g,
camera:{point:n,zoom:I}},inputs:W}=Ji(),ia=Pq.default.useRef(),sa=Pq.default.useRef();Pq.default.useEffect(()=>{var Xa=document.getElementById("tl-dev-tools-canvas-anchor");ia.current=Xa;Xa=document.getElementById("tl-statusbar-anchor");sa.current=Xa},[]);var La=[["Z",null!=(b=null==I?void 0:I.toFixed(2))?b:"null"],["MP",eu(W.currentPoint)],["MS",eu(W.currentScreenPoint)],["VP",eu(n)],["VBR",eu([g.maxX,g.maxY])]].map(Xa=>Xa.join("")).join("|");b=ia.current?aw.default.createPortal((0,ob.jsx)("svg",
{className:"tl-renderer-dev-tools tl-grid",children:(0,ob.jsx)("circle",{cx:n[0]*I,cy:n[1]*I,r:"4",fill:"red"})}),ia.current):null;La=sa.current?aw.default.createPortal((0,ob.jsx)("div",{style:{flex:1,display:"flex",alignItems:"center"},children:La}),sa.current):null;return(0,ob.jsxs)(ob.Fragment,{children:[b,La]})}),CF=ac(V(22)),DF=ac(V(22));ob=V(587);var Vo=lf(b=>{var {id:g,icon:n,tooltip:I}=b;b=Ha(b,["id","icon","tooltip"]);var W;const ia=rg(),sa=DF.useCallback(Xa=>{(Xa=Xa.currentTarget.dataset.tool)&&
ia.selectTool(Xa)},[ia]),La=(null==(W=[...ia.Tools,jr,kr])?void 0:W.find(Xa=>Xa.id===g)).shortcut;W=La?(0,ob.jsxs)(ob.Fragment,{children:[I,(0,ob.jsx)("span",{className:"ml-2 keyboard-shortcut",children:La.map((Xa,$a)=>(0,ob.jsx)("code",{children:Xa.toUpperCase()},$a)).reduce((Xa,$a)=>[Xa," | ",$a])})]}):I;return(0,ob.jsx)(dc,Wa(Fa({},b),{tooltipSide:"left",tooltip:W,"data-tool":g,"data-selected":g===ia.selectedTool.id,onClick:sa,children:"string"===typeof n?(0,ob.jsx)(Gh,{name:n}):n}))}),Uz=ac(V(22)),
Jj=V(22),[Vz]=ng("Popover",[Er]),fu=Er(),[EF,Rs]=Vz("Popover"),Wz=(0,Jj.forwardRef)((b,g)=>{var {__scopePopover:n}=b;const I=Ha(b,["__scopePopover"]),W=Rs("PopoverTrigger",n);n=fu(n);g=ah(g,W.triggerRef);b=(0,Jj.createElement)(tj.button,se({type:"button","aria-haspopup":"dialog","aria-expanded":W.open,"aria-controls":W.contentId,"data-state":W.open?"open":"closed"},I,{ref:g,onClick:Xf(b.onClick,W.onOpenToggle)}));return W.hasCustomAnchor?b:(0,Jj.createElement)(Mv,se({asChild:!0},n),b)}),[,FF]=Vz("PopoverPortal",
{forceMount:void 0}),Xz=(0,Jj.forwardRef)((b,g)=>{var n=FF("PopoverContent",b.__scopePopover);({forceMount:n=n.forceMount}=b);const I=Ha(b,["forceMount"]);b=Rs("PopoverContent",b.__scopePopover);return(0,Jj.createElement)(Os,{present:n||b.open},b.modal?(0,Jj.createElement)(GF,se({},I,{ref:g})):(0,Jj.createElement)(HF,se({},I,{ref:g})))}),GF=(0,Jj.forwardRef)((b,g)=>{const n=Rs("PopoverContent",b.__scopePopover),I=(0,Jj.useRef)(null);g=ah(g,I);const W=(0,Jj.useRef)(!1);(0,Jj.useEffect)(()=>{const ia=
I.current;if(ia)return Uv(ia)},[]);return(0,Jj.createElement)(au,{as:Lq,allowPinchZoom:!0},(0,Jj.createElement)(Yz,se({},b,{ref:g,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xf(b.onCloseAutoFocus,ia=>{var sa;ia.preventDefault();W.current||null===(sa=n.triggerRef.current)||void 0===sa||sa.focus()}),onPointerDownOutside:Xf(b.onPointerDownOutside,ia=>{ia=ia.detail.originalEvent;const sa=0===ia.button&&!0===ia.ctrlKey;W.current=2===ia.button||sa},{checkForDefaultPrevented:!1}),onFocusOutside:Xf(b.onFocusOutside,
ia=>ia.preventDefault(),{checkForDefaultPrevented:!1})})))}),HF=(0,Jj.forwardRef)((b,g)=>{const n=Rs("PopoverContent",b.__scopePopover),I=(0,Jj.useRef)(!1);return(0,Jj.createElement)(Yz,se({},b,{ref:g,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:W=>{var ia;null===(ia=b.onCloseAutoFocus)||void 0===ia||ia.call(b,W);if(!W.defaultPrevented){var sa;I.current||null===(sa=n.triggerRef.current)||void 0===sa||sa.focus();W.preventDefault()}I.current=!1},onInteractOutside:W=>{var ia,sa;null===
(ia=b.onInteractOutside)||void 0===ia||ia.call(b,W);W.defaultPrevented||(I.current=!0);ia=W.target;(null===(sa=n.triggerRef.current)||void 0===sa?0:sa.contains(ia))&&W.preventDefault()}}))}),Yz=(0,Jj.forwardRef)((b,g)=>{const {__scopePopover:n,trapFocus:I,onOpenAutoFocus:W,onCloseAutoFocus:ia,disableOutsidePointerEvents:sa,onEscapeKeyDown:La,onPointerDownOutside:Xa,onFocusOutside:$a,onInteractOutside:kb}=b;b=Ha(b,"__scopePopover trapFocus onOpenAutoFocus onCloseAutoFocus disableOutsidePointerEvents onEscapeKeyDown onPointerDownOutside onFocusOutside onInteractOutside".split(" "));
const tb=Rs("PopoverContent",n),Ob=fu(n);Sb();return(0,Jj.createElement)(Rv,{asChild:!0,loop:!0,trapped:I,onMountAutoFocus:W,onUnmountAutoFocus:ia},(0,Jj.createElement)(Qt,{asChild:!0,disableOutsidePointerEvents:sa,onInteractOutside:kb,onEscapeKeyDown:La,onPointerDownOutside:Xa,onFocusOutside:$a,onDismiss:()=>tb.onOpenChange(!1)},(0,Jj.createElement)(Nv,se({"data-state":tb.open?"open":"closed",role:"dialog",id:tb.contentId},Ob,b,{ref:g,style:Wa(Fa({},b.style),{["--radix-popover-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))))}),
Zz=(0,Jj.forwardRef)((b,g)=>{var {__scopePopover:n}=b;b=Ha(b,["__scopePopover"]);n=fu(n);return(0,Jj.createElement)(kz,se({},n,b,{ref:g}))}),$z=b=>{const {__scopePopover:g,children:n,open:I,defaultOpen:W,onOpenChange:ia,modal:sa=!1}=b;b=fu(g);const La=(0,Jj.useRef)(null),[Xa,$a]=(0,Jj.useState)(!1),[kb=!1,tb]=Qg({prop:I,defaultProp:W,onChange:ia});return(0,Jj.createElement)(Ov,b,(0,Jj.createElement)(EF,{scope:g,contentId:ql(),triggerRef:La,open:kb,onOpenChange:tb,onOpenToggle:(0,Jj.useCallback)(()=>
tb(Ob=>!Ob),[tb]),hasCustomAnchor:Xa,onCustomAnchorAdd:(0,Jj.useCallback)(()=>$a(!0),[]),onCustomAnchorRemove:(0,Jj.useCallback)(()=>$a(!1),[]),modal:sa},n))};ob=V(587);var IF=lf(function(){const b=[{id:"box",icon:"square",tooltip:"Rectangle"},{id:"ellipse",icon:"circle",tooltip:"Circle"},{id:"polygon",icon:"triangle",tooltip:"Triangle"}],g=rg(),[n,I]=Uz.useState(()=>{var W;return(null!=(W=b.find(ia=>ia.id===g.selectedTool.id))?W:b[0]).id});Uz.useEffect(()=>{I(W=>{var ia,sa;return null!=(sa=null==
(ia=b.find(La=>La.id===g.selectedTool.id))?void 0:ia.id)?sa:W})},[g.selectedTool.id]);return(0,ob.jsxs)($z,{children:[(0,ob.jsx)(Wz,{asChild:!0,children:(0,ob.jsxs)("div",{className:"tl-geometry-tools-pane-anchor",children:[(0,ob.jsx)(Vo,Fa({},b.find(W=>W.id===n))),(0,ob.jsx)(Gh,{"data-selected":b.some(W=>W.id===g.selectedTool.id),className:"tl-popover-indicator",name:"chevron-down-left"})]})}),(0,ob.jsxs)(Xz,{className:"tl-popover-content",side:"left",sideOffset:15,children:[(0,ob.jsx)("div",{className:"tl-toolbar tl-geometry-toolbar",
children:b.map(W=>(0,ob.jsx)(Vo,Fa({},W),W.id))}),(0,ob.jsx)(Zz,{className:"tl-popover-arrow"})]})]})}),oi=V(22),aA=V(22),bA=["PageUp","PageDown"],cA=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dA={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},[bw,JF,KF]=ja("Slider"),[eA]=ng("Slider",[KF]),[LF,gu]=eA("Slider"),MF=(0,oi.forwardRef)((b,
g)=>{function n(cf){const Ie=eg(Oe,cf);ia(cf,Ie)}function I(cf){ia(cf,Wd.current)}function W(){Oe[Wd.current]!==nf.current[Wd.current]&&mc(Oe)}function ia(cf,Ie,{commit:Bd}={commit:!1}){const gd=(String($a).split(".")[1]||"").length;cf=lh(Math.round((cf-La)/$a)*$a+La,gd);const kd=Re(cf,[La,Xa]);rf((md=[])=>{const Cd=Pf(md,kd,Ie);var we=Ob*$a;if(0<we){const Fe=Og(Cd);we=Math.min(...Fe)>=we}else we=!0;return we?(Wd.current=Cd.indexOf(kd),(we=String(Cd)!==String(md))&&Bd&&mc(Cd),we?Cd:md):md})}const {name:sa,
min:La=0,max:Xa=100,step:$a=1,orientation:kb="horizontal",disabled:tb=!1,minStepsBetweenThumbs:Ob=0,defaultValue:ec=[La],value:Ub,onValueChange:pc=()=>{},onValueCommit:mc=()=>{},inverted:Vb=!1}=b,uc=Ha(b,"name min max step orientation disabled minStepsBetweenThumbs defaultValue value onValueChange onValueCommit inverted".split(" ")),[Ic,Rc]=(0,oi.useState)(null);g=ah(g,cf=>Rc(cf));const Vc=(0,oi.useRef)(new Set),Wd=(0,oi.useRef)(0);var be="horizontal"===kb;const Ee=Ic?!!Ic.closest("form"):!0;be=be?
NF:OF;const [Oe=[],rf]=Qg({prop:Ub,defaultProp:ec,onChange:cf=>{var Ie;null===(Ie=[...Vc.current][Wd.current])||void 0===Ie||Ie.focus();pc(cf)}}),nf=(0,oi.useRef)(Oe);return(0,oi.createElement)(LF,{scope:b.__scopeSlider,disabled:tb,min:La,max:Xa,valueIndexToChangeRef:Wd,thumbs:Vc.current,values:Oe,orientation:kb},(0,oi.createElement)(bw.Provider,{scope:b.__scopeSlider},(0,oi.createElement)(bw.Slot,{scope:b.__scopeSlider},(0,oi.createElement)(be,se({"aria-disabled":tb,"data-disabled":tb?"":void 0},
uc,{ref:g,onPointerDown:Xf(uc.onPointerDown,()=>{tb||(nf.current=Oe)}),min:La,max:Xa,inverted:Vb,onSlideStart:tb?void 0:n,onSlideMove:tb?void 0:I,onSlideEnd:tb?void 0:W,onHomeKeyDown:()=>!tb&&ia(La,0,{commit:!0}),onEndKeyDown:()=>!tb&&ia(Xa,Oe.length-1,{commit:!0}),onStepKeyDown:({event:cf,direction:Ie})=>{if(!tb){cf=bA.includes(cf.key)||cf.shiftKey&&cA.includes(cf.key);const Bd=Wd.current;ia(Oe[Bd]+$a*(cf?10:1)*Ie,Bd,{commit:!0})}}})))),Ee&&Oe.map((cf,Ie)=>(0,oi.createElement)(TF,{key:Ie,name:sa?
sa+(1<Oe.length?"[]":""):void 0,value:cf})))}),[fA,gA]=eA("Slider",{startEdge:"left",endEdge:"right",size:"width",direction:1}),NF=(0,oi.forwardRef)((b,g)=>{function n(uc){const Ic=Ub.current||Ob.getBoundingClientRect(),Rc=Lg([0,Ic.width],Vb?[I,W]:[W,I]);Ub.current=Ic;return Rc(uc-Ic.left)}const {min:I,max:W,dir:ia,inverted:sa,onSlideStart:La,onSlideMove:Xa,onSlideEnd:$a,onStepKeyDown:kb}=b,tb=Ha(b,"min max dir inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),[Ob,ec]=(0,oi.useState)(null);
g=ah(g,uc=>ec(uc));const Ub=(0,oi.useRef)(),pc=Eb(ia),mc="ltr"===pc,Vb=mc&&!sa||!mc&&sa;return(0,oi.createElement)(fA,{scope:b.__scopeSlider,startEdge:Vb?"left":"right",endEdge:Vb?"right":"left",direction:Vb?1:-1,size:"width"},(0,oi.createElement)(hA,se({dir:pc,"data-orientation":"horizontal"},tb,{ref:g,style:Wa(Fa({},tb.style),{["--radix-slider-thumb-transform"]:"translateX(-50%)"}),onSlideStart:uc=>{uc=n(uc.clientX);null===La||void 0===La||La(uc)},onSlideMove:uc=>{uc=n(uc.clientX);null===Xa||void 0===
Xa||Xa(uc)},onSlideEnd:()=>{Ub.current=void 0;null===$a||void 0===$a||$a()},onStepKeyDown:uc=>{const Ic=dA[Vb?"from-left":"from-right"].includes(uc.key);null===kb||void 0===kb||kb({event:uc,direction:Ic?-1:1})}})))}),OF=(0,oi.forwardRef)((b,g)=>{function n(Ub){const pc=Ob.current||tb.current.getBoundingClientRect(),mc=Lg([0,pc.height],ec?[W,I]:[I,W]);Ob.current=pc;return mc(Ub-pc.top)}const {min:I,max:W,inverted:ia,onSlideStart:sa,onSlideMove:La,onSlideEnd:Xa,onStepKeyDown:$a}=b,kb=Ha(b,"min max inverted onSlideStart onSlideMove onSlideEnd onStepKeyDown".split(" ")),
tb=(0,oi.useRef)(null);g=ah(g,tb);const Ob=(0,oi.useRef)(),ec=!ia;return(0,oi.createElement)(fA,{scope:b.__scopeSlider,startEdge:ec?"bottom":"top",endEdge:ec?"top":"bottom",size:"height",direction:ec?1:-1},(0,oi.createElement)(hA,se({"data-orientation":"vertical"},kb,{ref:g,style:Wa(Fa({},kb.style),{["--radix-slider-thumb-transform"]:"translateY(50%)"}),onSlideStart:Ub=>{Ub=n(Ub.clientY);null===sa||void 0===sa||sa(Ub)},onSlideMove:Ub=>{Ub=n(Ub.clientY);null===La||void 0===La||La(Ub)},onSlideEnd:()=>
{Ob.current=void 0;null===Xa||void 0===Xa||Xa()},onStepKeyDown:Ub=>{const pc=dA[ec?"from-bottom":"from-top"].includes(Ub.key);null===$a||void 0===$a||$a({event:Ub,direction:pc?-1:1})}})))}),hA=(0,oi.forwardRef)((b,g)=>{const {__scopeSlider:n,onSlideStart:I,onSlideMove:W,onSlideEnd:ia,onHomeKeyDown:sa,onEndKeyDown:La,onStepKeyDown:Xa}=b,$a=Ha(b,"__scopeSlider onSlideStart onSlideMove onSlideEnd onHomeKeyDown onEndKeyDown onStepKeyDown".split(" ")),kb=gu("Slider",n);return(0,oi.createElement)(tj.span,
se({},$a,{ref:g,onKeyDown:Xf(b.onKeyDown,tb=>{"Home"===tb.key?(sa(tb),tb.preventDefault()):"End"===tb.key?(La(tb),tb.preventDefault()):bA.concat(cA).includes(tb.key)&&(Xa(tb),tb.preventDefault())}),onPointerDown:Xf(b.onPointerDown,tb=>{const Ob=tb.target;Ob.setPointerCapture(tb.pointerId);tb.preventDefault();kb.thumbs.has(Ob)?Ob.focus():I(tb)}),onPointerMove:Xf(b.onPointerMove,tb=>{tb.target.hasPointerCapture(tb.pointerId)&&W(tb)}),onPointerUp:Xf(b.onPointerUp,tb=>{const Ob=tb.target;Ob.hasPointerCapture(tb.pointerId)&&
(Ob.releasePointerCapture(tb.pointerId),ia(tb))})}))}),PF=(0,oi.forwardRef)((b,g)=>{var {__scopeSlider:n}=b;b=Ha(b,["__scopeSlider"]);n=gu("SliderTrack",n);return(0,oi.createElement)(tj.span,se({"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation},b,{ref:g}))}),QF=(0,oi.forwardRef)((b,g)=>{var {__scopeSlider:n}=b;const I=Ha(b,["__scopeSlider"]),W=gu("SliderRange",n);n=gA("SliderRange",n);var ia=(0,oi.useRef)(null);g=ah(g,ia);var sa=W.values.length;ia=W.values.map(La=>Ni(La,W.min,
W.max));sa=1<sa?Math.min(...ia):0;ia=100-Math.max(...ia);return(0,oi.createElement)(tj.span,se({"data-orientation":W.orientation,"data-disabled":W.disabled?"":void 0},I,{ref:g,style:Wa(Fa({},b.style),{[n.startEdge]:sa+"%",[n.endEdge]:ia+"%"})}))}),RF=(0,oi.forwardRef)((b,g)=>{const n=JF(b.__scopeSlider),[I,W]=(0,oi.useState)(null);g=ah(g,sa=>W(sa));const ia=(0,oi.useMemo)(()=>I?n().findIndex(sa=>sa.ref.current===I):-1,[n,I]);return(0,oi.createElement)(SF,se({},b,{ref:g,index:ia}))}),SF=(0,oi.forwardRef)((b,
g)=>{const {__scopeSlider:n,index:I}=b,W=Ha(b,["__scopeSlider","index"]),ia=gu("SliderThumb",n),sa=gA("SliderThumb",n),[La,Xa]=(0,oi.useState)(null);g=ah(g,ec=>Xa(ec));var $a=Oi(La);const kb=ia.values[I],tb=void 0===kb?0:Ni(kb,ia.min,ia.max),Ob=Nf(I,ia.values.length);$a=($a=null===$a||void 0===$a?void 0:$a[sa.size])?mh($a,tb,sa.direction):0;(0,oi.useEffect)(()=>{if(La)return ia.thumbs.add(La),()=>{ia.thumbs.delete(La)}},[La,ia.thumbs]);return(0,oi.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",
position:"absolute",[sa.startEdge]:`calc(${tb}% + ${$a}px)`}},(0,oi.createElement)(bw.ItemSlot,{scope:b.__scopeSlider},(0,oi.createElement)(tj.span,se({role:"slider","aria-label":b["aria-label"]||Ob,"aria-valuemin":ia.min,"aria-valuenow":kb,"aria-valuemax":ia.max,"aria-orientation":ia.orientation,"data-orientation":ia.orientation,"data-disabled":ia.disabled?"":void 0,tabIndex:ia.disabled?void 0:0},W,{ref:g,style:void 0===kb?{display:"none"}:b.style,onFocus:Xf(b.onFocus,()=>{ia.valueIndexToChangeRef.current=
I})}))))}),TF=b=>{const {value:g}=b;b=Ha(b,["value"]);const n=(0,oi.useRef)(null),I=mg(g);(0,oi.useEffect)(()=>{const W=n.current,ia=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value").set;if(I!==g&&ia){const sa=new Event("input",{bubbles:!0});ia.call(W,g);W.dispatchEvent(sa)}},[I,g]);return(0,oi.createElement)("input",se({style:{display:"none"}},b,{ref:n,defaultValue:g}))},UF=MF,VF=PF,WF=QF,XF=RF,hu=ac(V(22));ob=V(587);var iA=lf(b=>{var {side:g,align:n,alignOffset:I,label:W,
arrow:ia,children:sa,border:La}=b;b=Ha(b,"side align alignOffset label arrow children border".split(" "));const Xa=hu.useRef(null),[$a,kb]=hu.useState(!1),{viewport:{bounds:tb,camera:{point:Ob,zoom:ec}}}=rg(),[Ub,pc]=hu.useState(0);hu.useEffect(()=>{if(Xa.current&&$a){var mc=Xa.current.getBoundingClientRect();Ge.boundsContain(tb,{minX:mc.x,minY:mc.y,maxX:mc.right,maxY:mc.bottom,width:mc.width,height:mc.height})||pc(Vb=>Vb+1)}},[Ob[0],Ob[1],ec,$a]);return(0,ob.jsxs)($z,{onOpenChange:mc=>kb(mc),children:[(0,ob.jsx)(Wz,
Wa(Fa({},b),{"data-border":La,className:"tl-button tl-popover-trigger-button",children:W})),(0,ob.jsxs)(Xz,{ref:Xa,className:"tl-popover-content",align:n,alignOffset:I,side:g,sideOffset:15,collisionBoundary:document.querySelector(".logseq-tldraw"),children:[sa,ia&&(0,ob.jsx)(Zz,{className:"tl-popover-arrow"})]},"popover-content-"+Ub)]})});ob=V(587);ob=V(587);var YF=lf(function(){const b=rg(),g=CF.useCallback(n=>{b.api.setColor(n)},[]);return(0,ob.jsx)("div",{className:"tl-primary-tools",children:(0,ob.jsxs)("div",
{className:"tl-toolbar tl-tools-floating-panel",children:[(0,ob.jsx)(Vo,{tooltip:"Select",id:"select",icon:"select-cursor"}),(0,ob.jsx)(Vo,{tooltip:"Move",id:"move",icon:b.isIn("move.panning")?"hand-grab":"hand-stop"}),(0,ob.jsx)(Oq,{className:"tl-toolbar-separator",orientation:"horizontal"}),(0,ob.jsx)(Vo,{tooltip:"Add block or page",id:"logseq-portal",icon:"circle-plus"}),(0,ob.jsx)(Vo,{tooltip:"Draw",id:"pencil",icon:"ballpen"}),(0,ob.jsx)(Vo,{tooltip:"Highlight",id:"highlighter",icon:"highlight"}),
(0,ob.jsx)(Vo,{tooltip:"Eraser",id:"erase",icon:"eraser"}),(0,ob.jsx)(Vo,{tooltip:"Connector",id:"line",icon:"connector"}),(0,ob.jsx)(Vo,{tooltip:"Text",id:"text",icon:"text"}),(0,ob.jsx)(IF,{}),(0,ob.jsx)(Oq,{className:"tl-toolbar-separator",orientation:"horizontal",style:{margin:"0 -4px"}}),(0,ob.jsx)(tg,{popoverSide:"left",color:b.settings.color,setColor:g})]})})});ob=V(587);var ZF=lf(function(){const b=rg();return(0,ob.jsxs)("div",{className:"tl-statusbar",children:[b.selectedTool.id," | ",b.selectedTool.currentState.id,
(0,ob.jsx)("div",{style:{flex:1}}),(0,ob.jsx)("div",{id:"tl-statusbar-anchor",className:"flex gap-1"})]})});ob=V(587);var $F=lf(function(){return(0,ob.jsxs)(ob.Fragment,{children:[yk()&&(0,ob.jsx)(ZF,{}),yk()&&(0,ob.jsx)(BF,{}),(0,ob.jsx)(YF,{}),(0,ob.jsx)(AF,{})]})}),Ss=ac(V(22)),np=ac(V(22)),aG=ac(V(22)),yf=V(22),jA=V(31),bG=[" ","Enter","ArrowUp","ArrowDown"],cG=[" ","Enter"],[iu,cw,dG]=ja("Select"),[Ts]=ng("Select",[dG]),[eG,Ir]=Ts("Select"),[fG,gG]=Ts("Select"),hG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:n,
disabled:I=!1}=b;b=Ha(b,["__scopeSelect","disabled"]);const W=Ir("SelectTrigger",n),ia=W.disabled||I;g=ah(g,W.onTriggerChange);const sa=cw(n),[La,Xa,$a]=fg(kb=>{const tb=sa().filter(ec=>!ec.disabled),Ob=tb.find(ec=>ec.value===W.value);kb=Zg(tb,kb,Ob);if(void 0!==kb)W.onValueChange(kb.value)});return(0,yf.createElement)(tj.button,se({type:"button",role:"combobox","aria-controls":W.contentId,"aria-expanded":W.open,"aria-required":W.required,"aria-autocomplete":"none",dir:W.dir,"data-state":W.open?"open":
"closed",disabled:ia,"data-disabled":ia?"":void 0,"data-placeholder":void 0===W.value?"":void 0},b,{ref:g,onClick:Xf(b.onClick,kb=>{kb.currentTarget.focus()}),onPointerDown:Xf(b.onPointerDown,kb=>{const tb=kb.target;tb.hasPointerCapture(kb.pointerId)&&tb.releasePointerCapture(kb.pointerId);0===kb.button&&!1===kb.ctrlKey&&(ia||(W.onOpenChange(!0),$a()),W.triggerPointerDownPosRef.current={x:Math.round(kb.pageX),y:Math.round(kb.pageY)},kb.preventDefault())}),onKeyDown:Xf(b.onKeyDown,kb=>{const tb=""!==
La.current;kb.ctrlKey||kb.altKey||kb.metaKey||1!==kb.key.length||Xa(kb.key);tb&&" "===kb.key||!bG.includes(kb.key)||(ia||(W.onOpenChange(!0),$a()),kb.preventDefault())})}))}),iG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:n,children:I,placeholder:W}=b;b=Ha(b,["__scopeSelect","className","style","children","placeholder"]);const ia=Ir("SelectValue",n),{onValueNodeHasChildrenChange:sa}=ia,La=void 0!==I;g=ah(g,ia.onValueNodeChange);zn(()=>{sa(La)},[sa,La]);return(0,yf.createElement)(tj.span,se({},
b,{ref:g,style:{pointerEvents:"none"}}),void 0===ia.value&&void 0!==W?W:I)}),jG=(0,yf.forwardRef)((b,g)=>{const {children:n}=b;b=Ha(b,["__scopeSelect","children"]);return(0,yf.createElement)(tj.span,se({"aria-hidden":!0},b,{ref:g}),n||"")}),kG=(0,yf.forwardRef)((b,g)=>{const n=Ir("SelectContent",b.__scopeSelect),[I,W]=(0,yf.useState)();zn(()=>{W(new DocumentFragment)},[]);return(0,yf.createElement)(yf.Fragment,null,n.open?(0,yf.createElement)(lG,se({},b,{ref:g})):I?(0,jA.createPortal)((0,yf.createElement)(kA,
{scope:b.__scopeSelect},(0,yf.createElement)(iu.Slot,{scope:b.__scopeSelect},(0,yf.createElement)("div",null,b.children))),I):null)}),[kA,Jr]=Ts("SelectContent"),lG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:n,onCloseAutoFocus:I}=b;b=Ha(b,["__scopeSelect","onCloseAutoFocus"]);const W=Ir("SelectContent",n),[ia,sa]=(0,yf.useState)(null),[La,Xa]=(0,yf.useState)(null),[$a,kb]=(0,yf.useState)(null);g=ah(g,Cd=>Xa(Cd));const [tb,Ob]=(0,yf.useState)(null),[ec,Ub]=(0,yf.useState)(null),pc=cw(n),[mc,Vb]=
(0,yf.useState)(!1),uc=(0,yf.useRef)(!0),Ic=(0,yf.useRef)(!1),Rc=(0,yf.useRef)(!1);(0,yf.useEffect)(()=>{if(La)return Uv(La)},[La]);Sb();const [Vc,Wd]=(0,yf.useState)();zn(()=>{La&&Wd(window.getComputedStyle(La).zIndex)},[La]);const be=(0,yf.useCallback)(Cd=>{const [we,...Fe]=pc().map(ff=>ff.ref.current),[of]=Fe.slice(-1),gf=document.activeElement;for(const ff of Cd){if(ff===gf)break;null===ff||void 0===ff||ff.scrollIntoView({block:"nearest"});ff===we&&$a&&($a.scrollTop=0);ff===of&&$a&&($a.scrollTop=
$a.scrollHeight);null===ff||void 0===ff||ff.focus();if(document.activeElement!==gf)break}},[pc,$a]),Ee=(0,yf.useCallback)(()=>{if(W.trigger&&W.valueNode&&ia&&La&&$a&&tb&&ec){var Cd=W.trigger.getBoundingClientRect(),we=La.getBoundingClientRect(),Fe=W.valueNode.getBoundingClientRect(),of=ec.getBoundingClientRect();"rtl"!==W.dir?(of=Fe.left-(of.left-we.left),Fe=Cd.width+(Cd.left-of),we=Re(of,[10,window.innerWidth-10-Math.max(Fe,we.width)]),ia.style.minWidth=Fe+"px",ia.style.left=we+"px"):(of=window.innerWidth-
Fe.right-(we.right-of.right),Fe=Cd.width+(window.innerWidth-Cd.right-of),we=Re(of,[10,window.innerWidth-10-Math.max(Fe,we.width)]),ia.style.minWidth=Fe+"px",ia.style.right=we+"px");const Kk=pc();we=window.innerHeight-20;var gf=$a.scrollHeight,ff=window.getComputedStyle(La);Fe=parseInt(ff.borderTopWidth,10);var Ug=parseInt(ff.paddingTop,10);of=parseInt(ff.borderBottomWidth,10);ff=parseInt(ff.paddingBottom,10);var Fg=Fe+Ug+gf+ff+of;gf=Math.min(5*tb.offsetHeight,Fg);var pi=window.getComputedStyle($a);
ff=parseInt(pi.paddingTop,10);pi=parseInt(pi.paddingBottom,10);const Vk=Cd.top+Cd.height/2-10,Bo=we-Vk;Cd=tb.offsetHeight/2;Ug=Fe+Ug+(tb.offsetTop+Cd);Fg-=Ug;Ug<=Vk?(Fe=tb===Kk[Kk.length-1].ref.current,ia.style.bottom="0px",ia.style.height=Ug+Math.max(Bo,Cd+(Fe?pi:0)+(La.clientHeight-$a.offsetTop-$a.offsetHeight)+of)+"px"):(of=tb===Kk[0].ref.current,ia.style.top="0px",ia.style.height=Math.max(Vk,Fe+$a.offsetTop+(of?ff:0)+Cd)+Fg+"px",$a.scrollTop=Ug-Vk+$a.offsetTop);ia.style.margin="10px 0";ia.style.minHeight=
gf+"px";ia.style.maxHeight=we+"px";Vb(!0);requestAnimationFrame(()=>Ic.current=!0)}},[pc,W.trigger,W.valueNode,ia,La,$a,tb,ec,W.dir]);zn(()=>Ee(),[Ee]);const Oe=(0,yf.useCallback)(()=>be([tb,La]),[be,tb,La]);(0,yf.useEffect)(()=>{mc&&Oe()},[mc,Oe]);const rf=(0,yf.useCallback)(Cd=>{Cd&&!0===uc.current&&(Ee(),Oe(),uc.current=!1)},[Ee,Oe]),{onOpenChange:nf,triggerPointerDownPosRef:cf}=W;(0,yf.useEffect)(()=>{if(La){var Cd=0,we=0;const Fe=gf=>{var ff,Ug,Fg,pi;Cd=Math.abs(Math.round(gf.pageX)-(null!==
(ff=null===(Ug=cf.current)||void 0===Ug?void 0:Ug.x)&&void 0!==ff?ff:0));we=Math.abs(Math.round(gf.pageY)-(null!==(Fg=null===(pi=cf.current)||void 0===pi?void 0:pi.y)&&void 0!==Fg?Fg:0))},of=gf=>{10>=Cd&&10>=we?gf.preventDefault():La.contains(gf.target)||nf(!1);document.removeEventListener("pointermove",Fe);cf.current=null};null!==cf.current&&(document.addEventListener("pointermove",Fe),document.addEventListener("pointerup",of,{capture:!0,once:!0}));return()=>{document.removeEventListener("pointermove",
Fe);document.removeEventListener("pointerup",of,{capture:!0})}}},[La,nf,cf]);(0,yf.useEffect)(()=>{const Cd=()=>nf(!1);window.addEventListener("blur",Cd);window.addEventListener("resize",Cd);return()=>{window.removeEventListener("blur",Cd);window.removeEventListener("resize",Cd)}},[nf]);const [Ie,Bd]=fg(Cd=>{const we=pc().filter(gf=>!gf.disabled),Fe=we.find(gf=>gf.ref.current===document.activeElement),of=Zg(we,Cd,Fe);of&&setTimeout(()=>of.ref.current.focus())}),gd=(0,yf.useCallback)((Cd,we,Fe)=>{Fe=
!Rc.current&&!Fe;if(void 0!==W.value&&W.value===we||Fe)Ob(Cd),Fe&&(Rc.current=!0)},[W.value]),kd=(0,yf.useCallback)(()=>null===La||void 0===La?void 0:La.focus(),[La]),md=(0,yf.useCallback)((Cd,we,Fe)=>{Fe=!Rc.current&&!Fe;(void 0!==W.value&&W.value===we||Fe)&&Ub(Cd)},[W.value]);return(0,yf.createElement)(kA,{scope:n,contentWrapper:ia,content:La,viewport:$a,onViewportChange:kb,itemRefCallback:gd,selectedItem:tb,onItemLeave:kd,itemTextRefCallback:md,selectedItemText:ec,onScrollButtonChange:rf,isPositioned:mc,
shouldExpandOnScrollRef:Ic,searchRef:Ie},(0,yf.createElement)(au,{as:Lq,allowPinchZoom:!0},(0,yf.createElement)("div",{ref:sa,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:Vc}},(0,yf.createElement)(Rv,{asChild:!0,trapped:W.open,onMountAutoFocus:Cd=>{Cd.preventDefault()},onUnmountAutoFocus:Xf(I,Cd=>{var we;null===(we=W.trigger)||void 0===we||we.focus({preventScroll:!0});Cd.preventDefault()})},(0,yf.createElement)(Qt,se({role:"listbox",id:W.contentId,"data-state":W.open?"open":
"closed",dir:W.dir,onContextMenu:Cd=>Cd.preventDefault()},b,{ref:g,style:Fa({display:"flex",flexDirection:"column",boxSizing:"border-box",maxHeight:"100%",outline:"none"},b.style),disableOutsidePointerEvents:!0,onFocusOutside:Cd=>Cd.preventDefault(),onDismiss:()=>W.onOpenChange(!1),onKeyDown:Xf(b.onKeyDown,Cd=>{var we=Cd.ctrlKey||Cd.altKey||Cd.metaKey;"Tab"===Cd.key&&Cd.preventDefault();we||1!==Cd.key.length||Bd(Cd.key);if(["ArrowUp","ArrowDown","Home","End"].includes(Cd.key)){let Fe=pc().filter(of=>
!of.disabled).map(of=>of.ref.current);["ArrowUp","End"].includes(Cd.key)&&(Fe=Fe.slice().reverse());["ArrowUp","ArrowDown"].includes(Cd.key)&&(we=Fe.indexOf(Cd.target),Fe=Fe.slice(we+1));setTimeout(()=>be(Fe));Cd.preventDefault()}})}))))))}),mG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:n}=b;b=Ha(b,["__scopeSelect"]);const I=Jr("SelectViewport",n);g=ah(g,I.onViewportChange);const W=(0,yf.useRef)(0);return(0,yf.createElement)(yf.Fragment,null,(0,yf.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),
(0,yf.createElement)(iu.Slot,{scope:n},(0,yf.createElement)(tj.div,se({"data-radix-select-viewport":"",role:"presentation"},b,{ref:g,style:Fa({position:"relative",flex:1,overflow:"auto"},b.style),onScroll:Xf(b.onScroll,ia=>{ia=ia.currentTarget;const {contentWrapper:sa,shouldExpandOnScrollRef:La}=I;if(null!==La&&void 0!==La&&La.current&&sa){var Xa=Math.abs(W.current-ia.scrollTop);if(0<Xa){var $a=window.innerHeight-20,kb=parseFloat(sa.style.minHeight);const tb=parseFloat(sa.style.height);kb=Math.max(kb,
tb);kb<$a&&(Xa=kb+Xa,$a=Math.min($a,Xa),Xa-=$a,sa.style.height=$a+"px","0px"===sa.style.bottom&&(ia.scrollTop=0<Xa?Xa:0,sa.style.justifyContent="flex-end"))}}W.current=ia.scrollTop})}))))});Ts("SelectGroup");var [nG,oG]=Ts("SelectItem"),pG=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:n,value:I,disabled:W=!1,textValue:ia}=b;b=Ha(b,["__scopeSelect","value","disabled","textValue"]);const sa=Ir("SelectItem",n),La=Jr("SelectItem",n),Xa=sa.value===I,[$a,kb]=(0,yf.useState)(null!==ia&&void 0!==ia?ia:""),
[tb,Ob]=(0,yf.useState)(!1);g=ah(g,pc=>{var mc;return null===(mc=La.itemRefCallback)||void 0===mc?void 0:mc.call(La,pc,I,W)});const ec=ql(),Ub=()=>{W||(sa.onValueChange(I),sa.onOpenChange(!1))};return(0,yf.createElement)(nG,{scope:n,value:I,disabled:W,textId:ec,isSelected:Xa,onItemTextChange:(0,yf.useCallback)(pc=>{kb(mc=>{var Vb;return mc||(null!==(Vb=null===pc||void 0===pc?void 0:pc.textContent)&&void 0!==Vb?Vb:"").trim()})},[])},(0,yf.createElement)(iu.ItemSlot,{scope:n,value:I,disabled:W,textValue:$a},
(0,yf.createElement)(tj.div,se({role:"option","aria-labelledby":ec,"data-highlighted":tb?"":void 0,"aria-selected":Xa&&tb,"data-state":Xa?"checked":"unchecked","aria-disabled":W||void 0,"data-disabled":W?"":void 0,tabIndex:W?void 0:-1},b,{ref:g,onFocus:Xf(b.onFocus,()=>Ob(!0)),onBlur:Xf(b.onBlur,()=>Ob(!1)),onPointerUp:Xf(b.onPointerUp,Ub),onPointerMove:Xf(b.onPointerMove,pc=>{if(W){var mc;null===(mc=La.onItemLeave)||void 0===mc||mc.call(La)}else pc.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Xf(b.onPointerLeave,
pc=>{if(pc.currentTarget===document.activeElement){var mc;null===(mc=La.onItemLeave)||void 0===mc||mc.call(La)}}),onKeyDown:Xf(b.onKeyDown,pc=>{var mc;if(""===(null===(mc=La.searchRef)||void 0===mc?void 0:mc.current)||" "!==pc.key)cG.includes(pc.key)&&Ub()," "===pc.key&&pc.preventDefault()})}))))}),qG=(0,yf.forwardRef)((b,g)=>{var {__scopeSelect:n}=b;b=Ha(b,["__scopeSelect","className","style"]);const I=Ir("SelectItemText",n),W=Jr("SelectItemText",n),ia=oG("SelectItemText",n);n=gG("SelectItemText",
n);const [sa,La]=(0,yf.useState)(null);g=ah(g,Ob=>La(Ob),ia.onItemTextChange,Ob=>{var ec;return null===(ec=W.itemTextRefCallback)||void 0===ec?void 0:ec.call(W,Ob,ia.value,ia.disabled)});const Xa=null===sa||void 0===sa?void 0:sa.textContent,$a=(0,yf.useMemo)(()=>(0,yf.createElement)("option",{key:ia.value,value:ia.value,disabled:ia.disabled},Xa),[ia.disabled,ia.value,Xa]),{onNativeOptionAdd:kb,onNativeOptionRemove:tb}=n;zn(()=>{kb($a);return()=>tb($a)},[kb,tb,$a]);return(0,yf.createElement)(yf.Fragment,
null,(0,yf.createElement)(tj.span,se({id:ia.textId},b,{ref:g})),ia.isSelected&&I.valueNode&&!I.valueNodeHasChildren?(0,jA.createPortal)(b.children,I.valueNode):null)}),rG=(0,yf.forwardRef)((b,g)=>{const n=Jr("SelectScrollUpButton",b.__scopeSelect),[I,W]=(0,yf.useState)(!1);g=ah(g,n.onScrollButtonChange);zn(()=>{if(n.viewport&&n.isPositioned){let ia=function(){W(0<sa.scrollTop)};const sa=n.viewport;ia();sa.addEventListener("scroll",ia);return()=>sa.removeEventListener("scroll",ia)}},[n.viewport,n.isPositioned]);
return I?(0,yf.createElement)(lA,se({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:sa}=n;ia&&sa&&(ia.scrollTop-=sa.offsetHeight)}})):null}),sG=(0,yf.forwardRef)((b,g)=>{const n=Jr("SelectScrollDownButton",b.__scopeSelect),[I,W]=(0,yf.useState)(!1);g=ah(g,n.onScrollButtonChange);zn(()=>{if(n.viewport&&n.isPositioned){let ia=function(){W(Math.ceil(sa.scrollTop)<sa.scrollHeight-sa.clientHeight)};const sa=n.viewport;ia();sa.addEventListener("scroll",ia);return()=>sa.removeEventListener("scroll",
ia)}},[n.viewport,n.isPositioned]);return I?(0,yf.createElement)(lA,se({},b,{ref:g,onAutoScroll:()=>{const {viewport:ia,selectedItem:sa}=n;ia&&sa&&(ia.scrollTop+=sa.offsetHeight)}})):null}),lA=(0,yf.forwardRef)((b,g)=>{const {__scopeSelect:n,onAutoScroll:I}=b;b=Ha(b,["__scopeSelect","onAutoScroll"]);const W=Jr("SelectScrollButton",n),ia=(0,yf.useRef)(null),sa=cw(n),La=(0,yf.useCallback)(()=>{null!==ia.current&&(window.clearInterval(ia.current),ia.current=null)},[]);(0,yf.useEffect)(()=>()=>La(),[La]);
zn(()=>{var Xa;const $a=sa().find(kb=>kb.ref.current===document.activeElement);null===$a||void 0===$a||null===(Xa=$a.ref.current)||void 0===Xa||Xa.scrollIntoView({block:"nearest"})},[sa]);return(0,yf.createElement)(tj.div,se({"aria-hidden":!0},b,{ref:g,style:Fa({flexShrink:0},b.style),onPointerMove:Xf(b.onPointerMove,()=>{var Xa;null===(Xa=W.onItemLeave)||void 0===Xa||Xa.call(W);null===ia.current&&(ia.current=window.setInterval(I,50))}),onPointerLeave:Xf(b.onPointerLeave,()=>{La()})}))}),mA=(0,yf.forwardRef)((b,
g)=>{const {value:n}=b;b=Ha(b,["value"]);const I=(0,yf.useRef)(null);g=ah(g,I);const W=mg(n);(0,yf.useEffect)(()=>{const ia=I.current,sa=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(W!==n&&sa){const La=new Event("change",{bubbles:!0});sa.call(ia,n);ia.dispatchEvent(La)}},[W,n]);return(0,yf.createElement)(oz,{asChild:!0},(0,yf.createElement)("select",se({},b,{ref:g,defaultValue:n})))});mA.displayName="BubbleSelect";var tG=b=>{const {__scopeSelect:g,children:n,
open:I,defaultOpen:W,onOpenChange:ia,value:sa,defaultValue:La,onValueChange:Xa,dir:$a,name:kb,autoComplete:tb,disabled:Ob,required:ec}=b,[Ub,pc]=(0,yf.useState)(null),[mc,Vb]=(0,yf.useState)(null),[uc,Ic]=(0,yf.useState)(!1),Rc=Eb($a),[Vc=!1,Wd]=Qg({prop:I,defaultProp:W,onChange:ia}),[be,Ee]=Qg({prop:sa,defaultProp:La,onChange:Xa}),Oe=(0,yf.useRef)(null),rf=Ub?!!Ub.closest("form"):!0,[nf,cf]=(0,yf.useState)(new Set),Ie=Array.from(nf).map(Bd=>Bd.props.value).join(";");return(0,yf.createElement)(eG,
{required:ec,scope:g,trigger:Ub,onTriggerChange:pc,valueNode:mc,onValueNodeChange:Vb,valueNodeHasChildren:uc,onValueNodeHasChildrenChange:Ic,contentId:ql(),value:be,onValueChange:Ee,open:Vc,onOpenChange:Wd,dir:Rc,triggerPointerDownPosRef:Oe,disabled:Ob},(0,yf.createElement)(iu.Provider,{scope:g},(0,yf.createElement)(fG,{scope:b.__scopeSelect,onNativeOptionAdd:(0,yf.useCallback)(Bd=>{cf(gd=>(new Set(gd)).add(Bd))},[]),onNativeOptionRemove:(0,yf.useCallback)(Bd=>{cf(gd=>{gd=new Set(gd);gd.delete(Bd);
return gd})},[])},n)),rf?(0,yf.createElement)(mA,{key:Ie,"aria-hidden":!0,required:ec,tabIndex:-1,name:kb,autoComplete:tb,value:be,onChange:Bd=>Ee(Bd.target.value),disabled:Ob},void 0===be?(0,yf.createElement)("option",{value:""}):null,Array.from(nf)):null)},uG=hG,vG=iG,wG=jG,xG=b=>(0,yf.createElement)(mz,se({asChild:!0},b)),yG=kG,zG=mG,AG=pG,BG=qG,CG=rG,DG=sG;ob=V(587);var EG=ac(V(22)),Vm=ac(V(22)).default.createContext({}),FG=ac(V(22));ob=V(587);var nA=({id:b,showReferenceContent:g=!1})=>{var n;
const {handlers:{isWhiteboardPage:I,redirectToPage:W,sidebarAddBlock:ia,queryBlockByUUID:sa},renderers:{Breadcrumb:La,PageName:Xa}}=FG.default.useContext(Vm);var $a="";let kb=Th(b)?"B":"P",tb="";if(Th(b)){$a=sa(b);if(!$a)return(0,ob.jsx)("span",{className:"p-2",children:"Invalid reference. Did you remove it?"});tb=$a.content;$a="whiteboard-shape"===(null==(n=$a.properties)?void 0:n["ls-type"])?"link-to-whiteboard":"link-to-block"}else $a=I(b)?"link-to-whiteboard":"link-to-page";n=tb&&23<tb.length?
tb.slice(0,20)+"...":tb;return(0,ob.jsxs)("button",{className:"inline-flex gap-1 items-center w-full",onPointerDown:Ob=>{Ob.stopPropagation();Ob.shiftKey?ia(b,"B"===kb?"block":"page"):W(b)},children:[(0,ob.jsx)(Gh,{name:$a}),(0,ob.jsx)("span",{className:"pointer-events-none block-link-reference-row",children:"P"===kb?(0,ob.jsx)(Xa,{pageName:b}):(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)(La,{levelLimit:1,blockId:b,endSeparator:g}),g&&n]})})]})},xm=ac(V(22)),An=V(22),GG=["children"],ju="undefined"!==
typeof document?An.useLayoutEffect:An.useEffect,gh=ac(V(22)),$h=V(22),HG=V(31),Us,mm,IG="undefined"!=typeof document?$h.useLayoutEffect:$h.useEffect;!function(b){b[b.DEBUG=0]="DEBUG";b[b.INFO=1]="INFO";b[b.WARN=2]="WARN";b[b.ERROR=3]="ERROR"}(mm||={});var JG=((Us={})[mm.DEBUG]="debug",Us[mm.INFO]="log",Us[mm.WARN]="warn",Us[mm.ERROR]="error",Us),Pp=rh(function(){var b=qf(mm.ERROR);return{log:qf(function(g,n,I){var W;void 0===I&&(I=mm.INFO);I>=(null!=(W=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?
W:b(4))&&console[JG[I]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",g,n)}),logLevel:b}},[],{singleton:!0}),Bn=rh(function(){var b=Hf(),g=Hf(),n=qf(0),I=Hf(),W=qf(0),ia=Hf(),sa=Hf(),La=qf(0),Xa=qf(0),$a=qf(0),kb=qf(0),tb=Hf(),Ob=Hf(),ec=qf(!1),Ub=qf(!1);return Wf(Jd(b,Ef(function(pc){return pc.scrollTop})),g),Wf(Jd(b,Ef(function(pc){return pc.scrollHeight})),sa),Wf(g,W),{scrollContainerState:b,scrollTop:g,viewportHeight:ia,headerHeight:La,fixedHeaderHeight:Xa,fixedFooterHeight:$a,
footerHeight:kb,scrollHeight:sa,smoothScrollTargetReached:I,react18ConcurrentRendering:Ub,scrollTo:tb,scrollBy:Ob,statefulScrollTop:W,deviation:n,scrollingInProgress:ec}},[],{singleton:!0}),Gi={lvl:0},dw=rh(function(){return{recalcInProgress:qf(!1)}},[],{singleton:!0}),KG={offsetHeight:"height",offsetWidth:"width"},op=rh(function(b){var g=b[0].log,n=b[1].recalcInProgress;b=Hf();var I=Hf(),W=vh(I,0),ia=Hf(),sa=Hf(),La=qf(0),Xa=qf([]),$a=qf(void 0),kb=qf(void 0),tb=qf(function(uc,Ic){return Sk(uc,KG[Ic])}),
Ob=qf(void 0),ec=qf(0),Ub={offsetTree:[],sizeTree:Gi,groupOffsetTree:Gi,lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},pc=vh(Jd(b,ue(Xa,g,ec),gi(Ga,Ub),ze()),Ub);Wf(Jd(Xa,Ae(function(uc){return 0<uc.length}),ue(pc,ec),Ef(function(uc){var Ic=uc[0],Rc=uc[1],Vc=uc[2];uc=Ic.reduce(function(Wd,be,Ee){return ti(Wd,be,ab(be,Rc.offsetTree,Vc)||Ee)},Gi);return Ve({},Rc,{groupIndices:Ic,groupOffsetTree:uc})})),pc);Wf(Jd(I,ue(pc),Ae(function(uc){return uc[0]<uc[1].lastIndex}),Ef(function(uc){var Ic=uc[1];
return[{startIndex:uc[0],endIndex:Ic.lastIndex,size:Ic.lastSize}]})),b);Wf($a,kb);var mc=vh(Jd($a,Ef(function(uc){return void 0===uc})),!0);Wf(Jd(kb,Ae(function(uc){return void 0!==uc&&pc(4).sizeTree===Gi}),Ef(function(uc){return[{startIndex:0,endIndex:0,size:uc}]})),b);Ub=uj(Jd(b,ue(pc),gi(function(uc,Ic){Ic=Ic[1];return{changed:Ic!==uc.sizes,sizes:Ic}},{changed:!1,sizes:Ub}),Ef(function(uc){return uc.changed})));bi(Jd(La,gi(function(uc,Ic){return{diff:uc.prev-Ic,prev:Ic}},{diff:0,prev:0}),Ef(function(uc){return uc.diff})),
function(uc){0<uc?(n(0,!0),ia(0,uc)):0>uc&&sa(0,uc)});bi(Jd(La,ue(g)),function(uc){0>uc[0]&&(0,uc[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:La},mm.ERROR)});g=uj(ia);Wf(Jd(ia,ue(pc),Ef(function(uc){var Ic=uc[0];uc=uc[1];if(0<uc.groupIndices.length)throw Error("Virtuoso: prepending items does not work with groups");return Yk(uc.sizeTree).reduce(function(Rc,Vc){var Wd=Vc.k;Vc=Vc.v;return{ranges:[].concat(Rc.ranges,
[{startIndex:Rc.prevIndex,endIndex:Wd+Ic-1,size:Rc.prevSize}]),prevIndex:Wd+Ic,prevSize:Vc}},{ranges:[],prevIndex:0,prevSize:uc.lastSize}).ranges})),b);var Vb=uj(Jd(sa,ue(pc,ec),Ef(function(uc){return ab(-uc[0],uc[1].offsetTree,uc[2])})));return Wf(Jd(sa,ue(pc,ec),Ef(function(uc){var Ic=uc[0],Rc=uc[1];uc=uc[2];if(0<Rc.groupIndices.length)throw Error("Virtuoso: shifting items does not work with groups");var Vc=Yk(Rc.sizeTree).reduce(function(Wd,be){return ti(Wd,Math.max(0,be.k+Ic),be.v)},Gi);return Ve({},
Rc,{sizeTree:Vc},ua(Rc.offsetTree,0,Vc,uc))})),pc),{data:Ob,totalCount:I,sizeRanges:b,groupIndices:Xa,defaultItemSize:kb,fixedItemSize:$a,unshiftWith:ia,shiftWith:sa,shiftWithOffset:Vb,beforeUnshiftWith:g,firstItemIndex:La,gap:ec,sizes:pc,listRefresh:Ub,statefulTotalCount:W,trackItemSizes:mc,itemSize:tb}},Nh(Pp,dw),{singleton:!0}),LG="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style,Vs=rh(function(b){function g(){mc&&(mc(),mc=null);uc&&(uc(),uc=null);Vb&&(clearTimeout(Vb),
Vb=null);La(0,!1)}var n=b[0],I=n.sizes,W=n.totalCount,ia=n.listRefresh;n=n.gap;var sa=b[1],La=sa.scrollingInProgress,Xa=sa.viewportHeight,$a=sa.scrollTo,kb=sa.smoothScrollTargetReached,tb=sa.headerHeight,Ob=sa.footerHeight,ec=sa.fixedHeaderHeight;sa=sa.fixedFooterHeight;b=b[2].log;var Ub=Hf(),pc=qf(0),mc=null,Vb=null,uc=null;return Wf(Jd(Ub,ue(I,Xa,W,pc,tb,Ob,b),ue(n,ec,sa),Ef(function(Ic){var Rc=Ic[0],Vc=Rc[0],Wd=Rc[1],be=Rc[2],Ee=Rc[3],Oe=Rc[4],rf=Rc[5],nf=Rc[6],cf=Rc[7],Ie=Ic[1];Rc=Ic[2];Ic=Ic[3];
var Bd=$b(Vc),gd=Bd.align,kd=Bd.behavior,md=Bd.offset;--Ee;Bd=qb(Bd,Wd,Ee);rf=ab(Bd,Wd.offsetTree,Ie)+rf;"end"===gd?(rf+=Rc+Uj(Wd.sizeTree,Bd)[1]-be+Ic,Bd===Ee&&(rf+=nf)):"center"===gd?rf+=(Rc+Uj(Wd.sizeTree,Bd)[1]-be+Ic)/2:rf-=Oe;md&&(rf+=md);var Cd=function(Fe){g();Fe?(cf("retrying to scroll to",{location:Vc},mm.DEBUG),Ub(0,Vc)):cf("list did not change, scroll successful",{},mm.DEBUG)};if(g(),"smooth"===kd){var we=!1;uc=bi(ia,function(Fe){we=we||Fe});mc=Bi(kb,function(){Cd(we)})}else mc=Bi(Jd(ia,
function(Fe){var of=setTimeout(function(){Fe(!1)},150);return function(gf){gf&&(Fe(!0),clearTimeout(of))}}),Cd);Vb=setTimeout(function(){g()},1200);La(0,!0);return cf("scrolling from index to",{index:Bd,top:rf,behavior:kd},mm.DEBUG),{top:rf,behavior:kd}})),$a),{scrollToIndex:Ub,topListHeight:pc}},Nh(op,Bn,Pp),{singleton:!0}),MG={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Ws=rh(function(b){var g=b[0],n=g.scrollContainerState;
b=g.scrollTop;var I=g.viewportHeight,W=g.headerHeight,ia=g.footerHeight,sa=g.scrollBy;g=qf(!1);var La=qf(!0),Xa=Hf(),$a=Hf(),kb=qf(4),tb=qf(0),Ob=vh(Jd(qi(Jd(ee(b),qh(1),Kg(!0)),Jd(ee(b),qh(1),Kg(!1),He(100))),ze()),!1),ec=vh(Jd(qi(Jd(sa,Kg(!0)),Jd(sa,Kg(!1),He(200))),ze()),!1);Wf(Jd(wi(ee(b),ee(tb)),Ef(function(Ub){return Ub[0]<=Ub[1]}),ze()),La);Wf(Jd(La,gk(50)),$a);I=uj(Jd(wi(n,ee(I),ee(W),ee(ia),ee(kb)),gi(function(Ub,pc){var mc,Vb,uc=pc[0],Ic=uc.scrollTop;uc=uc.scrollHeight;var Rc=pc[1],Vc={viewportHeight:Rc,
scrollTop:Ic,scrollHeight:uc};return Ic+Rc-uc>-pc[4]?(Ic>Ub.state.scrollTop?(mc="SCROLLED_DOWN",Vb=Ub.state.scrollTop-Ic):(mc="SIZE_DECREASED",Vb=Ub.state.scrollTop-Ic||Ub.scrollTopDelta),{atBottom:!0,state:Vc,atBottomBecause:mc,scrollTopDelta:Vb}):{atBottom:!1,notAtBottomBecause:Vc.scrollHeight>Ub.state.scrollHeight?"SIZE_INCREASED":Rc<Ub.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":Ic<Ub.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:Vc}},MG),ze(function(Ub,
pc){return Ub&&Ub.atBottom===pc.atBottom})));W=vh(Jd(n,gi(function(Ub,pc){var mc=pc.scrollTop,Vb=pc.scrollHeight;pc=pc.viewportHeight;return 1.01>Math.abs(Ub.scrollHeight-Vb)?{scrollTop:mc,scrollHeight:Vb,jump:0,changed:!1}:Ub.scrollTop!==mc&&1>Vb-(mc+pc)?{scrollHeight:Vb,scrollTop:mc,jump:Ub.scrollTop-mc,changed:!0}:{scrollHeight:Vb,scrollTop:mc,jump:0,changed:!0}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Ae(function(Ub){return Ub.changed}),Ef(function(Ub){return Ub.jump})),0);Wf(Jd(I,Ef(function(Ub){return Ub.atBottom})),
g);Wf(Jd(g,gk(50)),Xa);ia=qf("down");Wf(Jd(n,Ef(function(Ub){return Ub.scrollTop}),ze(),gi(function(Ub,pc){return ec(4)?{direction:Ub.direction,prevScrollTop:pc}:{direction:pc<Ub.prevScrollTop?"up":"down",prevScrollTop:pc}},{direction:"down",prevScrollTop:0}),Ef(function(Ub){return Ub.direction})),ia);Wf(Jd(n,gk(50),Kg("none")),ia);n=qf(0);return Wf(Jd(Ob,Ae(function(Ub){return!Ub}),Kg(0)),n),Wf(Jd(b,gk(100),ue(Ob),Ae(function(Ub){return!!Ub[1]}),gi(function(Ub,pc){return[Ub[1],pc[0]]},[0,0]),Ef(function(Ub){return Ub[1]-
Ub[0]})),n),{isScrolling:Ob,isAtTop:La,isAtBottom:g,atBottomState:I,atTopStateChange:$a,atBottomStateChange:Xa,scrollDirection:ia,atBottomThreshold:kb,atTopThreshold:tb,scrollVelocity:n,lastJumpDueToItemResize:W}},Nh(Bn)),Qq=rh(function(b){var g=b[0].log;b=qf(!1);var n=uj(Jd(b,Ae(function(I){return I}),ze()));return bi(b,function(I){I&&g(4)("props updated",{},mm.DEBUG)}),{propsReady:b,didMount:n}},Nh(Pp),{singleton:!0}),ew=rh(function(b){var g=b[0],n=g.sizes,I=g.listRefresh;g=g.defaultItemSize;var W=
b[1].scrollTop,ia=b[2].scrollToIndex;b=b[3].didMount;var sa=qf(!0),La=qf(0);return Wf(Jd(b,ue(La),Ae(function(Xa){return!!Xa[1]}),Kg(!1)),sa),bi(Jd(wi(I,b),ue(sa,n,g),Ae(function(Xa){var $a=Xa[1],kb=Xa[3];return Xa[0][1]&&(Xa[2].sizeTree!==Gi||void 0!==kb)&&!$a}),ue(La)),function(Xa){var $a=Xa[1];setTimeout(function(){Bi(W,function(){sa(0,!0)});ia(0,$a)})}),{scrolledToInitialItem:sa,initialTopMostItemIndex:La}},Nh(op,Bn,Vs,Qq),{singleton:!0}),NG=rh(function(b){function g(pc){Xa(0,{index:"LAST",align:"end",
behavior:pc})}function n(pc){var mc=Bi(La,function(Vb){!pc||Vb.atBottom||"SIZE_INCREASED"!==Vb.notAtBottomBecause||Ub||(tb(4)("scrolling to bottom due to increased size",{},mm.DEBUG),g("auto"))});setTimeout(mc,100)}var I=b[0],W=I.totalCount,ia=I.listRefresh,sa=b[1];I=sa.isAtBottom;var La=sa.atBottomState,Xa=b[2].scrollToIndex;sa=b[3].scrolledToInitialItem;var $a=b[4],kb=$a.propsReady;$a=$a.didMount;var tb=b[5].log;b=b[6].scrollingInProgress;var Ob=qf(!1),ec=Hf(),Ub=null;return bi(Jd(wi(Jd(ee(W),qh(1)),
$a),ue(ee(Ob),I,sa,b),Ef(function(pc){var mc=pc[0],Vb=mc[0];mc=mc[1]&&pc[3];var uc="auto";mc&&(uc=pc[1],pc=pc[2]||pc[4],uc="function"==typeof uc?Bc(uc(pc)):pc&&Bc(uc),mc=mc&&!!uc);return{totalCount:Vb,shouldFollow:mc,followOutputBehavior:uc}}),Ae(function(pc){return pc.shouldFollow})),function(pc){var mc=pc.totalCount,Vb=pc.followOutputBehavior;Ub&&(Ub(),Ub=null);Ub=Bi(ia,function(){tb(4)("following output to ",{totalCount:mc},mm.DEBUG);g(Vb);Ub=null})}),bi(Jd(wi(ee(Ob),W,kb),Ae(function(pc){return pc[0]&&
pc[2]}),gi(function(pc,mc){mc=mc[1];return{refreshed:pc.value===mc,value:mc}},{refreshed:!1,value:0}),Ae(function(pc){return pc.refreshed}),ue(Ob,W)),function(pc){n(!1!==pc[1])}),bi(ec,function(){n(!1!==Ob(4))}),bi(wi(ee(Ob),La),function(pc){var mc=pc[1];pc[0]&&!mc.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===mc.notAtBottomBecause&&g("auto")}),{followOutput:Ob,autoscrollToBottom:ec}},Nh(op,Ws,Vs,ew,Qq,Pp,Bn)),oA=rh(function(b){var g=b[0],n=g.totalCount,I=g.groupIndices;g=g.sizes;var W=b[1];b=W.scrollTop;
W=W.headerHeight;var ia=Hf(),sa=Hf(),La=uj(Jd(ia,Ef(Dc)));return Wf(Jd(La,Ef(function(Xa){return Xa.totalCount})),n),Wf(Jd(La,Ef(function(Xa){return Xa.groupIndices})),I),Wf(Jd(wi(b,g,W),Ae(function(Xa){return Xa[1].groupOffsetTree!==Gi}),Ef(function(Xa){return Uj(Xa[1].groupOffsetTree,Math.max(Xa[0]-Xa[2],0),"v")[0]}),ze(),Ef(function(Xa){return[Xa]})),sa),{groupCounts:ia,topItemsIndexes:sa}},Nh(op,Bn)),fw=rh(function(b){var g=b[0];b=g.scrollTop;var n=g.viewportHeight,I=g.deviation,W=g.headerHeight,
ia=g.fixedHeaderHeight;g=Hf();var sa=qf(0),La=qf(0),Xa=qf(0);b=vh(Jd(wi(ee(b),ee(n),ee(W),ee(g,Hd),ee(Xa),ee(sa),ee(ia),ee(I),ee(La)),Ef(function($a){var kb=$a[0],tb=$a[1],Ob=$a[2],ec=$a[3],Ub=ec[0];ec=ec[1];var pc=$a[4],mc=$a[6],Vb=$a[7],uc=$a[8],Ic=kb-Vb;$a=$a[5]+mc;var Rc=Math.max(Ob-Ic,0),Vc="none",Wd="number"==typeof uc?uc:uc.top||0;uc="number"==typeof uc?uc:uc.bottom||0;return Ub-=Vb,ec+=Ob+mc,Ub+(Ob+mc)>kb+$a-Wd&&(Vc="up"),ec-Vb<kb-Rc+tb+uc&&(Vc="down"),"none"!==Vc?[Math.max(Ic-Ob-sd(pc,"top",
Vc)-Wd,0),Ic-Rc-mc+tb+sd(pc,"bottom",Vc)+uc]:null}),Ae(function($a){return null!=$a}),ze(Hd)),[0,0]);return{listBoundary:g,overscan:Xa,topListHeight:sa,increaseViewportBy:La,visibleRange:b}},Nh(Bn),{singleton:!0}),pA={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0},Kr=rh(function(b){var g=b[0],n=g.sizes,I=g.totalCount,W=g.data,ia=g.firstItemIndex,sa=g.gap,La=b[1],Xa=b[2],$a=Xa.visibleRange;g=Xa.listBoundary;Xa=Xa.topListHeight;var kb=b[3],
tb=kb.scrolledToInitialItem,Ob=kb.initialTopMostItemIndex;kb=b[4].topListHeight;var ec=b[5],Ub=b[6].didMount,pc=b[7].recalcInProgress;b=qf([]);var mc=Hf();Wf(La.topItemsIndexes,b);n=vh(Jd(wi(Ub,pc,ee($a,Hd),ee(I),ee(n),ee(Ob),tb,ee(b),ee(ia),ee(sa),W),Ae(function(Vb){return Vb[0]&&!Vb[1]}),Ef(function(Vb){var uc=Vb[2],Ic=uc[0],Rc=uc[1];uc=Vb[3];var Vc=Vb[5],Wd=Vb[6],be=Vb[7],Ee=Vb[8],Oe=Vb[9],rf=Vb[10];Vb=Vb[4];var nf=Vb.sizeTree,cf=Vb.offsetTree;if(0===uc||0===Ic&&0===Rc)return Ve({},pA,{totalCount:uc});
if(nf===Gi)return wf(function(gf,ff,Ug){return ff.groupOffsetTree!==Gi?(gf=ub(gf,ff),[{index:Uj(ff.groupOffsetTree,gf)[0],size:0,offset:0},{index:gf,size:0,offset:0,data:Ug&&Ug[0]}]):[{index:gf,size:0,offset:0,data:Ug&&Ug[0]}]}("number"==typeof Vc?Vc:"LAST"===Vc.index?uc-1:Vc.index,Vb,rf),[],uc,Oe,Vb,Ee);Vc=[];if(0<be.length){var Ie,Bd=be[0],gd=be[be.length-1],kd=0;for(nf=zf(tm(nf,Bd,gd));!(Ie=nf()).done;){var md=Ie.value;Ie=md.value;var Cd=Math.min(md.end,gd);for(md=Math.max(md.start,Bd);md<=Cd;md++)Vc.push({index:md,
size:Ie,offset:kd,data:rf&&rf[md]}),kd+=Ie}}if(!Wd)return wf([],Vc,uc,Oe,Vb,Ee);var we=0<be.length?be[be.length-1]+1:0,Fe=function(gf,ff,Ug,Fg){return void 0===Fg&&(Fg=0),0<Fg&&(ff=Math.max(ff,gf[um(gf,Fg,y)].offset)),Aj((Kk=Ug,Bo=um(pi=gf,ff,Vk=U),Vr=um(pi,Kk,Vk,Bo),pi.slice(Bo,Vr+1)),xa);var pi,Kk,Vk,Bo,Vr}(cf,Ic,Rc,we);if(0===Fe.length)return null;var of=uc-1;return wf(Mj([],function(gf){for(var ff,Ug=zf(Fe);!(ff=Ug()).done;){var Fg=ff.value,pi=Fg.value;ff=pi.offset;var Kk=Fg.start,Vk=pi.size;
pi.offset<Ic&&(pi=(Kk+=Math.floor((Ic-pi.offset+Oe)/(Vk+Oe)))-Fg.start,ff+=pi*Vk+pi*Oe);Kk<we&&(ff+=(we-Kk)*Vk,Kk=we);for(Fg=Math.min(Fg.end,of);Kk<=Fg&&!(ff>=Rc);Kk++)gf.push({index:Kk,size:Vk,offset:ff,data:rf&&rf[Kk]}),ff+=Vk+Oe}}),Vc,uc,Oe,Vb,Ee)}),Ae(function(Vb){return null!==Vb}),ze()),pA);return Wf(Jd(W,Ae(function(Vb){return void 0!==Vb}),Ef(function(Vb){return Vb.length})),I),Wf(Jd(n,Ef(function(Vb){return Vb.topListHeight})),kb),Wf(kb,Xa),Wf(Jd(n,Ef(function(Vb){return[Vb.top,Vb.bottom]})),
g),Wf(Jd(n,Ef(function(Vb){return Vb.items})),mc),Ve({listState:n,topItemsIndexes:b,endReached:uj(Jd(n,Ae(function(Vb){return 0<Vb.items.length}),ue(I,W),Ae(function(Vb){var uc=Vb[0].items;return uc[uc.length-1].originalIndex===Vb[1]-1}),Ef(function(Vb){return[Vb[1]-1,Vb[2]]}),ze(Hd),Ef(function(Vb){return Vb[0]}))),startReached:uj(Jd(n,gk(200),Ae(function(Vb){var uc=Vb.items;return 0<uc.length&&uc[0].originalIndex===Vb.topItems.length}),Ef(function(Vb){return Vb.items[0].index}),ze())),rangeChanged:uj(Jd(n,
Ae(function(Vb){return 0<Vb.items.length}),Ef(function(Vb){Vb=Vb.items;for(var uc=0,Ic=Vb.length-1;"group"===Vb[uc].type&&uc<Ic;)uc++;for(;"group"===Vb[Ic].type&&Ic>uc;)Ic--;return{startIndex:Vb[uc].index,endIndex:Vb[Ic].index}}),ze(Pd))),itemsRendered:mc},ec)},Nh(op,oA,fw,ew,Vs,Ws,Qq,dw),{singleton:!0}),OG=rh(function(b){var g=b[0],n=g.sizes,I=g.firstItemIndex,W=g.data;g=g.gap;var ia=b[1].listState;b=b[2].didMount;var sa=qf(0);return Wf(Jd(b,ue(sa),Ae(function(La){return 0!==La[1]}),ue(n,I,g,W),
Ef(function(La){var Xa=La[0][1],$a=La[1],kb=La[2],tb=La[3];La=La[4];var Ob=void 0===La?[]:La;La=0;if(0<$a.groupIndices.length)for(var ec,Ub=zf($a.groupIndices);!((ec=Ub()).done||ec.value-La>=Xa);)La++;Xa+=La;return wf(Array.from({length:Xa}).map(function(pc,mc){return{index:mc,size:0,offset:0,data:Ob[mc]}}),[],Xa,tb,$a,kb)})),ia),{initialItemCount:sa}},Nh(op,Kr,Qq),{singleton:!0}),qA=rh(function(b){b=b[0].scrollVelocity;var g=qf(!1),n=Hf(),I=qf(!1);return Wf(Jd(b,ue(I,g,n),Ae(function(W){return!!W[1]}),
Ef(function(W){var ia=W[0],sa=W[1],La=W[2];W=W[3];var Xa=sa.enter;if(La){if((0,sa.exit)(ia,W))return!1}else if(Xa(ia,W))return!0;return La}),ze()),g),bi(Jd(wi(g,b,n),ue(I)),function(W){var ia=W[0];W=W[1];return ia[0]&&W&&W.change&&W.change(ia[1],ia[2])}),{isSeeking:g,scrollSeekConfiguration:I,scrollVelocity:b,scrollSeekRangeChanged:n}},Nh(Ws),{singleton:!0}),PG=rh(function(b){b=b[0].topItemsIndexes;var g=qf(0);return Wf(Jd(g,Ae(function(n){return 0<n}),Ef(function(n){return Array.from({length:n}).map(function(I,
W){return W})})),b),{topItemCount:g}},Nh(Kr)),gw=rh(function(b){var g=b[0],n=g.footerHeight,I=g.headerHeight,W=g.fixedHeaderHeight;g=g.fixedFooterHeight;var ia=b[1].listState;b=Hf();n=vh(Jd(wi(n,g,I,W,ia),Ef(function(sa){var La=sa[4];return sa[0]+sa[1]+sa[2]+sa[3]+La.offsetBottom+La.bottom})),0);return Wf(ee(n),b),{totalListHeight:n,totalListHeightChanged:b}},Nh(Bn,Kr),{singleton:!0}),QG=Dg(function(){return/iP(ad|hone|od).+Version\/[\d.]+.*Safari/i.test(navigator.userAgent)}),RG=rh(function(b){function g(mc){0<
mc?(I(0,{top:-mc,behavior:"auto"}),ia(0,0)):(ia(0,0),I(0,{top:-mc,behavior:"auto"}))}var n=b[0],I=n.scrollBy,W=n.scrollTop,ia=n.deviation,sa=n.scrollingInProgress,La=b[1];n=La.isScrolling;var Xa=La.isAtBottom,$a=La.scrollDirection,kb=b[3],tb=kb.beforeUnshiftWith,Ob=kb.shiftWithOffset,ec=kb.sizes;kb=kb.gap;var Ub=b[4].log,pc=b[5].recalcInProgress;b=uj(Jd(b[2].listState,ue(La.lastJumpDueToItemResize),gi(function(mc,Vb){var uc=mc[1],Ic=Vb[0],Rc=Ic.items,Vc=Ic.totalCount;Ic=Ic.bottom+Ic.offsetBottom;
var Wd=0;return mc[2]===Vc&&0<uc.length&&0<Rc.length&&(0===Rc[0].originalIndex&&0===uc[0].originalIndex||0!=(Wd=Ic-mc[3])&&(Wd+=Vb[1])),[Wd,Rc,Vc,Ic]},[0,[],0,0]),Ae(function(mc){return 0!==mc[0]}),ue(W,$a,sa,Xa,Ub),Ae(function(mc){return!mc[3]&&0!==mc[1]&&"up"===mc[2]}),Ef(function(mc){var Vb=mc[0][0];return(0,mc[5])("Upward scrolling compensation",{amount:Vb},mm.DEBUG),Vb})));return bi(Jd(b,ue(ia,n)),function(mc){var Vb=mc[0],uc=mc[1];mc[2]&&QG()?ia(0,uc-Vb):g(-Vb)}),bi(Jd(wi(vh(n,!1),ia,pc),Ae(function(mc){return!mc[0]&&
!mc[2]&&0!==mc[1]}),Ef(function(mc){return mc[1]}),gk(1)),g),Wf(Jd(Ob,Ef(function(mc){return{top:-mc}})),I),bi(Jd(tb,ue(ec,kb),Ef(function(mc){var Vb=mc[0];return Vb*mc[1].lastSize+Vb*mc[2]})),function(mc){ia(0,mc);requestAnimationFrame(function(){Im(I,{top:mc});requestAnimationFrame(function(){ia(0,0);pc(0,!1)})})}),{deviation:ia}},Nh(Bn,Ws,Kr,op,Pp,dw)),SG=rh(function(b){var g=b[0].totalListHeight,n=b[1].didMount,I=b[2].scrollTo;b=qf(0);return bi(Jd(n,ue(b),Ae(function(W){return 0!==W[1]}),Ef(function(W){return{top:W[1]}})),
function(W){Bi(Jd(g,Ae(function(ia){return 0!==ia})),function(){setTimeout(function(){I(0,W)})})}),{initialScrollTop:b}},Nh(gw,Qq,Bn),{singleton:!0}),TG=rh(function(b){var g=b[0].viewportHeight;b=b[1].totalListHeight;var n=qf(!1);return{alignToBottom:n,paddingTopAddition:vh(Jd(wi(n,g,b),Ae(function(I){return I[0]}),Ef(function(I){return Math.max(0,I[1]-I[2])}),ze()),0)}},Nh(Bn,gw),{singleton:!0}),rA=rh(function(b){var g=b[0];b=g.scrollTo;g=g.scrollContainerState;var n=Hf(),I=Hf(),W=Hf(),ia=qf(!1),
sa=qf(void 0);return Wf(Jd(wi(n,I),Ef(function(La){var Xa=La[0];return{scrollTop:Math.max(0,Xa.scrollTop-La[1].offsetTop),scrollHeight:Xa.scrollHeight,viewportHeight:Xa.viewportHeight}})),g),Wf(Jd(b,ue(I),Ef(function(La){var Xa=La[0];return Ve({},Xa,{top:Xa.top+La[1].offsetTop})})),W),{useWindowScroll:ia,customScrollParent:sa,windowScrollContainerState:n,windowViewportRect:I,windowScrollTo:W}},Nh(Bn)),UG=["done","behavior","align"],sA=rh(function(b){var g=b[0],n=g.sizes,I=g.totalCount;g=g.gap;var W=
b[1],ia=W.scrollTop,sa=W.viewportHeight,La=W.headerHeight,Xa=W.fixedHeaderHeight,$a=W.fixedFooterHeight,kb=W.scrollingInProgress;b=b[2].scrollToIndex;W=Hf();return Wf(Jd(W,ue(n,sa,I,La,Xa,$a,ia),ue(g),Ef(function(tb){var Ob=tb[0],ec=Ob[0],Ub=Ob[1],pc=Ob[2],mc=Ob[3],Vb=Ob[4],uc=Ob[5],Ic=Ob[6];Ob=Ob[7];var Rc=tb[1];tb=ec.done;var Vc=ec.behavior,Wd=ec.align,be=Ol(ec,UG),Ee=null;ec=qb(ec,Ub,mc-1);Vb=ab(ec,Ub.offsetTree,Rc)+Vb+uc;return Vb<Ob+uc?Ee=Ve({},be,{behavior:Vc,align:null!=Wd?Wd:"start"}):Vb+
Uj(Ub.sizeTree,ec)[1]>Ob+pc-Ic&&(Ee=Ve({},be,{behavior:Vc,align:null!=Wd?Wd:"end"})),Ee?tb&&Bi(Jd(kb,qh(1),Ae(function(Oe){return!1===Oe})),tb):tb&&tb(),Ee}),Ae(function(tb){return null!==tb})),b),{scrollIntoView:W}},Nh(op,Bn,Vs,Kr,Pp),{singleton:!0}),VG=["listState","topItemsIndexes"],WG=rh(function(b){return Ve({},b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8])},Nh(fw,OG,Qq,qA,gw,SG,TG,rA,sA)),tA=rh(function(b){var g=b[0],n=g.totalCount,I=g.sizeRanges,W=g.fixedItemSize,ia=g.defaultItemSize,sa=g.trackItemSizes,
La=g.itemSize,Xa=g.data,$a=g.firstItemIndex,kb=g.groupIndices,tb=g.statefulTotalCount;g=g.gap;var Ob=b[1],ec=Ob.initialTopMostItemIndex;Ob=Ob.scrolledToInitialItem;var Ub=b[2],pc=b[3],mc=b[4],Vb=mc.listState,uc=mc.topItemsIndexes;mc=Ol(mc,VG);var Ic=b[5].scrollToIndex,Rc=b[7].topItemCount,Vc=b[8].groupCounts,Wd=b[9];b=b[10];return Wf(mc.rangeChanged,Wd.scrollSeekRangeChanged),Wf(Jd(Wd.windowViewportRect,Ef(function(be){return be.visibleHeight})),Ub.viewportHeight),Ve({totalCount:n,data:Xa,firstItemIndex:$a,
sizeRanges:I,initialTopMostItemIndex:ec,scrolledToInitialItem:Ob,topItemsIndexes:uc,topItemCount:Rc,groupCounts:Vc,fixedItemHeight:W,defaultItemHeight:ia,gap:g},pc,{statefulTotalCount:tb,listState:Vb,scrollToIndex:Ic,trackItemSizes:sa,itemSize:La,groupIndices:kb},mc,Wd,Ub,b)},Nh(op,ew,Bn,NG,Kr,Vs,RG,PG,oA,WG,Pp)),uA=Dg(function(){if("undefined"==typeof document)return"sticky";var b=document.createElement("div");return b.style.position="-webkit-sticky","-webkit-sticky"===b.style.position?"-webkit-sticky":
"sticky"}),ku=gh.createContext(void 0),vA=gh.createContext(void 0),XG=["placeholder"],YG=["style","children"],ZG=["style","children"],$G=rh(function(){var b=qf(function(Xa){return"Item "+Xa}),g=qf(null),n=qf(function(Xa){return"Group "+Xa}),I=qf({}),W=qf(ig),ia=qf("div"),sa=qf($f),La=function(Xa,$a){return void 0===$a&&($a=null),vh(Jd(I,Ef(function(kb){return kb[Xa]}),ze()),$a)};return{context:g,itemContent:b,groupContent:n,components:I,computeItemKey:W,headerFooterTag:ia,scrollerRef:sa,FooterComponent:La("Footer"),
HeaderComponent:La("Header"),TopItemListComponent:La("TopItemList"),ListComponent:La("List","div"),ItemComponent:La("Item","div"),GroupComponent:La("Group","div"),ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder")}}),aH=rh(function(b){function g(W,ia,sa){Wf(Jd(W,ue(I.components),Ef(function(La){var Xa,$a=La[0];La=La[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ia+" instead."),
Ve({},La,((Xa={})[ia]=$a,Xa))})),I.components)}var n=b[0],I=b[1];b={item:Vg(I.itemContent,"Rename the %citem%c prop to %citemContent."),group:Vg(I.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Vg(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Vg(n.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Vg(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:Hf(),
maxHeightCacheSize:Hf(),footer:Hf(),header:Hf(),HeaderContainer:Hf(),FooterContainer:Hf(),ItemContainer:Hf(),ScrollContainer:Hf(),GroupContainer:Hf(),ListContainer:Hf(),emptyComponent:Hf(),scrollSeek:Hf()};return bi(b.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),bi(b.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),
bi(b.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),bi(b.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),bi(b.scrollSeek,function(W){var ia=W.placeholder;
W=Ol(W,XG);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Ve({},(0,I.components)(4),{ScrollSeekPlaceholder:ia});(0,I.components)(0,ia);(0,n.scrollSeekConfiguration)(0,W)}),g(b.footer,"Footer","footer"),g(b.header,"Header","header"),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),g(b.emptyComponent,
"EmptyPlaceholder","emptyComponent"),g(b.GroupContainer,"Group","GroupContainer"),Ve({},n,I,b)},Nh(tA,$G)),bH=function(b){return gh.createElement("div",{style:{height:b.height}})},cH={position:uA(),zIndex:1,overflowAnchor:"none"},dH={overflowAnchor:"none"},wA=gh.memo(function(b){b=b.showTopList;b=void 0!==b&&b;var g=cj("listState"),n=go("sizeRanges"),I=cj("useWindowScroll"),W=cj("customScrollParent"),ia=go("windowScrollContainerState"),sa=go("scrollContainerState");I=W||I?ia:sa;var La=cj("itemContent"),
Xa=cj("context"),$a=cj("groupContent");ia=cj("trackItemSizes");sa=cj("itemSize");var kb=cj("log"),tb=go("gap");n=hi(n,sa,ia,b?$f:I,kb,tb,W).callbackRef;W=gh.useState(0);var Ob=W[0],ec=W[1];hw("deviation",function(Rc){Ob!==Rc&&ec(Rc)});W=cj("EmptyPlaceholder");var Ub=cj("ScrollSeekPlaceholder")||bH;I=cj("ListComponent");var pc=cj("ItemComponent"),mc=cj("GroupComponent"),Vb=cj("computeItemKey"),uc=cj("isSeeking"),Ic=0<cj("groupIndices").length;ia=cj("paddingTopAddition");ia=b?{}:{boxSizing:"border-box",
paddingTop:g.offsetTop+ia,paddingBottom:g.offsetBottom,marginTop:Ob};return!b&&0===g.totalCount&&W?(0,$h.createElement)(W,Hg(W,Xa)):(0,$h.createElement)(I,Ve({},Hg(I,Xa),{ref:n,style:ia,"data-test-id":b?"virtuoso-top-item-list":"virtuoso-item-list"}),(b?g.topItems:g.items).map(function(Rc){var Vc=Rc.originalIndex,Wd=Vb(Vc+g.firstItemIndex,Rc.data,Xa);return uc?(0,$h.createElement)(Ub,Ve({},Hg(Ub,Xa),{key:Wd,index:Rc.index,height:Rc.size,type:Rc.type||"item"},"group"===Rc.type?{}:{groupIndex:Rc.groupIndex})):
"group"===Rc.type?(0,$h.createElement)(mc,Ve({},Hg(mc,Xa),{key:Wd,"data-index":Vc,"data-known-size":Rc.size,"data-item-index":Rc.index,style:cH}),$a(Rc.index)):(0,$h.createElement)(pc,Ve({},Hg(pc,Xa),{key:Wd,"data-index":Vc,"data-known-size":Rc.size,"data-item-index":Rc.index,"data-item-group-index":Rc.groupIndex,style:dH}),Ic?La(Rc.index,Rc.groupIndex,Rc.data,Xa):La(Rc.index,Rc.data,Xa))}))}),eH={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Lr=
{width:"100%",height:"100%",position:"absolute",top:0},fH={width:"100%",position:uA(),top:0},gH=gh.memo(function(){var b=cj("HeaderComponent"),g=go("headerHeight"),n=cj("headerFooterTag"),I=bh(function(ia){return g(Sk(ia,"height"))}),W=cj("context");return b?(0,$h.createElement)(n,{ref:I},(0,$h.createElement)(b,Hg(b,W))):null}),hH=gh.memo(function(){var b=cj("FooterComponent"),g=go("footerHeight"),n=cj("headerFooterTag"),I=bh(function(ia){return g(Sk(ia,"height"))}),W=cj("context");return b?(0,$h.createElement)(n,
{ref:I},(0,$h.createElement)(b,Hg(b,W))):null}),iH=function(b){b=b.children;var g=(0,$h.useContext)(ku),n=go("viewportHeight"),I=go("fixedItemHeight"),W=bh(kh(n,function(ia){return Sk(ia,"height")}));return gh.useEffect(function(){g&&(n(g.viewportHeight),I(g.itemHeight))},[g,n,I]),gh.createElement("div",{style:Lr,ref:W,"data-viewport-type":"element"},b)},jH=function(b){b=b.children;var g=(0,$h.useContext)(ku),n=go("windowViewportRect"),I=go("fixedItemHeight"),W=cj("customScrollParent");W=kj(n,W);
return gh.useEffect(function(){g&&(I(g.itemHeight),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,n,I]),gh.createElement("div",{ref:W,style:Lr,"data-viewport-type":"window"},b)},kH=function(b){b=b.children;var g=cj("TopItemListComponent"),n=cj("headerHeight");n=Ve({},fH,{marginTop:n+"px"});var I=cj("context");return(0,$h.createElement)(g||"div",{style:n,context:I},b)},lu=zl(aH,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",
itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",
headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",
ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",
startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},gh.memo(function(b){var g=cj("useWindowScroll"),n=0<cj("topItemsIndexes").length,I=cj("customScrollParent"),W=I||g?jH:iH;return gh.createElement(I||g?nH:mH,Ve({},b),gh.createElement(W,null,gh.createElement(gH,null),gh.createElement(wA,null),gh.createElement(hH,
null)),n&&gh.createElement(kH,null,gh.createElement(wA,{showTopList:!0})))})),lH=lu.Component,go=lu.usePublisher,cj=lu.useEmitterValue,hw=lu.useEmitter,mH=ii({usePublisher:go,useEmitterValue:cj,useEmitter:hw}),nH=Mh({usePublisher:go,useEmitterValue:cj,useEmitter:hw}),xA={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},oH={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},yA=Math.round,zA=Math.ceil,mu=Math.floor,iw=Math.min,Mr=Math.max,
pH=rh(function(b){var g=b[0],n=g.overscan,I=g.visibleRange,W=g.listBoundary,ia=b[1];g=ia.scrollTop;var sa=ia.viewportHeight,La=ia.scrollBy,Xa=ia.scrollTo,$a=ia.smoothScrollTargetReached,kb=ia.scrollContainerState,tb=ia.footerHeight;ia=ia.headerHeight;var Ob=b[2],ec=b[3],Ub=b[4],pc=Ub.propsReady,mc=Ub.didMount,Vb=b[5];Ub=Vb.windowViewportRect;var uc=Vb.windowScrollTo,Ic=Vb.useWindowScroll,Rc=Vb.customScrollParent;Vb=Vb.windowScrollContainerState;b=b[6];var Vc=qf(0),Wd=qf(0),be=qf(xA),Ee=qf({height:0,
width:0}),Oe=qf({height:0,width:0}),rf=Hf(),nf=Hf(),cf=qf(0),Ie=qf(void 0),Bd=qf({row:0,column:0});Wf(Jd(wi(mc,Wd,Ie),Ae(function(gd){return 0!==gd[1]}),Ef(function(gd){return{items:ag(0,gd[1]-1,gd[2]),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),be);Wf(Jd(wi(ee(Vc),I,ee(Bd,Lf),ee(Oe,function(gd,kd){return gd&&gd.width===kd.width&&gd.height===kd.height}),Ie),ue(Ee),Ef(function(gd){var kd=gd[0],md=kd[0],Cd=kd[1],we=Cd[0],Fe=Cd[1],of=kd[2],gf=kd[3],ff=kd[4],Ug=gd[1];gd=of.row;
var Fg=of.column;kd=gf.height;Cd=gf.width;var pi=Ug.width;if(0===md||0===pi)return xA;if(0===Cd)return Ve({},oH,{items:ag(0,0,ff)});Fg=Mr(1,mu((pi+Fg)/(Cd+Fg)));we=Fg*mu((we+gd)/(kd+gd));Fe=Fg*zA((Fe+gd)/(kd+gd))-1;Fe=iw(md-1,Mr(Fe,Fg-1));we=ag(iw(Fe,Mr(0,we)),Fe,ff);gf=yh(Ug,of,gf,we);of=gf.top;gf=gf.bottom;md=zA(md/Fg);return{items:we,offsetTop:of,offsetBottom:md*kd+(md-1)*gd-gf,top:of,bottom:gf,itemHeight:kd,itemWidth:Cd}})),be);Wf(Jd(Ie,Ae(function(gd){return void 0!==gd}),Ef(function(gd){return gd.length})),
Vc);Wf(Jd(Ee,Ef(function(gd){return gd.height})),sa);Wf(Jd(wi(Ee,Oe,be,Bd),Ef(function(gd){gd=yh(gd[0],gd[3],gd[1],gd[2].items);return[gd.top,gd.bottom]}),ze(Hd)),W);I=uj(Jd(ee(be),Ae(function(gd){return 0<gd.items.length}),ue(Vc),Ae(function(gd){var kd=gd[0].items;return kd[kd.length-1].index===gd[1]-1}),Ef(function(gd){return gd[1]-1}),ze()));W=uj(Jd(ee(be),Ae(function(gd){gd=gd.items;return 0<gd.length&&0===gd[0].index}),Kg(0),ze()));sa=uj(Jd(ee(be),Ae(function(gd){return 0<gd.items.length}),Ef(function(gd){gd=
gd.items;return{startIndex:gd[0].index,endIndex:gd[gd.length-1].index}}),ze(Pd)));Wf(sa,ec.scrollSeekRangeChanged);Wf(Jd(rf,ue(Ee,Oe,Vc,Bd),Ef(function(gd){var kd=gd[1],md=gd[2],Cd=gd[3],we=gd[4],Fe=$b(gd[0]);gd=Fe.align;var of=Fe.behavior,gf=Fe.offset;Fe=Fe.index;"LAST"===Fe&&(Fe=Cd-1);Cd=ch(kd,we,md,Mr(0,Fe,iw(Cd-1,Fe)));return"end"===gd?Cd=yA(Cd-kd.height+md.height):"center"===gd&&(Cd=yA(Cd-kd.height/2+md.height/2)),gf&&(Cd+=gf),{top:Cd,behavior:of}})),Xa);mc=vh(Jd(be,Ef(function(gd){return gd.offsetBottom+
gd.bottom})),0);return Wf(Jd(Ub,Ef(function(gd){return{width:gd.visibleWidth,height:gd.visibleHeight}})),Ee),Ve({data:Ie,totalCount:Vc,viewportDimensions:Ee,itemDimensions:Oe,scrollTop:g,scrollHeight:nf,overscan:n,scrollBy:La,scrollTo:Xa,scrollToIndex:rf,smoothScrollTargetReached:$a,windowViewportRect:Ub,windowScrollTo:uc,useWindowScroll:Ic,customScrollParent:Rc,windowScrollContainerState:Vb,deviation:cf,scrollContainerState:kb,footerHeight:tb,headerHeight:ia,initialItemCount:Wd,gap:Bd},ec,{gridState:be,
totalListHeight:mc},Ob,{startReached:W,endReached:I,rangeChanged:sa,propsReady:pc},b)},Nh(fw,Bn,Ws,qA,Qq,rA,Pp)),qH=["placeholder"],rH=rh(function(){var b=qf(function($a){return"Item "+$a}),g=qf({}),n=qf(null),I=qf("virtuoso-grid-item"),W=qf("virtuoso-grid-list"),ia=qf(ig),sa=qf("div"),La=qf($f),Xa=function($a,kb){return void 0===kb&&(kb=null),vh(Jd(g,Ef(function(tb){return tb[$a]}),ze()),kb)};return{context:n,itemContent:b,components:g,computeItemKey:ia,itemClassName:I,listClassName:W,headerFooterTag:sa,
scrollerRef:La,FooterComponent:Xa("Footer"),HeaderComponent:Xa("Header"),ListComponent:Xa("List","div"),ItemComponent:Xa("Item","div"),ScrollerComponent:Xa("Scroller","div"),ScrollSeekPlaceholder:Xa("ScrollSeekPlaceholder","div")}}),sH=rh(function(b){function g(W,ia,sa){Wf(Jd(W,ue(I.components),Ef(function(La){var Xa,$a=La[0];La=La[1];return console.warn("react-virtuoso: "+sa+" property is deprecated. Pass components."+ia+" instead."),Ve({},La,((Xa={})[ia]=$a,Xa))})),I.components)}var n=b[0],I=b[1];
b={item:Vg(I.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:Hf(),ScrollContainer:Hf(),ListContainer:Hf(),emptyComponent:Hf(),scrollSeek:Hf()};return bi(b.scrollSeek,function(W){var ia=W.placeholder;W=Ol(W,qH);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.");ia=Ve({},(0,I.components)(4),{ScrollSeekPlaceholder:ia});(0,I.components)(0,ia);(0,n.scrollSeekConfiguration)(0,
W)}),g(b.ItemContainer,"Item","ItemContainer"),g(b.ListContainer,"List","ListContainer"),g(b.ScrollContainer,"Scroller","ScrollContainer"),Ve({},n,I,b)},Nh(pH,rH)),tH=gh.memo(function(){var b=tl("gridState"),g=tl("listClassName"),n=tl("itemClassName"),I=tl("itemContent"),W=tl("computeItemKey"),ia=tl("isSeeking"),sa=yo("scrollHeight"),La=tl("ItemComponent"),Xa=tl("ListComponent"),$a=tl("ScrollSeekPlaceholder"),kb=tl("context"),tb=yo("itemDimensions"),Ob=yo("gap"),ec=tl("log"),Ub=bh(function(pc){sa(pc.parentElement.parentElement.scrollHeight);
var mc=pc.firstChild;mc&&tb(mc.getBoundingClientRect());Ob({row:lj("row-gap",getComputedStyle(pc).rowGap,ec),column:lj("column-gap",getComputedStyle(pc).columnGap,ec)})});return(0,$h.createElement)(Xa,Ve({ref:Ub,className:g},Hg(Xa,kb),{style:{paddingTop:b.offsetTop,paddingBottom:b.offsetBottom}}),b.items.map(function(pc){var mc=W(pc.index,pc.data,kb);return ia?(0,$h.createElement)($a,Ve({key:mc},Hg($a,kb),{index:pc.index,height:b.itemHeight,width:b.itemWidth})):(0,$h.createElement)(La,Ve({},Hg(La,
kb),{className:n,"data-index":pc.index,key:mc}),I(pc.index,pc.data,kb))}))}),uH=gh.memo(function(){var b=tl("HeaderComponent"),g=yo("headerHeight"),n=tl("headerFooterTag"),I=bh(function(ia){return g(Sk(ia,"height"))}),W=tl("context");return b?(0,$h.createElement)(n,{ref:I},(0,$h.createElement)(b,Hg(b,W))):null}),vH=gh.memo(function(){var b=tl("FooterComponent"),g=yo("footerHeight"),n=tl("headerFooterTag"),I=bh(function(ia){return g(Sk(ia,"height"))}),W=tl("context");return b?(0,$h.createElement)(n,
{ref:I},(0,$h.createElement)(b,Hg(b,W))):null}),wH=function(b){b=b.children;var g=(0,$h.useContext)(vA),n=yo("itemDimensions"),I=yo("viewportDimensions"),W=bh(function(ia){I(ia.getBoundingClientRect())});return gh.useEffect(function(){g&&(I({height:g.viewportHeight,width:g.viewportWidth}),n({height:g.itemHeight,width:g.itemWidth}))},[g,I,n]),gh.createElement("div",{style:Lr,ref:W},b)},xH=function(b){b=b.children;var g=(0,$h.useContext)(vA),n=yo("windowViewportRect"),I=yo("itemDimensions"),W=tl("customScrollParent");
W=kj(n,W);return gh.useEffect(function(){g&&(I({height:g.itemHeight,width:g.itemWidth}),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:g.viewportWidth}))},[g,n,I]),gh.createElement("div",{ref:W,style:Lr},b)},jw=zl(sH,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",
listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",
atTopStateChange:"atTopStateChange"}},gh.memo(function(b){b=Ve({},b);var g=tl("useWindowScroll"),n=tl("customScrollParent"),I=n||g?xH:wH;return gh.createElement(n||g?zH:yH,Ve({},b),gh.createElement(I,null,gh.createElement(uH,null),gh.createElement(tH,null),gh.createElement(vH,null)))})),yo=jw.usePublisher,tl=jw.useEmitterValue,AA=jw.useEmitter,yH=ii({usePublisher:yo,useEmitterValue:tl,useEmitter:AA}),zH=Mh({usePublisher:yo,useEmitterValue:tl,useEmitter:AA}),AH=rh(function(){var b=qf(function(Xa){return gh.createElement("td",
null,"Item $",Xa)}),g=qf(null),n=qf(null),I=qf(null),W=qf({}),ia=qf(ig),sa=qf($f),La=function(Xa,$a){return void 0===$a&&($a=null),vh(Jd(W,Ef(function(kb){return kb[Xa]}),ze()),$a)};return{context:g,itemContent:b,fixedHeaderContent:n,fixedFooterContent:I,components:W,computeItemKey:ia,scrollerRef:sa,TableComponent:La("Table","table"),TableHeadComponent:La("TableHead","thead"),TableFooterComponent:La("TableFoot","tfoot"),TableBodyComponent:La("TableBody","tbody"),TableRowComponent:La("TableRow","tr"),
ScrollerComponent:La("Scroller","div"),EmptyPlaceholder:La("EmptyPlaceholder"),ScrollSeekPlaceholder:La("ScrollSeekPlaceholder"),FillerRow:La("FillerRow")}}),BH=rh(function(b){return Ve({},b[0],b[1])},Nh(tA,AH)),CH=function(b){return gh.createElement("tr",null,gh.createElement("td",{style:{height:b.height}}))},DH=function(b){return gh.createElement("tr",null,gh.createElement("td",{style:{height:b.height,padding:0,border:0}}))},EH=gh.memo(function(){var b=Kj("listState"),g=zo("sizeRanges"),n=Kj("useWindowScroll"),
I=Kj("customScrollParent"),W=zo("windowScrollContainerState"),ia=zo("scrollContainerState");n=I||n?W:ia;var sa=Kj("itemContent");W=Kj("trackItemSizes");I=hi(g,Kj("itemSize"),W,n,Kj("log"),void 0,I);g=I.callbackRef;var La=I.ref;I=gh.useState(0);var Xa=I[0],$a=I[1];lw("deviation",function(Vb){Xa!==Vb&&(La.current.style.marginTop=Vb+"px",$a(Vb))});W=Kj("EmptyPlaceholder");var kb=Kj("ScrollSeekPlaceholder")||CH;n=Kj("FillerRow")||DH;I=Kj("TableBodyComponent");var tb=Kj("TableRowComponent"),Ob=Kj("computeItemKey"),
ec=Kj("isSeeking");ia=Kj("paddingTopAddition");var Ub=Kj("firstItemIndex"),pc=Kj("statefulTotalCount"),mc=Kj("context");if(0===pc&&W)return(0,$h.createElement)(W,Hg(W,mc));W=b.offsetTop+ia+Xa;ia=b.offsetBottom;W=0<W?gh.createElement(n,{height:W,key:"padding-top"}):null;n=0<ia?gh.createElement(n,{height:ia,key:"padding-bottom"}):null;b=b.items.map(function(Vb){var uc=Vb.originalIndex,Ic=Ob(uc+Ub,Vb.data,mc);return ec?(0,$h.createElement)(kb,Ve({},Hg(kb,mc),{key:Ic,index:Vb.index,height:Vb.size,type:Vb.type||
"item"})):(0,$h.createElement)(tb,Ve({},Hg(tb,mc),{key:Ic,"data-index":uc,"data-known-size":Vb.size,"data-item-index":Vb.index,style:{overflowAnchor:"none"}}),sa(Vb.index,Vb.data,mc))});return(0,$h.createElement)(I,Ve({ref:g,"data-test-id":"virtuoso-item-list"},Hg(I,mc)),[W].concat(b,[n]))}),FH=function(b){b=b.children;var g=(0,$h.useContext)(ku),n=zo("viewportHeight"),I=zo("fixedItemHeight"),W=bh(kh(n,function(ia){return Sk(ia,"height")}));return gh.useEffect(function(){g&&(n(g.viewportHeight),I(g.itemHeight))},
[g,n,I]),gh.createElement("div",{style:Lr,ref:W,"data-viewport-type":"element"},b)},GH=function(b){b=b.children;var g=(0,$h.useContext)(ku),n=zo("windowViewportRect"),I=zo("fixedItemHeight"),W=Kj("customScrollParent");W=kj(n,W);return gh.useEffect(function(){g&&(I(g.itemHeight),n({offsetTop:0,visibleHeight:g.viewportHeight,visibleWidth:100}))},[g,n,I]),gh.createElement("div",{ref:W,style:Lr,"data-viewport-type":"window"},b)},kw=zl(BH,{required:{},optional:{context:"context",followOutput:"followOutput",
firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",
itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",react18ConcurrentRendering:"react18ConcurrentRendering"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",
endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},gh.memo(function(b){var g=Kj("useWindowScroll"),n=Kj("customScrollParent"),I=zo("fixedHeaderHeight"),W=zo("fixedFooterHeight"),ia=Kj("fixedHeaderContent"),sa=Kj("fixedFooterContent"),La=Kj("context");I=bh(kh(I,function(tb){return Sk(tb,
"height")}));var Xa=bh(kh(W,function(tb){return Sk(tb,"height")}));W=n||g?IH:HH;g=n||g?GH:FH;n=Kj("TableComponent");var $a=Kj("TableHeadComponent"),kb=Kj("TableFooterComponent");ia=ia?gh.createElement($a,Ve({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:I},Hg($a,La)),ia()):null;sa=sa?gh.createElement(kb,Ve({key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:Xa},Hg(kb,La)),sa()):null;return gh.createElement(W,Ve({},b),gh.createElement(g,null,gh.createElement(n,Ve({style:{borderSpacing:0}},
Hg(n,La)),[ia,gh.createElement(EH,{key:"TableBody"}),sa])))})),zo=kw.usePublisher,Kj=kw.useEmitterValue,lw=kw.useEmitter,HH=ii({usePublisher:zo,useEmitterValue:Kj,useEmitter:lw}),IH=Mh({usePublisher:zo,useEmitterValue:Kj,useEmitter:lw}),BA=ac(V(22));ob=V(587);var Ao=ac(V(22)),On=class{static insertTextFirefox(b,g){b.setRangeText(g,b.selectionStart||0,b.selectionEnd||0,"end");b.dispatchEvent(new InputEvent("input",{data:g,inputType:"insertText",isComposing:!1}))}static insert(b,g){const n=b.ownerDocument,
I=n.activeElement;I!==b&&b.focus();n.execCommand("insertText",!1,g)||On.insertTextFirefox(b,g);I===n.body?b.blur():I instanceof HTMLElement&&I!==b&&I.focus()}static set(b,g){b.select();On.insert(b,g)}static getSelection(b){const {selectionStart:g,selectionEnd:n}=b;return b.value.slice(g?g:void 0,n?n:void 0)}static wrapSelection(b,g,n){const {selectionStart:I,selectionEnd:W}=b,ia=On.getSelection(b);On.insert(b,g+ia+(null!=n?n:g));b.selectionStart=(I||0)+g.length;b.selectionEnd=(W||0)+g.length}static replace(b,
g,n){let I=0;b.value.replace(g,(...W)=>{const ia=I+W[W.length-2],sa=W[0].length;b.selectionStart=ia;b.selectionEnd=ia+sa;W="string"===typeof n?n:n(...W);On.insert(b,W);b.selectionStart=ia;I+=W.length-sa;return W})}static findLineEnd(b,g){const n=b.lastIndexOf("\n",g-1)+1;return"\t"!==b.charAt(n)?g:n+1}static indent(b){var g;const {selectionStart:n,selectionEnd:I,value:W}=b;var ia=W.slice(n,I);if((ia=null==(g=/\n/g.exec(ia))?void 0:g.length)&&0<ia){g=W.lastIndexOf("\n",n-1)+1;var sa=b.value.slice(g,
I-1);ia=sa.replace(/^|\n/g,"$\x26  ");sa=ia.length-sa.length;b.setSelectionRange(g,I-1);On.insert(b,ia);b.setSelectionRange(n+1,I+sa)}else On.insert(b,"  ")}static unindent(b){const {selectionStart:g,selectionEnd:n,value:I}=b;var W=I.lastIndexOf("\n",g-1)+1;const ia=On.findLineEnd(I,n);var sa=b.value.slice(W,ia);const La=sa.replace(/(^|\n)(\t| {1,2})/g,"$1");sa=sa.length-La.length;b.setSelectionRange(W,ia);On.insert(b,La);W=(W=/\t| {1,2}/.exec(I.slice(W,g)))?W[0].length:0;b.setSelectionRange(g-W,
Math.max(g-W,n-sa))}};ob=V(587);var nu=b=>b.stopPropagation(),ou=Ao.memo(function({font:b,text:g,color:n,fontStyle:I,fontSize:W,fontWeight:ia,offsetX:sa=0,offsetY:La=0,scale:Xa=1,isEditing:$a=!1,pointerEvents:kb=!1,onBlur:tb,onChange:Ob}){const ec=Ao.useRef(null),Ub=Ao.useRef(!1),pc=Ao.useCallback(Vc=>{Ob(Cr.normalizeText(Vc.currentTarget.value))},[Ob]),mc=Ao.useCallback(Vc=>{if("Escape"!==Vc.key)if("Tab"===Vc.key&&0===g.length)Vc.preventDefault();else{if("Meta"!==Vc.key&&!Vc.metaKey)Vc.stopPropagation();
else if("z"===Vc.key&&Vc.metaKey){document.execCommand(Vc.shiftKey?"redo":"undo",!1);Vc.stopPropagation();Vc.preventDefault();return}"Tab"===Vc.key&&(Vc.preventDefault(),Vc.shiftKey?On.unindent(Vc.currentTarget):On.indent(Vc.currentTarget),null==Ob?void 0:Ob(Cr.normalizeText(Vc.currentTarget.value)))}},[Ob]),Vb=Ao.useCallback(Vc=>{$a&&(Vc.currentTarget.setSelectionRange(0,0),null==tb?void 0:tb())},[tb]),uc=Ao.useCallback(Vc=>{$a&&Ub.current&&document.activeElement===Vc.currentTarget&&Vc.currentTarget.select()},
[$a]),Ic=Ao.useCallback(Vc=>{$a&&Vc.stopPropagation()},[$a]);Ao.useEffect(()=>{$a&&requestAnimationFrame(()=>{Ub.current=!0;const Vc=ec.current;Vc&&(Vc.focus(),Vc.select())})},[$a,tb]);const Rc=Ao.useRef(null);Ao.useLayoutEffect(()=>{const Vc=Rc.current;if(Vc){var Wd=oj(g||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:W,lineHeight:1,fontWeight:ia},4);Vc.style.transform=`scale(${Xa}, ${Xa}) translate(${sa}px, ${La}px)`;Vc.style.width=Wd[0]+1+"px";Vc.style.height=Wd[1]+1+"px"}},[g,ia,W,
La,sa,Xa]);return(0,ob.jsx)("div",{className:"tl-text-label-wrapper",children:(0,ob.jsxs)("div",{className:"tl-text-label-inner-wrapper",ref:Rc,style:{font:b,fontStyle:I,fontSize:W,fontWeight:ia,color:n,pointerEvents:kb?"all":"none",userSelect:$a?"text":"none"},children:[$a?(0,ob.jsx)("textarea",{ref:ec,style:{font:b,color:n,fontStyle:I,fontSize:W,fontWeight:ia},className:"tl-text-label-textarea",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",
autoFocus:!0,placeholder:"Enter text",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:g,color:n,onFocus:uc,onChange:pc,onKeyDown:mc,onBlur:Vb,onPointerDown:Ic,onContextMenu:nu,onCopy:nu,onPaste:nu,onCut:nu}):g,""]})})});ob=V(587);var JH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Nr=class extends kn{constructor(){super(...arguments);Ua(this,"canEdit",!0);Ua(this,"ReactComponent",lf(({events:b,isErasing:g,isBinding:n,isSelected:I,isEditing:W,onEditingEnd:ia})=>{const {props:{size:[sa,
La],stroke:Xa,fill:$a,noFill:kb,strokeWidth:tb,strokeType:Ob,borderRadius:ec,opacity:Ub,label:pc,italic:mc,fontWeight:Vb,fontSize:uc}}=this;var Ic=pc||W?oj(pc,{fontFamily:"var(--ls-font-family)",fontSize:uc,lineHeight:1,fontWeight:Vb},4):[0,0];const Rc=Zd.mul(this.props.size,.5);Ic=Math.max(.5,Math.min(1,sa/Ic[0],La/Ic[1]));const Vc=this.getBounds(),Wd=BA.useMemo(()=>Zd.sub(Rc,Zd.toFixed([Vc.width/2,Vc.height/2])),[Vc,Ic,Rc]),be=BA.useCallback(Ee=>{var Oe;null==(Oe=this.update)?void 0:Oe.call(this,
{label:Ee})},[pc]);return(0,ob.jsxs)("div",Wa(Fa({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-box-container",children:[(0,ob.jsx)(ou,{font:"20px / 1 var(--ls-font-family)",text:pc,color:xf(Xa,"text"),offsetX:Wd[0],offsetY:Wd[1],fontSize:uc,scale:Ic,isEditing:W,onChange:be,onBlur:ia,fontStyle:mc?"italic":"normal",fontWeight:Vb,pointerEvents:!!pc}),(0,ob.jsxs)(co,{opacity:g?.2:Ub,children:[n&&(0,ob.jsx)(zj,{mode:"svg",strokeWidth:tb,size:[sa,La]}),(0,ob.jsx)("rect",{className:I||
!kb?"tl-hitarea-fill":"tl-hitarea-stroke",x:tb/2,y:tb/2,rx:ec,ry:ec,width:Math.max(.01,sa-tb),height:Math.max(.01,La-tb),pointerEvents:"all"}),(0,ob.jsx)("rect",{x:tb/2,y:tb/2,rx:ec,ry:ec,width:Math.max(.01,sa-tb),height:Math.max(.01,La-tb),strokeWidth:tb,stroke:xf(Xa,"stroke"),strokeDasharray:"dashed"===Ob?"8 2":void 0,fill:kb?"none":xf($a,"background")})]})]}))}));Ua(this,"setScaleLevel",b=>Rd(this,null,function*(){this.update({scaleLevel:b,fontSize:JH[null!=b?b:"md"]});this.onResetBounds()}));
Ua(this,"ReactIndicator",lf(()=>{const {props:{size:[b,g],borderRadius:n}}=this;return(0,ob.jsx)("g",{children:(0,ob.jsx)("rect",{width:b,height:g,rx:n,ry:n,fill:"transparent"})})}));Ua(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));void 0!==b.borderRadius&&(b.borderRadius=Math.max(0,b.borderRadius));return Ah(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};Ua(Nr,"id","box");Ua(Nr,"defaultProps",{id:"box",
parentId:"page",type:"box",point:[0,0],size:[100,100],borderRadius:2,stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});nc([Eg],Nr.prototype,"scaleLevel",1);nc([af],Nr.prototype,"setScaleLevel",2);var CA=ac(V(22));ob=V(587);var KH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Or=class extends nv{constructor(){super(...arguments);Ua(this,"canEdit",!0);Ua(this,"ReactComponent",lf(({isSelected:b,isErasing:g,events:n,isEditing:I,onEditingEnd:W})=>
{const {size:[ia,sa],stroke:La,fill:Xa,noFill:$a,strokeWidth:kb,strokeType:tb,opacity:Ob,label:ec,italic:Ub,fontWeight:pc,fontSize:mc}=this.props;var Vb=ec||I?oj(ec,{fontFamily:"var(--ls-font-family)",fontSize:mc,lineHeight:1,fontWeight:pc},4):[0,0];const uc=Zd.mul(this.props.size,.5);Vb=Math.max(.5,Math.min(1,ia/Vb[0],sa/Vb[1]));const Ic=this.getBounds(),Rc=CA.useMemo(()=>Zd.sub(uc,Zd.toFixed([Ic.width/2,Ic.height/2])),[Ic,Vb,uc]),Vc=CA.useCallback(Wd=>{var be;null==(be=this.update)?void 0:be.call(this,
{label:Wd})},[ec]);return(0,ob.jsxs)("div",Wa(Fa({},n),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,ob.jsx)(ou,{font:"18px / 1 var(--ls-font-family)",text:ec,color:xf(La,"text"),offsetX:Rc[0],offsetY:Rc[1],scale:Vb,isEditing:I,onChange:Vc,onBlur:W,fontStyle:Ub?"italic":"normal",fontSize:mc,fontWeight:pc,pointerEvents:!!ec}),(0,ob.jsxs)(co,Wa(Fa({},n),{opacity:g?.2:Ob,children:[(0,ob.jsx)("ellipse",{className:b||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",cx:ia/2,cy:sa/2,rx:Math.max(.01,
(ia-kb)/2),ry:Math.max(.01,(sa-kb)/2)}),(0,ob.jsx)("ellipse",{cx:ia/2,cy:sa/2,rx:Math.max(.01,(ia-kb)/2),ry:Math.max(.01,(sa-kb)/2),strokeWidth:kb,stroke:xf(La,"stroke"),strokeDasharray:"dashed"===tb?"8 2":void 0,fill:$a?"none":xf(Xa,"background")})]}))]}))}));Ua(this,"setScaleLevel",b=>Rd(this,null,function*(){this.update({scaleLevel:b,fontSize:KH[null!=b?b:"md"]});this.onResetBounds()}));Ua(this,"ReactIndicator",lf(()=>{const {size:[b,g]}=this.props;return(0,ob.jsx)("g",{children:(0,ob.jsx)("ellipse",
{cx:b/2,cy:g/2,rx:b/2,ry:g/2,strokeWidth:2,fill:"transparent"})})}));Ua(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return Ah(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {size:[g,n],stroke:I,fill:W,noFill:ia,strokeWidth:sa,strokeType:La,opacity:Xa}=this.props;return(0,ob.jsxs)("g",{opacity:Xa,children:[(0,ob.jsx)("ellipse",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",cx:g/
2,cy:n/2,rx:Math.max(.01,(g-sa)/2),ry:Math.max(.01,(n-sa)/2)}),(0,ob.jsx)("ellipse",{cx:g/2,cy:n/2,rx:Math.max(.01,(g-sa)/2),ry:Math.max(.01,(n-sa)/2),strokeWidth:sa,stroke:xf(I,"stroke"),strokeDasharray:"dashed"===La?"8 2":void 0,fill:ia?"none":xf(W,"background")})]})}};Ua(Or,"id","ellipse");Ua(Or,"defaultProps",{id:"ellipse",parentId:"page",type:"ellipse",point:[0,0],size:[100,100],stroke:"",fill:"",noFill:!1,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});
nc([Eg],Or.prototype,"scaleLevel",1);nc([af],Or.prototype,"setScaleLevel",2);ob=V(587);var mw=class extends Gt{constructor(){super(...arguments);Ua(this,"ReactComponent",lf(({events:b})=>{const g=this.getBounds(),n=rg(),I=n.selectedShapesArray.some(ia=>n.shapesInGroups([this]).includes(ia)),W=this.ReactIndicator;return(0,ob.jsxs)(co,Wa(Fa({},b),{children:[(0,ob.jsx)("rect",{className:"tl-hitarea-fill",x:1,y:1,width:Math.max(.01,g.width-2),height:Math.max(.01,g.height-2),pointerEvents:"all"}),I&&(0,ob.jsx)("g",
{stroke:"var(--color-selectedFill)",children:(0,ob.jsx)(W,{})})]}))}));Ua(this,"ReactIndicator",lf(()=>{const b=this.getBounds();return(0,ob.jsx)("rect",{strokeDasharray:"8 2",x:-8,y:-8,rx:4,ry:4,width:b.width+16,height:b.height+16,fill:"transparent"})}))}};Ua(mw,"id","group");Ua(mw,"defaultProps",{id:"group",type:"group",parentId:"page",point:[0,0],size:[0,0],children:[]});ob=V(587);var LH={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},Rq=class extends mr{constructor(b={}){super(b);Ua(this,"ReactComponent",
lf(({events:g,isErasing:n})=>{const {pointsPath:I,props:{stroke:W,strokeWidth:ia,opacity:sa}}=this;return(0,ob.jsx)(co,Wa(Fa({},g),{opacity:n?.2:1,children:(0,ob.jsx)("path",{d:I,strokeWidth:16*ia,stroke:xf(W,"stroke"),fill:"none",pointerEvents:"all",strokeLinejoin:"round",strokeLinecap:"round",opacity:sa})}))}));Ua(this,"setScaleLevel",g=>Rd(this,null,function*(){this.update({scaleLevel:g,strokeWidth:LH[null!=g?g:"md"]});this.onResetBounds()}));Ua(this,"ReactIndicator",lf(()=>{const {pointsPath:g}=
this;return(0,ob.jsx)("path",{d:g,fill:"none"})}));Ua(this,"validateProps",g=>{g=Ah(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});og(this)}get pointsPath(){const {points:b}=this.props;return Gl.getCurvedPathForPoints(b)}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:n,opacity:I}}=this;return(0,ob.jsx)("path",{d:b,strokeWidth:16*n,stroke:xf(g,"stroke"),fill:"none",pointerEvents:"all",
strokeLinejoin:"round",strokeLinecap:"round",opacity:I})}};Ua(Rq,"id","highlighter");Ua(Rq,"defaultProps",{id:"highlighter",parentId:"page",type:"highlighter",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:.5});nc([Eg],Rq.prototype,"pointsPath",1);nc([Eg],Rq.prototype,"scaleLevel",1);nc([af],Rq.prototype,"setScaleLevel",2);var nw=ac(V(22));ob=V(587);var ow={xs:.5,sm:.8,md:1,lg:1.5,xl:2,xxl:3},Qp=class extends kn{constructor(){super(...arguments);
Ua(this,"canChangeAspectRatio",!0);Ua(this,"canFlip",!1);Ua(this,"canEdit",!0);Ua(this,"htmlAnchorRef",nw.createRef());Ua(this,"setScaleLevel",b=>Rd(this,null,function*(){var g;const n=Zd.mul(this.props.size,ow[null!=b?b:"md"]/ow[null!=(g=this.props.scaleLevel)?g:"md"]);this.update({scaleLevel:b});yield Vj();this.update({size:n})}));Ua(this,"onResetBounds",b=>{var g;if(this.htmlAnchorRef.current){const n=this.htmlAnchorRef.current.getBoundingClientRect(),[I,W]=Zd.div([n.width,n.height],null!=(g=null==
b?void 0:b.zoom)?g:1);this.update({size:[Math.max(Math.min(I||400,1400),10),Math.max(Math.min(W||400,1400),10)]})}return this});Ua(this,"ReactComponent",lf(({events:b,isErasing:g,isEditing:n})=>{const {props:{html:I,scaleLevel:W}}=this,ia=il(),sa=rg(),La=sa.selectedIds.has(this.id),Xa=ia||La&&!n||"select"!==sa.selectedTool.id,$a=nw.useCallback(tb=>{Xa||tb.stopPropagation()},[Xa]),kb=ow[null!=W?W:"md"];nw.useEffect(()=>{0===this.props.size[1]&&(this.onResetBounds({zoom:sa.viewport.camera.zoom}),sa.persist(!0))},
[]);return(0,ob.jsx)(bo,Wa(Fa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,ob.jsx)("div",{onWheelCapture:$a,onPointerDown:$a,onPointerUp:$a,className:"tl-html-container",style:{pointerEvents:ia||!n&&!La?"none":"all",overflow:n?"auto":"hidden",width:`calc(100% / ${kb})`,height:`calc(100% / ${kb})`,transform:`scale(${kb})`},children:(0,ob.jsx)("div",{ref:this.htmlAnchorRef,className:"tl-html-anchor",dangerouslySetInnerHTML:{__html:I.trim()}})})}))}));Ua(this,"ReactIndicator",
lf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent"})}));Ua(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[1],1));return Ah(this,b)})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}};Ua(Qp,"id","html");Ua(Qp,"defaultProps",{id:"html",type:"html",parentId:"page",point:[0,0],size:[600,0],html:""});nc([Eg],Qp.prototype,"scaleLevel",1);nc([af],Qp.prototype,"setScaleLevel",2);var DA=
ac(V(22));ob=V(587);var Sq=class extends kn{constructor(){super(...arguments);Ua(this,"frameRef",DA.createRef());Ua(this,"canEdit",!0);Ua(this,"onIFrameSourceChange",b=>{this.update({url:b})});Ua(this,"reload",()=>{var b,g;this.frameRef.current&&(this.frameRef.current.src=null==(g=null==(b=this.frameRef)?void 0:b.current)?void 0:g.src)});Ua(this,"ReactComponent",lf(({events:b,isErasing:g,isEditing:n})=>{DA.useRef(null);return(0,ob.jsx)(bo,Wa(Fa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?
.2:1}},b),{children:(0,ob.jsx)("div",{className:"tl-iframe-container",style:{pointerEvents:n?"all":"none",userSelect:"none"},children:this.props.url&&(0,ob.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,ob.jsx)("iframe",{ref:this.frameRef,className:"absolute inset-0 w-full h-full m-0",width:"100%",height:"100%",src:`${this.props.url}`,frameBorder:"0",sandbox:"allow-scripts allow-same-origin"})})})}))}));Ua(this,"ReactIndicator",lf(()=>{const {props:{size:[b,g]}}=
this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}))}};Ua(Sq,"id","iframe");Ua(Sq,"defaultProps",{id:"iframe",type:"iframe",parentId:"page",point:[0,0],size:[853,480],url:""});nc([af],Sq.prototype,"onIFrameSourceChange",2);nc([af],Sq.prototype,"reload",2);var MH=ac(V(22));ob=V(587);var pu=class extends ov{constructor(){super(...arguments);Ua(this,"ReactComponent",lf(({events:b,isErasing:g,isBinding:n,asset:I})=>{const {props:{opacity:W,objectFit:ia,clipping:sa,size:[La,
Xa]}}=this,[$a,kb,tb,Ob]=Array.isArray(sa)?sa:[sa,sa,sa,sa],{handlers:ec}=MH.useContext(Vm);return(0,ob.jsxs)(bo,Wa(Fa({},b),{opacity:g?.2:W,children:[n&&(0,ob.jsx)(zj,{mode:"html",strokeWidth:4,size:[La,Xa]}),(0,ob.jsx)("div",{"data-asset-loaded":!!I,className:"tl-image-shape-container",children:I?(0,ob.jsx)("img",{src:ec?ec.makeAssetUrl(I.src):I.src,draggable:!1,style:{position:"relative",top:-$a,left:-Ob,width:La+(Ob-kb),height:Xa+($a-tb),objectFit:ia}}):"Asset is missing"})]}))}));Ua(this,"ReactIndicator",
lf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}getShapeSVGJsx({assets:b}){var g,n;const I=this.getBounds(),{assetId:W,clipping:ia}=this.props;if(b=b.find(sa=>sa.id===W)){Array.isArray(ia);const sa=null==(n=null==(g=window.logseq)?void 0:g.api)?void 0:n.make_asset_url;return(0,ob.jsx)("image",{width:I.width,height:I.height,href:sa?sa(b.src):b.src})}return super.getShapeSVGJsx({})}};Ua(pu,"id","image");Ua(pu,"defaultProps",{id:"image1",parentId:"page",
type:"image",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,objectFit:"fill",isAspectRatioLocked:!0});var pw=ac(V(22)),NH=ac(V(22));ob=V(587);ob=V(587);var EA={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},OH=NH.memo(function({style:b,start:g,end:n,decorationStart:I,decorationEnd:W,scaleLevel:ia}){const sa=Zd.dist(g,n);if(2>sa)return null;const {strokeWidth:La}=b,Xa=1+La*EA[null!=ia?ia:"md"]/10,$a="M"+Zd.toFixed(g)+"L"+Zd.toFixed(n);ia=Math.min(sa/3,La*EA[null!=ia?ia:"md"]);I=I?gm(g,n,ia):null;
W=W?gm(n,g,ia):null;return(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("path",{className:"tl-stroke-hitarea",d:$a}),(0,ob.jsx)("path",{d:$a,strokeWidth:Xa,stroke:b.stroke,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"dashed"===b.strokeType?"8 4":void 0,pointerEvents:"stroke"}),I&&(0,ob.jsx)(Fk,{left:I.left,middle:g,right:I.right,stroke:b.stroke,strokeWidth:Xa}),W&&(0,ob.jsx)(Fk,{left:W.left,middle:n,right:W.right,stroke:b.stroke,strokeWidth:Xa})]})});ob=V(587);ob=V(587);var PH={xs:10,
sm:16,md:20,lg:32,xl:48,xxl:60},Pr=class extends ws{constructor(){super(...arguments);Ua(this,"hideSelection",!0);Ua(this,"canEdit",!0);Ua(this,"ReactComponent",lf(({events:b,isErasing:g,isEditing:n,onEditingEnd:I})=>{const {stroke:W,handles:{start:ia,end:sa},opacity:La,label:Xa,italic:$a,fontWeight:kb,fontSize:tb,id:Ob}=this.props,ec=Xa||n?oj(Xa||"Enter text",{fontFamily:"var(--ls-font-family)",fontSize:tb,lineHeight:1,fontWeight:kb},6):[0,0],Ub=Zd.med(ia.point,sa.point);var pc=Zd.dist(ia.point,
sa.point);pc=Math.max(.5,Math.min(1,Math.max(pc/(ec[1]+128),pc/(ec[0]+128))));const mc=this.getBounds(),Vb=pw.useMemo(()=>Zd.sub(Ub,Zd.toFixed([mc.width/2,mc.height/2])),[mc,pc,Ub]),uc=pw.useCallback(Ic=>{var Rc;null==(Rc=this.update)?void 0:Rc.call(this,{label:Ic})},[Xa]);return(0,ob.jsxs)("div",Wa(Fa({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},className:"tl-line-container",children:[(0,ob.jsx)(ou,{font:"20px / 1 var(--ls-font-family)",text:Xa,fontSize:tb,color:xf(W,"text"),offsetX:Vb[0],
offsetY:Vb[1],scale:pc,isEditing:n,onChange:uc,onBlur:I,fontStyle:$a?"italic":"normal",fontWeight:kb,pointerEvents:!!Xa}),(0,ob.jsxs)(co,{opacity:g?.2:La,id:Ob+"_svg",children:[(0,ob.jsx)(jh,{id:Ob,bounds:mc,labelSize:ec,offset:Vb,scale:pc}),(0,ob.jsx)("g",{pointerEvents:"none",mask:Xa||n?`url(#${Ob}_clip)`:"",children:this.getShapeSVGJsx({preview:!1})})]})]}))}));Ua(this,"setScaleLevel",b=>Rd(this,null,function*(){this.update({scaleLevel:b,fontSize:PH[null!=b?b:"md"]});this.onResetBounds()}));Ua(this,
"ReactIndicator",lf(({isEditing:b})=>{const {id:g,decorations:n,label:I,strokeWidth:W,fontSize:ia,fontWeight:sa,handles:{start:La,end:Xa}}=this.props,$a=this.getBounds(),kb=I||b?oj(I,{fontFamily:"var(--ls-font-family)",fontSize:ia,lineHeight:1,fontWeight:sa},6):[0,0],tb=Zd.med(La.point,Xa.point);var Ob=Zd.dist(La.point,Xa.point);Ob=Math.max(.5,Math.min(1,Math.max(Ob/(kb[1]+128),Ob/(kb[0]+128))));const ec=pw.useMemo(()=>Zd.sub(tb,Zd.toFixed([$a.width/2,$a.height/2])),[$a,Ob,tb]);return(0,ob.jsxs)("g",
{children:[(0,ob.jsx)("path",{mask:I?`url(#${g}_clip)`:"",d:tn({strokeWidth:W},La.point,Xa.point,null==n?void 0:n.start,null==n?void 0:n.end)}),I&&!b&&(0,ob.jsx)("rect",{x:$a.width/2-kb[0]/2*Ob+ec[0],y:$a.height/2-kb[1]/2*Ob+ec[1],width:kb[0]*Ob,height:kb[1]*Ob,rx:4*Ob,ry:4*Ob,fill:"transparent"})]})}));Ua(this,"validateProps",b=>Ah(this,b))}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx({preview:b}){const {stroke:g,fill:n,strokeWidth:I,strokeType:W,decorations:ia,
label:sa,scaleLevel:La,handles:{start:Xa,end:$a}}=this.props,kb=Zd.med(Xa.point,$a.point);return(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)(OH,{style:{stroke:xf(g,"text"),fill:n,strokeWidth:I,strokeType:W},scaleLevel:La,start:Xa.point,end:$a.point,decorationStart:null==ia?void 0:ia.start,decorationEnd:null==ia?void 0:ia.end}),b&&(0,ob.jsx)(ob.Fragment,{children:(0,ob.jsx)("text",{style:{transformOrigin:"top left"},fontFamily:"Inter",fontSize:20,transform:`translate(${kb[0]}, ${kb[1]})`,textAnchor:"middle",
fill:xf(g,"text"),stroke:xf(g,"text"),children:sa})})]})}};Ua(Pr,"id","line");Ua(Pr,"defaultProps",{id:"line",parentId:"page",type:"line",point:[0,0],handles:{start:{id:"start",canBind:!0,point:[0,0]},end:{id:"end",canBind:!0,point:[1,1]}},stroke:"",fill:"",noFill:!0,fontWeight:400,fontSize:20,italic:!1,strokeType:"line",strokeWidth:1,opacity:1,decorations:{end:"arrow"},label:""});nc([Eg],Pr.prototype,"scaleLevel",1);nc([af],Pr.prototype,"setScaleLevel",2);var Cn=ac(V(22));ob=V(587);var Xs={xs:.5,
sm:.8,md:1,lg:1.5,xl:2,xxl:3},QH=lf(({type:b,fill:g,opacity:n,children:I})=>{g="var(--ls-secondary-background-color)"!==g?xf(g,"background"):"var(--ls-tertiary-background-color)";return(0,ob.jsxs)("div",{className:`tl-logseq-portal-header tl-logseq-portal-header-${"P"===b?"page":"block"}`,children:[(0,ob.jsx)("div",{className:"absolute inset-0 tl-logseq-portal-header-bg",style:{opacity:n,background:"P"===b?g:`linear-gradient(0deg, transparent, ${g}`}}),(0,ob.jsx)("div",{className:"relative",children:I})]})}),
ul=class extends kn{constructor(b={}){var g;super(b);Ua(this,"hideRotateHandle",!0);Ua(this,"canChangeAspectRatio",!0);Ua(this,"canFlip",!0);Ua(this,"canEdit",!0);Ua(this,"persist",null);Ua(this,"initialHeightCalculated",!0);Ua(this,"getInnerHeight",null);Ua(this,"toggleCollapsed",()=>Rd(this,null,function*(){var n;const I=!this.collapsed;if("B"===this.props.blockType){if(this.update({compact:I}),this.canResize[1]=!I,!I)this.onResetBounds()}else{const W=this.props.size[1];this.canResize[1]=!I;this.update({isAutoResizing:!I,
collapsed:I,size:[this.props.size[0],I?this.getHeaderHeight():this.props.collapsedHeight],collapsedHeight:I?W:this.props.collapsedHeight})}null==(n=this.persist)?void 0:n.call(this)}));Ua(this,"setScaleLevel",n=>Rd(this,null,function*(){var I;const W=Zd.mul(this.props.size,Xs[null!=n?n:"md"]/Xs[null!=(I=this.props.scaleLevel)?I:"md"]);this.update({scaleLevel:n});yield Vj();this.update({size:W})}));Ua(this,"onResetBounds",n=>{n=this.getAutoResizeHeight();null!==n&&1<Math.abs(n-this.props.size[1])&&
(this.update({size:[this.props.size[0],n]}),this.initialHeightCalculated=!0);return this});Ua(this,"onResize",(n,I)=>{var W;const {bounds:ia,rotation:sa,scale:[La,Xa]}=I;n=[...this.scale];0>La&&(n[0]*=-1);0>Xa&&(n[1]*=-1);I=ia.height;this.props.isAutoResizing&&(I=null!=(W=this.getAutoResizeHeight())?W:I);return this.update({point:[ia.minX,ia.minY],size:[Math.max(1,ia.width),Math.max(1,I)],scale:n,rotation:sa})});Ua(this,"PortalComponent",lf(({})=>{const {props:{pageId:n,fill:I,opacity:W}}=this,{renderers:ia}=
Cn.useContext(Vm),sa=rg(),La=Cn.useRef(null),[,Xa]=this.useComponentSize(La,this.props.compact?".tl-logseq-cp-container \x3e .single-block":".tl-logseq-cp-container \x3e .page");if(null==ia||!ia.Page)return null;const {Page:$a,Block:kb}=ia,[tb,Ob]=Cn.useState(!1);Cn.useEffect(()=>{var ec,Ub;if(this.props.isAutoResizing){const pc=(null!=(Ub=null==(ec=this.getInnerHeight)?void 0:ec.call(this))?Ub:Xa)+this.getHeaderHeight();Xa&&1<Math.abs(pc-this.props.size[1])&&(this.update({size:[this.props.size[0],
pc]}),tb&&sa.persist(!0))}},[Xa,this.props.isAutoResizing]);Cn.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();sa.persist(!0)})},[this.initialHeightCalculated]);Cn.useEffect(()=>{setTimeout(function(){Ob(!0)})},[]);return(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("div",{className:"absolute inset-0 tl-logseq-cp-container-bg",style:{textRendering:.5>sa.viewport.camera.zoom?"optimizeSpeed":"auto",background:I&&"var(--ls-secondary-background-color)"!==I?`var(--ls-highlight-color-${I})`:
"var(--ls-secondary-background-color)",opacity:W}}),(0,ob.jsx)("div",{ref:La,className:"relative tl-logseq-cp-container",style:{overflow:this.props.isAutoResizing?"visible":"auto"},children:(tb||!this.initialHeightCalculated)&&("B"===this.props.blockType&&this.props.compact?(0,ob.jsx)(kb,{blockId:n}):(0,ob.jsx)($a,{pageName:n}))})]})}));Ua(this,"ReactComponent",lf(n=>{var I;const {events:W,isErasing:ia,isEditing:sa,isBinding:La}=n,{props:{opacity:Xa,pageId:$a,fill:kb,scaleLevel:tb,strokeWidth:Ob,
size:ec}}=this,Ub=rg(),{renderers:pc,handlers:mc}=Cn.useContext(Vm);this.persist=()=>Ub.persist();const Vb=il(),uc=Ub.selectedIds.has(this.id)&&1===Ub.selectedIds.size,Ic=Ub.isIn("logseq-portal.creating")&&!$a,Rc=(Vb||uc&&!sa||"select"!==Ub.selectedTool.id)&&!Ic,Vc=Cn.useCallback(gd=>{Rc||gd.stopPropagation()},[Rc]),Wd=1===Ub.selectedShapesArray.length&&Ub.selectedShapesArray.some(gd=>"logseq-portal"===gd.type&&gd.props.id!==this.props.id&&$a&&gd.props.pageId===$a),be=Xs[null!=tb?tb:"md"];Cn.useEffect(()=>
this.props.collapsed&&sa?(this.update({size:[this.props.size[0],this.props.collapsedHeight]}),()=>{this.update({size:[this.props.size[0],this.getHeaderHeight()]})}):()=>{},[sa,this.props.collapsed]);Cn.useEffect(()=>{if(Ic){const gd=[Ub.viewport.bounds.width,Ub.viewport.bounds.height],kd=Ub.viewport.getScreenPoint([this.bounds.minX,this.bounds.minY]);(kd[0]>gd[0]-400||kd[1]>gd[1]-240||1.5<Ub.viewport.camera.zoom||.5>Ub.viewport.camera.zoom)&&Ub.viewport.zoomToBounds(Wa(Fa({},this.bounds),{minY:this.bounds.maxY+
25}))}},[Ub.viewport.bounds.height.toFixed(2)]);const Ee=Cn.useCallback(gd=>{this.initialHeightCalculated=!1;const kd=Th(gd)?"B":"P";this.update({pageId:gd,size:[400,320],blockType:kd,compact:"B"===kd});Ub.selectTool("select");Ub.history.resume();Ub.history.persist()},[]),Oe=this.PortalComponent;var rf=Cn.useMemo(()=>{var gd;if($a&&"B"===this.props.blockType)return null==(gd=null==mc?void 0:mc.queryBlockByUUID($a))?void 0:gd.content},[null==mc?void 0:mc.queryBlockByUUID,$a]);rf="B"===this.props.blockType&&
"string"!==typeof rf;const nf=(!this.props.collapsed||sa)&&!rf;if(null==pc||!pc.Page)return null;const {Breadcrumb:cf,PageName:Ie}=pc,Bd={width:`calc(100% / ${be})`,height:`calc(100% / ${be})`,opacity:ia?.2:1};1!==be&&(Bd.transform=`scale(${be})`);return(0,ob.jsxs)(bo,Wa(Fa({style:{pointerEvents:"all"}},W),{children:[La&&(0,ob.jsx)(zj,{mode:"html",strokeWidth:Ob,size:ec}),(0,ob.jsx)("div",{"data-inner-events":!Rc,onWheelCapture:Vc,onPointerDown:Vc,onPointerUp:Vc,style:{width:"100%",height:"100%",
pointerEvents:Vb||!sa&&!uc?"none":"all"},children:Ic?(0,ob.jsx)(TA,{onChange:Ee,onAddBlock:gd=>{setTimeout(()=>{var kd,md,Cd;Ub.api.editShape(this);null==(Cd=null==(md=null==(kd=window.logseq)?void 0:kd.api)?void 0:md.edit_block)?void 0:Cd.call(md,gd)})},placeholder:"Create or search your graph..."}):(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)("div",{className:"tl-logseq-portal-container","data-collapsed":this.collapsed,"data-page-id":$a,"data-portal-selected":Wd,"data-editing":sa,style:Bd,children:[!this.props.compact&&
!rf&&(0,ob.jsx)(QH,{type:null!=(I=this.props.blockType)?I:"P",fill:kb,opacity:Xa,children:"P"===this.props.blockType?(0,ob.jsx)(Ie,{pageName:$a}):(0,ob.jsx)(cf,{blockId:$a})}),rf&&(0,ob.jsx)("div",{className:"tl-target-not-found",children:"Target not found"}),nf&&(0,ob.jsx)(Oe,Fa({},n))]}),(0,ob.jsx)(rz,{active:!!this.collapsed,style:{opacity:uc?1:0},icon:"B"===this.props.blockType?"block":"page",onClick:this.toggleCollapsed,otherIcon:"whiteboard-element"})]})})]}))}));Ua(this,"ReactIndicator",lf(()=>
{const n=this.getBounds();return(0,ob.jsx)("rect",{width:n.width,height:n.height,fill:"transparent",rx:8,ry:8})}));Ua(this,"validateProps",n=>{var I;if(void 0!==n.size){const W=Xs[null!=(I=this.props.scaleLevel)?I:"md"];n.size[0]=Math.max(n.size[0],60*W);n.size[1]=Math.max(n.size[1],40*W)}return Ah(this,n)});og(this);b.collapsed&&Object.assign(this.canResize,[!0,!1]);0===(null==(g=b.size)?void 0:g[1])&&(this.initialHeightCalculated=!1)}static isPageOrBlock(b){return b?/^\(\(.*\)\)$/.test(b)&&40===
b.length?"B":"P":!1}get collapsed(){return"B"===this.props.blockType?this.props.compact:this.props.collapsed}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}useComponentSize(b,g=""){const [n,I]=Cn.useState([0,0]),W=rg();Cn.useEffect(()=>{if(null==b?0:b.current){const ia=g?b.current.querySelector(g):b.current;if(ia){const sa=()=>{const {width:Xa,height:$a}=ia.getBoundingClientRect(),kb=Zd.div([Xa,$a],W.viewport.camera.zoom);I(kb);return kb};sa();this.getInnerHeight=()=>sa()[1];
const La=new ResizeObserver(()=>{sa()});La.observe(ia);return()=>{La.disconnect()}}}return()=>{}},[b,g]);return n}getHeaderHeight(){var b;const g=Xs[null!=(b=this.props.scaleLevel)?b:"md"];return this.props.compact?0:40*g}getAutoResizeHeight(){return this.getInnerHeight?this.getHeaderHeight()+this.getInnerHeight():null}getShapeSVGJsx({}){var b,g,n;const I=this.getBounds();return(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?
`var(--ls-highlight-color-${this.props.fill})`:"var(--ls-secondary-background-color)",stroke:xf(this.props.fill,"background"),strokeWidth:null!=(b=this.props.strokeWidth)?b:2,fillOpacity:null!=(g=this.props.opacity)?g:.2,width:I.width,rx:8,ry:8,height:I.height}),!this.props.compact&&(0,ob.jsx)("rect",{fill:this.props.fill&&"var(--ls-secondary-background-color)"!==this.props.fill?xf(this.props.fill,"background"):"var(--ls-tertiary-background-color)",fillOpacity:null!=(n=this.props.opacity)?n:.2,x:1,
y:1,width:I.width-2,height:38,rx:8,ry:8}),(0,ob.jsx)("text",{style:{transformOrigin:"top left"},transform:`translate(${I.width/2}, ${10+I.height/2})`,textAnchor:"middle",fontFamily:"var(--ls-font-family)",fontSize:"32",fill:"var(--ls-secondary-text-color)",stroke:"var(--ls-secondary-text-color)",children:"P"===this.props.blockType?this.props.pageId:""})]})}};Ua(ul,"id","logseq-portal");Ua(ul,"defaultSearchQuery","");Ua(ul,"defaultSearchFilter",null);Ua(ul,"defaultProps",{id:"logseq-portal",type:"logseq-portal",
parentId:"page",point:[0,0],size:[400,50],collapsedHeight:0,stroke:"",fill:"",noFill:!1,borderRadius:8,strokeWidth:2,strokeType:"line",opacity:1,pageId:"",collapsed:!1,compact:!1,scaleLevel:"md",isAutoResizing:!0});nc([Eg],ul.prototype,"collapsed",1);nc([af],ul.prototype,"toggleCollapsed",2);nc([Eg],ul.prototype,"scaleLevel",1);nc([af],ul.prototype,"setScaleLevel",2);var {min:Qr,PI:RH}=Math,Ys=RH+1E-4;ob=V(587);var SH={xs:1,sm:1.6,md:2,lg:3.2,xl:4.8,xxl:6},TH={easing:b=>Math.sin(b*Math.PI/2),simulatePressure:!0},
UH={easing:b=>b*b,simulatePressure:!1},Tq=class extends mr{constructor(b={}){super(b);Ua(this,"ReactComponent",lf(({events:g,isErasing:n})=>{const {props:{opacity:I}}=this;return(0,ob.jsx)(co,Wa(Fa({},g),{opacity:n?.2:I,children:this.getShapeSVGJsx()}))}));Ua(this,"setScaleLevel",g=>Rd(this,null,function*(){this.update({scaleLevel:g,strokeWidth:SH[null!=g?g:"md"]});this.onResetBounds()}));Ua(this,"ReactIndicator",lf(()=>{const {pointsPath:g}=this;return(0,ob.jsx)("path",{d:g})}));Ua(this,"validateProps",
g=>{g=Ah(this,g);void 0!==g.strokeWidth&&(g.strokeWidth=Math.max(g.strokeWidth,1));return g});og(this)}get pointsPath(){var b=this.props;if(2>b.points.length)var g="";else g=Wa(Fa({size:1+1.5*b.strokeWidth,thinning:.65,streamline:.65,smoothing:.65},.5===b.points[1][2]?TH:UH),{last:b.isComplete}),b=lo(b.points,g),g=Gl.getSvgPathFromStroke(Zo(b,g));return g}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(){const {pointsPath:b,props:{stroke:g,strokeWidth:n,strokeType:I}}=
this;return(0,ob.jsx)("path",{pointerEvents:"all",d:b,strokeWidth:n/2,strokeLinejoin:"round",strokeLinecap:"round",stroke:xf(g,"text"),fill:xf(g,"text"),strokeDasharray:"dashed"===I?"12 4":void 0})}};Ua(Tq,"id","pencil");Ua(Tq,"defaultProps",{id:"pencil",parentId:"page",type:"pencil",point:[0,0],points:[],isComplete:!1,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});nc([Eg],Tq.prototype,"pointsPath",1);nc([Eg],Tq.prototype,"scaleLevel",1);nc([af],Tq.prototype,"setScaleLevel",
2);var FA=ac(V(22));ob=V(587);var VH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Rr=class extends Ap{constructor(){super(...arguments);Ua(this,"canEdit",!0);Ua(this,"ReactComponent",lf(({events:b,isErasing:g,isSelected:n,isEditing:I,onEditingEnd:W})=>{const {offset:[ia,sa],props:{stroke:La,fill:Xa,noFill:$a,strokeWidth:kb,opacity:tb,strokeType:Ob,label:ec,italic:Ub,fontWeight:pc,fontSize:mc}}=this,Vb=this.getVertices(kb/2).join();var uc=ec||I?oj(ec,{fontFamily:"var(--ls-font-family)",fontSize:mc,lineHeight:1,
fontWeight:pc},4):[0,0];const Ic=[this.props.size[0]/2,2*this.props.size[1]/3];uc=Math.max(.5,Math.min(1,this.props.size[0]/(2*uc[0]),this.props.size[1]/(2*uc[1])));const Rc=this.getBounds(),Vc=FA.useMemo(()=>Zd.sub(Ic,Zd.toFixed([Rc.width/2,Rc.height/2])),[Rc,uc,Ic]),Wd=FA.useCallback(be=>{var Ee;null==(Ee=this.update)?void 0:Ee.call(this,{label:be})},[ec]);return(0,ob.jsxs)("div",Wa(Fa({},b),{style:{width:"100%",height:"100%",overflow:"hidden"},children:[(0,ob.jsx)(ou,{font:"20px / 1 var(--ls-font-family)",
text:ec,fontSize:mc,color:xf(La,"text"),offsetX:Vc[0],offsetY:Vc[1]/uc,scale:uc,isEditing:I,onChange:Wd,onBlur:W,fontStyle:Ub?"italic":"normal",fontWeight:pc,pointerEvents:!!ec}),(0,ob.jsx)(co,{opacity:g?.2:tb,children:(0,ob.jsxs)("g",{transform:`translate(${ia}, ${sa})`,children:[(0,ob.jsx)("polygon",{className:n||!$a?"tl-hitarea-fill":"tl-hitarea-stroke",points:Vb}),(0,ob.jsx)("polygon",{points:Vb,stroke:xf(La,"stroke"),fill:$a?"none":xf(Xa,"background"),strokeWidth:kb,rx:2,ry:2,strokeLinejoin:"round",
strokeDasharray:"dashed"===Ob?"8 2":void 0})]})})]}))}));Ua(this,"setScaleLevel",b=>Rd(this,null,function*(){this.update({scaleLevel:b,fontSize:VH[null!=b?b:"md"]});this.onResetBounds()}));Ua(this,"ReactIndicator",lf(()=>{const {offset:[b,g],props:{strokeWidth:n}}=this;return(0,ob.jsx)("g",{children:(0,ob.jsx)("polygon",{transform:`translate(${b}, ${g})`,points:this.getVertices(n/2).join()})})}));Ua(this,"validateProps",b=>{void 0!==b.sides&&(b.sides=Math.max(b.sides,3));return Ah(this,b)})}get scaleLevel(){var b;
return null!=(b=this.props.scaleLevel)?b:"md"}getShapeSVGJsx(b){const {offset:[g,n],props:{stroke:I,fill:W,noFill:ia,strokeWidth:sa,opacity:La,strokeType:Xa}}=this;b=this.getVertices(sa/2).join();return(0,ob.jsxs)("g",{transform:`translate(${g}, ${n})`,opacity:La,children:[(0,ob.jsx)("polygon",{className:ia?"tl-hitarea-stroke":"tl-hitarea-fill",points:b}),(0,ob.jsx)("polygon",{points:b,stroke:xf(I,"stroke"),fill:ia?"none":xf(W,"background"),strokeWidth:sa,rx:2,ry:2,strokeLinejoin:"round",strokeDasharray:"dashed"===
Xa?"8 2":void 0})]})}};Ua(Rr,"id","polygon");Ua(Rr,"defaultProps",{id:"polygon",parentId:"page",type:"polygon",point:[0,0],size:[100,100],sides:3,ratio:1,isFlippedY:!1,stroke:"",fill:"",fontWeight:400,fontSize:20,italic:!1,noFill:!1,strokeType:"line",strokeWidth:2,opacity:1,label:""});nc([Eg],Rr.prototype,"scaleLevel",1);nc([af],Rr.prototype,"setScaleLevel",2);var Wo=ac(V(22));ob=V(587);var WH={xs:10,sm:16,md:20,lg:32,xl:48,xxl:60},Sr=class extends lv{constructor(){super(...arguments);Ua(this,"ReactComponent",
lf(({events:b,isErasing:g,isEditing:n,onEditingEnd:I})=>{const {props:{opacity:W,fontFamily:ia,fontSize:sa,fontWeight:La,italic:Xa,lineHeight:$a,text:kb,stroke:tb,padding:Ob}}=this,ec=Wo.useRef(null),Ub=Wo.useRef(!1),pc=Wo.useRef(null),mc=Wo.useCallback(Vc=>{const {isSizeLocked:Wd}=this.props;Vc=Cr.normalizeText(Vc.currentTarget.value);Wd?this.update({text:Vc,size:this.getAutoSizedBoundingBox({text:Vc})}):this.update({text:Vc})},[]),Vb=Wo.useCallback(Vc=>{if("Escape"!==Vc.key)if("Tab"===Vc.key&&0===
kb.length)Vc.preventDefault();else{if("Meta"!==Vc.key&&!Vc.metaKey)Vc.stopPropagation();else if("z"===Vc.key&&Vc.metaKey){Vc.shiftKey?document.execCommand("redo",!1):document.execCommand("undo",!1);Vc.stopPropagation();Vc.preventDefault();return}"Tab"===Vc.key&&(Vc.preventDefault(),Vc.shiftKey?On.unindent(Vc.currentTarget):On.indent(Vc.currentTarget),this.update({text:Cr.normalizeText(Vc.currentTarget.value)}))}},[]),uc=Wo.useCallback(Vc=>{n&&(Vc.currentTarget.setSelectionRange(0,0),null==I?void 0:
I())},[I]),Ic=Wo.useCallback(Vc=>{n&&Ub.current&&document.activeElement===Vc.currentTarget&&Vc.currentTarget.select()},[n]),Rc=Wo.useCallback(Vc=>{n&&Vc.stopPropagation()},[n]);Wo.useEffect(()=>{n?requestAnimationFrame(()=>{Ub.current=!0;const Vc=ec.current;Vc&&(Vc.focus(),Vc.select())}):null==I?void 0:I()},[n,I]);Wo.useLayoutEffect(()=>{if(0===this.props.size[0]||0===this.props.size[1])this.onResetBounds()},[]);return(0,ob.jsx)(bo,Wa(Fa({},b),{opacity:g?.2:W,children:(0,ob.jsx)("div",{ref:pc,className:"tl-text-shape-wrapper",
"data-hastext":!!kb,"data-isediting":n,style:{fontFamily:ia,fontStyle:Xa?"italic":"normal",fontSize:sa,fontWeight:La,padding:Ob,lineHeight:$a,color:xf(tb,"text")},children:n?(0,ob.jsx)("textarea",{ref:ec,className:"tl-text-shape-input",name:"text",tabIndex:-1,autoComplete:"false",autoCapitalize:"false",autoCorrect:"false",autoSave:"false",placeholder:"",spellCheck:"true",wrap:"off",dir:"auto",datatype:"wysiwyg",defaultValue:kb,onFocus:Ic,onChange:mc,onKeyDown:Vb,onBlur:uc,onPointerDown:Rc}):(0,ob.jsxs)(ob.Fragment,
{children:[kb,""]})})}))}));Ua(this,"setScaleLevel",b=>Rd(this,null,function*(){this.update({scaleLevel:b,fontSize:WH[null!=b?b:"md"]});this.onResetBounds()}));Ua(this,"ReactIndicator",lf(({isEditing:b})=>{const {props:{borderRadius:g},bounds:n}=this;return b?null:(0,ob.jsx)("rect",{width:n.width,height:n.height,rx:g,ry:g,fill:"transparent"})}));Ua(this,"validateProps",b=>Ah(this,b));Ua(this,"getBounds",()=>{const [b,g]=this.props.point,[n,I]=this.props.size;return{minX:b,minY:g,maxX:b+n,maxY:g+
I,width:n,height:I}});Ua(this,"onResizeStart",({isSingle:b})=>{var g;if(!b)return this;this.scale=[...(null!=(g=this.props.scale)?g:[1,1])];return this.update({isSizeLocked:!1})});Ua(this,"onResetBounds",()=>{this.update({size:this.getAutoSizedBoundingBox(),isSizeLocked:!0});return this})}get scaleLevel(){var b;return null!=(b=this.props.scaleLevel)?b:"md"}getAutoSizedBoundingBox(b={}){const {text:g=this.props.text,fontFamily:n=this.props.fontFamily,fontSize:I=this.props.fontSize,fontWeight:W=this.props.fontWeight,
lineHeight:ia=this.props.lineHeight,padding:sa=this.props.padding}=b,[La,Xa]=oj(g,{fontFamily:n,fontSize:I,lineHeight:ia,fontWeight:W},sa);return[La,Xa]}getShapeSVGJsx(){var b=window.navigator.userAgent.toLowerCase();if(b.includes("webkit")&&!b.includes("chrome"))return super.getShapeSVGJsx(null);const {props:{text:g,stroke:n,fontSize:I,fontFamily:W}}=this;b=this.getBounds();return(0,ob.jsx)("foreignObject",{width:b.width,height:b.height,children:(0,ob.jsx)("div",{style:{color:xf(n,"text"),fontSize:I,
fontFamily:W,display:"contents"},children:g})})}};Ua(Sr,"id","text");Ua(Sr,"defaultProps",{id:"box",parentId:"page",type:"text",point:[0,0],size:[0,0],isSizeLocked:!0,text:"",lineHeight:1.2,fontSize:20,fontWeight:400,italic:!1,padding:4,fontFamily:"var(--ls-font-family)",borderRadius:0,stroke:"",fill:"",noFill:!0,strokeType:"line",strokeWidth:2,opacity:1});nc([Eg],Sr.prototype,"scaleLevel",1);nc([af],Sr.prototype,"setScaleLevel",2);var GA=ac(V(22));ob=V(587);var qu=class extends kn{constructor(){super(...arguments);
Ua(this,"canFlip",!1);Ua(this,"canEdit",!0);Ua(this,"canChangeAspectRatio",!1);Ua(this,"ReactComponent",lf(({events:b,isErasing:g,asset:n,isEditing:I})=>{const {props:{opacity:W}}=this,ia=il();var sa=rg();const La=sa.selectedIds.has(this.id),Xa=ia||La&&!I||"select"!==sa.selectedTool.id;sa=GA.useCallback(kb=>{Xa||kb.stopPropagation()},[Xa]);const {handlers:$a}=GA.useContext(Vm);return(0,ob.jsx)(bo,Wa(Fa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:W}},b),{children:(0,ob.jsx)("div",{onWheelCapture:sa,
onPointerDown:sa,onPointerUp:sa,className:"tl-video-container",style:{pointerEvents:ia||!I&&!La?"none":"all",overflow:I?"auto":"hidden"},children:n&&(0,ob.jsx)("video",{controls:!0,src:$a?$a.makeAssetUrl(n.src):n.src})})}))}));Ua(this,"ReactIndicator",lf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent"})}))}};Ua(qu,"id","video");Ua(qu,"defaultProps",{id:"video1",parentId:"page",type:"video",point:[0,0],size:[100,100],opacity:1,assetId:"",clipping:0,
isAspectRatioLocked:!0});ob=V(587);var HA=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,IA=class extends kn{constructor(){super(...arguments);Ua(this,"aspectRatio",480/853);Ua(this,"canChangeAspectRatio",!1);Ua(this,"canFlip",!1);Ua(this,"canEdit",!0);Ua(this,"onYoutubeLinkChange",b=>{this.update({url:b,size:IA.defaultProps.size})});Ua(this,"ReactComponent",lf(({events:b,isErasing:g,isEditing:n})=>(0,ob.jsx)(bo,Wa(Fa({style:{overflow:"hidden",
pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,ob.jsx)("div",{className:"rounded-lg w-full h-full relative overflow-hidden shadow-xl tl-youtube-container",style:{pointerEvents:n?"all":"none",userSelect:"none"},children:this.embedId?(0,ob.jsx)("div",{style:{overflow:"hidden",position:"relative",height:"100%"},children:(0,ob.jsx)("iframe",{className:"absolute inset-0 w-full h-full m-0",width:"853",height:"480",src:`https://www.youtube.com/embed/${this.embedId}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",
allowFullScreen:!0,title:"Embedded youtube"})}):(0,ob.jsx)("div",{className:"w-full h-full flex items-center justify-center p-4",style:{backgroundColor:"var(--ls-primary-background-color)"},children:(0,ob.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 502 210.649",height:"210.65",width:"128",children:(0,ob.jsxs)("g",{children:[(0,ob.jsx)("path",{d:"M498.333 45.7s-2.91-20.443-11.846-29.447C475.157 4.44 462.452 4.38 456.627 3.687c-41.7-3-104.25-3-104.25-3h-.13s-62.555 0-104.255 3c-5.826.693-18.523.753-29.86 12.566-8.933 9.004-11.84 29.447-11.84 29.447s-2.983 24.003-2.983 48.009v22.507c0 24.006 2.983 48.013 2.983 48.013s2.907 20.44 11.84 29.446c11.337 11.817 26.23 11.44 32.86 12.677 23.84 2.28 101.315 2.983 101.315 2.983s62.62-.094 104.32-3.093c5.824-.694 18.527-.75 29.857-12.567 8.936-9.006 11.846-29.446 11.846-29.446s2.98-24.007 2.98-48.013V93.709c0-24.006-2.98-48.01-2.98-48.01",
fill:"#cd201f"}),(0,ob.jsx)("g",{children:(0,ob.jsx)("path",{d:"M187.934 169.537h-18.96V158.56c-7.19 8.24-13.284 12.4-19.927 12.4-5.826 0-9.876-2.747-11.9-7.717-1.23-3.02-2.103-7.736-2.103-14.663V68.744h18.957v81.833c.443 2.796 1.636 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V68.744h18.96v100.793zM102.109 139.597c.996 9.98-2.1 14.93-7.987 14.93s-8.98-4.95-7.98-14.93v-39.92c-1-9.98 2.093-14.657 7.98-14.657 5.89 0 8.993 4.677 7.996 14.657l-.01 39.92zm18.96-37.923c0-10.77-2.164-18.86-5.987-23.95-5.054-6.897-12.973-9.72-20.96-9.72-9.033 0-15.913 2.823-20.957 9.72-3.886 5.09-5.97 13.266-5.97 24.036l-.016 35.84c0 10.71 1.853 18.11 5.736 23.153 5.047 6.873 13.227 10.513 21.207 10.513 7.986 0 16.306-3.64 21.36-10.513 3.823-5.043 5.586-12.443 5.586-23.153v-35.926zM46.223 114.647v54.889h-19.96v-54.89S5.582 47.358 1.314 34.815H22.27L36.277 87.38l13.936-52.566H71.17l-24.947 79.833z"})}),
(0,ob.jsxs)("g",{fill:"#fff",children:[(0,ob.jsx)("path",{d:"M440.413 96.647c0-9.33 2.557-11.874 8.59-11.874 5.99 0 8.374 2.777 8.374 11.997v10.893l-16.964.02V96.647zm35.96 25.986l-.003-20.4c0-10.656-2.1-18.456-5.88-23.5-5.06-6.823-12.253-10.436-21.317-10.436-9.226 0-16.42 3.613-21.643 10.436-3.84 5.044-6.076 13.28-6.076 23.943v34.927c0 10.596 2.46 18.013 6.296 23.003 5.227 6.813 12.42 10.216 21.87 10.216 9.44 0 16.853-3.566 21.85-10.81 2.2-3.196 3.616-6.82 4.226-10.823.164-1.81.64-5.933.64-11.753v-2.827h-18.96c0 7.247.037 11.557-.133 12.54-1.033 4.834-3.623 7.25-8.07 7.25-6.203 0-8.826-4.636-8.76-13.843v-17.923h35.96zM390.513 140.597c0 9.98-2.353 13.806-7.563 13.806-2.973 0-6.4-1.53-9.423-4.553l.02-60.523c3.02-2.98 6.43-4.55 9.403-4.55 5.21 0 7.563 2.93 7.563 12.91v42.91zm2.104-72.453c-6.647 0-13.253 4.087-19.09 11.27l.02-43.603h-17.963V169.54h17.963l.027-10.05c6.036 7.47 12.62 11.333 19.043 11.333 7.193 0 12.45-3.85 14.863-11.267 1.203-4.226 1.993-10.733 1.993-19.956V99.684c0-9.447-1.21-15.907-2.416-19.917-2.41-7.466-7.247-11.623-14.44-11.623M340.618 169.537h-18.956V158.56c-7.193 8.24-13.283 12.4-19.926 12.4-5.827 0-9.877-2.747-11.9-7.717-1.234-3.02-2.107-7.736-2.107-14.663V69.744h18.96v80.833c.443 2.796 1.633 3.823 4.043 3.823 3.63 0 6.913-3.153 10.93-8.817V69.744h18.957v99.793z"}),
(0,ob.jsx)("path",{d:"M268.763 169.537h-19.956V54.77h-20.956V35.835l62.869-.024v18.96h-21.957v114.766z"})]})]})})})})}))));Ua(this,"ReactIndicator",lf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));Ua(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.max(b.size[0],1),b.size[1]=Math.max(b.size[0]*this.aspectRatio,1));return Ah(this,b)})}get embedId(){var b,g;const n=this.props.url,I=n.match(HA);return null!=(g=null!=(b=null==
I?void 0:I[1])?b:n)?g:""}getShapeSVGJsx(){const b=this.getBounds(),g=this.embedId;return g?(0,ob.jsxs)("g",{children:[(0,ob.jsx)("image",{width:b.width,height:b.height,href:`https://img.youtube.com/vi/${g}/mqdefault.jpg`,className:"grayscale-[50%]"}),(0,ob.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ob.jsx)("path",{d:"M4.76447 3.12199C5.63151 3.04859 6.56082 3 7.5 3C8.43918 3 9.36849 3.04859 10.2355 3.12199C11.2796 3.21037 11.9553 3.27008 12.472 3.39203C12.9425 3.50304 13.2048 3.64976 13.4306 3.88086C13.4553 3.90618 13.4902 3.94414 13.5133 3.97092C13.7126 4.20149 13.8435 4.4887 13.918 5.03283C13.9978 5.6156 14 6.37644 14 7.52493C14 8.66026 13.9978 9.41019 13.9181 9.98538C13.8439 10.5206 13.7137 10.8061 13.5125 11.0387C13.4896 11.0651 13.4541 11.1038 13.4296 11.1287C13.2009 11.3625 12.9406 11.5076 12.4818 11.6164C11.9752 11.7365 11.3143 11.7942 10.2878 11.8797C9.41948 11.9521 8.47566 12 7.5 12C6.52434 12 5.58052 11.9521 4.7122 11.8797C3.68572 11.7942 3.02477 11.7365 2.51816 11.6164C2.05936 11.5076 1.7991 11.3625 1.57037 11.1287C1.54593 11.1038 1.51035 11.0651 1.48748 11.0387C1.28628 10.8061 1.15612 10.5206 1.08193 9.98538C1.00221 9.41019 1 8.66026 1 7.52493C1 6.37644 1.00216 5.6156 1.082 5.03283C1.15654 4.4887 1.28744 4.20149 1.48666 3.97092C1.5098 3.94414 1.54468 3.90618 1.56942 3.88086C1.7952 3.64976 2.05752 3.50304 2.52796 3.39203C3.04473 3.27008 3.7204 3.21037 4.76447 3.12199ZM0 7.52493C0 5.28296 0 4.16198 0.729985 3.31713C0.766457 3.27491 0.815139 3.22194 0.854123 3.18204C1.63439 2.38339 2.64963 2.29744 4.68012 2.12555C5.56923 2.05028 6.52724 2 7.5 2C8.47276 2 9.43077 2.05028 10.3199 2.12555C12.3504 2.29744 13.3656 2.38339 14.1459 3.18204C14.1849 3.22194 14.2335 3.27491 14.27 3.31713C15 4.16198 15 5.28296 15 7.52493C15 9.74012 15 10.8477 14.2688 11.6929C14.2326 11.7348 14.1832 11.7885 14.1444 11.8281C13.3629 12.6269 12.3655 12.71 10.3709 12.8763C9.47971 12.9505 8.50782 13 7.5 13C6.49218 13 5.52028 12.9505 4.62915 12.8763C2.63446 12.71 1.63712 12.6269 0.855558 11.8281C0.816844 11.7885 0.767442 11.7348 0.731221 11.6929C0 10.8477 0 9.74012 0 7.52493ZM5.25 5.38264C5.25 5.20225 5.43522 5.08124 5.60041 5.15369L10.428 7.27105C10.6274 7.35853 10.6274 7.64147 10.428 7.72895L5.60041 9.84631C5.43522 9.91876 5.25 9.79775 5.25 9.61736V5.38264Z",
fill:"#D10014",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Uq=IA;Ua(Uq,"id","youtube");Ua(Uq,"defaultProps",{id:"youtube",type:"youtube",parentId:"page",point:[0,0],size:[853,480],url:""});nc([Eg],Uq.prototype,"embedId",1);nc([af],Uq.prototype,"onYoutubeLinkChange",2);var Tr=ac(V(22));ob=V(587);var JA=/https?:\/\/twitter.com\/[0-9a-zA-Z_]{1,20}\/status\/([0-9]*)/,KA=class extends kn{constructor(){super(...arguments);Ua(this,"canFlip",!1);Ua(this,"canEdit",!0);Ua(this,"initialHeightCalculated",
!0);Ua(this,"getInnerHeight",null);Ua(this,"onTwitterLinkChange",b=>{this.update({url:b,size:KA.defaultProps.size})});Ua(this,"ReactComponent",lf(({events:b,isErasing:g,isEditing:n})=>{const {renderers:{Tweet:I}}=Tr.useContext(Vm),W=rg(),ia=Tr.useRef(null),[,sa]=this.useComponentSize(ia);Tr.useEffect(()=>{var La,Xa;const $a=null!=(Xa=null==(La=this.getInnerHeight)?void 0:La.call(this))?Xa:sa;sa&&1<Math.abs($a-this.props.size[1])&&(this.update({size:[this.props.size[0],$a]}),W.persist(!0))},[sa]);
Tr.useEffect(()=>{this.initialHeightCalculated||setTimeout(()=>{this.onResetBounds();W.persist(!0)})},[this.initialHeightCalculated]);return(0,ob.jsx)(bo,Wa(Fa({style:{overflow:"hidden",pointerEvents:"all",opacity:g?.2:1}},b),{children:(0,ob.jsx)("div",{className:"rounded-xl w-full h-full relative shadow-xl tl-tweet-container",style:{pointerEvents:n?"all":"none",userSelect:"none"},children:this.embedId?(0,ob.jsx)("div",{ref:ia,children:(0,ob.jsx)(I,{tweetId:this.embedId})}):null})}))}));Ua(this,"ReactIndicator",
lf(()=>{const {props:{size:[b,g]}}=this;return(0,ob.jsx)("rect",{width:b,height:g,fill:"transparent",rx:8,ry:8})}));Ua(this,"onResetBounds",b=>{b=this.getAutoResizeHeight();null!==b&&1<Math.abs(b-this.props.size[1])&&(this.update({size:[this.props.size[0],b]}),this.initialHeightCalculated=!0);return this});Ua(this,"onResize",(b,g)=>{var n;const {bounds:I,rotation:W,scale:[ia,sa]}=g;b=[...this.scale];0>ia&&(b[0]*=-1);0>sa&&(b[1]*=-1);g=null!=(n=this.getAutoResizeHeight())?n:I.height;return this.update({point:[I.minX,
I.minY],size:[Math.max(1,I.width),Math.max(1,g)],scale:b,rotation:W})});Ua(this,"validateProps",b=>{void 0!==b.size&&(b.size[0]=Math.min(Math.max(b.size[0],300),550),b.size[1]=Math.max(b.size[1],1));return Ah(this,b)})}get embedId(){var b,g;const n=this.props.url,I=n.match(JA);return null!=(g=null!=(b=null==I?void 0:I[1])?b:n)?g:""}useComponentSize(b,g=""){const [n,I]=Tr.useState([0,0]),W=rg();Tr.useEffect(()=>{if(null==b?0:b.current){const ia=g?b.current.querySelector(g):b.current;if(ia){const sa=
()=>{const {width:Xa,height:$a}=ia.getBoundingClientRect(),kb=Zd.div([Xa,$a],W.viewport.camera.zoom);I(kb);return kb};sa();this.getInnerHeight=()=>sa()[1];const La=new ResizeObserver(()=>{sa()});La.observe(ia);return()=>{La.disconnect()}}}return()=>{}},[b,g]);return n}getAutoResizeHeight(){return this.getInnerHeight?this.getInnerHeight():null}getShapeSVGJsx(){const b=this.getBounds();return this.embedId?(0,ob.jsxs)("g",{children:[(0,ob.jsx)("rect",{width:b.width,height:b.height,fill:"#15202b",rx:8,
ry:8}),(0,ob.jsx)("svg",{x:b.width/4,y:b.height/4,width:b.width/2,height:b.height/2,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,ob.jsx)("path",{d:"m13.464 4.4401c0.0091 0.13224 0.0091 0.26447 0.0091 0.39793 0 4.0664-3.0957 8.7562-8.7562 8.7562v-0.0024c-1.6721 0.0024-3.3095-0.47658-4.7172-1.3797 0.24314 0.02925 0.48751 0.04387 0.73248 0.04448 1.3857 0.0013 2.7319-0.46374 3.8221-1.3199-1.3169-0.024981-2.4717-0.8836-2.8751-2.1371 0.4613 0.08897 0.93662 0.070688 1.3894-0.053016-1.4357-0.29007-2.4686-1.5515-2.4686-3.0165v-0.039001c0.42779 0.23827 0.90676 0.37051 1.3967 0.38513-1.3522-0.90372-1.769-2.7026-0.95247-4.1091 1.5625 1.9226 3.8678 3.0914 6.3425 3.2151-0.24802-1.0689 0.090798-2.1889 0.89031-2.9403 1.2395-1.1651 3.1889-1.1054 4.3541 0.13346 0.68921-0.13589 1.3498-0.38879 1.9543-0.74711-0.22974 0.71237-0.71054 1.3175-1.3528 1.702 0.60999-0.071907 1.206-0.23522 1.7672-0.48446-0.41316 0.61913-0.93358 1.1584-1.5356 1.5942z",
fill:"#1d9bf0",fillRule:"evenodd",clipRule:"evenodd"})})]}):super.getShapeSVGJsx({})}},Ur=KA;Ua(Ur,"id","tweet");Ua(Ur,"defaultProps",{id:"tweet",type:"tweet",parentId:"page",point:[0,0],size:[331,290],url:""});nc([Eg],Ur.prototype,"embedId",1);nc([af],Ur.prototype,"onTwitterLinkChange",2);ob=V(587);var LA=[Nr,Or,Rq,pu,qu,Pr,Tq,Rr,Sr,Uq,Ur,Sq,Qp,ul,mw],qw=class extends dp{constructor(){super(...arguments);Ua(this,"Shape",Nr)}};Ua(qw,"id","box");Ua(qw,"shortcut",["9","r"]);var rw=class extends dp{constructor(){super(...arguments);
Ua(this,"Shape",Or)}};Ua(rw,"id","ellipse");Ua(rw,"shortcut",["o"]);var sw=class extends Ft{};Ua(sw,"id","erase");Ua(sw,"shortcut",["6","e"]);var tw=class extends vs{constructor(){super(...arguments);Ua(this,"Shape",Rq);Ua(this,"simplify",!0);Ua(this,"simplifyTolerance",.618)}};Ua(tw,"id","highlighter");Ua(tw,"shortcut",["5","h"]);var uw=class extends Dt{constructor(){super(...arguments);Ua(this,"Shape",Pr)}};Ua(uw,"id","line");Ua(uw,"shortcut",["7","c"]);var vw=class extends vs{constructor(){super(...arguments);
Ua(this,"Shape",Tq);Ua(this,"simplify",!1)}};Ua(vw,"id","pencil");Ua(vw,"shortcut",["4","d"]);var MA=class extends dp{constructor(){super(...arguments);Ua(this,"Shape",Rr)}};Ua(MA,"id","polygon");var ww=class extends Et{constructor(){super(...arguments);Ua(this,"Shape",Sr)}};Ua(ww,"id","text");Ua(ww,"shortcut",["8","t"]);var NA=class extends dp{constructor(){super(...arguments);Ua(this,"Shape",Uq)}};Ua(NA,"id","youtube");var OA=class extends vi{constructor(){super(...arguments);Ua(this,"creatingShape");
Ua(this,"offset",[0,0]);Ua(this,"onEnter",()=>{this.app.history.pause();Kd(()=>{const b=new ul({id:Sf(),parentId:this.app.currentPage.id,point:Zd.sub(this.app.inputs.originPoint,this.offset),size:ul.defaultProps.size,fill:this.app.settings.color,stroke:this.app.settings.color});this.creatingShape=b;this.app.currentPage.addShapes(b);this.app.setEditingShape(b);this.app.setSelectedShapes([b])})});Ua(this,"onPointerDown",b=>{switch(b.type){case "shape":if(b.shape===this.creatingShape)break;this.app.selectTool("select");
break;case "canvas":b.order||this.app.selectTool("select")}});Ua(this,"onExit",()=>{var b;this.creatingShape&&(this.app.history.resume(),(null==(b=this.creatingShape)?0:b.props.pageId)?this.app.setSelectedShapes([this.creatingShape.id]):(this.app.deleteShapes([this.creatingShape.id]),this.app.setEditingShape()),this.creatingShape=void 0)})}};Ua(OA,"id","creating");var PA=class extends vi{constructor(){super(...arguments);Ua(this,"cursor","crosshair");Ua(this,"onPointerDown",b=>{this.tool.transition("creating")})}};
Ua(PA,"id","idle");var Zs=class extends zp{constructor(){super(...arguments);Ua(this,"Shape",ul);Ua(this,"onPinch",b=>{this.app.viewport.pinchZoom(b.point,b.delta,b.delta[2])})}};Ua(Zs,"id","logseq-portal");Ua(Zs,"shortcut",["3"]);Ua(Zs,"states",[PA,OA]);Ua(Zs,"initial","idle");var QA=class extends dp{constructor(){super(...arguments);Ua(this,"Shape",Qp)}};Ua(QA,"id","youtube");var RA=class extends dp{constructor(){super(...arguments);Ua(this,"Shape",Sq)}};Ua(RA,"id","iframe");var XH=ac(V(590));ob=
V(587);var YH=new Map(LA.map(b=>[b.id,b])),xw=class{constructor(b){Ua(this,"shapes");Ua(this,"pageId");Ua(this,"assets");b&&this.load(b)}load(b){const g=b.pages[0];this.pageId=null==g?void 0:g.id;this.assets=b.assets;this.shapes=null==g?void 0:g.shapes.map(n=>{var I=n.type;if(!I)throw Error("No shape type provided.");const W=YH.get(I);if(!W)throw Error(`Could not find shape class for ${I}`);return new W(n)}).filter(n=>"group"!==n.type)}generatePreviewJsx(b,g){var n,I;const W=[...(null!=(n=this.shapes)?
n:[]).map($a=>$a.getRotatedBounds())];(n=null==b?void 0:b.currentView)&&W.push(n);let ia=Ge.getCommonBounds(W);if(!ia)return null;ia=Ge.expandBounds(ia,16);ia=g?Ge.ensureRatio(ia,g):ia;const sa=$a=>[($a[0]-ia.minX).toFixed(2),($a[1]-ia.minY).toFixed(2)],[La,Xa]=n?sa([n.minX,n.minY]):[0,0];return ia&&(0,ob.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg","data-common-bound-x":ia.minX.toFixed(2),"data-common-bound-y":ia.minY.toFixed(2),"data-common-bound-width":ia.width.toFixed(2),"data-common-bound-height":ia.height.toFixed(2),
viewBox:[0,0,ia.width,ia.height].join(" "),children:[(0,ob.jsx)("defs",{children:n&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("rect",{id:this.pageId+"-camera-rect",transform:`translate(${La}, ${Xa})`,width:n.width,height:n.height}),(0,ob.jsxs)("mask",{id:this.pageId+"-camera-mask",children:[(0,ob.jsx)("rect",{width:ia.width,height:ia.height,fill:"white"}),(0,ob.jsx)("use",{href:`#${this.pageId}-camera-rect`,fill:"black"})]})]})}),(0,ob.jsx)("g",{id:this.pageId+"-preview-shapes",children:null==
(I=this.shapes)?void 0:I.map($a=>{var kb,tb;const {bounds:Ob,props:{rotation:ec}}=$a,[Ub,pc]=sa([Ob.minX,Ob.minY]),mc=+(180*((null!=ec?ec:0)+(null!=(kb=Ob.rotation)?kb:0))/Math.PI).toFixed(2),[Vb,uc]=[(Ob.width/2).toFixed(2),(Ob.height/2).toFixed(2)];return(0,ob.jsx)("g",{transform:[`translate(${Ub}, ${pc})`,`rotate(${mc}, ${Vb}, ${uc})`].join(" "),children:$a.getShapeSVGJsx({assets:null!=(tb=this.assets)?tb:[]})},$a.id)})}),(0,ob.jsx)("rect",{mask:n?`url(#${this.pageId}-camera-mask)`:"",width:ia.width,
height:ia.height,fill:"transparent"}),n&&(0,ob.jsx)("use",{id:"minimap-camera-rect","data-x":La,"data-y":Xa,"data-width":n.width,"data-height":n.height,href:`#${this.pageId}-camera-rect`,fill:"transparent",stroke:"red",strokeWidth:4/b.camera.zoom})]})}exportAsSVG(b){return(b=this.generatePreviewJsx(void 0,b))?XH.default.renderToString(b):""}},ZH=ac(V(22));ob=V(587);var ru=ZH.forwardRef((b,g)=>{var {value:n,className:I}=b;b=Ha(b,["autoResize","value","className"]);return(0,ob.jsx)("div",{className:"tl-input"+
(I?" "+I:""),children:(0,ob.jsxs)("div",{className:"tl-input-sizer",children:[(0,ob.jsx)("div",{className:"tl-input-hidden",children:n}),(0,ob.jsx)("input",Fa({ref:g,value:n,className:"tl-text-input",type:"text"},b))]})})});ob=V(587);var Rp=({type:b,active:g})=>(0,ob.jsx)("span",{className:"tl-type-tag","data-active":g,children:(0,ob.jsx)("i",{className:`tie tie-${({B:"block",P:"page",WP:"whiteboard",BA:"new-block",PA:"new-page",WA:"new-whiteboard",BS:"block-search",PS:"page-search"})[b]}`})}),SA=
(b,g)=>(0,ob.jsx)("span",{children:b.split(new RegExp(`(${g.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")})`,"gi")).map((n,I)=>1===I%2?(0,ob.jsx)("mark",{className:"tl-highlighted",children:n}):n).map((n,I)=>(0,ob.jsx)(xm.default.Fragment,{children:n},I))}),$H=(b,g)=>{const {handlers:n}=xm.default.useContext(Vm),[I,W]=xm.default.useState(null),ia=Ql(b,200);xm.default.useEffect(()=>{let sa=!1;if(0<ia.length){const La={"pages?":!0,"blocks?":!0,"files?":!1};"B"===g?La["pages?"]=!1:"P"===g&&(La["blocks?"]=
!1);n.search(ia,La).then(Xa=>{sa||W(Xa)})}else W(null);return()=>{sa=!0}},[ia,null==n?void 0:n.search]);return I},TA=lf(({className:b,style:g,placeholder:n,onChange:I,onBlur:W,onAddBlock:ia})=>{const [sa,La]=xm.default.useState(ul.defaultSearchQuery),[Xa,$a]=xm.default.useState(ul.defaultSearchFilter),kb=xm.default.useRef(null),{handlers:tb,renderers:Ob}=xm.default.useContext(Vm),ec=xm.default.useCallback(Ee=>{var Oe;I(Ee);null==(Oe=kb.current)?void 0:Oe.blur();Ee&&(ul.defaultSearchQuery="",ul.defaultSearchFilter=
null)},[]),Ub=xm.default.useCallback(Ee=>{if(Ee=null==tb?void 0:tb.addNewBlock(Ee))ec(Ee),null==ia?void 0:ia(Ee);return Ee},[ia]),pc=xm.default.useRef(null),[mc,Vb]=xm.default.useState(0),uc=$H(sa,Xa),[Ic,Rc]=xm.default.useState("circle-plus"),[Vc,Wd]=xm.default.useState(!1);xm.default.useEffect(()=>{setTimeout(()=>{var Ee;null==(Ee=kb.current)?void 0:Ee.focus()})},[Xa]);xm.default.useEffect(()=>{ul.defaultSearchQuery=sa;ul.defaultSearchFilter=Xa},[sa,Xa]);const be=xm.default.useMemo(()=>{var Ee;
const Oe=[],rf=null==Ob?void 0:Ob.Breadcrumb;if(!rf||!tb)return[];ia&&Oe.push({actionIcon:"circle-plus",onChosen:()=>!!Ub(sa),element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{active:!0,type:"BA"}),0<sa.length?(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)("strong",{children:"New block:"}),sa]}):(0,ob.jsx)("strong",{children:"New block"})]})});(null==(Ee=null==uc?void 0:uc.pages)?0:Ee.some(nf=>nf.toLowerCase()===sa.toLowerCase()))||!sa||Oe.push({actionIcon:"circle-plus",
onChosen:()=>{ec(sa);return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{active:!0,type:"PA"}),(0,ob.jsx)("strong",{children:"New page:"}),sa]})},{actionIcon:"circle-plus",onChosen:()=>{null==tb?void 0:tb.addNewWhiteboard(sa);ec(sa);return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{active:!0,type:"WA"}),(0,ob.jsx)("strong",{children:"New whiteboard:"}),sa]})});0===sa.length&&null===Xa&&Oe.push({actionIcon:"search",
onChosen:()=>{$a("B");return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{type:"BS"}),"Search only blocks"]})},{actionIcon:"search",onChosen:()=>{$a("P");return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)(Rp,{type:"PS"}),"Search only pages"]})});Xa&&"P"!==Xa||!uc||!uc.pages||Oe.push(...uc.pages.map(nf=>({actionIcon:"search",onChosen:()=>{ec(nf);return!0},element:(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,ob.jsx)(Rp,{type:tb.isWhiteboardPage(nf)?"WP":"P"}),SA(nf,sa)]})})));Xa&&"B"!==Xa||!uc||!uc.blocks||Oe.push(...uc.blocks.filter(nf=>nf.content&&nf.uuid).map(({content:nf,uuid:cf})=>{const Ie=tb.queryBlockByUUID(cf);return{actionIcon:"search",onChosen:()=>{var Bd,gd,kd;return Ie?(ec(cf),null==(kd=null==(gd=null==(Bd=window.logseq)?void 0:Bd.api)?void 0:gd.set_blocks_id)?void 0:kd.call(gd,[cf]),!0):!1},element:Ie?(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",
children:[(0,ob.jsx)(Rp,{type:"B"}),(0,ob.jsx)("div",{className:"tl-quick-search-option-breadcrumb",children:(0,ob.jsx)(rf,{blockId:cf})})]}),(0,ob.jsxs)("div",{className:"tl-quick-search-option-row",children:[(0,ob.jsx)("div",{className:"tl-quick-search-option-placeholder"}),SA(nf,sa)]})]}):(0,ob.jsx)("div",{className:"tl-quick-search-option-row",children:"Cache is outdated. Please click the 'Re-index' button in the graph's dropdown menu."})}}));return Oe},[sa,Xa,uc,null==Ob?void 0:Ob.Breadcrumb,
tb]);xm.default.useEffect(()=>{const Ee=Oe=>{var rf,nf;let cf=mc;"ArrowDown"===Oe.key?cf=Math.min(be.length-1,mc+1):"ArrowUp"===Oe.key?cf=Math.max(0,mc-1):"Enter"===Oe.key?(null==(rf=be[mc])?void 0:rf.onChosen(),Oe.stopPropagation(),Oe.preventDefault()):"Backspace"===Oe.key&&0===sa.length?$a(null):"Escape"===Oe.key&&ec("");cf!==mc&&(rf=be[cf],Vb(cf),Rc(rf.actionIcon),Oe.stopPropagation(),Oe.preventDefault(),(Oe=null==(nf=pc.current)?void 0:nf.querySelector(".tl-quick-search-option:nth-child("+(cf+
1)+")"))&&(null==Oe?void 0:Oe.scrollIntoViewIfNeeded(!1)))};document.addEventListener("keydown",Ee,!0);return()=>{document.removeEventListener("keydown",Ee,!0)}},[be,mc,sa]);return(0,ob.jsxs)("div",{className:"tl-quick-search "+(null!=b?b:""),style:g,children:[(0,ob.jsx)(rz,{icon:Ic,onClick:()=>{var Ee;null==(Ee=be[mc])?void 0:Ee.onChosen()}}),(0,ob.jsxs)("div",{className:"tl-quick-search-input-container",children:[Xa&&(0,ob.jsxs)("div",{className:"tl-quick-search-input-filter",children:[(0,ob.jsx)(Rp,
{type:Xa}),"B"===Xa?"Search blocks":"Search pages",(0,ob.jsx)("div",{className:"tl-quick-search-input-filter-remove",onClick:()=>$a(null),children:(0,ob.jsx)(Gh,{name:"x"})})]}),(0,ob.jsx)(ru,{ref:kb,type:"text",value:sa,className:"tl-quick-search-input",placeholder:null!=n?n:"Create or search your graph...",onChange:Ee=>La(Ee.target.value),onKeyDown:Ee=>{"Enter"===Ee.key&&ec(sa);Ee.stopPropagation()},onFocus:()=>{Wd(!0)},onBlur:()=>{Wd(!1);null==W?void 0:W()}})]}),0<be.length&&(0,ob.jsx)("div",{onWheelCapture:Ee=>
Ee.stopPropagation(),className:"tl-quick-search-options",ref:pc,style:{visibility:Vc?"visible":"hidden",pointerEvents:Vc?"all":"none"},children:(0,ob.jsx)(lH,{style:{height:40*Math.min(Math.max(1,be.length),12)},totalCount:be.length,itemContent:Ee=>{const {actionIcon:Oe,onChosen:rf,element:nf}=be[Ee];return(0,ob.jsx)("div",{"data-focused":Ee===mc,className:"tl-quick-search-option",tabIndex:0,onMouseEnter:()=>{Rc(Oe);Vb(Ee)},onPointerDownCapture:cf=>{rf()&&(cf.stopPropagation(),cf.preventDefault())},
children:nf},Ee)}})})]})});ob=V(587);var aI=lf(function(b){var {pageId:g,portalType:n,refs:I,side:W,onRefsChange:ia}=b;b=Ha(b,"pageId portalType shapeType refs side onRefsChange".split(" "));const sa=I.length+(g?1:0),La=0===I.length,Xa=kb=>{kb&&!I.includes(kb)&&La&&ia([...I,kb])},$a=!(!g||!n);return(0,ob.jsx)(iA,Wa(Fa({},b),{side:W,align:"start",alignOffset:-6,label:(0,ob.jsx)(fc,{content:"Link",sideOffset:14,children:(0,ob.jsxs)("div",{className:"flex gap-1 relative items-center justify-center px-1",
children:[(0,ob.jsx)(Gh,{name:0<sa?"link":"add-link"}),0<sa&&(0,ob.jsx)("div",{className:"tl-shape-links-count",children:sa})]})}),children:(0,ob.jsxs)("div",{className:"color-level rounded-lg","data-show-reference-panel":$a,children:[$a&&(0,ob.jsxs)("div",{className:"tl-shape-links-reference-panel",children:[(0,ob.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,ob.jsx)(Gh,{className:"opacity-50",name:"internal-link"}),"References"]}),(0,ob.jsx)(Po,{type:n,id:g})]}),
(0,ob.jsxs)("div",{className:"tl-shape-links-panel color-level",children:[(0,ob.jsxs)("div",{className:"text-base inline-flex gap-1 items-center",children:[(0,ob.jsx)(Gh,{className:"opacity-50",name:"add-link"}),"Link to any page or block"]}),La&&(0,ob.jsx)(TA,{style:{width:"calc(100% - 46px)",marginLeft:"46px"},placeholder:"Start typing to search...",onChange:Xa}),0<I.length&&(0,ob.jsx)("div",{className:"flex flex-col items-stretch gap-2",children:I.map((kb,tb)=>(0,ob.jsx)(Po,{id:kb,type:Th(kb)?
"B":"P",onRemove:()=>{ia(I.filter((Ob,ec)=>tb!==ec))},showContent:!0},kb))})]})]})}))}),Uk=ac(V(22)),UA=V(22),VA=(0,UA.forwardRef)((b,g)=>{const {pressed:n,defaultPressed:I=!1,onPressedChange:W}=b,ia=Ha(b,["pressed","defaultPressed","onPressedChange"]),[sa=!1,La]=Qg({prop:n,onChange:W,defaultProp:I});return(0,UA.createElement)(tj.button,se({type:"button","aria-pressed":sa,"data-state":sa?"on":"off","data-disabled":b.disabled?"":void 0},ia,{ref:g,onClick:Xf(b.onClick,()=>{b.disabled||La(!sa)})}))}),
bI=VA,[WA]=ng("ToggleGroup",[Vt]),XA=Vt(),cI=Uk.default.forwardRef((b,g)=>{const {type:n}=b;b=Ha(b,["type"]);if("single"===n)return Uk.default.createElement(dI,se({},b,{ref:g}));if("multiple"===n)return Uk.default.createElement(eI,se({},b,{ref:g}));throw Error("Missing prop `type` expected on `ToggleGroup`");}),[YA,ZA]=WA("ToggleGroup"),dI=Uk.default.forwardRef((b,g)=>{const {value:n,defaultValue:I,onValueChange:W=()=>{}}=b,ia=Ha(b,["value","defaultValue","onValueChange"]),[sa,La]=Qg({prop:n,defaultProp:I,
onChange:W});return Uk.default.createElement(YA,{scope:b.__scopeToggleGroup,type:"single",value:sa?[sa]:[],onItemActivate:La,onItemDeactivate:Uk.default.useCallback(()=>La(""),[La])},Uk.default.createElement($A,se({},ia,{ref:g})))}),eI=Uk.default.forwardRef((b,g)=>{const {value:n,defaultValue:I,onValueChange:W=()=>{}}=b,ia=Ha(b,["value","defaultValue","onValueChange"]),[sa=[],La]=Qg({prop:n,defaultProp:I,onChange:W}),Xa=Uk.default.useCallback(kb=>La((tb=[])=>[...tb,kb]),[La]),$a=Uk.default.useCallback(kb=>
La((tb=[])=>tb.filter(Ob=>Ob!==kb)),[La]);return Uk.default.createElement(YA,{scope:b.__scopeToggleGroup,type:"multiple",value:sa,onItemActivate:Xa,onItemDeactivate:$a},Uk.default.createElement($A,se({},ia,{ref:g})))}),[fI,gI]=WA("ToggleGroup"),$A=Uk.default.forwardRef((b,g)=>{const {__scopeToggleGroup:n,disabled:I=!1,rovingFocus:W=!0,orientation:ia,dir:sa,loop:La=!0}=b;var Xa=Ha(b,"__scopeToggleGroup disabled rovingFocus orientation dir loop".split(" "));b=XA(n);const $a=Eb(sa);Xa=Fa({role:"group",
dir:$a},Xa);return Uk.default.createElement(fI,{scope:n,rovingFocus:W,disabled:I},W?Uk.default.createElement(wz,se({asChild:!0},b,{orientation:ia,dir:$a,loop:La}),Uk.default.createElement(tj.div,se({},Xa,{ref:g}))):Uk.default.createElement(tj.div,se({},Xa,{ref:g})))}),hI=Uk.default.forwardRef((b,g)=>{var n=ZA("ToggleGroupItem",b.__scopeToggleGroup);const I=gI("ToggleGroupItem",b.__scopeToggleGroup),W=XA(b.__scopeToggleGroup);n=n.value.includes(b.value);const ia=I.disabled||b.disabled;b=Wa(Fa({},b),
{pressed:n,disabled:ia});const sa=Uk.default.useRef(null);return I.rovingFocus?Uk.default.createElement(xz,se({asChild:!0},W,{focusable:!ia,active:n,ref:sa}),Uk.default.createElement(aB,se({},b,{ref:g}))):Uk.default.createElement(aB,se({},b,{ref:g}))}),aB=Uk.default.forwardRef((b,g)=>{const {__scopeToggleGroup:n,value:I}=b,W=Ha(b,["__scopeToggleGroup","value"]),ia=ZA("ToggleGroupItem",n);b={role:"radio","aria-checked":b.pressed,"aria-pressed":void 0};return Uk.default.createElement(VA,se({},"single"===
ia.type?b:void 0,W,{ref:g,onPressedChange:sa=>{if(sa)ia.onItemActivate(I);else ia.onItemDeactivate(I)}}))}),bB=cI,cB=hI;ob=V(587);ob=V(587);ob=V(587);var dB="Edit AutoResizing Swatch NoFill StrokeType ScaleLevel TextStyle YoutubeLink TwitterLink IFrameSource LogseqPortalViewMode ArrowMode Links".split(" "),iI=["Edit","YoutubeLink","TwitterLink","IFrameSource","Links"],Dn=new Map,yw={"logseq-portal":"Swatch Edit LogseqPortalViewMode ScaleLevel AutoResizing Links".split(" "),youtube:["YoutubeLink",
"Links"],tweet:["TwitterLink","Links"],iframe:["IFrameSource","Links"],box:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),ellipse:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),polygon:"Edit TextStyle Swatch ScaleLevel NoFill StrokeType Links".split(" "),line:"Edit TextStyle Swatch ScaleLevel ArrowMode Links".split(" "),pencil:["Swatch","Links","ScaleLevel"],highlighter:["Swatch","Links","ScaleLevel"],text:"Edit TextStyle Swatch ScaleLevel AutoResizing Links".split(" "),
html:["ScaleLevel","AutoResizing","Links"],image:["Links"],video:["Links"]};Object.entries(yw).filter(([,b])=>b.includes("NoFill")&&b.includes("Swatch")).map(([b])=>b);var jI=lf(()=>{const {handlers:{isWhiteboardPage:b,redirectToPage:g,getRedirectPageName:n,insertFirstPageBlock:I}}=np.default.useContext(Vm),W=rg(),ia=xk(W.selectedShapesArray,"Edit")[0];return(0,ob.jsx)(dc,{type:"button",tooltip:"Edit",onClick:()=>{var sa,La,Xa,$a,kb,tb,Ob,ec,Ub;W.api.editShape(ia);if("logseq-portal"===ia.props.type){var pc=
ia.props.pageId;if("P"===ia.props.blockType){b(pc)&&g(pc);pc=n(ia.props.pageId);let mc=null==(Xa=null==(La=null==(sa=window.logseq)?void 0:sa.api)?void 0:La.get_page_blocks_tree)?void 0:Xa.call(La,pc);0===(null==mc?void 0:mc.length)&&(I(pc),mc=null==(tb=null==(kb=null==($a=window.logseq)?void 0:$a.api)?void 0:kb.get_page_blocks_tree)?void 0:tb.call(kb,pc));sa=(null==mc?void 0:mc.find(Vb=>!("propertiesOrder"in Vb)))||mc[0];pc=null==sa?void 0:sa.uuid}null==(Ub=null==(ec=null==(Ob=window.logseq)?void 0:
Ob.api)?void 0:ec.edit_block)?void 0:Ub.call(ec,pc)}},children:(0,ob.jsx)(Gh,{name:"label"in ia.props&&ia.props.label||"text"in ia.props&&ia.props.text?"forms":"text"})})}),kI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"AutoResizing"),n=g.every(I=>I.props.isAutoResizing);return(0,ob.jsx)(cn,{tooltip:"Auto Resize",toggle:g.every(I=>"logseq-portal"===I.props.type),className:"tl-button",pressed:n,onPressedChange:I=>{g.forEach(W=>{if("logseq-portal"===W.props.type)W.update({isAutoResizing:I});else W.onResetBounds({zoom:b.viewport.camera.zoom})});
b.persist()},children:(0,ob.jsx)(Gh,{name:"dimensions"})})}),lI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"LogseqPortalViewMode"),n=g.every(I=>I.collapsed);return(0,ob.jsx)(po,{title:"View Mode",options:[{value:"1",icon:"object-compact",tooltip:"Collapse"},{value:"0",icon:"object-expanded",tooltip:"Expand"}],value:n?"1":"0",onValueChange:I=>{g.forEach(W=>{W.toggleCollapsed()});b.persist()}})}),mI=lf(()=>{var {handlers:{isMobile:b}}=np.default.useContext(Vm);const g=rg(),n=xk(g.selectedShapesArray,
"ScaleLevel"),I=1<(new Set(n.map(W=>W.scaleLevel))).size?"":n[0].scaleLevel;b=[{label:b()?"XS":"Extra Small",value:"xs"},{label:b()?"SM":"Small",value:"sm"},{label:b()?"MD":"Medium",value:"md"},{label:b()?"LG":"Large",value:"lg"},{label:b()?"XL":"Extra Large",value:"xl"},{label:b()?"XXL":"Huge",value:"xxl"}];return(0,ob.jsx)(Ri,{tooltip:"Scale level",options:b,value:I,onValueChange:W=>{n.forEach(ia=>{ia.setScaleLevel(W)});g.persist()}})}),nI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"IFrameSource")[0],
n=np.default.useCallback(W=>{g.onIFrameSourceChange(W.target.value.trim().toLowerCase());b.persist()},[]),I=np.default.useCallback(()=>{g.reload()},[]);return(0,ob.jsxs)("span",{className:"flex gap-3",children:[(0,ob.jsx)(dc,{tooltip:"Reload",type:"button",onClick:I,children:(0,ob.jsx)(Gh,{name:"refresh"})}),(0,ob.jsx)(ru,{title:"Website Url",className:"tl-iframe-src",value:`${g.props.url}`,onChange:n}),(0,ob.jsx)(dc,{tooltip:"Open website url",type:"button",onClick:()=>window.open(g.props.url),children:(0,ob.jsx)(Gh,
{name:"external-link"})})]})}),oI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"YoutubeLink")[0],n=np.default.useCallback(I=>{g.onYoutubeLinkChange(I.target.value);b.persist()},[]);return(0,ob.jsxs)("span",{className:"flex gap-3",children:[(0,ob.jsx)(ru,{title:"YouTube Link",className:"tl-youtube-link",value:`${g.props.url}`,onChange:n}),(0,ob.jsx)(dc,{tooltip:"Open YouTube Link",type:"button",onClick:()=>{var I,W,ia;return null==(ia=null==(W=null==(I=window.logseq)?void 0:I.api)?void 0:W.open_external_link)?
void 0:ia.call(W,g.props.url)},children:(0,ob.jsx)(Gh,{name:"external-link"})})]})}),pI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"TwitterLink")[0],n=np.default.useCallback(I=>{g.onTwitterLinkChange(I.target.value);b.persist()},[]);return(0,ob.jsxs)("span",{className:"flex gap-3",children:[(0,ob.jsx)(ru,{title:"Twitter Link",className:"tl-twitter-link",value:`${g.props.url}`,onChange:n}),(0,ob.jsx)(dc,{tooltip:"Open Twitter Link",type:"button",onClick:()=>{var I,W,ia;return null==(ia=null==
(W=null==(I=window.logseq)?void 0:I.api)?void 0:W.open_external_link)?void 0:ia.call(W,g.props.url)},children:(0,ob.jsx)(Gh,{name:"external-link"})})]})}),qI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"NoFill"),n=np.default.useCallback(W=>{g.forEach(ia=>ia.update({noFill:W}));b.persist()},[]),I=g.every(W=>W.props.noFill);return(0,ob.jsx)(cn,{tooltip:"Fill",className:"tl-button",pressed:I,onPressedChange:n,children:(0,ob.jsx)(Gh,{name:I?"droplet-off":"droplet"})})}),rI=lf(()=>{const b=rg(),g=
xk(b.selectedShapesArray,"Swatch"),n=np.default.useCallback(W=>{g.forEach(ia=>{ia.update({fill:W,stroke:W})});b.persist()},[]),I=np.default.useCallback(W=>{g.forEach(ia=>{ia.update({opacity:W})});b.persist()},[]);return(0,ob.jsx)(tg,{popoverSide:"top",color:g[0].props.noFill?g[0].props.stroke:g[0].props.fill,opacity:g[0].props.opacity,setOpacity:I,setColor:n})}),sI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"StrokeType"),n=g.every(I=>"dashed"===I.props.strokeType)?"dashed":g.every(I=>"line"===
I.props.strokeType)?"line":"mixed";return(0,ob.jsx)(po,{title:"Stroke Type",options:[{value:"line",icon:"circle",tooltip:"Solid"},{value:"dashed",icon:"circle-dashed",tooltip:"Dashed"}],value:n,onValueChange:I=>{g.forEach(W=>{W.update({strokeType:I})});b.persist()}})}),tI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"ArrowMode");var n=g.every(W=>{var ia;return"arrow"===(null==(ia=W.props.decorations)?void 0:ia.start)});const I=g.every(W=>{var ia;return"arrow"===(null==(ia=W.props.decorations)?
void 0:ia.end)});n=[n?"start":null,I?"end":null].filter(Ig);return(0,ob.jsx)(bn,{title:"Arrow Head",options:[{value:"start",icon:"arrow-narrow-left"},{value:"end",icon:"arrow-narrow-right"}],value:n,onValueChange:W=>{g.forEach(ia=>{var sa=ia.update;var La={start:W.includes("start")?"arrow":null,end:W.includes("end")?"arrow":null};sa.call(ia,{decorations:La})});b.persist()}})}),uI=lf(()=>{const b=rg(),g=xk(b.selectedShapesArray,"TextStyle"),n=g.every(W=>500<W.props.fontWeight),I=g.every(W=>W.props.italic);
return(0,ob.jsxs)("span",{className:"flex gap-1",children:[(0,ob.jsx)(cn,{tooltip:"Bold",className:"tl-button",pressed:n,onPressedChange:W=>{g.forEach(ia=>{ia.update({fontWeight:W?700:400});ia.onResetBounds()});b.persist()},children:(0,ob.jsx)(Gh,{name:"bold"})}),(0,ob.jsx)(cn,{tooltip:"Italic",className:"tl-button",pressed:I,onPressedChange:W=>{g.forEach(ia=>{ia.update({italic:W});ia.onResetBounds()});b.persist()},children:(0,ob.jsx)(Gh,{name:"italic"})})]})}),vI=lf(()=>{var b;const g=rg(),n=g.selectedShapesArray[0];
return(0,ob.jsx)(aI,{onRefsChange:I=>{n.update({refs:I});g.persist()},refs:null!=(b=n.props.refs)?b:[],shapeType:n.props.type,side:"right",pageId:"logseq-portal"===n.props.type?n.props.pageId:void 0,portalType:"logseq-portal"===n.props.type?n.props.blockType:void 0})});Dn.set("Edit",jI);Dn.set("AutoResizing",kI);Dn.set("LogseqPortalViewMode",lI);Dn.set("ScaleLevel",mI);Dn.set("YoutubeLink",oI);Dn.set("TwitterLink",pI);Dn.set("IFrameSource",nI);Dn.set("NoFill",qI);Dn.set("Swatch",rI);Dn.set("StrokeType",
sI);Dn.set("ArrowMode",tI);Dn.set("TextStyle",uI);Dn.set("Links",vI);var eB=b=>{var g;return(null!=(g=yw[b])?g:[]).filter(Ig)},wI=b=>{const g=b.map(I=>I.props.type),n=new Set(0<b.length?eB(g[0]):[]);for(let I=1;I<g.length&&0<n.size;I++){const W=eB(g[I]);n.forEach(ia=>{W.includes(ia)||n.delete(ia)})}1<b.length&&iI.forEach(I=>{n.has(I)&&n.delete(I)});return Array.from(n).sort((I,W)=>dB.indexOf(I)-dB.indexOf(W)).map(I=>Dn.get(I))};ob=V(587);var xI=lf(({shapes:b,offsets:g,hidden:n})=>{const I=rg(),W=
Ss.useRef(null),ia=Ss.useRef(null);Ss.useLayoutEffect(()=>{setTimeout(()=>{const La=ia.current;if(La){var {offsetWidth:Xa,offsetHeight:$a}=La;W.current=[Xa,$a]}})});Ss.useLayoutEffect(()=>{var La;const Xa=ia.current;if(Xa){var $a=null!=(La=W.current)?La:[0,0];La=0;if(116>g.top){var kb=g.height/2+40;140>g.bottom&&(kb+=g.bottom-140)}else kb=-(g.height/2+40);16>g.left+g.width/2-$a[0]/2?La+=-(g.left+g.width/2-$a[0]/2-16):16>g.right+g.width/2-$a[0]/2&&(La+=g.right+g.width/2-$a[0]/2-16);var [tb,Ob]=[La,
kb];Xa.style.transform=`translateX(${tb}px) translateY(${Ob}px)`}},[g]);if(!I)return null;const sa=wI(b);return(0,ob.jsx)(bo,{centered:!0,children:0<sa.length&&(0,ob.jsx)("div",{ref:ia,className:"tl-toolbar tl-context-bar",style:{visibility:n?"hidden":"visible",pointerEvents:n?"none":"all"},children:sa.map((La,Xa)=>(0,ob.jsxs)(Ss.Fragment,{children:[(0,ob.jsx)(La,{}),Xa<sa.length-1&&(0,ob.jsx)(Oq,{className:"tl-toolbar-separator",orientation:"vertical"})]},Xa))})})}),fB=ac(V(22)),vl=V(22),[yI]=ng("ContextMenu",
[bu]),$s=bu(),[zI,gB]=yI("ContextMenu"),AI=(0,vl.forwardRef)((b,g)=>{const {__scopeContextMenu:n,disabled:I=!1}=b,W=Ha(b,["__scopeContextMenu","disabled"]),ia=gB("ContextMenuTrigger",n),sa=$s(n),La=(0,vl.useRef)({x:0,y:0}),Xa=(0,vl.useRef)({getBoundingClientRect:()=>DOMRect.fromRect(Fa({width:0,height:0},La.current))}),$a=(0,vl.useRef)(0),kb=(0,vl.useCallback)(()=>window.clearTimeout($a.current),[]);(0,vl.useEffect)(()=>kb,[kb]);(0,vl.useEffect)(()=>void(I&&kb()),[I,kb]);return(0,vl.createElement)(vl.Fragment,
null,(0,vl.createElement)(Lz,se({},sa,{virtualRef:Xa})),(0,vl.createElement)(tj.span,se({"data-state":ia.open?"open":"closed","data-disabled":I?"":void 0},W,{ref:g,style:Fa({WebkitTouchCallout:"none"},b.style),onContextMenu:I?b.onContextMenu:Xf(b.onContextMenu,tb=>{kb();La.current={x:tb.clientX,y:tb.clientY};ia.onOpenChange(!0);tb.preventDefault()}),onPointerDown:I?b.onPointerDown:Xf(b.onPointerDown,Hn(tb=>{kb();$a.current=window.setTimeout(()=>{La.current={x:tb.clientX,y:tb.clientY};ia.onOpenChange(!0)},
700)})),onPointerMove:I?b.onPointerMove:Xf(b.onPointerMove,Hn(kb)),onPointerCancel:I?b.onPointerCancel:Xf(b.onPointerCancel,Hn(kb)),onPointerUp:I?b.onPointerUp:Xf(b.onPointerUp,Hn(kb))})))}),BI=(0,vl.forwardRef)((b,g)=>{var {__scopeContextMenu:n}=b;const I=Ha(b,["__scopeContextMenu"]),W=gB("ContextMenuContent",n);n=$s(n);const ia=(0,vl.useRef)(!1);return(0,vl.createElement)(Nz,se({},n,I,{ref:g,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:sa=>{var La;null===(La=b.onCloseAutoFocus)||void 0===
La||La.call(b,sa);!sa.defaultPrevented&&ia.current&&sa.preventDefault();ia.current=!1},onInteractOutside:sa=>{var La;null===(La=b.onInteractOutside)||void 0===La||La.call(b,sa);sa.defaultPrevented||W.modal||(ia.current=!0)},style:Wa(Fa({},b.style),{["--radix-context-menu-content-transform-origin"]:"var(--radix-popper-transform-origin)"})}))}),Hm=(0,vl.forwardRef)((b,g)=>{var {__scopeContextMenu:n}=b;b=Ha(b,["__scopeContextMenu"]);n=$s(n);return(0,vl.createElement)(Pz,se({},n,b,{ref:g}))}),Vq=(0,vl.forwardRef)((b,
g)=>{var {__scopeContextMenu:n}=b;b=Ha(b,["__scopeContextMenu"]);n=$s(n);return(0,vl.createElement)(tF,se({},n,b,{ref:g}))}),CI=b=>{const {__scopeContextMenu:g,children:n,onOpenChange:I,dir:W,modal:ia=!0}=b,[sa,La]=(0,vl.useState)(!1);b=$s(g);const Xa=ij(I),$a=(0,vl.useCallback)(kb=>{La(kb);Xa(kb)},[Xa]);return(0,vl.createElement)(zI,{scope:g,open:sa,onOpenChange:$a,modal:ia},(0,vl.createElement)(Qz,se({},b,{dir:W,open:sa,onOpenChange:$a,modal:ia}),n))};ob=V(587);var DI=lf(function({children:b,collisionRef:g}){var n,
I,W,ia,sa,La,Xa;const $a=rg(),kb=fB.useRef(null),tb=ec=>{ec();$a.transition("select")},Ob=fB.useMemo(()=>yk(),[]);return(0,ob.jsxs)(CI,{onOpenChange:ec=>{ec&&!$a.isIn("select.contextMenu")?$a.transition("select").selectedTool.transition("contextMenu"):!ec&&$a.isIn("select.contextMenu")&&$a.selectedTool.transition("idle")},children:[(0,ob.jsx)(AI,{disabled:$a.editingShape&&0!==Object.keys($a.editingShape).length,children:b}),(0,ob.jsx)(BI,{className:"tl-menu tl-context-menu",ref:kb,onEscapeKeyDown:()=>
$a.transition("select"),collisionBoundary:g.current,asChild:!0,tabIndex:-1,children:(0,ob.jsxs)("div",{children:[1<(null==(n=$a.selectedShapes)?void 0:n.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)(Hm,{children:[(0,ob.jsxs)("div",{className:"tl-menu-button-row pb-0",children:[(0,ob.jsx)(dc,{tooltip:"Align left",onClick:()=>tb(()=>$a.align("left")),children:(0,ob.jsx)(Gh,{name:"layout-align-left"})}),(0,ob.jsx)(dc,{tooltip:"Align center horizontally",onClick:()=>tb(()=>$a.align("centerHorizontal")),
children:(0,ob.jsx)(Gh,{name:"layout-align-center"})}),(0,ob.jsx)(dc,{tooltip:"Align right",onClick:()=>tb(()=>$a.align("right")),children:(0,ob.jsx)(Gh,{name:"layout-align-right"})}),(0,ob.jsx)(Oq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,ob.jsx)(dc,{tooltip:"Distribute horizontally",onClick:()=>tb(()=>$a.distribute("horizontal")),children:(0,ob.jsx)(Gh,{name:"layout-distribute-vertical"})})]}),(0,ob.jsxs)("div",{className:"tl-menu-button-row pt-0",children:[(0,ob.jsx)(dc,{tooltip:"Align top",
onClick:()=>tb(()=>$a.align("top")),children:(0,ob.jsx)(Gh,{name:"layout-align-top"})}),(0,ob.jsx)(dc,{tooltip:"Align center vertically",onClick:()=>tb(()=>$a.align("centerVertical")),children:(0,ob.jsx)(Gh,{name:"layout-align-middle"})}),(0,ob.jsx)(dc,{tooltip:"Align bottom",onClick:()=>tb(()=>$a.align("bottom")),children:(0,ob.jsx)(Gh,{name:"layout-align-bottom"})}),(0,ob.jsx)(Oq,{className:"tl-toolbar-separator",orientation:"vertical"}),(0,ob.jsx)(dc,{tooltip:"Distribute vertically",onClick:()=>
tb(()=>$a.distribute("vertical")),children:(0,ob.jsx)(Gh,{name:"layout-distribute-horizontal"})})]})]}),(0,ob.jsx)(Vq,{className:"menu-separator"}),(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.packIntoRectangle),children:[(0,ob.jsx)(Gh,{className:"tl-menu-icon",name:"layout-grid"}),"Pack into rectangle"]}),(0,ob.jsx)(Vq,{className:"menu-separator"})]}),0<(null==(I=$a.selectedShapes)?void 0:I.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>
tb($a.api.zoomToSelection),children:["Zoom to fit",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:""})," ",(0,ob.jsx)("code",{children:"1"})]})})]}),(0,ob.jsx)(Vq,{className:"menu-separator"})]}),($a.selectedShapesArray.some(ec=>"group"===ec.type||$a.getParentGroup(ec))||1<$a.selectedShapesArray.length)&&(0,ob.jsxs)(ob.Fragment,{children:[$a.selectedShapesArray.some(ec=>
"group"===ec.type||$a.getParentGroup(ec))&&(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.api.unGroup),children:[(0,ob.jsx)(Gh,{className:"tl-menu-icon",name:"ungroup"}),"Ungroup",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:""})," ",(0,ob.jsx)("code",{children:"G"})]})})]}),1<$a.selectedShapesArray.length&&(0,ob.jsxs)(Hm,{className:"tl-menu-item",
onClick:()=>tb($a.api.doGroup),children:[(0,ob.jsx)(Gh,{className:"tl-menu-icon",name:"group"}),"Group",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:"G"})]})})]}),(0,ob.jsx)(Vq,{className:"menu-separator"})]}),0<(null==(W=$a.selectedShapes)?void 0:W.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.cut),children:[(0,ob.jsx)(Gh,
{className:"tl-menu-icon",name:"cut"}),"Cut",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:"X"})]})})]}),(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.copy),children:[(0,ob.jsx)(Gh,{className:"tl-menu-icon",name:"copy"}),"Copy",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",
{children:wo})," ",(0,ob.jsx)("code",{children:"C"})]})})]})]}),(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.paste),children:[(0,ob.jsx)(Gh,{className:"tl-menu-icon",name:"clipboard"}),"Paste",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:"V"})]})})]}),1===(null==(ia=$a.selectedShapes)?void 0:ia.size)&&(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>
tb(()=>$a.paste(void 0,!0)),children:["Paste as link",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:""})," ",(0,ob.jsx)("code",{children:"V"})]})})]}),(0,ob.jsx)(Vq,{className:"menu-separator"}),(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.api.selectAll),children:["Select all",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",
{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:wo})," ",(0,ob.jsx)("code",{children:"A"})]})})]}),1<(null==(sa=$a.selectedShapes)?void 0:sa.size)&&(0,ob.jsx)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.api.deselectAll),children:"Deselect all"}),0<(null==(La=$a.selectedShapes)?void 0:La.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.api.deleteShapes),children:[(0,ob.jsx)(Gh,{className:"tl-menu-icon",name:"backspace"}),"Delete",
(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsx)("span",{className:"keyboard-shortcut",children:(0,ob.jsx)("code",{children:"Del"})})})]}),1<(null==(Xa=$a.selectedShapes)?void 0:Xa.size)&&(0,ob.jsxs)(ob.Fragment,{children:[(0,ob.jsx)(Vq,{className:"menu-separator"}),(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.flipHorizontal),children:[(0,ob.jsx)(Gh,{className:"tl-menu-icon",name:"flip-horizontal"}),"Flip horizontally"]}),(0,ob.jsxs)(Hm,{className:"tl-menu-item",
onClick:()=>tb($a.flipVertical),children:[(0,ob.jsx)(Gh,{className:"tl-menu-icon",name:"flip-vertical"}),"Flip vertically"]})]}),(0,ob.jsx)(Vq,{className:"menu-separator"}),(0,ob.jsxs)(Hm,{className:"tl-menu-item",onClick:()=>tb($a.bringToFront),children:["Move to front",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:""})," ",(0,ob.jsx)("code",{children:"]"})]})})]}),(0,ob.jsxs)(Hm,{className:"tl-menu-item",
onClick:()=>tb($a.sendToBack),children:["Move to back",(0,ob.jsx)("div",{className:"tl-menu-right-slot",children:(0,ob.jsxs)("span",{className:"keyboard-shortcut",children:[(0,ob.jsx)("code",{children:""})," ",(0,ob.jsx)("code",{children:"["})]})})]}),Ob&&(0,ob.jsx)(Hm,{className:"tl-menu-item",onClick:()=>{1===$a.selectedShapesArray.length?console.log(Ec($a.selectedShapesArray[0].serialized)):console.log($a.selectedShapesArray.map(ec=>Ec(ec.serialized)))},children:"(Dev) Print shape props"})]})]})})]})}),
hB=ac(V(22));ob=V(587);var EI=lf(({shape:b})=>{const g=rg(),{handlers:n}=hB.default.useContext(Vm),I=hB.default.useMemo(()=>{var W;const ia=[...(null!=(W=b.props.refs)?W:[])].map(sa=>[sa,!0]);"logseq-portal"===b.props.type&&b.props.pageId&&ia.unshift([b.props.pageId,!1]);return ia.filter(sa=>sa[0].toLowerCase()!==g.currentPage.name&&n.getBlockPageName(sa[0])!==g.currentPage.name)},[b.props.type,b.props.parentId,b.props.refs]);return 0===I.length?null:(0,ob.jsx)("div",{className:"tl-quick-links",title:"Shape Quick Links",
children:I.map(([W,ia])=>(0,ob.jsx)("div",{className:"tl-quick-links-row",children:(0,ob.jsx)(nA,{id:W,showReferenceContent:ia})},W))})}),FI=ac(V(22)),iB=ac(V(22)),GI=[".png",".svg",".jpg",".jpeg",".gif"],HI=[".mp4",".webm",".ogg"],II=(b,g,n)=>Rd(void 0,[b,g,n],function*(I,{point:W,shiftKey:ia,dataTransfer:sa,fromDrop:La},Xa){function $a(kd,md){return Rd(this,null,function*(){const Cd=Object.values(I.assets).find(we=>we.src===kd);return Cd?Cd:{id:Sf(),type:md?"video":"image",src:kd,size:yield vj(Xa.makeAssetUrl(kd),
md)}})}function kb(kd){return Rd(this,null,function*(){const md=kd.filter(Cd=>"unknown"!==ko(Cd.name)).map(Cd=>Rd(this,null,function*(){try{const we=yield Xa.saveAsset(Cd);return yield $a(we,"video"===ko(Cd.name))}catch(we){console.error(we)}return null}));return(yield Promise.all(md)).filter(Ig)})}function tb(kd){return[Wa(Fa({},Qp.defaultProps),{html:kd,point:[W[0],W[1]]})]}function Ob(kd){return Rd(this,null,function*(){return In(Ub,Vb,mc,uc,pc,be)(kd)})}function ec(){return Rd(this,null,function*(){const kd=
yield navigator.clipboard.read(),md=In(uc,pc,be);return(yield Promise.all(kd.map(Cd=>md(Cd)))).flat().filter(Ig)})}function Ub(kd){return Rd(this,null,function*(){var md=Array.from(kd.files);return 0<md.length?(rf=md=yield kb(md),md.map((Cd,we)=>{const Fe=Wa(Fa({},"video"===Cd.type?qu.defaultProps:pu.defaultProps),{id:Sf(),assetId:Cd.id,opacity:1});Cd.size&&Object.assign(Fe,{point:[W[0]-Cd.size[0]/4+16*we,W[1]-Cd.size[1]/4+16*we],size:Zd.div(Cd.size,2)});return Fe})):null})}function pc(kd){return Rd(this,
null,function*(){if(kd.types.includes("text/plain")&&(ia||La))return null;const md=yield Yn(kd,"text/html");return md?In(Ic,tb)(md):null})}function mc(kd){return Rd(this,null,function*(){var md,Cd,we,Fe,of,gf,ff=kd.getData("block-uuid");if(ff){ff=ff.trim();const Ug=null==(we=null==(Cd=null==(md=window.logseq)?void 0:md.api)?void 0:Cd.get_selected_blocks)?void 0:we.call(Cd);md=Ug&&1<(null==Ug?void 0:Ug.length)?Ug.map(Fg=>Fg.uuid):[ff];null==(gf=null==(of=null==(Fe=window.logseq)?void 0:Fe.api)?void 0:
of.set_blocks_id)?void 0:gf.call(of,md);Fe=md.map(Fg=>Wd(`((${Fg}))`));return(yield Promise.all(Fe)).flat().filter(Ig).map((Fg,pi)=>Wa(Fa({},Fg),{point:[W[0]+(ul.defaultProps.size[0]+16)*pi,W[1]]}))}return null})}function Vb(kd){return Rd(this,null,function*(){var md=kd.getData("page-name");return md?(md=md.trim(),Wd(`[[${md}]]`)):null})}function uc(kd){return Rd(this,null,function*(){var md=yield Yn(kd,"text/plain");return md?(md=md.trim(),In(Rc,Vc)(md)):null})}function Ic(kd){if(kd=I.api.getClonedShapesFromTldrString(decodeURIComponent(kd),
W)){const {shapes:md,assets:Cd,bindings:we}=kd;nf.push(...Cd);cf.push(...we);return md}return null}function Rc(kd){return Rd(this,null,function*(){try{const Cd=new URL(kd);var md=Cd.host&&["http:","https:"].includes(Cd.protocol)}catch(Cd){md=!1}return md&&!ia?HA.test(kd)?[Wa(Fa({},Uq.defaultProps),{url:kd,point:[W[0],W[1]]})]:JA.test(kd)?[Wa(Fa({},Ur.defaultProps),{url:kd,point:[W[0],W[1]]})]:[Wa(Fa({},Sq.defaultProps),{url:kd,point:[W[0],W[1]]})]:null})}function Vc(kd){return kd.startsWith("\x3ciframe")?
[Wa(Fa({},Qp.defaultProps),{html:kd,point:[W[0],W[1]]})]:null}function Wd(kd){return Rd(this,null,function*(){if(/^\(\(.*\)\)$/.test(kd)&&40===kd.length){var md=kd.slice(2,-2);if(Th(md))return[Wa(Fa({},ul.defaultProps),{point:[W[0],W[1]],size:[400,0],pageId:md,fill:I.settings.color,stroke:I.settings.color,blockType:"B"})]}else if(/^\[\[.*\]\]$/.test(kd))return md=kd.slice(2,-2),[Wa(Fa({},ul.defaultProps),{point:[W[0],W[1]],size:[400,0],pageId:md,fill:I.settings.color,stroke:I.settings.color,blockType:"P"})];
return null})}function be(kd){return Rd(this,null,function*(){var md=yield Yn(kd,"text/plain");return md&&(md=md.trim(),md=null==Xa?void 0:Xa.addNewBlock(md))?[Wa(Fa({},ul.defaultProps),{size:[400,0],point:[W[0],W[1]],pageId:md,fill:I.settings.color,stroke:I.settings.color,blockType:"B",compact:!0})]:null})}var Ee,Oe;let rf=[],nf=[];const cf=[];I.cursors.setCursor("progress");let Ie=[];try{sa?Ie.push(...(null!=(Ee=yield Ob(sa))?Ee:[])):Ie.push(...(null!=(Oe=yield ec())?Oe:[]))}catch(kd){console.error(kd)}const Bd=
Ie.map(kd=>Wa(Fa({},kd),{parentId:I.currentPageId,id:Th(kd.id)?kd.id:Sf()})),gd=null==sa?void 0:sa.types.every(kd=>"Files"===kd);I.wrapUpdate(()=>{var kd=[...rf,...nf];0<kd.length&&I.createAssets(kd);0<Bd.length&&I.createShapes(Bd);I.currentPage.updateBindings(Object.fromEntries(cf.map(md=>[md.id,md])));if(1===I.selectedShapesArray.length&&1===Bd.length&&La){kd=I.selectedShapesArray[0];const md=I.getShapeById(Bd[0].id);I.createNewLineBinding(kd,md)}I.setSelectedShapes(Bd.map(md=>md.id));I.selectedTool.transition("idle");
I.cursors.setCursor("default");(La||gd)&&I.packIntoRectangle()})}),jB=ac(V(22)),JI=ac(V(22));ob=V(587);var KI=[qw,rw,MA,sw,tw,uw,vw,ww,NA,RA,QA,Zs],LI=b=>{const {renderers:g}=Dr.useContext(Vm);return(0,ob.jsx)(g.BacklinksCount,Wa(Fa({},b),{options:{"portal?":!1}}))},MI=()=>{const b=Dr.useRef(null),g=rg(),n=Dr.useMemo(()=>({ContextBar:xI,BacklinksCount:LI,QuickLinks:EI}),[]);return(0,ob.jsx)(DI,{collisionRef:b,children:(0,ob.jsx)("div",{ref:b,className:"logseq-tldraw logseq-tldraw-wrapper","data-tlapp":g.uuid,
children:(0,ob.jsx)(BD,{components:n,children:(0,ob.jsx)($F,{})})})})},NI=b=>{var {onPersist:g,model:n}=b;b=Ha(b,["onPersist","model"]);const I=Mm(),W=Sl(),ia=mo(),sa=Io(),La=Dr.useCallback((Xa,$a)=>{null==g?void 0:g(Xa,$a)},[n]);return(0,ob.jsx)(DD,Wa(Fa({Shapes:LA,Tools:KI,onDrop:I,onPaste:W,onCopy:ia,onCanvasDBClick:sa,onPersist:La,model:n},b),{children:(0,ob.jsx)(MI,{})}))},OI=function(b){var {renderers:g,handlers:n}=b;b=Ha(b,["renderers","handlers"]);const I={renderers:Dr.useMemo(()=>Object.fromEntries(Object.entries(g).map(([W,
ia])=>[W,Dr.memo(ia)])),[]),handlers:n};return(0,ob.jsx)(Vm.Provider,{value:I,children:(0,ob.jsx)(NI,Fa({},b))})}};
'use strict';var agd=function(a){return a},bgd=function(a,b){return $APP.xh.j(function(c){var d=$APP.nf(c);c=$APP.G.j(d,$APP.XC);d=$APP.G.j(d,$APP.LF);return new $APP.m(null,2,[$APP.tl,$APP.u.C(c),$APP.xEb,$APP.ty.j(d,new $APP.O(null,2,5,$APP.Q,[$APP.wE,$APP.xEb],null))],null)},$APP.Tf.j(function(c){return $APP.wE.C($APP.LF.C(c))},$APP.kH(a,b,new $APP.m(null,1,[$APP.it,new $APP.O(null,2,5,$APP.Q,[$APP.XC,$APP.LF],null)],null))))},cgd=function(a){return $APP.tq.G(a,$APP.F([$APP.uq,!0]))},dgd=function(a,
b,c,d){var e=$APP.qH(a);b=new $APP.m(null,2,[$APP.xE,$APP.lib,$APP.yE,new $APP.m(null,6,[$APP.tl,$APP.wa(b,"id"),$APP.W,$APP.wa(b,"name"),$APP.oI,cgd($APP.wa(b,"bindings")),$APP.xEb,$APP.wa(b,"nonce"),$APP.PR,cgd(c),$APP.uEb,d],null)],null);c=$APP.Mw();e=$APP.PH.C(e);e=$APP.n(e)?e:$APP.Mw();return new $APP.m(null,5,[$APP.kr,a,$APP.SG,"whiteboard",$APP.LF,b,$APP.QH,c,$APP.PH,e],null)},egd=function(a,b,c,d,e,f){a=cgd(a.getCleanUpAssets());var g=$APP.xh.j(function(z){return $APP.wa(z,"id")},b.shapes),
h=$APP.bh($APP.xh.j(function(z){z=$APP.nf(z);z=$APP.G.j(z,$APP.tl);return cgd(b.getShapeById(z).serialized)},$APP.tA.j(c,d)));d=$APP.bh($APP.xh.j($APP.tl,d));var l=$APP.bh($APP.xh.j($APP.tl,c)),p=$APP.bh($APP.Cm.j($APP.Rj,$APP.tA.j(l,d)));c=$APP.bh($APP.Tf.j(function(z){z=$APP.tl.C(z);return p.C?p.C(z):p.call(null,z)},h));var q=$APP.Cm.j($APP.Rj,$APP.tA.j(d,l)),r=$APP.RB();d=$APP.x(q)?$APP.xh.j(function(z){return $APP.ty.j(z,new $APP.O(null,2,5,$APP.Q,[$APP.LF,$APP.wE],null))},function(){var z=new $APP.O(null,
1,5,$APP.Q,[$APP.bz],null),E=$APP.rj.j(function(I){return new $APP.O(null,2,5,$APP.Q,[$APP.XC,$APP.ai(I)],null)},q);return $APP.jF?$APP.jF(r,z,E):$APP.kF.call(null,r,z,E)}()):null;l=$APP.rj.j(function(z){return new $APP.O(null,2,5,$APP.Q,[$APP.oLa,new $APP.O(null,2,5,$APP.Q,[$APP.XC,$APP.ai(z)],null)],null)},q);var t=$APP.tA.j(h,c),y=$APP.x(t)?function(){var z=new $APP.O(null,1,5,$APP.Q,[$APP.bz],null),E=$APP.rj.j(function(I){return new $APP.O(null,2,5,$APP.Q,[$APP.XC,$APP.ai($APP.tl.C(I))],null)},
t);return $APP.jF?$APP.jF(r,z,E):$APP.kF.call(null,r,z,E)}():null;return new $APP.m(null,4,[$APP.voc,dgd(e,b,a,g),$APP.nDc,$APP.xh.j(function(z){return $APP.ae(p,$APP.u.C($APP.XC.C(z)))?$APP.R.F(z,$APP.QH,$APP.Mw()):$APP.qsb(z)},$APP.xh.j(function(z){z=new $APP.m(null,2,[$APP.xE,$APP.pN,$APP.wE,z],null);z=new $APP.m(null,3,[$APP.eF,new $APP.m(null,1,[$APP.kr,$APP.jr.C?$APP.jr.C(e):$APP.jr.call(null,e)],null),$APP.uF,new $APP.m(null,1,[$APP.kr,e],null),$APP.LF,z],null);var E=$APP.rib(z,e);return $APP.Nl.G($APP.F([z,
E]))},h)),$APP.JF,l,$APP.RUb,new $APP.m(null,3,[$APP.dsb,$APP.Jb(f),$APP.Nrb,f,$APP.Wv,new $APP.m(null,5,[$APP.mN,e,$APP.MEb,d,$APP.NEb,c,$APP.OEb,t,$APP.PEb,y],null)],null)],null)},fgd=function(a,b,c){var d=$APP.dd($APP.A(b.pages)),e=$APP.bh($APP.xh.j(function(l){return new $APP.m(null,2,[$APP.tl,l.id,$APP.xEb,l.nonce],null)},d.shapes)),f=$APP.RB(),g=function(){var l=$APP.ty.j($APP.v($APP.C2c),new $APP.O(null,2,5,$APP.Q,[f,a],null));return $APP.n(l)?l:$APP.bh($APP.xh.j(function(p){return $APP.sr.F(p,
$APP.tl,$APP.u)},bgd(f,a)))}();b=egd(b,d,e,g,a,c);g=$APP.nf(b);d=$APP.G.j(g,$APP.voc);b=$APP.G.j(g,$APP.nDc);c=$APP.G.j(g,$APP.JF);g=$APP.G.j(g,$APP.RUb);d=$APP.Uk.G(c,new $APP.O(null,1,5,$APP.Q,[d],null),$APP.F([b]));var h=$APP.ty.j(g,new $APP.O(null,2,5,$APP.Q,[$APP.Wv,$APP.NEb],null));h=$APP.n($APP.yf(function(l){return $APP.B.j("group",$APP.Em.C(l))},h))?$APP.R.F(g,$APP.QEb,$APP.Mv):$APP.n($APP.yf(function(l){return $APP.B.j("group",$APP.Em.C(l))},$APP.ty.j(g,new $APP.O(null,2,5,$APP.Q,[$APP.Wv,
$APP.MEb],null))))?$APP.R.F(g,$APP.QEb,$APP.zpc):$APP.n($APP.yf(function(l){return $APP.B.j("line",$APP.Em.C(l))&&$APP.B.j("arrow ",$APP.Io.C($APP.xnc.C(l)))},h))?$APP.R.F(g,$APP.QEb,$APP.Izc):g;b=$APP.x($APP.Uk.j(b,c))?h:$APP.R.F(g,$APP.YXa,!0);$APP.Mh.R($APP.C2c,$APP.lv,new $APP.O(null,2,5,$APP.Q,[f,a],null),e);if($APP.ae(new $APP.Yg(null,new $APP.m(null,1,[$APP.Izc,null],null),null),$APP.QEb.C(b)))return $APP.UB($APP.BPc,new $APP.m(null,2,[$APP.Ay,d,$APP.RUb,b],null));e=$APP.BPc.C($APP.v($APP.SB));
$APP.Uk.j($APP.Ay.C(e),d);$APP.Nl.G($APP.F([b,$APP.RUb.C(e)]));$APP.UB($APP.BPc,$APP.mf);return null},ggd=function(a){a=$APP.jH(a);return $APP.Cm.j($APP.jib,a)},hgd=function(a){var b=$APP.By.C($APP.qH(a));a=ggd(a);a=$APP.Tf.j(function(d){return $APP.B.j(b,$APP.By.C($APP.uF.C(d)))},a);var c=$APP.bh($APP.Cm.j($APP.Gb,$APP.xh.j(function(d){return $APP.ty.F(d,new $APP.O(null,2,5,$APP.Q,[$APP.vF,$APP.By],null),null)},a)));a=$APP.Cm.j(function(d){d=$APP.By.C(d);return c.C?c.C(d):c.call(null,d)},a);return $APP.x(a)?
$APP.A(a):null},igd=function(){return $APP.cm(null,function(){return $APP.cm(fetch("./whiteboard/onboarding.edn"),function(a){return $APP.cm(a.text(),function(b){return $APP.cm($APP.Oxa($APP.mf,b),function(c){return $APP.Xl(c)})})})})},jgd=function(a){var b=$APP.Z0a();return($APP.qd(b)||$APP.B.j(1,$APP.Zc(b))&&$APP.B.j(a,$APP.kr.C($APP.A(b))))&&$APP.Jb($APP.ty.j($APP.v($APP.SB),new $APP.O(null,1,5,$APP.Q,[$APP.Gac],null)))},kgd=function(a){return null!=a?$APP.fm($APP.cm(null,function(){return $APP.cm(igd(),
function(b){var c=$APP.nf(b);b=$APP.G.j(c,$APP.NH);c=$APP.G.j(c,$APP.tF);var d=$APP.A(b);b=$APP.vEb(d,c);d=$APP.iib(d);c=$APP.PR.C(d);d=$APP.oI.C(d);a.cloneShapesIntoCurrentPage($APP.Ki(new $APP.m(null,3,[$APP.GEb,b,$APP.PR,c,$APP.oI,d],null)));$APP.UB($APP.Gac,!0);b=$APP.zB($APP.bfc,!0);return $APP.Xl(b)})}),function(b){return console.warn("Failed to populate onboarding whiteboard",b)}):null},ngd=function(a,b){b=$APP.tq.G(b,$APP.F([new $APP.m(null,1,[$APP.uq,!0],null)]));b=$APP.nf(b);var c=$APP.G.j(b,
lgd),d=$APP.G.j(b,$APP.aK),e=$APP.G.j(b,mgd),f=$APP.RB();return $APP.cm(null,function(){return $APP.cm($APP.n(d)?$APP.idb(f,a,new $APP.m(null,1,[$APP.kx,100],null)):null,function(g){return $APP.cm($APP.n(c)?$APP.ndb(a,10):null,function(h){return $APP.cm($APP.n(e)?$APP.odb(a,100):null,function(l){return $APP.Xl($APP.Ki(new $APP.m(null,3,[$APP.NH,h,$APP.tF,g,$APP.BK,l],null)))})})})})},ogd=function(a){return $APP.bm($APP.Tyb($APP.RB(),new $APP.O(null,1,5,$APP.Q,[$APP.tq.C(a)],null)),function(b){var c=
(c=$APP.x(b))?$APP.A(b):c;return $APP.n(c)?(b=$APP.C.F(c,0,null),$APP.C.F(c,1,null),c=$APP.C.F(c,2,null),$APP.Vyb($APP.n(c)?c:b)):null})},pgd=function(){return $APP.tBb(null)},qgd=function(){return $APP.wBb(null)},Egd=function(a){return $APP.Kg([rgd,sgd,tgd,ugd,vgd,wgd,$APP.wD,xgd,ygd,zgd,Agd,Bgd,Cgd,Dgd],[function(b){return $APP.kr.C($APP.i_a($APP.RB(),$APP.Ci(b)))},function(b){return $APP.rH(b,!1)},function(b){return $APP.yEb(b)},$APP.ex,function(b){return $APP.ayb(b,new $APP.m(null,1,[$APP.OS,
!1],null))},$APP.OH,ngd,ogd,agd,function(b,c){return $APP.AHa(b,c)},function(b){var c=$APP.u,d=c.C,e=$APP.YA(),f=$APP.qH(a),g=hgd(a);b=new $APP.m(null,6,[$APP.vF,$APP.Xg($APP.n(g)?g:f,new $APP.O(null,1,5,$APP.Q,[$APP.By],null)),$APP.XC,e,$APP.UC,$APP.n(b)?b:"",$APP.RF,$APP.lr,$APP.eF,new $APP.m(null,1,[$APP.kr,$APP.jr.C?$APP.jr.C(a):$APP.jr.call(null,a)],null),$APP.uF,new $APP.m(null,1,[$APP.kr,a],null)],null);$APP.lF(new $APP.O(null,1,5,$APP.Q,[b],null));return d.call(c,e)},function(b,c){return $APP.SC($APP.RB(),
$APP.By.C($APP.qH(b)),$APP.yh.C(c))},function(b){var c=$APP.mw(b)?$APP.kr.C($APP.i_a($APP.RB(),$APP.Ci(b))):null;c=$APP.n(c)?c:b;var d=$APP.lH(c),e=$APP.OH(c);return $APP.n(d)?$APP.n(e)?$APP.JM(c,new $APP.m(null,1,[$APP.IM,b],null)):$APP.GM($APP.rH(b,!1)):null},function(b){return $APP.Ki($APP.CG($APP.Ci(b)))}])},Dgd=new $APP.N(null,"queryBlockByUUID","queryBlockByUUID",2091812895),Agd=new $APP.N(null,"addNewBlock","addNewBlock",1426762680),mgd=new $APP.N(null,"files?","files?",-1267491104),rgd=new $APP.N(null,
"getBlockPageName","getBlockPageName",-1656908032),Fgd=new $APP.N(null,"renderers","renderers",-1460292282),Ggd=new $APP.N(null,"model","model",331153215),sgd=new $APP.N(null,"getRedirectPageName","getRedirectPageName",-1858136925),ugd=new $APP.N(null,"isMobile","isMobile",-2043133877),Hgd=new $APP.N(null,"onMount","onMount",-876858467),vgd=new $APP.N(null,"insertFirstPageBlock","insertFirstPageBlock",-1676658548),ygd=new $APP.N(null,"makeAssetUrl","makeAssetUrl",217779988),Igd=new $APP.N(null,"onPersist",
"onPersist",-1848738852),Jgd=new $APP.N(null,"Breadcrumb","Breadcrumb",-1351298906),zgd=new $APP.N(null,"copyToClipboard","copyToClipboard",1092115063),Cgd=new $APP.N(null,"redirectToPage","redirectToPage",87147838),tgd=new $APP.N(null,"addNewWhiteboard","addNewWhiteboard",554297706),xgd=new $APP.N(null,"saveAsset","saveAsset",-668047853),Kgd=new $APP.N(null,"BacklinksCount","BacklinksCount",364670631),Lgd=new $APP.N(null,"Block","Block",-1959785792),Bgd=new $APP.N(null,"sidebarAddBlock","sidebarAddBlock",
-1204903203),Mgd=new $APP.N(null,"Page","Page",-1267059506),lgd=new $APP.N(null,"pages?","pages?",-2065014049),Ngd=new $APP.N(null,"PageName","PageName",-164991013),Ogd=new $APP.N(null,"Tweet","Tweet",-452258680),wgd=new $APP.N(null,"isWhiteboardPage","isWhiteboardPage",-134150579),Pgd=new $APP.N(null,"BlockReference","BlockReference",-120254741);$APP.$ca("tldraw");var Qgd=$APP.lm(591);var Rgd,Sgd;$APP.a8c={};Rgd=$APP.mT($APP.wa(Qgd,"App"));$APP.d8c=$APP.wa(Qgd,"generateJSXFromModel");
Sgd=new $APP.m(null,7,[Mgd,$APP.Kr($APP.Or,function(a){return(0,$APP.m7c)(new $APP.m(null,2,[$APP.mN,$APP.rH($APP.wa(a,"pageName"),!1),$APP.dDb,!0],null))},null,"frontend.extensions.tldraw/page-cp"),Lgd,$APP.Kr($APP.Or,function(a){a=$APP.ai($APP.wa(a,"blockId"));var b=$APP.NTa($APP.x5b);a=b.C?b.C(a):b.call(null,a);return $APP.xr(a)},null,"frontend.extensions.tldraw/block-cp"),Jgd,$APP.Kr($APP.Or,function(a){return $APP.xr($APP.wW(new $APP.m(null,1,[$APP.r_,!0],null),$APP.RB(),$APP.ai($APP.wa(a,"blockId")),
new $APP.m(null,2,[$APP.xWb,$APP.wa(a,"endSeparator"),$APP.yWb,$APP.wa(a,"levelLimit",3)],null)))},null,"frontend.extensions.tldraw/breadcrumb"),Ogd,$APP.Kr($APP.Or,function(a){return(0,$APP.xVb)($APP.wa(a,"tweetId"))},null,"frontend.extensions.tldraw/tweet"),Ngd,$APP.Kr($APP.Or,function(a){return(0,$APP.iW)(new $APP.m(null,1,[$APP.r_,!0],null),new $APP.m(null,1,[$APP.kr,$APP.wa(a,"pageName")],null))},null,"frontend.extensions.tldraw/page-name-link"),Kgd,function(a){return $APP.Af.j($APP.g8c,$APP.xh.j(function(b){return $APP.tq.G($APP.wa(a,
b),$APP.F([new $APP.m(null,1,[$APP.uq,!0],null)]))},new $APP.O(null,3,5,$APP.Q,["id","className","options"],null)))},Pgd,$APP.Kr($APP.Or,function(a){return(0,$APP.NUb)($APP.mf,$APP.wa(a,"blockId"),null)},null,"frontend.extensions.tldraw/block-reference")],null);
$APP.b8c=$APP.Kr($APP.Or,function(a,b){function c(l){if($APP.n(l)){l.appUndo=pgd;l.appRedo=qgd;var p=$APP.wa(l,"api");return $APP.n(p)?$APP.bm(d?kgd(p):null,function(){$APP.HUa(l,b);return h.C?h.C(l):h.call(null,l)}):null}return null}var d=jgd(a),e=$APP.HEb(a),f=$APP.Xr(null),g=$APP.C.F(f,0,null),h=$APP.C.F(f,1,null);$APP.Yr(function(){$APP.n($APP.n(g)?b:g)&&$APP.HUa(g,b);return function(){return $APP.Gc}},new $APP.O(null,2,5,$APP.Q,[b,g],null));return $APP.n(e)?$APP.X("div",{style:{overscrollBehavior:"none"},
onBlur:function(l){l=$APP.wa(l,"target").tagName;var p=new $APP.Yg(null,new $APP.m(null,2,["INPUT",null,"TEXTAREA",null],null),null);l=p.C?p.C(l):p.call(null,l);return $APP.n(l)?$APP.WC():null},onWheel:$APP.zw,className:"draw tldraw whiteboard relative w-full h-full"},[d&&$APP.Jb(g)?$APP.X("div",{style:{zIndex:200},className:"absolute inset-0 flex items-center justify-center"},[$APP.xr($APP.vT("Loading onboarding whiteboard ..."))]):null,$APP.xr(function(){var l=new $APP.m(null,5,[Fgd,Sgd,$APP.rB,
Egd(a),Hgd,c,Igd,function(p,q){$APP.UB(new $APP.O(null,2,5,$APP.Q,[$APP.JGc,$APP.RB()],null),$APP.Mw());return $APP.n(!1)?(console.time("tldraw persist"),p=fgd(a,p,q.replace),console.timeEnd("tldraw persist"),p):fgd(a,p,q.replace)},Ggd,e],null);return Rgd.C?Rgd.C(l):Rgd.call(null,l)}())]):null},null,"frontend.extensions.tldraw/tldraw-app");$APP.$a.Yi();
}).call(this);